{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/hexo-theme-yilia/source/main.234bc0.css","path":"main.234bc0.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/mobile.d238ee.js","path":"mobile.d238ee.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/slider.885efe.js","path":"slider.885efe.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/main.234bc0.js","path":"main.234bc0.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/fonts/iconfont.3a9902.eot","path":"fonts/iconfont.3a9902.eot","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/fonts/iconfont.6e162c.woff","path":"fonts/iconfont.6e162c.woff","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/fonts/iconfont.9abe9f.svg","path":"fonts/iconfont.9abe9f.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/fonts/iconfont.d0da7e.ttf","path":"fonts/iconfont.d0da7e.ttf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/img/apple-touch-icon.png","path":"img/apple-touch-icon.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/img/show.png","path":"img/show.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-yilia/source/img/logo.jpg","path":"img/logo.jpg","modified":0,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"43a3da06cd38ebf2423891854c3dedaff662ba8b","modified":1542876695711},{"_id":"themes/hexo-theme-yilia/.DS_Store","hash":"5262e5a62d359d9cf60e255e258bb79322e2c715","modified":1519215789693},{"_id":"themes/hexo-theme-yilia/.babelrc","hash":"b1b76475ac17dc9e2fa50af96c9e31eea2d0f2b4","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.eslintignore","hash":"df0a50b13cc00acb749226fee3cee6e0351fb1d9","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.editorconfig","hash":"da6d022b8f4d9c961e2f8f80677e92af8de0db4d","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.eslintrc.js","hash":"5696ae049de010ed3786768b0c359f14c05b5ec6","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.gitattributes","hash":"e0f24dceeb1e6878a1dd9b01a2b9df1bc037a867","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.gitignore","hash":"9c4b7d27a1e3e5efa0c8ed143a032a85d586b03b","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/README.md","hash":"8444a63c50d8a7e40bb3f1f10e549a60da94a21f","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/_config.yml","hash":"1f32a39412047dd572163089f6687c19cc49ab78","modified":1519216101000},{"_id":"themes/hexo-theme-yilia/package.json","hash":"946b26ae0dff42c590068f0a58ecd326ed059b68","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/webpack.config.js","hash":"c4dca5c60822c90359e48fad373be768ae9fb43d","modified":1491092347000},{"_id":"source/categories/index.md","hash":"8cdcbc26f07f436675a5a5eb3bc84a1a7bbd63e2","modified":1491115574000},{"_id":"source/_posts/.DS_Store","hash":"69e50cef4c5b9dcf42e19601cdacae8bda3c79da","modified":1542876697885},{"_id":"source/_posts/2017-04-10.md","hash":"2007b7532a86a9a051c140444b8c8d672c5fed10","modified":1503752313000},{"_id":"source/_posts/2017-04-11.md","hash":"b6540a66f0ae229bbf600f9933541ae7bbab51e7","modified":1503752313000},{"_id":"source/_posts/2017-04-04.md","hash":"7f3680ad803fa25bb7de5f4cec0d0256064c4ce5","modified":1504357277000},{"_id":"source/_posts/2017-05-02.md","hash":"c83e4e4c2f3930f367b6d90b90e796874f27c3c6","modified":1518253308000},{"_id":"source/_posts/2017-06-11.md","hash":"875f2d1de911070d9370b0ff9fd5c2581d5342ff","modified":1518253424000},{"_id":"source/_posts/2017-05-07.md","hash":"988b69fbd4c55c356d1d2eae96c1c9aa92ae7dd4","modified":1518253369000},{"_id":"source/_posts/2017-06-10.md","hash":"603439082fc8f777b1a460310b135a4e5767b209","modified":1518253391000},{"_id":"source/_posts/2018-06-30-vue.md","hash":"64a952fbca8fa0ca5c9ccbed162b6f587c67d071","modified":1531832481935},{"_id":"source/_posts/2018-09-22-canvasAPI.md","hash":"c72d3ac45967944979120e23d1b98cfc38b09dd7","modified":1537779579411},{"_id":"source/_posts/2018-07-14-wpk.md","hash":"81a5bb6169c4292de9a96f537a0bd57fbdceb529","modified":1532153724341},{"_id":"source/_posts/2017-06-12.md","hash":"5b3f6b57966266ed855190cfdaadcbdc36a993e0","modified":1518253479000},{"_id":"source/_posts/2018-09-23-HTTP.md","hash":"c8f18ccaa146f692d9692ecc39093dd1c30d0050","modified":1538623109442},{"_id":"source/_posts/2018-11-20-EventLoop.md","hash":"13e204527bc0239ec18246a650e23181de759453","modified":1542895208200},{"_id":"source/_posts/2018-3-11-BST.md","hash":"970876abe91698e94f4209c5353b183f15b72833","modified":1520770604826},{"_id":"source/_posts/2018-3-18-Graph.md","hash":"83e425a89a207ede154985fc9429727d9aaf4b90","modified":1521382735000},{"_id":"source/_posts/2018-4-8-CArray.md","hash":"c1423e8054b1de77e97c80bc2fbde39f92c17e93","modified":1523687313000},{"_id":"source/_posts/HashTable-2018-2-25.md","hash":"18423d5ccd65b1c70266e3cdc4f111de9ce1615b","modified":1519952363000},{"_id":"source/_posts/LList-2018-2-24.md","hash":"dbb573a12348975b96f6e60d4dd1e474c8cb0c64","modified":1520757872000},{"_id":"source/_posts/ajax.md","hash":"64e183b97cca8a579321426cf5bfe557e31137cf","modified":1503752313000},{"_id":"source/_posts/babelrc-2017-12-23.md","hash":"7f245d0ebf38ff6e5c38923cd8528dfe10716b73","modified":1542552719543},{"_id":"source/_posts/list-2018-2-21.md","hash":"2e6f4dac75015072379f68fde1882f6d1826d0b7","modified":1519270217000},{"_id":"source/_posts/queue-2018-2-23.md","hash":"1ef52abc6b80b1da44f83d87001b9311dda4fa63","modified":1520351143000},{"_id":"source/_posts/stack-2018-2-22.md","hash":"5794d57a20374227d44ab8a21a9174d232678210","modified":1519285158000},{"_id":"source/_posts/vue-ssr.md","hash":"b4ce0eb820510a2088ec44d3994ccf7c125ed725","modified":1518253561000},{"_id":"source/_posts/vue-ssr2.md","hash":"850672b70e003c0a7873b6798242ff3a7fa032df","modified":1518253583000},{"_id":"source/_posts/vue-ssr3.md","hash":"13f10a3a5e92142e253a7245f917ef71d2e42d41","modified":1518253680902},{"_id":"source/_posts/webgl-2017-07-01.md","hash":"beeb02e946e833f5b4c59cd8dc04fc0f7b2f07eb","modified":1518253680902},{"_id":"source/_posts/webgl-2017-07-02.md","hash":"905a4d557cef2068bf60fc6bcac629ecfeec8475","modified":1518253680904},{"_id":"source/_posts/webgl-2017-07-03.md","hash":"325a56988b02d859dad2d624526a19ebe1418fa3","modified":1518253680904},{"_id":"source/_posts/webgl-2017-07-04.md","hash":"22a1bfe153381fdcd5b87f95c9102a8eb0973b8a","modified":1518253680902},{"_id":"source/_posts/webgl-2017-07-06.md","hash":"0fb4a59ee2bafc782ead018561be7dcb53bad687","modified":1518253680917},{"_id":"source/_posts/webgl-2017-07-08.md","hash":"5d9d813183278b1d10ead1547c6f5e53503fb415","modified":1518253680904},{"_id":"source/_posts/webgl-2017-07-09.md","hash":"2b37a5a7dc4db4c63148e68d32d6a0177f1a2055","modified":1518253680904},{"_id":"source/_posts/webgl-2017-07-10.md","hash":"7518da39667efe6a8e370f57fddcfd910ce0201f","modified":1518253680902},{"_id":"source/_posts/webgl-2017-07-12.md","hash":"023dc153660f45ef3328ffe83899c41e270f5586","modified":1518253680902},{"_id":"source/_posts/webgl-2017-07-11.md","hash":"e37def25467f8a037d0ff2c48d7a6fe4d21528dd","modified":1518253680902},{"_id":"source/_posts/webgl-2017-07-13.md","hash":"d2419ebd60600c0749a8aa258061a866c7507b21","modified":1518253680936},{"_id":"source/_posts/webgl-2017-07-14.md","hash":"55b373483bbe5ece7d255e0903c1c2d9bfa940e3","modified":1518253680902},{"_id":"source/_posts/webgl-2017-07-15.md","hash":"8397c321178ff551b06d2ad5dca1e0389fd0c4a0","modified":1518253680902},{"_id":"source/_posts/webgl-2017-07-16.md","hash":"d20b5894f58c5c0474673edeaca6c028dbef5f6e","modified":1518253680902},{"_id":"source/_posts/webgl-2017-07-17.md","hash":"24242b4bd227457626c0cc45183e43122a59a7d1","modified":1518253680904},{"_id":"source/_posts/webgl-2017-07-18.md","hash":"5c179780893923231b3c105916614db20bb94100","modified":1518253680902},{"_id":"source/_posts/webgl-2017-07-19.md","hash":"0ea900451dc8dab5616915bd6e1e1e5ff9ea1905","modified":1518253184000},{"_id":"source/_posts/webpack-2017-12-30.md","hash":"a01c615e7d9c14f32ca09b0ea97f69fc90307559","modified":1518252971000},{"_id":"themes/hexo-theme-yilia/.git/FETCH_HEAD","hash":"5885194d6adf0f9790b410a42f0f9642e9f2a770","modified":1491092391000},{"_id":"themes/hexo-theme-yilia/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.git/ORIG_HEAD","hash":"ec274ad8176ea701ec280f2352a47451b498c39a","modified":1491092391000},{"_id":"themes/hexo-theme-yilia/.git/config","hash":"256e47c5a4386e6881318e44d2a716fdc3197863","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/index","hash":"669a945a3c4a214021eeca66dc201cb8247d42d4","modified":1515248432196},{"_id":"themes/hexo-theme-yilia/.git/packed-refs","hash":"144a02fde3eaced071755091d413698cb7e8382d","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/index.ejs","hash":"a35dc900203f9d8dd863ea4c1722198d6d457ec8","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/layout.ejs","hash":"0a332bdbd3b86c231d690614687f5b97186b85d5","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1515248431000},{"_id":"themes/hexo-theme-yilia/languages/fr.yml","hash":"84ab164b37c6abf625473e9a0c18f6f815dd5fd9","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/languages/zh-tw.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/.DS_Store","hash":"6bd59b6930c3f152d22826a8daeea4fd54fe7cc1","modified":1491543561000},{"_id":"themes/hexo-theme-yilia/source-src/script.ejs","hash":"c21381e1317db7bb157f1d182b8c088cb7cba411","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css.ejs","hash":"94dbdb02ca11849e415d54fb28546a598f2cffb1","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/.DS_Store","hash":"a1ae77e6dc7d6c4839e1afd2cc8fbf4dac7e89d1","modified":1519215800634},{"_id":"themes/hexo-theme-yilia/source/main.234bc0.css","hash":"ed135954bcc5c6fee05095e8096fe01185dbddd9","modified":1519216063000},{"_id":"themes/hexo-theme-yilia/source/mobile.d238ee.js","hash":"a054884092af1cc5c2c14e5e11a4dac6d9254481","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/slider.885efe.js","hash":"1f1a6548c6016cc132bf65a1701cc8421a1f8414","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/main.234bc0.js","hash":"988c141a741441812bcf4c408ef530d7a01522f3","modified":1491092347000},{"_id":"source/_posts/2017-05-07/1.png","hash":"b3afc9f9b15595ca71cb9f7a3f9a150009c41f4e","modified":1494162933000},{"_id":"source/_posts/2017-05-07/3.png","hash":"f35883f1d4a930a5ed9090f32c58fe6f4ec21841","modified":1494163229000},{"_id":"source/_posts/2017-05-07/2.png","hash":"63dc5115954f65778dac9be5b64da7a66d28b997","modified":1494162948000},{"_id":"source/_posts/2017-06-12/01.jpeg","hash":"edbd185f826339e53b0e5589a061ed551f815a9e","modified":1504357891000},{"_id":"source/_posts/2017-06-11/01.jpeg","hash":"a082a77ecb145c4bf5ac40420eb9dd79aa45cdb3","modified":1503820393000},{"_id":"source/_posts/2017-06-11/02.jpeg","hash":"4bfb34072f539b8367d62220d63ff09f64f8263e","modified":1503820436000},{"_id":"source/_posts/2017-06-12/03.jpeg","hash":"0b012a70995089687e185731d39284dae19724f2","modified":1504362730000},{"_id":"source/_posts/2017-06-12/02.jpeg","hash":"9fd24d8ad11fec889adbad561319e7c39bbb3cdd","modified":1504362705000},{"_id":"source/_posts/2017-06-12/05.jpeg","hash":"f4832a8ff5b1b440b48d40754a29c77164512da9","modified":1504409726000},{"_id":"source/_posts/2017-06-12/06.jpeg","hash":"7632d800121462464cd159837319398b8af9925d","modified":1504410596000},{"_id":"source/_posts/2018-06-30-vue/2.jpg","hash":"dd07a6b623991025e35d6061454c0b29baba5dc8","modified":1530454547864},{"_id":"source/_posts/2018-06-30-vue/.DS_Store","hash":"a514b8921563cb9b34eb62e36ca590ae4820e9b3","modified":1531126802815},{"_id":"source/_posts/2018-06-30-vue/3.png","hash":"fd2b78f81df1a79977c0254547845794cc4106c1","modified":1531126597792},{"_id":"source/_posts/2018-06-30-vue/timing-overview.png","hash":"f843500aac6a5056fe7a66aee3e7242be3a8a664","modified":1531207732644},{"_id":"source/_posts/2018-07-14-wpk/.DS_Store","hash":"d27e305bbbf4321fac483e5379540f7a61acbb5d","modified":1531630153786},{"_id":"source/_posts/2018-07-14-wpk/5.jpeg","hash":"ad17b0c662b5984743009266e4f34f413437531a","modified":1532152425289},{"_id":"source/_posts/2018-09-22-canvasAPI/.DS_Store","hash":"c7037211bc9c518e211ced8617b1ebe0ef53647f","modified":1537605504869},{"_id":"source/_posts/2018-07-14-wpk/7.jpeg","hash":"17ab836156ddb5576cf874c83b11431bf7d875f2","modified":1532153270464},{"_id":"source/_posts/2018-07-14-wpk/6.jpeg","hash":"843fe064b7841e9a40a1f0cdd2249f867789f29e","modified":1532152686703},{"_id":"source/_posts/2018-09-23-HTTP/.DS_Store","hash":"2ca1a43836c9890fbc7cc9f07ef16f85a395eefb","modified":1538476203852},{"_id":"source/_posts/2018-09-23-HTTP/ky.png","hash":"ef7833c76b8d43b9456adcffdc42700875024d72","modified":1537784302433},{"_id":"source/_posts/2018-09-23-HTTP/page_4.png","hash":"c3bd39c9eb88a4a77dc69e75d5b9600409a1cd7a","modified":1538481735838},{"_id":"source/_posts/2018-11-20-EventLoop/1.png","hash":"4b5cffb5dd5ed22f065061c047aab24a6693c3ad","modified":1542694055277},{"_id":"source/_posts/2018-11-20-EventLoop/2.png","hash":"fbc228a457accd568d1f1ef687b43c808f419f4d","modified":1542694082114},{"_id":"source/_posts/2018-11-20-EventLoop/11.png","hash":"991109df2ef5ae00d95568a69200baa1775ed399","modified":1542868144053},{"_id":"source/_posts/2018-11-20-EventLoop/22.jpg","hash":"39614f6bdc1abf14fc2922a0e6881049c0710df8","modified":1542870374526},{"_id":"source/_posts/2018-11-20-EventLoop/huohu.jpg","hash":"48378ee892f447af1568350997b337aae4d52f3e","modified":1542876614770},{"_id":"source/_posts/2018-09-23-HTTP/page_5.png","hash":"77e74d0c6126042823400efa441073125091239a","modified":1538620262910},{"_id":"source/_posts/2018-3-11-BST/bst3.jpeg","hash":"7e2f38c8f10e6c4c8820144468713e1fcee37b86","modified":1520757728173},{"_id":"source/_posts/2018-3-11-BST/bst4.jpeg","hash":"6f9175fe951a14d1926a0558d90e5f7125236790","modified":1520757775765},{"_id":"source/_posts/2018-3-11-BST/bst1.jpeg","hash":"a0f198a2b2a71bda66125915d006cfe2edfc9b9a","modified":1520757324314},{"_id":"source/_posts/2018-3-11-BST/bst2.jpeg","hash":"33d58917bdd2360d163481353c5665beb7b1e1b2","modified":1520757506362},{"_id":"source/_posts/2018-3-11-BST/bst5.jpeg","hash":"2b74fa97d242f7d050f5790b62529749ff445852","modified":1520763939323},{"_id":"source/_posts/2018-3-18-Graph/graph1.jpeg","hash":"939d6d2d3932affa6721b8dc9cac75804a9cdf06","modified":1521378641879},{"_id":"source/_posts/2018-3-18-Graph/graph2.jpeg","hash":"567f96bd6a1ee17478ec9aff8d5d3b6e87f9d11d","modified":1521378682044},{"_id":"source/_posts/2018-3-18-Graph/graph3.jpeg","hash":"b993097d6cb07674c3aa3f1701ad5e904eb4cf7c","modified":1521379734024},{"_id":"source/_posts/2018-3-18-Graph/graph4.jpeg","hash":"5e5b15292a68c15fc504c174cf30b163e8a08b96","modified":1521379930384},{"_id":"source/_posts/2018-3-18-Graph/graph6.jpeg","hash":"9d7eca6b7a1c01989b7531841ca72e34c4199a16","modified":1521380475948},{"_id":"source/_posts/2018-3-18-Graph/graph5.jpeg","hash":"f8e4e18c0a0759dfa9403101340c2d74f0c4908c","modified":1521380308873},{"_id":"source/_posts/ajax/111.png","hash":"2055c99c7528d767b60e30d092f940bdeae34507","modified":1491095615000},{"_id":"source/_posts/LList-2018-2-24/llist3.jpeg","hash":"616dfbc60b8318ec650e9ef3e464b67132324841","modified":1519520664218},{"_id":"source/_posts/stack-2018-2-22/.DS_Store","hash":"ef94c5bb3b1fccb502a5a310350c3619525b34a1","modified":1519284601917},{"_id":"source/_posts/vue-ssr2/2.jpeg","hash":"2dcb76db17520c9302d7c86b3fa7618b7bd2ce3b","modified":1503752313000},{"_id":"source/_posts/vue-ssr2/3.jpeg","hash":"5b8c1a59b6bb1e55b0beb27b47852718981782f2","modified":1503752313000},{"_id":"source/_posts/webgl-2017-07-01/.DS_Store","hash":"6a611939b3f11e4ab9cb79fa282767cb708c7f53","modified":1503755974000},{"_id":"source/_posts/webgl-2017-07-01/03.jpeg","hash":"bc6b53c34104f47984e0ca30200ab9e5ed8ff8e5","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-01/04.jpeg","hash":"b12449f26e6e1f57ee795b3dd2ab40b69d7e6ea7","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-01/10.jpeg","hash":"07d2cf14b7a4bb486e2c44d89c08d9873093df32","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-01/07.jpeg","hash":"5859052106fca9a386b97116c72f3815ebd407bd","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-01/11.jpeg","hash":"6460798902cac012f6cecb3216c51a4dd14a46fc","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-01/13.jpeg","hash":"02d7caa28587d7198402cfb9500db3ab85fb6eae","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-01/09.jpeg","hash":"ac7dd15c2dd685fe54f04cb2279739f6e913cd77","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-01/12.jpeg","hash":"d792adaf7049bab3a419fc176d4d62afb0299514","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-01/14.jpeg","hash":"2ad46d294f5286bd1f665513a77059dc9490c84b","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-03/02.jpeg","hash":"e623a9a82048e7e534d8ce0596963f8f74481acf","modified":1504433289000},{"_id":"source/_posts/webgl-2017-07-03/01.jpeg","hash":"22bdda31eb9bac80277080fd2424f677b15d0171","modified":1504422835000},{"_id":"source/_posts/webgl-2017-07-03/05.jpeg","hash":"f15a6bc585bbf21f72d2faa63d26f74e4860a108","modified":1504444618000},{"_id":"source/_posts/webgl-2017-07-04/02.jpeg","hash":"710b23c1dc6623db1343c19a419c439c824ffa93","modified":1504618531000},{"_id":"source/_posts/webgl-2017-07-04/04.jpeg","hash":"f0bec32549570dea08ec88dee6bc868437d1ff89","modified":1504619037000},{"_id":"source/_posts/webgl-2017-07-04/01.jpeg","hash":"d77e822505fe4adfb187fc6cc69e354e021b6541","modified":1504532729000},{"_id":"source/_posts/webgl-2017-07-06/1.jpeg","hash":"5aa58e09552aedf5cebc18ddbc11e056d3fd1da1","modified":1506244164000},{"_id":"source/_posts/webgl-2017-07-06/2.jpeg","hash":"aca0c62ee7ce7b649a31238ebe7eb7b8cf4e8df0","modified":1506244876000},{"_id":"source/_posts/webgl-2017-07-06/4.jpeg","hash":"a6de64667296657f43373603ff515506a0e52de1","modified":1506245670000},{"_id":"source/_posts/webgl-2017-07-08/.DS_Store","hash":"89cd76026009acbf3c46fab308de948407309ab7","modified":1506261127000},{"_id":"source/_posts/webgl-2017-07-06/3.jpeg","hash":"2b1e062d7124cffe0e381bd5abffcc28b3909590","modified":1506245139000},{"_id":"source/_posts/webgl-2017-07-04/03.jpeg","hash":"a6249aeadec43f859853462815b2e98de144d414","modified":1504618800000},{"_id":"source/_posts/webgl-2017-07-08/3.jpeg","hash":"7b802131222c42748ab93d43a8d4f1a6b61185e0","modified":1507289059000},{"_id":"source/_posts/webgl-2017-07-08/2.jpeg","hash":"7419ba73e6f8c5bc2dfcb710daf25c95a55ae2bd","modified":1507196719000},{"_id":"source/_posts/webgl-2017-07-08/6.jpeg","hash":"9058c301b9f79d31954c74812db9da8c8c98f751","modified":1507290227000},{"_id":"source/_posts/webgl-2017-07-08/7.jpeg","hash":"fda2210e8c0ae280ed63b18e316eb51c1ba5215a","modified":1507290411000},{"_id":"source/_posts/webgl-2017-07-09/1.jpeg","hash":"65f82116bc3403c6751d71940c9a4e287fca844f","modified":1508033616000},{"_id":"source/_posts/webgl-2017-07-10/2.jpeg","hash":"c7b2839321301ed0ed01227bf1d3a9a01b4a0b96","modified":1508040568000},{"_id":"source/_posts/webgl-2017-07-10/1.jpeg","hash":"6488f62098428ca180b53f7a3d7399a6ea4d9b68","modified":1508036245000},{"_id":"source/_posts/webgl-2017-07-11/01.jpeg","hash":"c8dff683ee454fbd46a3d11806fad3d71c16c0ac","modified":1509262476000},{"_id":"source/_posts/webgl-2017-07-11/4.jpeg","hash":"7ee581b83f58f086b902520d7ad8a578b5935023","modified":1509266622000},{"_id":"source/_posts/webgl-2017-07-11/9.jpeg","hash":"62b6fe08a3235f28db6b514f6ade9099ef888094","modified":1509874797000},{"_id":"source/_posts/webgl-2017-07-13/1.jpeg","hash":"5f887cdad535ebe1608b63e2497fab3658a23fe1","modified":1510151366000},{"_id":"source/_posts/webgl-2017-07-13/3.jpeg","hash":"f9e16005257770bc7914df1baf81008eb0b274dd","modified":1510222695000},{"_id":"source/_posts/webgl-2017-07-13/4.jpeg","hash":"1d5dd114f524a89725764c6345048c8d2e6c4f03","modified":1510222725000},{"_id":"source/_posts/webgl-2017-07-14/2.jpeg","hash":"8459e1a6654831da901b5a1a7adebb67f790b662","modified":1510484449000},{"_id":"source/_posts/webgl-2017-07-15/2.jpeg","hash":"e8b9c3af85ece3be9c8788fd9e1aec9b8743912c","modified":1510493484000},{"_id":"source/_posts/webgl-2017-07-15/1.jpeg","hash":"05981ddef46b2868e4e7364112ae1e4d3f7a3101","modified":1510492784000},{"_id":"source/_posts/webgl-2017-07-15/3.jpeg","hash":"2f2ceaf0621ef84cca7a2d7fd613a2a9df3f45e1","modified":1510494579000},{"_id":"source/_posts/webgl-2017-07-15/4.jpeg","hash":"7d2b14e22e98fa80c292d9f5121c74f8e6cc5728","modified":1510494967000},{"_id":"source/_posts/webgl-2017-07-16/4.jpeg","hash":"13da2848dc7f13e6767cfbd17a07dd446c198e0e","modified":1510563136000},{"_id":"source/_posts/webgl-2017-07-16/3.jpeg","hash":"afbb6bc72ee72eeb6294816fa69d2846b2b5e86c","modified":1510560753000},{"_id":"source/_posts/webgl-2017-07-17/2.jpeg","hash":"f61de43a72968807e62a7373dcb2b0af864bb59b","modified":1510564463000},{"_id":"source/_posts/webgl-2017-07-17/1.jpeg","hash":"2586ab3dd40743a9a9a3c4f66d1d6e4eeec7827f","modified":1510564261000},{"_id":"source/_posts/webgl-2017-07-17/3.jpeg","hash":"af2555454995db1457aa717b075080ef899674d3","modified":1510664163000},{"_id":"source/_posts/webgl-2017-07-17/5.jpeg","hash":"c82b05bb68d95423c9c89fa88844065856ead7c0","modified":1510666182000},{"_id":"source/_posts/webgl-2017-07-17/4.jpeg","hash":"88a373bc29d456d484430dc2a50d74e1e4eb4a64","modified":1510665383000},{"_id":"source/_posts/webgl-2017-07-17/6.jpeg","hash":"bb3b954151d61c157911fdb0da0d70e37f169fb4","modified":1510666764000},{"_id":"source/_posts/webgl-2017-07-18/2.jpeg","hash":"23b78084c4b88de59bfd40209bfbf56ce5be89bd","modified":1510822192000},{"_id":"source/_posts/webgl-2017-07-18/3.jpeg","hash":"1c86af9d1dababab0c180c783079dea51dd13f6f","modified":1510823955000},{"_id":"source/_posts/webgl-2017-07-18/4.jpeg","hash":"ef3ad7857f4cef0aa2447b0c178155f888d5b4f2","modified":1510825972000},{"_id":"source/_posts/webgl-2017-07-19/1.jpeg","hash":"6804de69db68bf81634fb9fe480d6c6445f5b27b","modified":1511007253000},{"_id":"source/_posts/webgl-2017-07-19/2.jpeg","hash":"b4b08f63d12ad033d825c63381e39ce229c85f11","modified":1511008842000},{"_id":"source/_posts/webgl-2017-07-19/5.jpeg","hash":"486462b5b16977e2be51f10852c0ee86cbfffa02","modified":1511013078000},{"_id":"source/_posts/webgl-2017-07-19/4.jpeg","hash":"1fecc6392e46cd28b5d43043c111c6695018ca57","modified":1511012468000},{"_id":"source/_posts/webpack-2017-12-30/5.jpeg","hash":"c5d9050a611730c74a9e9b918cc5f216b97bca26","modified":1514792260886},{"_id":"themes/hexo-theme-yilia/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/logs/HEAD","hash":"a809e105d052f880c1d2aa45840dff50e85330e7","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/.git/info/exclude","hash":"bb5a85730dcf100facee799c05cc4f6affec0745","modified":1491092317000},{"_id":"themes/hexo-theme-yilia/layout/_partial/after-footer.ejs","hash":"143710485f734c5a997e0b1c26192bbba2982bcc","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/archive-post.ejs","hash":"1f7d4819b7f67602c4a1b99871808d2160b60978","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/archive.ejs","hash":"a6e94061ac55b9eb55275f87b608d62f6ea35659","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/article.ejs","hash":"2caf8cc76d0a814680a11b6e8c3765032b54138f","modified":1504356977000},{"_id":"themes/hexo-theme-yilia/layout/_partial/baidu-analytics.ejs","hash":"f0e6e88f9f7eb08b8fe51449a8a3016273507924","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/css.ejs","hash":"1b91850e8708ce4c83e3cc3f474921182d792308","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/footer.ejs","hash":"1d1ba016fc3999e43d5a3af7908cd4fb4113cfab","modified":1491114892000},{"_id":"themes/hexo-theme-yilia/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/head.ejs","hash":"64f092186b5a744aa1603ce22bb1d44a34446add","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/header.ejs","hash":"6387a93dad7c3d778eb91e3821852fbf6813880c","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/left-col.ejs","hash":"2387d91cf94b0b36e8a36841992a5fce63ebd069","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/mathjax.ejs","hash":"151a1ef2173ba7b6789d349f0f8da89616cc1394","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/mobile-nav.ejs","hash":"7fbbfabf5e29525b24ada14613c21a26789132b4","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/tools.ejs","hash":"f5e98b6013c968afb867626ed6617cd1cedc3d3a","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/viewer.ejs","hash":"e495790b2abe2290875817e42bd505bc611d3e26","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/script.ejs","hash":"c4a0f16d554e7e7007856d45b78443d7bf0b40b7","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/_core.scss","hash":"24f347a2412abbf58318369152504da9538f8d3b","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/archive.scss","hash":"b750499d5120f963b683d0c96ac3f345c714e448","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/_function.scss","hash":"93a50dd19a93485712da1f8d0a1672482dd1eabc","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/article-inner.scss","hash":"ce24ab7049be634c17a163e2db39f1f0b1f7c119","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/article-main.scss","hash":"3fad68bd74260326f83090b0974dd80707e7bac7","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/article.scss","hash":"0f6d61af99ed4db87f8589db1feaea7747b55963","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/article-nav.scss","hash":"b68772aa2b47d0ed89ce95d4e9d3d27931fe885c","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/duoshuo.scss","hash":"5e3feefbbba70d8da0ec2c75db41762dd4762a81","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/fonts.scss","hash":"3f5808a49a7365e3f813f78ba96b692f7ca27886","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/footer.scss","hash":"7c995410b25baaf61dfc5e148e22ca60330abcd3","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/grid.scss","hash":"849a29fcd7150214fcf7b9715fa5dc71d1f9b896","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/highlight.scss","hash":"3719994c2c9393813cc1d42b657205c368a329cb","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/left.scss","hash":"0ce6345a86c44e3fea5a4aa439614541112538f3","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/main.scss","hash":"40c055e8360973a75db7c13f3280a4f465f9e5e3","modified":1503194536000},{"_id":"themes/hexo-theme-yilia/source-src/css/mobile-slider.scss","hash":"f053c609d84df0dd9eee1d11ddf0c19163a456be","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/mobile.scss","hash":"12abb65289eed5391d657b963a20f96a473b1cbd","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/page.scss","hash":"bf206bb7f7d0967bc8b7fdf01b7ffc99aff9ba88","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/reward.scss","hash":"80a4fcf9171d4a33235da96ac8a2b7dcabc45dfb","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/scroll.scss","hash":"9c8dfd1c76854ef063494ca76fac6360b391ed6d","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/social.scss","hash":"b5324302815491d0a5e63142f1ead2048ad3f72f","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/share.scss","hash":"150c6425f6582e7ec78a873256ce49c9930e8805","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/tags-cloud.scss","hash":"c8aa84fca93862d3caae77c552873b8610f33327","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/tags.scss","hash":"ac67a3c7097849206244db9b0ba91daaba017ef5","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/tooltip.scss","hash":"53d5a554bc2f38e9bb3d26400a47767013c05216","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/tools.scss","hash":"61917c928d09783a3bc8a91503a59ab3a8696e90","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/Q.js","hash":"d011af172064b6c6e0c7051d8f9879373ddac113","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/anm.js","hash":"4a4c5d82b09a3063f91a434388e6aa064fd7fd98","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/fix.js","hash":"17be4f27eb8951835c29dafd0f6ba1b18e47cc6b","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/browser.js","hash":"04095b38cfd4316a23f8eb14b1ffaf95f78a4260","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/report.js","hash":"4f1d9a18a936ce40b037f636a39127dd19175b6e","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/main.js","hash":"d665f4cf30450984591bc8ad2348a1baf720d04b","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/mobile.js","hash":"4d823b039fd296d24a454eae5a798b93c44560cb","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/share.js","hash":"b090f82cf80cba7da764753906d9e2cc2acdf30d","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/util.js","hash":"8456e9d6b19532742582c99b2fb9d09e146e1c58","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/viewer.js","hash":"808a2e1ed407984cfdc929b827d3638f70ec9a2a","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/js/slider.js","hash":"3bf0d70ae171404a0dc73c33ec48927fc2521a54","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/fonts/iconfont.3a9902.eot","hash":"51d4e8d333ae7867915037983ea5d4b2ad971930","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/fonts/iconfont.6e162c.woff","hash":"709373d566526ad4bdb330757a3915e3c5e37b66","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/fonts/iconfont.9abe9f.svg","hash":"772383b62548e2a4fa560d589e05929b9f6f7f7b","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/img/.DS_Store","hash":"5abb8453dc15577d5fa0fa02c41ebb7159cffc04","modified":1504356218000},{"_id":"themes/hexo-theme-yilia/source/fonts/iconfont.d0da7e.ttf","hash":"53ea5a5027a2fab93bcdad18cad6dc5f1b728726","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/img/apple-touch-icon.png","hash":"514515cb1c0f8f3c083951bdec3bff95428e6c86","modified":1519215751229},{"_id":"themes/hexo-theme-yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source/img/show.png","hash":"bfe9486ee51f9037434279cf2b0ff5ddc84d886f","modified":1504356206000},{"_id":"source/_posts/2017-06-12/04.jpeg","hash":"2f8a989fe72d65e2866bccd1b6b3b46f013695a8","modified":1504408948000},{"_id":"source/_posts/2018-06-30-vue/5.jpeg","hash":"dcfd795dd4a6f31461e594ecdae2bb1f65995342","modified":1531310934747},{"_id":"source/_posts/2018-06-30-vue/6.jpeg","hash":"a609173425ed32e950af54df89047da687dfb373","modified":1531311499907},{"_id":"source/_posts/2018-06-30-vue/obj.jpeg","hash":"0d2d27c668fce442b8a35fe53bbdb9be7593295b","modified":1530440015415},{"_id":"source/_posts/2018-07-14-wpk/1.jpg","hash":"570e759a56d02b3da89a535be352ef22c3324fc0","modified":1531629362458},{"_id":"source/_posts/2018-07-14-wpk/12.jpeg","hash":"78292ed9a5f961ceefa429b412172be669947aa8","modified":1531734728726},{"_id":"source/_posts/2018-09-23-HTTP/http.png","hash":"3ebf6bbe72c184e425f5ac52771ebf49ddb251f1","modified":1537697521655},{"_id":"source/_posts/2018-09-23-HTTP/ky2.png","hash":"20b46ccb18ad8aa98167581815423d755b8c8a7d","modified":1537796348561},{"_id":"source/_posts/2018-11-20-EventLoop/guge.jpg","hash":"3d0fae343c18008630292a5d5f47658477d73741","modified":1542876653820},{"_id":"source/_posts/2018-3-18-Graph/graph10.jpeg","hash":"e784d5ca6c6003546488c9435a0bef394e427402","modified":1521382249665},{"_id":"source/_posts/2018-3-11-BST/bst6.jpeg","hash":"97af395576a203c61e58587f6d00ace024329e74","modified":1520769289351},{"_id":"source/_posts/2018-3-18-Graph/graph8.jpeg","hash":"ba955809013cd8149b2ce5d9393385dfe70802f8","modified":1521381455977},{"_id":"source/_posts/LList-2018-2-24/llist1.jpeg","hash":"315138cc554f712363191925cc0480862b06afd2","modified":1519397906452},{"_id":"source/_posts/LList-2018-2-24/llist2.jpeg","hash":"8b7e6e67e29eb698f04f9eafecb8e7e0bd441f9e","modified":1519397929804},{"_id":"source/_posts/babelrc-2017-12-23/2.jpeg","hash":"2e6b535411ce9110eb5435864b1bb816261c64a4","modified":1514692304204},{"_id":"source/_posts/babelrc-2017-12-23/1.jpeg","hash":"975be613bb3ea4bdd6db53bac828502595067f7d","modified":1514692045065},{"_id":"source/_posts/queue-2018-2-23/queue.jpeg","hash":"12936289e1512110491997f195a4898e74381fb4","modified":1519300391033},{"_id":"source/_posts/vue-ssr/11.png","hash":"ab5ed2f6789ff7bb6ff7132e8e3df5f01faf69e5","modified":1503143598000},{"_id":"source/_posts/stack-2018-2-22/stack.jpeg","hash":"3d268cb0b9e1fffaec0bb3a4e537910c75d9b9bb","modified":1519271432481},{"_id":"source/_posts/vue-ssr/22.jpeg","hash":"85b1ea4114f8700acb8733a0055ff086f19c11fe","modified":1503144085000},{"_id":"source/_posts/webgl-2017-07-01/01.jpeg","hash":"42447f5818e428c21ed64984747a0195863f11b2","modified":1503805985000},{"_id":"source/_posts/vue-ssr2/4.jpeg","hash":"d9606b4f28bb9ff05536d71e8a0795969e5eb6db","modified":1515249394133},{"_id":"source/_posts/webgl-2017-07-01/05.jpeg","hash":"c566f55816e17e0090bf5828253d6110db733764","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-01/06.jpeg","hash":"51cee3ed4d1b432fa6a57058e4f520108e5eefbd","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-01/08.jpeg","hash":"c465bcedddb5afeece69b4e9e19f31da04156735","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-02/02.jpeg","hash":"6b414b4841c552f3b2b6f4ef4acabf876b686bd6","modified":1504413871000},{"_id":"source/_posts/webgl-2017-07-02/01.jpeg","hash":"11889ad055dd286dc343fa9298822a0cd53cde8a","modified":1504413597000},{"_id":"source/_posts/webgl-2017-07-03/03.jpeg","hash":"6e7796a03b6b3696c84583d90dd511e824319ae2","modified":1504433792000},{"_id":"source/_posts/webgl-2017-07-03/04.jpeg","hash":"d763e811ab78817019418ff895e5228068980f61","modified":1504443719000},{"_id":"source/_posts/webgl-2017-07-06/5.jpeg","hash":"f2244b58aa5d5a3bece6a6e72ea4231490644fe4","modified":1506260305000},{"_id":"source/_posts/webgl-2017-07-08/5.jpeg","hash":"f2244b58aa5d5a3bece6a6e72ea4231490644fe4","modified":1506260305000},{"_id":"source/_posts/webgl-2017-07-11/2.jpeg","hash":"bad0cc3d5f473a2999e36987dc01f3e281eeb248","modified":1509263605000},{"_id":"source/_posts/webgl-2017-07-11/3.jpeg","hash":"b4f0f4f2f7ae48a7f1c92fd450580df0953a1784","modified":1509264388000},{"_id":"source/_posts/webgl-2017-07-11/6.jpeg","hash":"c87b67ab322e61fcd7e67234b8739b196f0feddc","modified":1509871103000},{"_id":"source/_posts/webgl-2017-07-11/8.jpeg","hash":"63af8df9399d14bd90e796bb7910d7cc647702d8","modified":1509873203000},{"_id":"source/_posts/webgl-2017-07-11/7.jpeg","hash":"d9b3de79ab6f3c0343b897e062a3f8c919b96a67","modified":1509872699000},{"_id":"source/_posts/webgl-2017-07-12/1.jpeg","hash":"33e5989b7e3033971fdf1748e919e7678e6f43c5","modified":1509271910000},{"_id":"source/_posts/webgl-2017-07-13/2.jpeg","hash":"491c232c14624ad4ffb17574a153ce5c6f4239d0","modified":1510221905000},{"_id":"source/_posts/webgl-2017-07-14/3.jpeg","hash":"622f3e9f2abeb0ee5a9b095f7de08ab8880c1f40","modified":1510484925000},{"_id":"source/_posts/webgl-2017-07-14/01.jpeg","hash":"1546388755cbb21cccce3e83075be06e9255b411","modified":1510483552000},{"_id":"source/_posts/webgl-2017-07-14/4.jpeg","hash":"6c85183087b2a023f14d45fefa1099aaeedf49a1","modified":1510485665000},{"_id":"source/_posts/webgl-2017-07-16/1.jpeg","hash":"701733b5b16252ad94c32464949797fcc6ec1f46","modified":1510557518000},{"_id":"source/_posts/webgl-2017-07-16/2.jpeg","hash":"16de4c89287b44dd2a44d04a20fe976eab36c29d","modified":1510560123000},{"_id":"source/_posts/webgl-2017-07-18/1.jpeg","hash":"774f4c1ac34a2b0abbd84a4322e1a370441944ab","modified":1510820503000},{"_id":"source/_posts/webgl-2017-07-19/3.jpeg","hash":"4edb05b6045df66dde55cab8d9c0f32009225834","modified":1511011856000},{"_id":"source/_posts/webpack-2017-12-30/6.jpeg","hash":"b1c417300ed3f252cd520e8ab052db813cdbef00","modified":1514792321219},{"_id":"source/_posts/webpack-2017-12-30/css-1.jpeg","hash":"dba06040ecedac344f5ba2b8e1986d617c8cb6e0","modified":1514731931078},{"_id":"source/_posts/webpack-2017-12-30/7.jpeg","hash":"3848f228b2e0bde463fa2bafd2c0c35dccd15b43","modified":1514792348355},{"_id":"source/_posts/webpack-2017-12-30/css-2.jpeg","hash":"39bef322d95237f18d1e2655b970fa2fce4320da","modified":1514734829908},{"_id":"source/_posts/webpack-2017-12-30/js-1.jpeg","hash":"0f709ce0e7b37b33475e2dc9ab362c3fcdb726d7","modified":1514777071274},{"_id":"source/_posts/webpack-2017-12-30/js-3.jpeg","hash":"86ecfab0820da06e6b3be1df319c946f6d8c4786","modified":1514777707910},{"_id":"source/_posts/webpack-2017-12-30/js-4.jpeg","hash":"cd02b90495efa413fa0dd392576f7ba1e8963632","modified":1514777740674},{"_id":"source/_posts/webpack-2017-12-30/js-2.jpeg","hash":"a55597e414e4db3bd8ffc8ea2fc69bd9ef05068f","modified":1514777250011},{"_id":"themes/hexo-theme-yilia/source/img/logo.jpg","hash":"7ddb617f784f4b5dbfecddf32600c19749087ecd","modified":1491093635000},{"_id":"source/_posts/2018-09-23-HTTP/Cache-Control.png","hash":"9c53a26fc6a086ca05e91dd01752c7ff760ea815","modified":1537798832846},{"_id":"source/_posts/2018-09-23-HTTP/page_3.png","hash":"ba2f2843b7f67823a21375d27cf4b003110fe3ab","modified":1538477479633},{"_id":"source/_posts/2018-3-18-Graph/graph7.jpeg","hash":"7d24eca2e720975f36b47c412e61c6d6c589a1f7","modified":1521381426377},{"_id":"source/_posts/2018-4-8-CArray/01.jpeg","hash":"6a1cec873377a74100c2fa53fec7925222f4de4a","modified":1523169478437},{"_id":"source/_posts/2018-3-18-Graph/graph9.jpeg","hash":"20d62ba08e813e6877401be219f2ed4dfa046c90","modified":1521382215248},{"_id":"source/_posts/2018-4-8-CArray/02.jpeg","hash":"f3197af03743cf048ea4cbd61337707e06b6b2d1","modified":1523677508513},{"_id":"source/_posts/2018-4-8-CArray/03.jpeg","hash":"4efb0317270c57eb12c961cacbe5f29a94f2a3a6","modified":1523678646683},{"_id":"source/_posts/stack-2018-2-22/stack-hw.jpeg","hash":"b8daa183a410f4f16f01e144b00a81b9e7f9d91f","modified":1519282904491},{"_id":"source/_posts/vue-ssr3/11.jpeg","hash":"5a94d2a1847cb115eaa07d7089cfa3f95f89ea20","modified":1503752313000},{"_id":"source/_posts/webgl-2017-07-01/15.jpeg","hash":"45617c40cacf2cf6aad91759fef16502fc673f2a","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-11/5.jpeg","hash":"37eca1e94c2bba4f56cd8fe94315ae66061ca36e","modified":1509870947000},{"_id":"themes/hexo-theme-yilia/.git/refs/heads/master","hash":"ec274ad8176ea701ec280f2352a47451b498c39a","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.git/objects/pack/pack-7cbda1a00de83cde49bfab56b11029c9d89eaeba.idx","hash":"a61b8f72c229073a53ea75276b885df11940a11a","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/post/date.ejs","hash":"ef71c4081e866a494367575c59610e7e6339ece0","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/post/category.ejs","hash":"c2dccf1a95ec09ceeee5004293ac7edb7e1c9a66","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/post/nav.ejs","hash":"1036c8e4e1a7bc935ba173744da735a0d6ed09cd","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/post/share.ejs","hash":"341103df70d0b476e3acd0afbc507a4a120d8f5f","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/post/duoshuo.ejs","hash":"57018a5825aca8d277b161ed0990dd9c5a031cc0","modified":1503149201000},{"_id":"themes/hexo-theme-yilia/layout/_partial/post/tag.ejs","hash":"2e783e68755abb852760eb0e627a3fbb50a05a55","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/core/_animation.scss","hash":"63a37f26276f9207405afe0f2d65339ce295bbaf","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/core/_media-queries.scss","hash":"491ab3378d5c11005ba65c607608bb36b368a9d5","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/core/_reset.scss","hash":"fab871fa93bd542e76a71a56428f2994a4aaf443","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/core/_variables.scss","hash":"fb511c505d1309249f21dc577d4ad2bad99a764f","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/core/_mixin.scss","hash":"3bba5c77bad5981eac859fe05c9561d580ba7fa9","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/fonts/iconfont.eot","hash":"51d4e8d333ae7867915037983ea5d4b2ad971930","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/fonts/iconfont.svg","hash":"772383b62548e2a4fa560d589e05929b9f6f7f7b","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/fonts/iconfont.ttf","hash":"53ea5a5027a2fab93bcdad18cad6dc5f1b728726","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/fonts/iconfont.woff","hash":"709373d566526ad4bdb330757a3915e3c5e37b66","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1491092347000},{"_id":"source/_posts/2018-06-30-vue/1.jpg","hash":"5946607563c95c1e03ecebab5687691ec4f2b8c2","modified":1530453502068},{"_id":"source/_posts/2018-06-30-vue/vue2.jpeg","hash":"003b7f60044d6593dbafb0750eb1678c7a391773","modified":1526801245387},{"_id":"source/_posts/2018-07-14-wpk/2.jpeg","hash":"387fce77c74e5e4945725e841d0e91e211aa6fcf","modified":1531719572002},{"_id":"source/_posts/2018-11-20-EventLoop/33.gif","hash":"27ce7fff2d80b56d362c5bdbb984eb08ad3c78f1","modified":1542873236342},{"_id":"source/_posts/2018-4-8-CArray/05.jpeg","hash":"cbcd5d24c69d109d1a3b1b744ffc26fc698b626d","modified":1523686190527},{"_id":"source/_posts/2018-4-8-CArray/04.jpeg","hash":"495a0785e4e653011cb978264b2a3b0089c90f9f","modified":1523684814744},{"_id":"source/_posts/vue-ssr2/1.jpeg","hash":"5749f39a018e4b53e0c332e8208870ad8f82997c","modified":1503752313000},{"_id":"source/_posts/webgl-2017-07-01/02.jpeg","hash":"2a4a8313c0e80fd6a125266fb6d813ddba4b4cdd","modified":1503805985000},{"_id":"source/_posts/webgl-2017-07-08/1.jpeg","hash":"b8e7a031918613633a970eac447c9b33adc3ad78","modified":1507194087000},{"_id":"source/_posts/2018-06-30-vue/4.jpeg","hash":"5cd4cd1dd5eefc06461e57861826f6fa34cf7fe6","modified":1531211233986},{"_id":"source/_posts/2018-06-30-vue/vue1.jpeg","hash":"0a15133fb76e60c9030fbe53f7ab8cd96b0c5218","modified":1526801194699},{"_id":"themes/hexo-theme-yilia/.git/logs/refs/heads/master","hash":"a809e105d052f880c1d2aa45840dff50e85330e7","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1491092347000},{"_id":"themes/hexo-theme-yilia/.git/logs/refs/remotes/origin/HEAD","hash":"a809e105d052f880c1d2aa45840dff50e85330e7","modified":1491092347000},{"_id":"source/_posts/2018-09-23-HTTP/1.png","hash":"f944b8dadc6a126617f9227dde5ab1f76e5a8976","modified":1538621442954},{"_id":"source/_posts/2018-09-23-HTTP/2.png","hash":"33ba7e48254ded8da464bacbff903fd351852dee","modified":1538621568901},{"_id":"source/_posts/2018-07-14-wpk/21.jpeg","hash":"81546923d1a26dac81ee58523fd888290efeeddf","modified":1531720132766},{"_id":"source/_posts/2018-07-14-wpk/4.jpeg","hash":"32a12fa4deea4d03709f6f2815456875aeed596c","modified":1532151825895},{"_id":"source/_posts/2018-07-14-wpk/3.jpeg","hash":"c6713283e8cb685b953b309b376cae095681cb32","modified":1531719618842},{"_id":"source/_posts/2018-07-14-wpk/31.jpeg","hash":"5e446a5ee1e636850bbe10df0a162b3ce9b501ef","modified":1531719682686},{"_id":"source/_posts/2018-07-14-wpk/41.jpeg","hash":"7065805b4d4706714c93b21c7685d86bd960805a","modified":1531720039443},{"_id":"source/_posts/2018-09-23-HTTP/1.gif","hash":"17cf2108dc3dcd74b9dd978484f1decdaa586eba","modified":1538475673715},{"_id":"source/_posts/2018-09-22-canvasAPI/doc.png","hash":"e0c09260a5fbe1cf9498d8adf9bf2fa8bffa185c","modified":1537604812660},{"_id":"source/_posts/2018-09-23-HTTP/2.gif","hash":"2165785849c04476dd2162d7c74d6000dc717a8e","modified":1538475766145},{"_id":"themes/hexo-theme-yilia/.git/objects/pack/pack-7cbda1a00de83cde49bfab56b11029c9d89eaeba.pack","hash":"20c4b1f9c67efe010d0ae13728a02a3bb7d29a84","modified":1491092347000},{"_id":"source/_posts/2018-11-20-EventLoop/node1.png","hash":"3d70f3625caf91da22c6ab7dc294e9e7e1559b2a","modified":1542880082972},{"_id":"public/content.json","hash":"f737b62e7b3fbef9b3a021c933dae5dde327ece7","modified":1542895311958},{"_id":"public/categories/index.html","hash":"4c8409d8a557629b43c152eec013d842fb6d24a8","modified":1542895312558},{"_id":"public/2018-09-23-HTTP/index.html","hash":"4d6faf4493d93a4f549ee2c88ea07991d09aca95","modified":1542895312576},{"_id":"public/2018-09-22-canvasAPI/index.html","hash":"d259cd367b50febc57bf5f2dadaedb96e6b5e741","modified":1542895312577},{"_id":"public/2018-07-14-wpk/index.html","hash":"8552cd91edb91456e2e244b3c6a9676cc071e16f","modified":1542895312577},{"_id":"public/2018-06-30-vue/index.html","hash":"690796a8ba0515bb06b41e382d3025c19e741f66","modified":1542895312578},{"_id":"public/2018-4-8-CArray/index.html","hash":"512ae1db54a1e2ba9558a2c34dde85c3166e4149","modified":1542895312578},{"_id":"public/2018-3-18-Graph/index.html","hash":"f67e6393147f3ee3b43ada5028556243548a20bc","modified":1542895312578},{"_id":"public/2018-3-11-BST/index.html","hash":"695faf922bc6d6417515a8f0e5c4ba1c46eab314","modified":1542895312578},{"_id":"public/HashTable-2018-2-25/index.html","hash":"4d6b18363c25152725588df55c3ee4a0787f4827","modified":1542895312578},{"_id":"public/LList-2018-2-24/index.html","hash":"9e54dc5b2c3f25c77cdc24016ff5cc56caf9f5bf","modified":1542895312578},{"_id":"public/queue-2018-2-23/index.html","hash":"300b98c273b546d1a001cc63d379f73393d16b9c","modified":1542895312578},{"_id":"public/stack-2018-2-22/index.html","hash":"9e9a97eea910d70a2fe73cb4bcc9c39901b57a7b","modified":1542895312578},{"_id":"public/list-2018-2-21/index.html","hash":"63f49e2612071ef2432f6ccad2f3b65b634a914e","modified":1542895312578},{"_id":"public/webpack-2017-12-30/index.html","hash":"18c6bb494f33e7b54b2358e6a261472563d4a658","modified":1542895312578},{"_id":"public/webgl-2017-07-19/index.html","hash":"0c0f21ac0d5f932b7020068936b84975b6758b25","modified":1542895312578},{"_id":"public/webgl-2017-07-18/index.html","hash":"c05433c7c42f8d40fef0630dee92b6b9d88569d7","modified":1542895312578},{"_id":"public/webgl-2017-07-17/index.html","hash":"d8f0e67b554fb8650f3593dbb22e7805a4a706af","modified":1542895312579},{"_id":"public/webgl-2017-07-16/index.html","hash":"07436acbd01c8093686dbfa7fdcb2ab279dda401","modified":1542895312579},{"_id":"public/webgl-2017-07-15/index.html","hash":"41771e307f592f1db04078f2269822c9c1649fbd","modified":1542895312579},{"_id":"public/webgl-2017-07-14/index.html","hash":"de69f2b8e3d9ce38aa47bcc6aa384a49d0fdd843","modified":1542895312579},{"_id":"public/webgl-2017-07-13/index.html","hash":"fcc3c8565c57363770051d665e4534d0d726b20e","modified":1542895312579},{"_id":"public/webgl-2017-07-12/index.html","hash":"690c7f604adb12d18e5956729e3664f3dc64f48d","modified":1542895312579},{"_id":"public/webgl-2017-07-11/index.html","hash":"d1e68bbe5cca793f743fed232665dda8868b77c8","modified":1542895312579},{"_id":"public/webgl-2017-07-10/index.html","hash":"c3d08e933e13a942643623007bdc6b87df3c8061","modified":1542895312579},{"_id":"public/webgl-2017-07-09/index.html","hash":"1b6cea499e721bb607e395a4e8707bfa7da5d434","modified":1542895312579},{"_id":"public/webgl-2017-07-08/index.html","hash":"e3318e30ab99f7ecb96b100443a776a0af6302b5","modified":1542895312579},{"_id":"public/webgl-2017-07-06/index.html","hash":"edcc26e68e0a3ebf9c82071d2c8480475ce9bf7b","modified":1542895312579},{"_id":"public/webgl-2017-07-04/index.html","hash":"60d3c3bff33ec8d14327015382da5f4092cc0829","modified":1542895312579},{"_id":"public/webgl-2017-07-03/index.html","hash":"5de5657e5790c6c251f1510e1e53b75b5c8dacea","modified":1542895312579},{"_id":"public/webgl-2017-07-02/index.html","hash":"0b98402e1f9a0bfbd0f16c9e2d5198933377b011","modified":1542895312579},{"_id":"public/webgl-2017-07-01/index.html","hash":"7d283c36b7bcec982bbc11ab90e5dd9a62345b8a","modified":1542895312579},{"_id":"public/2017-06-12/index.html","hash":"c1d3e90a872743a16b6df37564632ff08999a9cd","modified":1542895312580},{"_id":"public/2017-06-11/index.html","hash":"96783a3b871f6e162f0f58167444e2b76691e33e","modified":1542895312580},{"_id":"public/2017-06-10/index.html","hash":"a238cd7f879462a4bc03a3308453c05e15dcb27d","modified":1542895312580},{"_id":"public/vue-ssr3/index.html","hash":"696b7ab817deffd916c2c5833ec67e5206b4d724","modified":1542895312580},{"_id":"public/vue-ssr2/index.html","hash":"9234376a47dd42591b84f1c226eb8eb1f198c959","modified":1542895312580},{"_id":"public/vue-ssr/index.html","hash":"315cca7f7d37ed66926f249d2aae9efe5a6d8d8a","modified":1542895312580},{"_id":"public/2017-05-07/index.html","hash":"bd393a42ca805329424b6fa4f268cf992aa76eee","modified":1542895312580},{"_id":"public/2017-05-02/index.html","hash":"d8713d5426d6c8c5869ace94094e12703f09ec93","modified":1542895312580},{"_id":"public/2017-04-11/index.html","hash":"258268dc1536dc4ef249968bb0801c1b90cde961","modified":1542895312580},{"_id":"public/2017-04-10/index.html","hash":"7b84b71c56688aaea8c0e2986fe714741a324ab4","modified":1542895312580},{"_id":"public/2017-04-04/index.html","hash":"aad0318077e1f71ec4118f8eedc316b8225dc012","modified":1542895312580},{"_id":"public/ajax/index.html","hash":"c86c42ac713b8a0802bde4e7134a3357caf6aecb","modified":1542895312580},{"_id":"public/categories/js/index.html","hash":"773340d9c758e2cd228a9a0fabae168545ddd8c1","modified":1542895312580},{"_id":"public/index.html","hash":"2e4ff627b500477cbabbc98f435f2ede2e61c2b0","modified":1542895312580},{"_id":"public/page/2/index.html","hash":"cbbdca388786ca50eb2f8a6dee85fc4506a843b9","modified":1542895312580},{"_id":"public/page/3/index.html","hash":"7be0f19757aa9804e7f8ec302ef47a8e6dbdc0cc","modified":1542895312581},{"_id":"public/page/4/index.html","hash":"860b7ad14f90f35f93923490e76e925f5baeb905","modified":1542895312581},{"_id":"public/page/5/index.html","hash":"99938a40e5d9527e53c7c80c23533387f092f10d","modified":1542895312581},{"_id":"public/archives/index.html","hash":"74bbc1f88b1c1b6930826a050633aa8474664f3b","modified":1542895312581},{"_id":"public/archives/page/2/index.html","hash":"8843c63a1834c91c8519e75bc2a10f35124b74b5","modified":1542895312581},{"_id":"public/archives/page/3/index.html","hash":"10a7fb81eab3049f605c1620b05f15fec0133f73","modified":1542895312581},{"_id":"public/archives/page/4/index.html","hash":"1d13ccfd09afd87db41598822f35b4dc0e19fbc3","modified":1542895312581},{"_id":"public/archives/page/5/index.html","hash":"b7923adb0c1ff7f3d870e6f8253ff815074d1a45","modified":1542895312581},{"_id":"public/archives/2017/index.html","hash":"0d55defa74f46182e32943de4aa58ceeb15a436b","modified":1542895312581},{"_id":"public/archives/2017/page/2/index.html","hash":"a6787a0e21be77c9dce19ed460f4cfeb681f1f48","modified":1542895312581},{"_id":"public/archives/2017/page/3/index.html","hash":"6a2bdc91dbc8bbd2c6afe32b6234ef68abf9350e","modified":1542895312581},{"_id":"public/archives/2017/page/4/index.html","hash":"2fbd221fe6ec1a94a15ac822651b7c6a5e344d14","modified":1542895312582},{"_id":"public/archives/2017/04/index.html","hash":"d857c694963b0db2e8025e580304da1c6009f20a","modified":1542895312582},{"_id":"public/archives/2017/05/index.html","hash":"cc9f41644bcbb0b85b142f1f38b06d65a125ae83","modified":1542895312582},{"_id":"public/archives/2017/06/index.html","hash":"05236d4a92cb8981cc23753d15511ec81a1cef54","modified":1542895312582},{"_id":"public/archives/2017/07/index.html","hash":"27d16dc93e8be685b1f467a9e9a656c1e289d956","modified":1542895312582},{"_id":"public/archives/2017/07/page/2/index.html","hash":"3429ec32d577b31baa44dd9355790cb5f6a6cbc5","modified":1542895312582},{"_id":"public/archives/2017/12/index.html","hash":"f9b4b0a11d3d35229edaafdc79316de2e3d1e0a4","modified":1542895312582},{"_id":"public/archives/2018/index.html","hash":"3b16a08e9ae53ad5a73a9645abc0a2a4d30444d3","modified":1542895312582},{"_id":"public/archives/2018/page/2/index.html","hash":"32dc153e6e3558f2075a93e21e594887ca421ffb","modified":1542895312582},{"_id":"public/archives/2018/02/index.html","hash":"302be7f6bb0e7f754b0134eed7255e68fe9b6d79","modified":1542895312582},{"_id":"public/archives/2018/03/index.html","hash":"a08c7f78a9faf9d63c1ef45068025059aa8a225f","modified":1542895312583},{"_id":"public/archives/2018/04/index.html","hash":"c6221446b5bcef0ce56a77fde06f46458ea5576b","modified":1542895312583},{"_id":"public/archives/2018/06/index.html","hash":"43081b96aea0dad536202ae496a52245efcb24df","modified":1542895312583},{"_id":"public/archives/2018/07/index.html","hash":"69c4a45d0f6ee83a0e64b53794be75f31c6bc283","modified":1542895312583},{"_id":"public/archives/2018/09/index.html","hash":"d1422fd460c6fd4a16b37a88db1c94226419b59d","modified":1542895312583},{"_id":"public/babelrc-2017-12-23/index.html","hash":"d59af5018c6b023b92ef345d77b8c02211a6a7ab","modified":1542895312583},{"_id":"public/tags/javascript/index.html","hash":"7baf64dcc5e223a31b7360edc85ec245f1b15e03","modified":1542895312583},{"_id":"public/tags/javascript/page/2/index.html","hash":"06d22abebfc2a50557e6e3805ef14a647eff4681","modified":1542895312583},{"_id":"public/tags/javascript/page/3/index.html","hash":"4cdb0fa96864c93fe4e2bbe24cbf3eb45a716b49","modified":1542895312583},{"_id":"public/tags/javascript/page/4/index.html","hash":"5508737392a235bd0992b8923fd3459d4320c760","modified":1542895312583},{"_id":"public/tags/javascript/page/5/index.html","hash":"8557e92a12242824fd3dec7c0c3648b38bc3be3f","modified":1542895312583},{"_id":"public/tags/es6/index.html","hash":"f7b386049ca52031799e2c24e0d99e5e0657fe4e","modified":1542895312584},{"_id":"public/tags/node/index.html","hash":"b0a13ac4fdb4fe6e0f5e2bcc91258a544896cb10","modified":1542895312584},{"_id":"public/tags/ajax/index.html","hash":"32ea94840171f3fbc08495c1ad9b693ec9c6ac3d","modified":1542895312584},{"_id":"public/tags/react/index.html","hash":"a7efbf10f60fed5992699a35d8eee3d11ad40c0d","modified":1542895312584},{"_id":"public/tags/vue/index.html","hash":"269b9c4c150b75f489efce582377762b884f1fee","modified":1542895312584},{"_id":"public/tags/canvas/index.html","hash":"314babee1666fad48392b2863bdb2aefaa2a233a","modified":1542895312584},{"_id":"public/tags/webpack/index.html","hash":"37e792edf34ccd73117acdb2ae689a59f0e28002","modified":1542895312584},{"_id":"public/tags/HTTP/index.html","hash":"86f2af54cbb213a234b79eab0902af757eb72ef7","modified":1542895312584},{"_id":"public/tags/ECMAScript-6/index.html","hash":"0c81348ddef29532287af23439f0493e4f3bd608","modified":1542895312584},{"_id":"public/tags/algorithm/index.html","hash":"5bb8678337bcc5bf3ae720a6d7930f1f6827a939","modified":1542895312584},{"_id":"public/tags/302/index.html","hash":"8076cb605bf3c874dbc08849496fdb820f479188","modified":1542895312584},{"_id":"public/tags/babel/index.html","hash":"a77bccd398447287dac1d2b6dfddf98e3b65dd7c","modified":1542895312584},{"_id":"public/tags/webgl/index.html","hash":"787ce8a35e83a26e90dad165edd08213f08c3a56","modified":1542895312584},{"_id":"public/tags/webgl/page/2/index.html","hash":"700adbbe77637d1de8bb06f57ec7950856b79d0b","modified":1542895312585},{"_id":"public/tags/three-js/index.html","hash":"89dc80ae329fb34d2020126a4f8f3d510cd84daa","modified":1542895312585},{"_id":"public/2018-11-20-EventLoop/index.html","hash":"bfa63588c8fa89003f4cafcf117fe53197e4c241","modified":1542895312615},{"_id":"public/archives/2018/11/index.html","hash":"fd60c69b8a08528f4e342094f6d9f9358cbf6a91","modified":1542895312615},{"_id":"public/2018-11-20-EventLoop/1.png","hash":"4b5cffb5dd5ed22f065061c047aab24a6693c3ad","modified":1542895312618},{"_id":"public/2018-11-20-EventLoop/11.png","hash":"991109df2ef5ae00d95568a69200baa1775ed399","modified":1542895312618},{"_id":"public/2018-11-20-EventLoop/2.png","hash":"fbc228a457accd568d1f1ef687b43c808f419f4d","modified":1542895312618},{"_id":"public/2018-11-20-EventLoop/22.jpg","hash":"39614f6bdc1abf14fc2922a0e6881049c0710df8","modified":1542895312618},{"_id":"public/2018-11-20-EventLoop/huohu.jpg","hash":"48378ee892f447af1568350997b337aae4d52f3e","modified":1542895312618},{"_id":"public/2018-11-20-EventLoop/node1.png","hash":"3d70f3625caf91da22c6ab7dc294e9e7e1559b2a","modified":1542895312618},{"_id":"public/2018-11-20-EventLoop/guge.jpg","hash":"3d0fae343c18008630292a5d5f47658477d73741","modified":1542895312619},{"_id":"public/2018-11-20-EventLoop/33.gif","hash":"27ce7fff2d80b56d362c5bdbb984eb08ad3c78f1","modified":1542895312632}],"Category":[{"name":"javascript","_id":"cjosd1vb50015fdldivsaw2h8"}],"Data":[],"Page":[{"title":"","date":"2017-04-02T06:43:41.000Z","_content":"","source":"categories/index.md","raw":"---\ntitle: \ndate: 2017-04-02 14:43:41\n---\n","updated":"2017-04-02T06:46:14.000Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cjosd1v9w0000fdldp9ksdfvk","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"JavaScript","comments":1,"date":"2017-04-10T14:14:43.000Z","_content":"JavaScript  2016  ES6  RxJS (ReactiveX) \n\n Haskell  JavaScript     \n\n JavaScript \n\n<!-- more -->\n\n## \n\n\n\n\n\n1. \n1. \n1. \n1. \n\n## \n\n\n``` javascript\n// \nconst arr = ['apple', 'pen', 'apple-pen'];\nfor(const i in arr){\n  const c = arr[i][0];\n  arr[i] = c.toUpperCase() + arr[i].slice(1);\n}\n\nconsole.log(arr);\n\n\n// \nfunction upperFirst(word) {\n  return word[0].toUpperCase() + word.slice(1);\n}\n\nfunction wordToUpperCase(arr) {\n  return arr.map(upperFirst);\n}\n\nconsole.log(wordToUpperCase(['apple', 'pen', 'apple-pen']));\n\n\n// \nconsole.log(arr.map(['apple', 'pen', 'apple-pen'], word => word[0].toUpperCase() + word.slice(1)));\n\n```\n\n\n\n1. \n1. \n1. \n\n\n  Array.map  forof \n\n    \n\n\n## \n\n   \n\n``` javascript\n// \n\n\n// \nconsole.log(1 + 2 + 3 - 4)\n\n\n// \nfunction sum(a, b) {\n  return a + b;\n}\n\nfunction sub(a, b) {\n  return a - b;\n}\n\nconsole.log(sub(sum(sum(1, 2), 3), 4);\n\n``` \n\n  \n\n  \n\n``` javascript\n//  ( lodash )\nconst utils = {\n  chain(a) {\n    this._temp = a;\n    return this;\n  },\n  sum(b) {\n    this._temp += b;\n    return this;\n  },\n  sub(b) {\n    this._temp -= b;\n    return this;\n  },\n  value() {\n    const _temp = this._temp;\n    this._temp = undefined;\n    return _temp;\n  }\n};\n\nconsole.log(utils.chain(1).sum(2).sum(3).sub(4).value());\n\n``` \n\n   Promise \n\n``` javascript\n// \n\n\n// \nimport $ from 'jquery';\n$.post('a/url/to/target', (rs) => {\n  if(rs){\n    $.post('a/url/to/another/target', (rs2) => {\n      if(rs2){\n        $.post('a/url/to/third/target');\n      }\n    });\n  }\n});\n\n\n// Promise\nimport request from 'catta';  // catta  fetch,jsonp,ajax\nrequest('a/url/to/target')\n  .then(rs => rs ? $.post('a/url/to/another/target') : Promise.reject())\n  .then(rs2 => rs2 ? $.post('a/url/to/third/target') : Promise.reject());\n``` \n\n Promise \n\n## \n\n### Closure\n\n\n\n\n\n\n\n\n\n``` javascript\n// \nfunction makeCounter() {\n  let k = 0;\n\n  return function() {\n    return ++k;\n  };\n}\n\nconst counter = makeCounter();\n\nconsole.log(counter());  // 1\nconsole.log(counter());  // 2\n\n``` \nmakeCounter  k  \n\n \n\n\n\n1. \n1. \n\n\n###\n\n\n\n``` javascript\n// \n// \nconst cache = (function() {\n  const store = {};\n  \n  return {\n    get(key) {\n      return store[key];\n    },\n    set(key, val) {\n      store[key] = val;\n    }\n  }\n}());\n\ncache.set('a', 1);\ncache.get('a');  // 1\n\n``` \n store  \n\n###\n\n\n\n##\n\n\n\nJavaScript  JavaScript \n\n JavaScript  Array.map , Array.reduce , Array.filter\n\n map \n\n###map \n\n\n\nmap \n\n``` javascript\n\n// \n\n// \nconst arr = [1,2,3];\nconst rs = [];\nfor(const n of arr){\n  rs.push(++n);\n}\nconsole.log(rs)\n\n\n// map\nconst arr = [1,2,3];\nconst rs = arr.map(n => ++n);\n\n``` \n\n for...of \n\n map \n\n###Currying\n\n\n\n undescore  lodash \n\n _.partial \n\n``` javascript\n// \n\n\n// \nconst BASE = '/path/to/base';\nconst relativePath = path.relative(BASE, '/some/path');\n\n\n// _.parical \nconst BASE = '/path/to/base';\nconst relativeFromBase = _.partial(path.relative, BASE);\n\nconst relativePath = relativeFromBase('/some/path');\n``` \n _.partial  relativeFromBase  path.relative  BASE \n\n BASE \n\n###Composing\n\n\n\n lodash compose  flow\n\n``` javascript\n//  Base64\n\n\n//  ()\nconst arr = ['pen', 'apple', 'applypen'];\nconst rs = [];\nfor(const w of arr){\n  rs.push(btoa(w.toUpperCase()));\n}\nconsole.log(rs);\n\n\n// _.flow \nconst arr = ['pen', 'apple', 'applypen'];\nconst upperAndBase64 = _.partialRight(_.map, _.flow(_.upperCase, btoa));\nconsole.log(upperAndBase64(arr));\n``` \n_.flow  Base64 \n\n##\n\n JavaScript \n\n","source":"_posts/2017-04-10.md","raw":"---\ntitle: JavaScript\ncomments: true\ndate: 2017-04-10 22:14:43\ntags: \n    - 'javascript'\n---\nJavaScript  2016  ES6  RxJS (ReactiveX) \n\n Haskell  JavaScript     \n\n JavaScript \n\n<!-- more -->\n\n## \n\n\n\n\n\n1. \n1. \n1. \n1. \n\n## \n\n\n``` javascript\n// \nconst arr = ['apple', 'pen', 'apple-pen'];\nfor(const i in arr){\n  const c = arr[i][0];\n  arr[i] = c.toUpperCase() + arr[i].slice(1);\n}\n\nconsole.log(arr);\n\n\n// \nfunction upperFirst(word) {\n  return word[0].toUpperCase() + word.slice(1);\n}\n\nfunction wordToUpperCase(arr) {\n  return arr.map(upperFirst);\n}\n\nconsole.log(wordToUpperCase(['apple', 'pen', 'apple-pen']));\n\n\n// \nconsole.log(arr.map(['apple', 'pen', 'apple-pen'], word => word[0].toUpperCase() + word.slice(1)));\n\n```\n\n\n\n1. \n1. \n1. \n\n\n  Array.map  forof \n\n    \n\n\n## \n\n   \n\n``` javascript\n// \n\n\n// \nconsole.log(1 + 2 + 3 - 4)\n\n\n// \nfunction sum(a, b) {\n  return a + b;\n}\n\nfunction sub(a, b) {\n  return a - b;\n}\n\nconsole.log(sub(sum(sum(1, 2), 3), 4);\n\n``` \n\n  \n\n  \n\n``` javascript\n//  ( lodash )\nconst utils = {\n  chain(a) {\n    this._temp = a;\n    return this;\n  },\n  sum(b) {\n    this._temp += b;\n    return this;\n  },\n  sub(b) {\n    this._temp -= b;\n    return this;\n  },\n  value() {\n    const _temp = this._temp;\n    this._temp = undefined;\n    return _temp;\n  }\n};\n\nconsole.log(utils.chain(1).sum(2).sum(3).sub(4).value());\n\n``` \n\n   Promise \n\n``` javascript\n// \n\n\n// \nimport $ from 'jquery';\n$.post('a/url/to/target', (rs) => {\n  if(rs){\n    $.post('a/url/to/another/target', (rs2) => {\n      if(rs2){\n        $.post('a/url/to/third/target');\n      }\n    });\n  }\n});\n\n\n// Promise\nimport request from 'catta';  // catta  fetch,jsonp,ajax\nrequest('a/url/to/target')\n  .then(rs => rs ? $.post('a/url/to/another/target') : Promise.reject())\n  .then(rs2 => rs2 ? $.post('a/url/to/third/target') : Promise.reject());\n``` \n\n Promise \n\n## \n\n### Closure\n\n\n\n\n\n\n\n\n\n``` javascript\n// \nfunction makeCounter() {\n  let k = 0;\n\n  return function() {\n    return ++k;\n  };\n}\n\nconst counter = makeCounter();\n\nconsole.log(counter());  // 1\nconsole.log(counter());  // 2\n\n``` \nmakeCounter  k  \n\n \n\n\n\n1. \n1. \n\n\n###\n\n\n\n``` javascript\n// \n// \nconst cache = (function() {\n  const store = {};\n  \n  return {\n    get(key) {\n      return store[key];\n    },\n    set(key, val) {\n      store[key] = val;\n    }\n  }\n}());\n\ncache.set('a', 1);\ncache.get('a');  // 1\n\n``` \n store  \n\n###\n\n\n\n##\n\n\n\nJavaScript  JavaScript \n\n JavaScript  Array.map , Array.reduce , Array.filter\n\n map \n\n###map \n\n\n\nmap \n\n``` javascript\n\n// \n\n// \nconst arr = [1,2,3];\nconst rs = [];\nfor(const n of arr){\n  rs.push(++n);\n}\nconsole.log(rs)\n\n\n// map\nconst arr = [1,2,3];\nconst rs = arr.map(n => ++n);\n\n``` \n\n for...of \n\n map \n\n###Currying\n\n\n\n undescore  lodash \n\n _.partial \n\n``` javascript\n// \n\n\n// \nconst BASE = '/path/to/base';\nconst relativePath = path.relative(BASE, '/some/path');\n\n\n// _.parical \nconst BASE = '/path/to/base';\nconst relativeFromBase = _.partial(path.relative, BASE);\n\nconst relativePath = relativeFromBase('/some/path');\n``` \n _.partial  relativeFromBase  path.relative  BASE \n\n BASE \n\n###Composing\n\n\n\n lodash compose  flow\n\n``` javascript\n//  Base64\n\n\n//  ()\nconst arr = ['pen', 'apple', 'applypen'];\nconst rs = [];\nfor(const w of arr){\n  rs.push(btoa(w.toUpperCase()));\n}\nconsole.log(rs);\n\n\n// _.flow \nconst arr = ['pen', 'apple', 'applypen'];\nconst upperAndBase64 = _.partialRight(_.map, _.flow(_.upperCase, btoa));\nconsole.log(upperAndBase64(arr));\n``` \n_.flow  Base64 \n\n##\n\n JavaScript \n\n","slug":"2017-04-10","published":1,"updated":"2017-08-26T12:58:33.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1v9x0001fdld6n90vhoc","content":"<p>JavaScript  2016  ES6  RxJS (ReactiveX) </p>\n<p> Haskell  JavaScript     </p>\n<p> JavaScript </p>\n<a id=\"more\"></a>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> arr = [<span class=\"string\">'apple'</span>, <span class=\"string\">'pen'</span>, <span class=\"string\">'apple-pen'</span>];</div><div class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">const</span> i <span class=\"keyword\">in</span> arr)&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> c = arr[i][<span class=\"number\">0</span>];</div><div class=\"line\">  arr[i] = c.toUpperCase() + arr[i].slice(<span class=\"number\">1</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upperFirst</span>(<span class=\"params\">word</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> word[<span class=\"number\">0</span>].toUpperCase() + word.slice(<span class=\"number\">1</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wordToUpperCase</span>(<span class=\"params\">arr</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> arr.map(upperFirst);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(wordToUpperCase([<span class=\"string\">'apple'</span>, <span class=\"string\">'pen'</span>, <span class=\"string\">'apple-pen'</span>]));</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr.map([<span class=\"string\">'apple'</span>, <span class=\"string\">'pen'</span>, <span class=\"string\">'apple-pen'</span>], word =&gt; word[<span class=\"number\">0</span>].toUpperCase() + word.slice(<span class=\"number\">1</span>)));</div></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<p>  Array.map  forof </p>\n<p>    </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>   </p>\n<pre><code class=\"javascript\"><span class=\"comment\">// </span>\n\n\n<span class=\"comment\">// </span>\n<span class=\"built_in\">console</span>.log(<span class=\"number\">1</span> + <span class=\"number\">2</span> + <span class=\"number\">3</span> - <span class=\"number\">4</span>)\n\n\n<span class=\"comment\">// </span>\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sum</span>(<span class=\"params\">a, b</span>) </span>{\n  <span class=\"keyword\">return</span> a + b;\n}\n\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sub</span>(<span class=\"params\">a, b</span>) </span>{\n  <span class=\"keyword\">return</span> a - b;\n}\n\n<span class=\"built_in\">console</span>.log(sub(sum(sum(<span class=\"number\">1</span>, <span class=\"number\">2</span>), <span class=\"number\">3</span>), <span class=\"number\">4</span>);\n</code></pre>\n<p>  </p>\n<p>  </p>\n<pre><code class=\"javascript\"><span class=\"comment\">//  ( lodash )</span>\n<span class=\"keyword\">const</span> utils = {\n  chain(a) {\n    <span class=\"keyword\">this</span>._temp = a;\n    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;\n  },\n  sum(b) {\n    <span class=\"keyword\">this</span>._temp += b;\n    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;\n  },\n  sub(b) {\n    <span class=\"keyword\">this</span>._temp -= b;\n    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;\n  },\n  value() {\n    <span class=\"keyword\">const</span> _temp = <span class=\"keyword\">this</span>._temp;\n    <span class=\"keyword\">this</span>._temp = <span class=\"literal\">undefined</span>;\n    <span class=\"keyword\">return</span> _temp;\n  }\n};\n\n<span class=\"built_in\">console</span>.log(utils.chain(<span class=\"number\">1</span>).sum(<span class=\"number\">2</span>).sum(<span class=\"number\">3</span>).sub(<span class=\"number\">4</span>).value());\n</code></pre>\n<p>   Promise </p>\n<pre><code class=\"javascript\"><span class=\"comment\">// </span>\n\n\n<span class=\"comment\">// </span>\n<span class=\"keyword\">import</span> $ <span class=\"keyword\">from</span> <span class=\"string\">'jquery'</span>;\n$.post(<span class=\"string\">'a/url/to/target'</span>, (rs) =&gt; {\n  <span class=\"keyword\">if</span>(rs){\n    $.post(<span class=\"string\">'a/url/to/another/target'</span>, (rs2) =&gt; {\n      <span class=\"keyword\">if</span>(rs2){\n        $.post(<span class=\"string\">'a/url/to/third/target'</span>);\n      }\n    });\n  }\n});\n\n\n<span class=\"comment\">// Promise</span>\n<span class=\"keyword\">import</span> request <span class=\"keyword\">from</span> <span class=\"string\">'catta'</span>;  <span class=\"comment\">// catta  fetch,jsonp,ajax</span>\nrequest(<span class=\"string\">'a/url/to/target'</span>)\n  .then(<span class=\"function\"><span class=\"params\">rs</span> =&gt;</span> rs ? $.post(<span class=\"string\">'a/url/to/another/target'</span>) : <span class=\"built_in\">Promise</span>.reject())\n  .then(<span class=\"function\"><span class=\"params\">rs2</span> =&gt;</span> rs2 ? $.post(<span class=\"string\">'a/url/to/third/target'</span>) : <span class=\"built_in\">Promise</span>.reject());\n</code></pre>\n<p> Promise </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Closure\"><a href=\"#Closure\" class=\"headerlink\" title=\"Closure\"></a>Closure</h3><p></p>\n<p></p>\n<p></p>\n<p></p>\n<pre><code class=\"javascript\"><span class=\"comment\">// </span>\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeCounter</span>(<span class=\"params\"></span>) </span>{\n  <span class=\"keyword\">let</span> k = <span class=\"number\">0</span>;\n\n  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>{\n    <span class=\"keyword\">return</span> ++k;\n  };\n}\n\n<span class=\"keyword\">const</span> counter = makeCounter();\n\n<span class=\"built_in\">console</span>.log(counter());  <span class=\"comment\">// 1</span>\n<span class=\"built_in\">console</span>.log(counter());  <span class=\"comment\">// 2</span>\n</code></pre>\n<p>makeCounter  k  </p>\n<p> </p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n</ol>\n<p>###</p>\n<p></p>\n<pre><code class=\"javascript\"><span class=\"comment\">// </span>\n<span class=\"comment\">// </span>\n<span class=\"keyword\">const</span> cache = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>{\n  <span class=\"keyword\">const</span> store = {};\n\n  <span class=\"keyword\">return</span> {\n    get(key) {\n      <span class=\"keyword\">return</span> store[key];\n    },\n    set(key, val) {\n      store[key] = val;\n    }\n  }\n}());\n\ncache.set(<span class=\"string\">'a'</span>, <span class=\"number\">1</span>);\ncache.get(<span class=\"string\">'a'</span>);  <span class=\"comment\">// 1</span>\n</code></pre>\n<p> store  </p>\n<p>###</p>\n<p></p>\n<p>##</p>\n<p></p>\n<p>JavaScript  JavaScript </p>\n<p> JavaScript  Array.map , Array.reduce , Array.filter</p>\n<p> map </p>\n<p>###map </p>\n<p></p>\n<p>map </p>\n<pre><code class=\"javascript\">\n<span class=\"comment\">// </span>\n\n<span class=\"comment\">// </span>\n<span class=\"keyword\">const</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];\n<span class=\"keyword\">const</span> rs = [];\n<span class=\"keyword\">for</span>(<span class=\"keyword\">const</span> n <span class=\"keyword\">of</span> arr){\n  rs.push(++n);\n}\n<span class=\"built_in\">console</span>.log(rs)\n\n\n<span class=\"comment\">// map</span>\n<span class=\"keyword\">const</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];\n<span class=\"keyword\">const</span> rs = arr.map(<span class=\"function\"><span class=\"params\">n</span> =&gt;</span> ++n);\n</code></pre>\n<p> forof </p>\n<p> map </p>\n<p>###Currying</p>\n<p></p>\n<p> undescore  lodash </p>\n<p> _.partial </p>\n<pre><code class=\"javascript\"><span class=\"comment\">// </span>\n\n\n<span class=\"comment\">// </span>\n<span class=\"keyword\">const</span> BASE = <span class=\"string\">'/path/to/base'</span>;\n<span class=\"keyword\">const</span> relativePath = path.relative(BASE, <span class=\"string\">'/some/path'</span>);\n\n\n<span class=\"comment\">// _.parical </span>\n<span class=\"keyword\">const</span> BASE = <span class=\"string\">'/path/to/base'</span>;\n<span class=\"keyword\">const</span> relativeFromBase = _.partial(path.relative, BASE);\n\n<span class=\"keyword\">const</span> relativePath = relativeFromBase(<span class=\"string\">'/some/path'</span>);\n</code></pre>\n<p> _.partial  relativeFromBase  path.relative  BASE </p>\n<p> BASE </p>\n<p>###Composing</p>\n<p></p>\n<p> lodash compose  flow</p>\n<pre><code class=\"javascript\"><span class=\"comment\">//  Base64</span>\n\n\n<span class=\"comment\">//  ()</span>\n<span class=\"keyword\">const</span> arr = [<span class=\"string\">'pen'</span>, <span class=\"string\">'apple'</span>, <span class=\"string\">'applypen'</span>];\n<span class=\"keyword\">const</span> rs = [];\n<span class=\"keyword\">for</span>(<span class=\"keyword\">const</span> w <span class=\"keyword\">of</span> arr){\n  rs.push(btoa(w.toUpperCase()));\n}\n<span class=\"built_in\">console</span>.log(rs);\n\n\n<span class=\"comment\">// _.flow </span>\n<span class=\"keyword\">const</span> arr = [<span class=\"string\">'pen'</span>, <span class=\"string\">'apple'</span>, <span class=\"string\">'applypen'</span>];\n<span class=\"keyword\">const</span> upperAndBase64 = _.partialRight(_.map, _.flow(_.upperCase, btoa));\n<span class=\"built_in\">console</span>.log(upperAndBase64(arr));\n</code></pre>\n<p>_.flow  Base64 </p>\n<p>##</p>\n<p> JavaScript </p>\n<p></p>\n","site":{"data":{}},"excerpt":"<p>JavaScript  2016  ES6  RxJS (ReactiveX) </p>\n<p> Haskell  JavaScript     </p>\n<p> JavaScript </p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> arr = [<span class=\"string\">'apple'</span>, <span class=\"string\">'pen'</span>, <span class=\"string\">'apple-pen'</span>];</div><div class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">const</span> i <span class=\"keyword\">in</span> arr)&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> c = arr[i][<span class=\"number\">0</span>];</div><div class=\"line\">  arr[i] = c.toUpperCase() + arr[i].slice(<span class=\"number\">1</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upperFirst</span>(<span class=\"params\">word</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> word[<span class=\"number\">0</span>].toUpperCase() + word.slice(<span class=\"number\">1</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wordToUpperCase</span>(<span class=\"params\">arr</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> arr.map(upperFirst);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(wordToUpperCase([<span class=\"string\">'apple'</span>, <span class=\"string\">'pen'</span>, <span class=\"string\">'apple-pen'</span>]));</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr.map([<span class=\"string\">'apple'</span>, <span class=\"string\">'pen'</span>, <span class=\"string\">'apple-pen'</span>], word =&gt; word[<span class=\"number\">0</span>].toUpperCase() + word.slice(<span class=\"number\">1</span>)));</div></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<p>  Array.map  forof </p>\n<p>    </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>   </p>\n<pre><code class=\"javascript\"><span class=\"comment\">// </span>\n\n\n<span class=\"comment\">// </span>\n<span class=\"built_in\">console</span>.log(<span class=\"number\">1</span> + <span class=\"number\">2</span> + <span class=\"number\">3</span> - <span class=\"number\">4</span>)\n\n\n<span class=\"comment\">// </span>\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sum</span>(<span class=\"params\">a, b</span>) </span>{\n  <span class=\"keyword\">return</span> a + b;\n}\n\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sub</span>(<span class=\"params\">a, b</span>) </span>{\n  <span class=\"keyword\">return</span> a - b;\n}\n\n<span class=\"built_in\">console</span>.log(sub(sum(sum(<span class=\"number\">1</span>, <span class=\"number\">2</span>), <span class=\"number\">3</span>), <span class=\"number\">4</span>);\n</code></pre>\n<p>  </p>\n<p>  </p>\n<pre><code class=\"javascript\"><span class=\"comment\">//  ( lodash )</span>\n<span class=\"keyword\">const</span> utils = {\n  chain(a) {\n    <span class=\"keyword\">this</span>._temp = a;\n    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;\n  },\n  sum(b) {\n    <span class=\"keyword\">this</span>._temp += b;\n    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;\n  },\n  sub(b) {\n    <span class=\"keyword\">this</span>._temp -= b;\n    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;\n  },\n  value() {\n    <span class=\"keyword\">const</span> _temp = <span class=\"keyword\">this</span>._temp;\n    <span class=\"keyword\">this</span>._temp = <span class=\"literal\">undefined</span>;\n    <span class=\"keyword\">return</span> _temp;\n  }\n};\n\n<span class=\"built_in\">console</span>.log(utils.chain(<span class=\"number\">1</span>).sum(<span class=\"number\">2</span>).sum(<span class=\"number\">3</span>).sub(<span class=\"number\">4</span>).value());\n</code></pre>\n<p>   Promise </p>\n<pre><code class=\"javascript\"><span class=\"comment\">// </span>\n\n\n<span class=\"comment\">// </span>\n<span class=\"keyword\">import</span> $ <span class=\"keyword\">from</span> <span class=\"string\">'jquery'</span>;\n$.post(<span class=\"string\">'a/url/to/target'</span>, (rs) =&gt; {\n  <span class=\"keyword\">if</span>(rs){\n    $.post(<span class=\"string\">'a/url/to/another/target'</span>, (rs2) =&gt; {\n      <span class=\"keyword\">if</span>(rs2){\n        $.post(<span class=\"string\">'a/url/to/third/target'</span>);\n      }\n    });\n  }\n});\n\n\n<span class=\"comment\">// Promise</span>\n<span class=\"keyword\">import</span> request <span class=\"keyword\">from</span> <span class=\"string\">'catta'</span>;  <span class=\"comment\">// catta  fetch,jsonp,ajax</span>\nrequest(<span class=\"string\">'a/url/to/target'</span>)\n  .then(<span class=\"function\"><span class=\"params\">rs</span> =&gt;</span> rs ? $.post(<span class=\"string\">'a/url/to/another/target'</span>) : <span class=\"built_in\">Promise</span>.reject())\n  .then(<span class=\"function\"><span class=\"params\">rs2</span> =&gt;</span> rs2 ? $.post(<span class=\"string\">'a/url/to/third/target'</span>) : <span class=\"built_in\">Promise</span>.reject());\n</code></pre>\n<p> Promise </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Closure\"><a href=\"#Closure\" class=\"headerlink\" title=\"Closure\"></a>Closure</h3><p></p>\n<p></p>\n<p></p>\n<p></p>\n<pre><code class=\"javascript\"><span class=\"comment\">// </span>\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeCounter</span>(<span class=\"params\"></span>) </span>{\n  <span class=\"keyword\">let</span> k = <span class=\"number\">0</span>;\n\n  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>{\n    <span class=\"keyword\">return</span> ++k;\n  };\n}\n\n<span class=\"keyword\">const</span> counter = makeCounter();\n\n<span class=\"built_in\">console</span>.log(counter());  <span class=\"comment\">// 1</span>\n<span class=\"built_in\">console</span>.log(counter());  <span class=\"comment\">// 2</span>\n</code></pre>\n<p>makeCounter  k  </p>\n<p> </p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n</ol>\n<p>###</p>\n<p></p>\n<pre><code class=\"javascript\"><span class=\"comment\">// </span>\n<span class=\"comment\">// </span>\n<span class=\"keyword\">const</span> cache = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>{\n  <span class=\"keyword\">const</span> store = {};\n\n  <span class=\"keyword\">return</span> {\n    get(key) {\n      <span class=\"keyword\">return</span> store[key];\n    },\n    set(key, val) {\n      store[key] = val;\n    }\n  }\n}());\n\ncache.set(<span class=\"string\">'a'</span>, <span class=\"number\">1</span>);\ncache.get(<span class=\"string\">'a'</span>);  <span class=\"comment\">// 1</span>\n</code></pre>\n<p> store  </p>\n<p>###</p>\n<p></p>\n<p>##</p>\n<p></p>\n<p>JavaScript  JavaScript </p>\n<p> JavaScript  Array.map , Array.reduce , Array.filter</p>\n<p> map </p>\n<p>###map </p>\n<p></p>\n<p>map </p>\n<pre><code class=\"javascript\">\n<span class=\"comment\">// </span>\n\n<span class=\"comment\">// </span>\n<span class=\"keyword\">const</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];\n<span class=\"keyword\">const</span> rs = [];\n<span class=\"keyword\">for</span>(<span class=\"keyword\">const</span> n <span class=\"keyword\">of</span> arr){\n  rs.push(++n);\n}\n<span class=\"built_in\">console</span>.log(rs)\n\n\n<span class=\"comment\">// map</span>\n<span class=\"keyword\">const</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];\n<span class=\"keyword\">const</span> rs = arr.map(<span class=\"function\"><span class=\"params\">n</span> =&gt;</span> ++n);\n</code></pre>\n<p> forof </p>\n<p> map </p>\n<p>###Currying</p>\n<p></p>\n<p> undescore  lodash </p>\n<p> _.partial </p>\n<pre><code class=\"javascript\"><span class=\"comment\">// </span>\n\n\n<span class=\"comment\">// </span>\n<span class=\"keyword\">const</span> BASE = <span class=\"string\">'/path/to/base'</span>;\n<span class=\"keyword\">const</span> relativePath = path.relative(BASE, <span class=\"string\">'/some/path'</span>);\n\n\n<span class=\"comment\">// _.parical </span>\n<span class=\"keyword\">const</span> BASE = <span class=\"string\">'/path/to/base'</span>;\n<span class=\"keyword\">const</span> relativeFromBase = _.partial(path.relative, BASE);\n\n<span class=\"keyword\">const</span> relativePath = relativeFromBase(<span class=\"string\">'/some/path'</span>);\n</code></pre>\n<p> _.partial  relativeFromBase  path.relative  BASE </p>\n<p> BASE </p>\n<p>###Composing</p>\n<p></p>\n<p> lodash compose  flow</p>\n<pre><code class=\"javascript\"><span class=\"comment\">//  Base64</span>\n\n\n<span class=\"comment\">//  ()</span>\n<span class=\"keyword\">const</span> arr = [<span class=\"string\">'pen'</span>, <span class=\"string\">'apple'</span>, <span class=\"string\">'applypen'</span>];\n<span class=\"keyword\">const</span> rs = [];\n<span class=\"keyword\">for</span>(<span class=\"keyword\">const</span> w <span class=\"keyword\">of</span> arr){\n  rs.push(btoa(w.toUpperCase()));\n}\n<span class=\"built_in\">console</span>.log(rs);\n\n\n<span class=\"comment\">// _.flow </span>\n<span class=\"keyword\">const</span> arr = [<span class=\"string\">'pen'</span>, <span class=\"string\">'apple'</span>, <span class=\"string\">'applypen'</span>];\n<span class=\"keyword\">const</span> upperAndBase64 = _.partialRight(_.map, _.flow(_.upperCase, btoa));\n<span class=\"built_in\">console</span>.log(upperAndBase64(arr));\n</code></pre>\n<p>_.flow  Base64 </p>\n<p>##</p>\n<p> JavaScript </p>\n<p></p>"},{"title":"javascriptObject.assign()","comments":1,"date":"2017-04-11T13:55:28.000Z","_content":"\n## \n\n\n,()\n\nObject.assign(target, ...sources)\n\n\n\n1. \n1. \n1. stringSymbol\n\ngettertargetsetter\n\n<!-- more -->\n\n## \n\nMDN\n\n### \n\no1targetsetter\n\n\n``` javascript\n\nvar o1 = { a: 1 };\nvar o2 = { b: 2 };\nvar o3 = { c: 3 };\n\nvar obj = Object.assign(o1, o2, o3);\nconsole.log(obj); // { a: 1, b: 2, c: 3 }\nconsole.log(o1);  // { a: 1, b: 2, c: 3 }, target object itself is changed.\n\n```\n\n### \n\n, Object.defineProperty Object.keys(),for-in.\n\nObject.assign\n\n\n``` javascript\n\nvar obj = Object.create({ foo: 1 }, { // foo is an inherit property.\n  bar: {\n    value: 2  // bar is a non-enumerable property.\n  },\n  baz: {\n    value: 3,\n    enumerable: true  // baz is an own enumerable property.\n  }\n});\n\nvar copy = Object.assign({}, obj);\nconsole.log(copy); // { baz: 3 } \n\n``` \n\n### \n\n:\n\n\n``` javascript\n\nvar target = Object.defineProperty({}, 'foo', {\n  value: 1,\n  writable: false\n}); \n\nObject.assign(target, { bar: 2 })\n\n//{bar: 2, foo: 1}\n\nObject.assign(target, { foo: 2 })\n//Uncaught TypeError: Cannot assign to read only property 'foo' of object '#<Object>'()\n\n``` \n\n\n## Polyfill\n\nes5Object.assign\n\n\n\nassignObject\n\n({},)\nObjectoutforin(hasOwnProperty)\n\n\n``` javascript\n\n if (typeof Object.assign != 'function') {\n  (function () {\n    Object.assign = function (target) {\n     'use strict';\n     if (target === undefined || target === null) {\n       throw new TypeError('Cannot convert undefined or null to object');\n     }\n    \n     var output = Object(target);\n     for (var index = 1; index < arguments.length; index++) {\n       var source = arguments[index];\n       if (source !== undefined && source !== null) {\n         for (var nextKey in source) {\n           if (source.hasOwnProperty(nextKey)) {\n             output[nextKey] = source[nextKey];\n           }\n         }\n       }\n     }\n     return output;\n    };\n})();\n}\n\n``` \n\n## \n\n### \n\njavascript\n\n\n``` javascript\n\n// \nconst a = {t: 1, p: 'gg'};\nconst b = a;\nb.t = 3;\nconsole.log(a); // {t: 3, p: 'gg'}\nconsole.log(b); // {t: 3, p: 'gg'}\n\n//\nconst c = {t: 1, p: 'gg'};\nconst d = deepCopy(c);\nd.t = 3;\nconsole.log(c); // {t: 1, p: 'gg'}\nconsole.log(d); // {t: 3, p: 'gg'}\n\n``` \n\n\n\nes6 Object.assign()  \n\n\n\n``` javascript\n\n// Cloning an object\nvar obj = { a: 1 };\nvar copy = Object.assign({}, obj);\nconsole.log(copy); // { a: 1 }\n\n// Merging objects\nvar o1 = { a: 1 };\nvar o2 = { b: 2 };\nvar o3 = { c: 3 };\n\nvar obj = Object.assign(o1, o2, o3);\nconsole.log(obj); // { a: 1, b: 2, c: 3 }\nconsole.log(o1);  // { a: 1, b: 2, c: 3 }, target object itself is changed.\n\n```\n\nclonemerge\n\n\n``` javascript\n\nconst defaultOpt = {\n    title: 'hello', \n    name: 'oo', \n    type: 'line'\n};\n// \nconst opt1 = deepCopy(a);\nopt1.title = 'opt1';\nopt1.type = 'bar';\nopt1.extra = 'extra'; // \n// \nconst opt2 = Object.assign({}, a, {\n    title: 'opt2', \n    type: 'bar', \n    extra: 'extra'\n});\n\n```\n\nmerge\n\n\n``` javascript\n\nconst defaultOpt = {\n    title: {\n        text: 'hello world',\n        subtext: 'It\\'s my world.'\n    }\n};\n\nconst opt = Object.assign({}, defaultOpt, {\n    title: {\n        subtext: 'Yes, your world.'\n    }\n});\n\nconsole.log(opt);\n\n// \n{\n    title: {\n        text: 'hello world',\n        subtext: 'Yes, your world.'\n    }\n}\n// \n{\n    title: {\n        subtext: 'Yes, your world.'\n    }\n}\n\n```\n\nsubtext title merge \n\n\n``` javascript\n\nconst defaultOpt = {\n    title: {\n        text: 'hello world',\n        subtext: 'It\\'s my world.'\n    }\n};\n\nconst opt = Object.assign({}, defaultOpt);\nopt.title.subtext = 'Yes, your world.';\n\nconsole.log(opt);\n// \n{\n    title: {\n        text: 'hello world',\n        subtext: 'Yes, your world.'\n    }\n}\n```\n\n\n\n``` javascript\nconst defaultOpt = {\n    title: {\n        text: 'hello world',\n        subtext: 'It\\'s my world.'\n    } \n};\n\nconst opt1 = Object.assign({}, defaultOpt);\nconst opt2 = Object.assign({}, defaultOpt);\nopt2.title.subtext = 'Yes, your world.';\n\nconsole.log('opt1:');\nconsole.log(opt1);\nconsole.log('opt2:');\nconsole.log(opt2);\n\n// \nopt1:\n{\n    title: {\n        text: 'hello world',\n        subtext: 'Yes, your world.'\n    }\n}\nopt2:\n{\n    title: {\n        text: 'hello world',\n        subtext: 'Yes, your world.'\n    }\n}\n```\n\nopt1 subtext opt2  \ntitle   \n\n**Object.assign() **githubdeep-merge assignLodashapijqueryextendapi\n\n\n#### \n\n\n\n``` bash\nconst obj1 = JSON.parse(JSON.stringify(obj));\n``` \n\njsonfunction","source":"_posts/2017-04-11.md","raw":"---\ntitle: javascriptObject.assign()\ncomments: true\ndate: 2017-04-11 21:55:28\ntags: \n    - 'javascript'\n    - 'es6'\n---\n\n## \n\n\n,()\n\nObject.assign(target, ...sources)\n\n\n\n1. \n1. \n1. stringSymbol\n\ngettertargetsetter\n\n<!-- more -->\n\n## \n\nMDN\n\n### \n\no1targetsetter\n\n\n``` javascript\n\nvar o1 = { a: 1 };\nvar o2 = { b: 2 };\nvar o3 = { c: 3 };\n\nvar obj = Object.assign(o1, o2, o3);\nconsole.log(obj); // { a: 1, b: 2, c: 3 }\nconsole.log(o1);  // { a: 1, b: 2, c: 3 }, target object itself is changed.\n\n```\n\n### \n\n, Object.defineProperty Object.keys(),for-in.\n\nObject.assign\n\n\n``` javascript\n\nvar obj = Object.create({ foo: 1 }, { // foo is an inherit property.\n  bar: {\n    value: 2  // bar is a non-enumerable property.\n  },\n  baz: {\n    value: 3,\n    enumerable: true  // baz is an own enumerable property.\n  }\n});\n\nvar copy = Object.assign({}, obj);\nconsole.log(copy); // { baz: 3 } \n\n``` \n\n### \n\n:\n\n\n``` javascript\n\nvar target = Object.defineProperty({}, 'foo', {\n  value: 1,\n  writable: false\n}); \n\nObject.assign(target, { bar: 2 })\n\n//{bar: 2, foo: 1}\n\nObject.assign(target, { foo: 2 })\n//Uncaught TypeError: Cannot assign to read only property 'foo' of object '#<Object>'()\n\n``` \n\n\n## Polyfill\n\nes5Object.assign\n\n\n\nassignObject\n\n({},)\nObjectoutforin(hasOwnProperty)\n\n\n``` javascript\n\n if (typeof Object.assign != 'function') {\n  (function () {\n    Object.assign = function (target) {\n     'use strict';\n     if (target === undefined || target === null) {\n       throw new TypeError('Cannot convert undefined or null to object');\n     }\n    \n     var output = Object(target);\n     for (var index = 1; index < arguments.length; index++) {\n       var source = arguments[index];\n       if (source !== undefined && source !== null) {\n         for (var nextKey in source) {\n           if (source.hasOwnProperty(nextKey)) {\n             output[nextKey] = source[nextKey];\n           }\n         }\n       }\n     }\n     return output;\n    };\n})();\n}\n\n``` \n\n## \n\n### \n\njavascript\n\n\n``` javascript\n\n// \nconst a = {t: 1, p: 'gg'};\nconst b = a;\nb.t = 3;\nconsole.log(a); // {t: 3, p: 'gg'}\nconsole.log(b); // {t: 3, p: 'gg'}\n\n//\nconst c = {t: 1, p: 'gg'};\nconst d = deepCopy(c);\nd.t = 3;\nconsole.log(c); // {t: 1, p: 'gg'}\nconsole.log(d); // {t: 3, p: 'gg'}\n\n``` \n\n\n\nes6 Object.assign()  \n\n\n\n``` javascript\n\n// Cloning an object\nvar obj = { a: 1 };\nvar copy = Object.assign({}, obj);\nconsole.log(copy); // { a: 1 }\n\n// Merging objects\nvar o1 = { a: 1 };\nvar o2 = { b: 2 };\nvar o3 = { c: 3 };\n\nvar obj = Object.assign(o1, o2, o3);\nconsole.log(obj); // { a: 1, b: 2, c: 3 }\nconsole.log(o1);  // { a: 1, b: 2, c: 3 }, target object itself is changed.\n\n```\n\nclonemerge\n\n\n``` javascript\n\nconst defaultOpt = {\n    title: 'hello', \n    name: 'oo', \n    type: 'line'\n};\n// \nconst opt1 = deepCopy(a);\nopt1.title = 'opt1';\nopt1.type = 'bar';\nopt1.extra = 'extra'; // \n// \nconst opt2 = Object.assign({}, a, {\n    title: 'opt2', \n    type: 'bar', \n    extra: 'extra'\n});\n\n```\n\nmerge\n\n\n``` javascript\n\nconst defaultOpt = {\n    title: {\n        text: 'hello world',\n        subtext: 'It\\'s my world.'\n    }\n};\n\nconst opt = Object.assign({}, defaultOpt, {\n    title: {\n        subtext: 'Yes, your world.'\n    }\n});\n\nconsole.log(opt);\n\n// \n{\n    title: {\n        text: 'hello world',\n        subtext: 'Yes, your world.'\n    }\n}\n// \n{\n    title: {\n        subtext: 'Yes, your world.'\n    }\n}\n\n```\n\nsubtext title merge \n\n\n``` javascript\n\nconst defaultOpt = {\n    title: {\n        text: 'hello world',\n        subtext: 'It\\'s my world.'\n    }\n};\n\nconst opt = Object.assign({}, defaultOpt);\nopt.title.subtext = 'Yes, your world.';\n\nconsole.log(opt);\n// \n{\n    title: {\n        text: 'hello world',\n        subtext: 'Yes, your world.'\n    }\n}\n```\n\n\n\n``` javascript\nconst defaultOpt = {\n    title: {\n        text: 'hello world',\n        subtext: 'It\\'s my world.'\n    } \n};\n\nconst opt1 = Object.assign({}, defaultOpt);\nconst opt2 = Object.assign({}, defaultOpt);\nopt2.title.subtext = 'Yes, your world.';\n\nconsole.log('opt1:');\nconsole.log(opt1);\nconsole.log('opt2:');\nconsole.log(opt2);\n\n// \nopt1:\n{\n    title: {\n        text: 'hello world',\n        subtext: 'Yes, your world.'\n    }\n}\nopt2:\n{\n    title: {\n        text: 'hello world',\n        subtext: 'Yes, your world.'\n    }\n}\n```\n\nopt1 subtext opt2  \ntitle   \n\n**Object.assign() **githubdeep-merge assignLodashapijqueryextendapi\n\n\n#### \n\n\n\n``` bash\nconst obj1 = JSON.parse(JSON.stringify(obj));\n``` \n\njsonfunction","slug":"2017-04-11","published":1,"updated":"2017-08-26T12:58:33.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1va00002fdldtvkuz41d","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>,()</p>\n<p>Object.assign(target, sources)</p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li>stringSymbol</li>\n</ol>\n<p>gettertargetsetter</p>\n<a id=\"more\"></a>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>MDN</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>o1targetsetter</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> o1 = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> o2 = &#123; <span class=\"attr\">b</span>: <span class=\"number\">2</span> &#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> o3 = &#123; <span class=\"attr\">c</span>: <span class=\"number\">3</span> &#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"built_in\">Object</span>.assign(o1, o2, o3);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj); <span class=\"comment\">// &#123; a: 1, b: 2, c: 3 &#125;</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(o1);  <span class=\"comment\">// &#123; a: 1, b: 2, c: 3 &#125;, target object itself is changed.</span></div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>, Object.defineProperty Object.keys(),for-in.</p>\n<p>Object.assign</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"built_in\">Object</span>.create(&#123; <span class=\"attr\">foo</span>: <span class=\"number\">1</span> &#125;, &#123; <span class=\"comment\">// foo is an inherit property.</span></div><div class=\"line\">  bar: &#123;</div><div class=\"line\">    value: <span class=\"number\">2</span>  <span class=\"comment\">// bar is a non-enumerable property.</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  baz: &#123;</div><div class=\"line\">    value: <span class=\"number\">3</span>,</div><div class=\"line\">    enumerable: <span class=\"literal\">true</span>  <span class=\"comment\">// baz is an own enumerable property.</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> copy = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, obj);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(copy); <span class=\"comment\">// &#123; baz: 3 &#125; </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">### </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">:</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> target = <span class=\"built_in\">Object</span>.defineProperty(&#123;&#125;, <span class=\"string\">'foo'</span>, &#123;</div><div class=\"line\">  value: <span class=\"number\">1</span>,</div><div class=\"line\">  writable: <span class=\"literal\">false</span></div><div class=\"line\">&#125;); </div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Object</span>.assign(target, &#123; <span class=\"attr\">bar</span>: <span class=\"number\">2</span> &#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//&#123;bar: 2, foo: 1&#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Object</span>.assign(target, &#123; <span class=\"attr\">foo</span>: <span class=\"number\">2</span> &#125;)</div><div class=\"line\"><span class=\"comment\">//Uncaught TypeError: Cannot assign to read only property 'foo' of object '#&lt;Object&gt;'()</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">## Polyfill</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">es5Object.assign</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">assignObject</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">(&#123;&#125;,)</span></div><div class=\"line\"><span class=\"string\">Objectoutforin(hasOwnProperty)</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"></div><div class=\"line\"> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">Object</span>.assign != <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">  (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">Object</span>.assign = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target</span>) </span>&#123;</div><div class=\"line\"><span class=\"meta\">     'use strict'</span>;</div><div class=\"line\">     <span class=\"keyword\">if</span> (target === <span class=\"literal\">undefined</span> || target === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">       <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'Cannot convert undefined or null to object'</span>);</div><div class=\"line\">     &#125;</div><div class=\"line\">    </div><div class=\"line\">     <span class=\"keyword\">var</span> output = <span class=\"built_in\">Object</span>(target);</div><div class=\"line\">     <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">1</span>; index &lt; <span class=\"built_in\">arguments</span>.length; index++) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> source = <span class=\"built_in\">arguments</span>[index];</div><div class=\"line\">       <span class=\"keyword\">if</span> (source !== <span class=\"literal\">undefined</span> &amp;&amp; source !== <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">         <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> nextKey <span class=\"keyword\">in</span> source) &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (source.hasOwnProperty(nextKey)) &#123;</div><div class=\"line\">             output[nextKey] = source[nextKey];</div><div class=\"line\">           &#125;</div><div class=\"line\">         &#125;</div><div class=\"line\">       &#125;</div><div class=\"line\">     &#125;</div><div class=\"line\">     <span class=\"keyword\">return</span> output;</div><div class=\"line\">    &#125;;</div><div class=\"line\">&#125;)();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">## </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">### </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">javascript</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> a = &#123;<span class=\"attr\">t</span>: <span class=\"number\">1</span>, <span class=\"attr\">p</span>: <span class=\"string\">'gg'</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">const</span> b = a;</div><div class=\"line\">b.t = <span class=\"number\">3</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">// &#123;t: 3, p: 'gg'&#125;</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b); <span class=\"comment\">// &#123;t: 3, p: 'gg'&#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">const</span> c = &#123;<span class=\"attr\">t</span>: <span class=\"number\">1</span>, <span class=\"attr\">p</span>: <span class=\"string\">'gg'</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">const</span> d = deepCopy(c);</div><div class=\"line\">d.t = <span class=\"number\">3</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(c); <span class=\"comment\">// &#123;t: 1, p: 'gg'&#125;</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(d); <span class=\"comment\">// &#123;t: 3, p: 'gg'&#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">es6 Object.assign()  </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Cloning an object</span></div><div class=\"line\"><span class=\"keyword\">var</span> obj = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> copy = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, obj);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(copy); <span class=\"comment\">// &#123; a: 1 &#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Merging objects</span></div><div class=\"line\"><span class=\"keyword\">var</span> o1 = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> o2 = &#123; <span class=\"attr\">b</span>: <span class=\"number\">2</span> &#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> o3 = &#123; <span class=\"attr\">c</span>: <span class=\"number\">3</span> &#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"built_in\">Object</span>.assign(o1, o2, o3);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj); <span class=\"comment\">// &#123; a: 1, b: 2, c: 3 &#125;</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(o1);  <span class=\"comment\">// &#123; a: 1, b: 2, c: 3 &#125;, target object itself is changed.</span></div></pre></td></tr></table></figure>\n<p>clonemerge</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> defaultOpt = &#123;</div><div class=\"line\">    title: <span class=\"string\">'hello'</span>, </div><div class=\"line\">    name: <span class=\"string\">'oo'</span>, </div><div class=\"line\">    type: <span class=\"string\">'line'</span></div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> opt1 = deepCopy(a);</div><div class=\"line\">opt1.title = <span class=\"string\">'opt1'</span>;</div><div class=\"line\">opt1.type = <span class=\"string\">'bar'</span>;</div><div class=\"line\">opt1.extra = <span class=\"string\">'extra'</span>; <span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> opt2 = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, a, &#123;</div><div class=\"line\">    title: <span class=\"string\">'opt2'</span>, </div><div class=\"line\">    type: <span class=\"string\">'bar'</span>, </div><div class=\"line\">    extra: <span class=\"string\">'extra'</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>merge</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> defaultOpt = &#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'It\\'s my world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> opt = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, defaultOpt, &#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(opt);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">&#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">&#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>subtext title merge<br></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> defaultOpt = &#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'It\\'s my world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> opt = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, defaultOpt);</div><div class=\"line\">opt.title.subtext = <span class=\"string\">'Yes, your world.'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(opt);</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">&#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> defaultOpt = &#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'It\\'s my world.'</span></div><div class=\"line\">    &#125; </div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> opt1 = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, defaultOpt);</div><div class=\"line\"><span class=\"keyword\">const</span> opt2 = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, defaultOpt);</div><div class=\"line\">opt2.title.subtext = <span class=\"string\">'Yes, your world.'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'opt1:'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(opt1);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'opt2:'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(opt2);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">opt1:</div><div class=\"line\">&#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">opt2:</div><div class=\"line\">&#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>opt1 subtext opt2 <br>title   </p>\n<p><strong>Object.assign() </strong>githubdeep-merge assignLodashapijqueryextendapi</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<pre><code class=\"bash\">const obj1 = JSON.parse(JSON.stringify(obj));\n</code></pre>\n<p>jsonfunction</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br>,()</p>\n<p>Object.assign(target, sources)</p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li>stringSymbol</li>\n</ol>\n<p>gettertargetsetter</p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>MDN</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>o1targetsetter</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> o1 = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> o2 = &#123; <span class=\"attr\">b</span>: <span class=\"number\">2</span> &#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> o3 = &#123; <span class=\"attr\">c</span>: <span class=\"number\">3</span> &#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"built_in\">Object</span>.assign(o1, o2, o3);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj); <span class=\"comment\">// &#123; a: 1, b: 2, c: 3 &#125;</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(o1);  <span class=\"comment\">// &#123; a: 1, b: 2, c: 3 &#125;, target object itself is changed.</span></div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>, Object.defineProperty Object.keys(),for-in.</p>\n<p>Object.assign</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"built_in\">Object</span>.create(&#123; <span class=\"attr\">foo</span>: <span class=\"number\">1</span> &#125;, &#123; <span class=\"comment\">// foo is an inherit property.</span></div><div class=\"line\">  bar: &#123;</div><div class=\"line\">    value: <span class=\"number\">2</span>  <span class=\"comment\">// bar is a non-enumerable property.</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  baz: &#123;</div><div class=\"line\">    value: <span class=\"number\">3</span>,</div><div class=\"line\">    enumerable: <span class=\"literal\">true</span>  <span class=\"comment\">// baz is an own enumerable property.</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> copy = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, obj);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(copy); <span class=\"comment\">// &#123; baz: 3 &#125; </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">### </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">:</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> target = <span class=\"built_in\">Object</span>.defineProperty(&#123;&#125;, <span class=\"string\">'foo'</span>, &#123;</div><div class=\"line\">  value: <span class=\"number\">1</span>,</div><div class=\"line\">  writable: <span class=\"literal\">false</span></div><div class=\"line\">&#125;); </div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Object</span>.assign(target, &#123; <span class=\"attr\">bar</span>: <span class=\"number\">2</span> &#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//&#123;bar: 2, foo: 1&#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Object</span>.assign(target, &#123; <span class=\"attr\">foo</span>: <span class=\"number\">2</span> &#125;)</div><div class=\"line\"><span class=\"comment\">//Uncaught TypeError: Cannot assign to read only property 'foo' of object '#&lt;Object&gt;'()</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">## Polyfill</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">es5Object.assign</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">assignObject</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">(&#123;&#125;,)</span></div><div class=\"line\"><span class=\"string\">Objectoutforin(hasOwnProperty)</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"></div><div class=\"line\"> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">Object</span>.assign != <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">  (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">Object</span>.assign = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target</span>) </span>&#123;</div><div class=\"line\"><span class=\"meta\">     'use strict'</span>;</div><div class=\"line\">     <span class=\"keyword\">if</span> (target === <span class=\"literal\">undefined</span> || target === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">       <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'Cannot convert undefined or null to object'</span>);</div><div class=\"line\">     &#125;</div><div class=\"line\">    </div><div class=\"line\">     <span class=\"keyword\">var</span> output = <span class=\"built_in\">Object</span>(target);</div><div class=\"line\">     <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">1</span>; index &lt; <span class=\"built_in\">arguments</span>.length; index++) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> source = <span class=\"built_in\">arguments</span>[index];</div><div class=\"line\">       <span class=\"keyword\">if</span> (source !== <span class=\"literal\">undefined</span> &amp;&amp; source !== <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">         <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> nextKey <span class=\"keyword\">in</span> source) &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (source.hasOwnProperty(nextKey)) &#123;</div><div class=\"line\">             output[nextKey] = source[nextKey];</div><div class=\"line\">           &#125;</div><div class=\"line\">         &#125;</div><div class=\"line\">       &#125;</div><div class=\"line\">     &#125;</div><div class=\"line\">     <span class=\"keyword\">return</span> output;</div><div class=\"line\">    &#125;;</div><div class=\"line\">&#125;)();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">## </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">### </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">javascript</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> a = &#123;<span class=\"attr\">t</span>: <span class=\"number\">1</span>, <span class=\"attr\">p</span>: <span class=\"string\">'gg'</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">const</span> b = a;</div><div class=\"line\">b.t = <span class=\"number\">3</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">// &#123;t: 3, p: 'gg'&#125;</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b); <span class=\"comment\">// &#123;t: 3, p: 'gg'&#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">const</span> c = &#123;<span class=\"attr\">t</span>: <span class=\"number\">1</span>, <span class=\"attr\">p</span>: <span class=\"string\">'gg'</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">const</span> d = deepCopy(c);</div><div class=\"line\">d.t = <span class=\"number\">3</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(c); <span class=\"comment\">// &#123;t: 1, p: 'gg'&#125;</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(d); <span class=\"comment\">// &#123;t: 3, p: 'gg'&#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">es6 Object.assign()  </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Cloning an object</span></div><div class=\"line\"><span class=\"keyword\">var</span> obj = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> copy = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, obj);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(copy); <span class=\"comment\">// &#123; a: 1 &#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Merging objects</span></div><div class=\"line\"><span class=\"keyword\">var</span> o1 = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> o2 = &#123; <span class=\"attr\">b</span>: <span class=\"number\">2</span> &#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> o3 = &#123; <span class=\"attr\">c</span>: <span class=\"number\">3</span> &#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"built_in\">Object</span>.assign(o1, o2, o3);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj); <span class=\"comment\">// &#123; a: 1, b: 2, c: 3 &#125;</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(o1);  <span class=\"comment\">// &#123; a: 1, b: 2, c: 3 &#125;, target object itself is changed.</span></div></pre></td></tr></table></figure>\n<p>clonemerge</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> defaultOpt = &#123;</div><div class=\"line\">    title: <span class=\"string\">'hello'</span>, </div><div class=\"line\">    name: <span class=\"string\">'oo'</span>, </div><div class=\"line\">    type: <span class=\"string\">'line'</span></div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> opt1 = deepCopy(a);</div><div class=\"line\">opt1.title = <span class=\"string\">'opt1'</span>;</div><div class=\"line\">opt1.type = <span class=\"string\">'bar'</span>;</div><div class=\"line\">opt1.extra = <span class=\"string\">'extra'</span>; <span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> opt2 = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, a, &#123;</div><div class=\"line\">    title: <span class=\"string\">'opt2'</span>, </div><div class=\"line\">    type: <span class=\"string\">'bar'</span>, </div><div class=\"line\">    extra: <span class=\"string\">'extra'</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>merge</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> defaultOpt = &#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'It\\'s my world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> opt = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, defaultOpt, &#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(opt);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">&#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">&#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>subtext title merge<br></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> defaultOpt = &#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'It\\'s my world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> opt = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, defaultOpt);</div><div class=\"line\">opt.title.subtext = <span class=\"string\">'Yes, your world.'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(opt);</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">&#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> defaultOpt = &#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'It\\'s my world.'</span></div><div class=\"line\">    &#125; </div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> opt1 = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, defaultOpt);</div><div class=\"line\"><span class=\"keyword\">const</span> opt2 = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, defaultOpt);</div><div class=\"line\">opt2.title.subtext = <span class=\"string\">'Yes, your world.'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'opt1:'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(opt1);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'opt2:'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(opt2);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">opt1:</div><div class=\"line\">&#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">opt2:</div><div class=\"line\">&#123;</div><div class=\"line\">    title: &#123;</div><div class=\"line\">        text: <span class=\"string\">'hello world'</span>,</div><div class=\"line\">        subtext: <span class=\"string\">'Yes, your world.'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>opt1 subtext opt2 <br>title   </p>\n<p><strong>Object.assign() </strong>githubdeep-merge assignLodashapijqueryextendapi</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<pre><code class=\"bash\">const obj1 = JSON.parse(JSON.stringify(obj));\n</code></pre>\n<p>jsonfunction</p>"},{"title":"nodejsprocess.nextTick","comments":1,"toc":true,"date":"2017-04-04T09:49:45.000Z","_content":"nodejsprocessnextTickvuenextTicknextTick\n\nNode.jsIOCPUnode.jsIOCPUIOnode.jsIO\n\n<!-- more -->\n\n## \n\n callback ****setTimeout(fn, 0) \n\nprocess.nextTick()foo()\n\n``` javascript\nfunction foo() {\n    console.error('foo');\n}\nprocess.nextTick(foo);\nconsole.error('bar');\n```\n\n\"bar\"foofoo()\n\n``` javascript\nbar\nfoo\n```\n\nsetTimeout()\n\n``` javascript\nsetTimeout(foo, 0);\nconsole.log('bar');\n```\n\nprocess.nextTick()setTimeout(fn, 0)process.nextTick()process.nextTick()netxTicknextTick\n\n## \n#### CPU\n\ncompute()\n\nwebserverprocess.nextTick()compute()\n\n``` javascript\nvar http = require('http');\nfunction compute() {\n    // performs complicated calculations continuously\n   // ...\n    process.nextTick(compute);\n}\nhttp.createServer(function(req, res) {\n     res.writeHead(200, {'Content-Type': 'text/plain'});\n     res.end('Hello World');\n}).listen(5000, '127.0.0.1');\ncompute();\n```\n\ncompute()process.nextTick()compute()httpcompute()compute()compute()http\n\nprocess.nextTick()CPUCPU\n\n#### \n\n\n\n``` javascript\nfunction maybeSync(arg, cb) {\n  if (arg) {\n    cb();\n    return;\n  }\n\n  fs.stat('file', cb);\n}\nmaybeSync(true, function() {\n  foo();\n});\nbar();\n```\n, foo()bar()nextTick\n\n``` javascript\nfunction definitelyAsync(arg, cb) {\n  if (arg) {\n    process.nextTick(cb);\n    return;\n  }\n\t\n  fs.stat('file', cb);\n}\n```\t\n\n#### \n\n\n\n``` javascript\nvar EventEmitter = require('events').EventEmitter;\nfunction StreamLibrary(resourceName) { \n    this.emit('start');\n    // read from the file, and for every chunk read, do:       \n    this.emit('data', chunkRead);      \n}\nStreamLibrary.prototype.__proto__ = EventEmitter.prototype;   // inherit from EventEmitter\n```\t\n\n\n\n``` javascript\nvar stream = new StreamLibrary('fooResource');\nstream.on('start', function() {\n    console.log('Reading has started');\n});\nstream.on('data', function(chunk) {\n    console.log('Received: ' + chunk);\n});\n```\t\n\nstartstartprocess.nextTick()\n\n``` javascript\nfunction StreamLibrary(resourceName) {\n    var self = this;\n    process.nextTick(function() {\n        self.emit('start');\n    });\n    // read from the file, and for every chunk read, do:       \n    this.emit('data', chunkRead);\n}\n```\t","source":"_posts/2017-04-04.md","raw":"---\ntitle: nodejsprocess.nextTick\ncomments: true\ntoc: true\ndate: 2017-04-04 17:49:45\ntags: \n    - 'javascript'\n    - 'node'\n---\nnodejsprocessnextTickvuenextTicknextTick\n\nNode.jsIOCPUnode.jsIOCPUIOnode.jsIO\n\n<!-- more -->\n\n## \n\n callback ****setTimeout(fn, 0) \n\nprocess.nextTick()foo()\n\n``` javascript\nfunction foo() {\n    console.error('foo');\n}\nprocess.nextTick(foo);\nconsole.error('bar');\n```\n\n\"bar\"foofoo()\n\n``` javascript\nbar\nfoo\n```\n\nsetTimeout()\n\n``` javascript\nsetTimeout(foo, 0);\nconsole.log('bar');\n```\n\nprocess.nextTick()setTimeout(fn, 0)process.nextTick()process.nextTick()netxTicknextTick\n\n## \n#### CPU\n\ncompute()\n\nwebserverprocess.nextTick()compute()\n\n``` javascript\nvar http = require('http');\nfunction compute() {\n    // performs complicated calculations continuously\n   // ...\n    process.nextTick(compute);\n}\nhttp.createServer(function(req, res) {\n     res.writeHead(200, {'Content-Type': 'text/plain'});\n     res.end('Hello World');\n}).listen(5000, '127.0.0.1');\ncompute();\n```\n\ncompute()process.nextTick()compute()httpcompute()compute()compute()http\n\nprocess.nextTick()CPUCPU\n\n#### \n\n\n\n``` javascript\nfunction maybeSync(arg, cb) {\n  if (arg) {\n    cb();\n    return;\n  }\n\n  fs.stat('file', cb);\n}\nmaybeSync(true, function() {\n  foo();\n});\nbar();\n```\n, foo()bar()nextTick\n\n``` javascript\nfunction definitelyAsync(arg, cb) {\n  if (arg) {\n    process.nextTick(cb);\n    return;\n  }\n\t\n  fs.stat('file', cb);\n}\n```\t\n\n#### \n\n\n\n``` javascript\nvar EventEmitter = require('events').EventEmitter;\nfunction StreamLibrary(resourceName) { \n    this.emit('start');\n    // read from the file, and for every chunk read, do:       \n    this.emit('data', chunkRead);      \n}\nStreamLibrary.prototype.__proto__ = EventEmitter.prototype;   // inherit from EventEmitter\n```\t\n\n\n\n``` javascript\nvar stream = new StreamLibrary('fooResource');\nstream.on('start', function() {\n    console.log('Reading has started');\n});\nstream.on('data', function(chunk) {\n    console.log('Received: ' + chunk);\n});\n```\t\n\nstartstartprocess.nextTick()\n\n``` javascript\nfunction StreamLibrary(resourceName) {\n    var self = this;\n    process.nextTick(function() {\n        self.emit('start');\n    });\n    // read from the file, and for every chunk read, do:       \n    this.emit('data', chunkRead);\n}\n```\t","slug":"2017-04-04","published":1,"updated":"2017-09-02T13:01:17.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1va30004fdlde60yyijk","content":"<p>nodejsprocessnextTickvuenextTicknextTick</p>\n<p>Node.jsIOCPUnode.jsIOCPUIOnode.jsIO</p>\n<a id=\"more\"></a>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> callback <strong></strong>setTimeout(fn, 0) </p>\n<p>process.nextTick()foo()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.error(<span class=\"string\">'foo'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\">process.nextTick(foo);</div><div class=\"line\"><span class=\"built_in\">console</span>.error(<span class=\"string\">'bar'</span>);</div></pre></td></tr></table></figure>\n<p>barfoofoo()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">bar</div><div class=\"line\">foo</div></pre></td></tr></table></figure>\n<p>setTimeout()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(foo, <span class=\"number\">0</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'bar'</span>);</div></pre></td></tr></table></figure>\n<p>process.nextTick()setTimeout(fn, 0)process.nextTick()process.nextTick()netxTicknextTick</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h4 id=\"CPU\"><a href=\"#CPU\" class=\"headerlink\" title=\"CPU\"></a>CPU</h4><p>compute()</p>\n<p>webserverprocess.nextTick()compute()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compute</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// performs complicated calculations continuously</span></div><div class=\"line\">   <span class=\"comment\">// ...</span></div><div class=\"line\">    process.nextTick(compute);</div><div class=\"line\">&#125;</div><div class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</div><div class=\"line\">     res.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/plain'</span>&#125;);</div><div class=\"line\">     res.end(<span class=\"string\">'Hello World'</span>);</div><div class=\"line\">&#125;).listen(<span class=\"number\">5000</span>, <span class=\"string\">'127.0.0.1'</span>);</div><div class=\"line\">compute();</div></pre></td></tr></table></figure>\n<p>compute()process.nextTick()compute()httpcompute()compute()compute()http</p>\n<p>process.nextTick()CPUCPU</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">maybeSync</span>(<span class=\"params\">arg, cb</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (arg) &#123;</div><div class=\"line\">    cb();</div><div class=\"line\">    <span class=\"keyword\">return</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  fs.stat(<span class=\"string\">'file'</span>, cb);</div><div class=\"line\">&#125;</div><div class=\"line\">maybeSync(<span class=\"literal\">true</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  foo();</div><div class=\"line\">&#125;);</div><div class=\"line\">bar();</div></pre></td></tr></table></figure>\n<p>, foo()bar()nextTick</p>\n<pre><code class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">definitelyAsync</span>(<span class=\"params\">arg, cb</span>) </span>{\n  <span class=\"keyword\">if</span> (arg) {\n    process.nextTick(cb);\n    <span class=\"keyword\">return</span>;\n  }\n\n  fs.stat(<span class=\"string\">'file'</span>, cb);\n}\n</code></pre>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<pre><code class=\"javascript\"><span class=\"keyword\">var</span> EventEmitter = <span class=\"built_in\">require</span>(<span class=\"string\">'events'</span>).EventEmitter;\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">StreamLibrary</span>(<span class=\"params\">resourceName</span>) </span>{ \n    <span class=\"keyword\">this</span>.emit(<span class=\"string\">'start'</span>);\n    <span class=\"comment\">// read from the file, and for every chunk read, do:       </span>\n    <span class=\"keyword\">this</span>.emit(<span class=\"string\">'data'</span>, chunkRead);      \n}\nStreamLibrary.prototype.__proto__ = EventEmitter.prototype;   <span class=\"comment\">// inherit from EventEmitter</span>\n</code></pre>\n<p></p>\n<pre><code class=\"javascript\"><span class=\"keyword\">var</span> stream = <span class=\"keyword\">new</span> StreamLibrary(<span class=\"string\">'fooResource'</span>);\nstream.on(<span class=\"string\">'start'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>{\n    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Reading has started'</span>);\n});\nstream.on(<span class=\"string\">'data'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">chunk</span>) </span>{\n    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Received: '</span> + chunk);\n});\n</code></pre>\n<p>startstartprocess.nextTick()</p>\n<pre><code class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">StreamLibrary</span>(<span class=\"params\">resourceName</span>) </span>{\n    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;\n    process.nextTick(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>{\n        self.emit(<span class=\"string\">'start'</span>);\n    });\n    <span class=\"comment\">// read from the file, and for every chunk read, do:       </span>\n    <span class=\"keyword\">this</span>.emit(<span class=\"string\">'data'</span>, chunkRead);\n}\n</code></pre>\n","site":{"data":{}},"excerpt":"<p>nodejsprocessnextTickvuenextTicknextTick</p>\n<p>Node.jsIOCPUnode.jsIOCPUIOnode.jsIO</p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> callback <strong></strong>setTimeout(fn, 0) </p>\n<p>process.nextTick()foo()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.error(<span class=\"string\">'foo'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\">process.nextTick(foo);</div><div class=\"line\"><span class=\"built_in\">console</span>.error(<span class=\"string\">'bar'</span>);</div></pre></td></tr></table></figure>\n<p>barfoofoo()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">bar</div><div class=\"line\">foo</div></pre></td></tr></table></figure>\n<p>setTimeout()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(foo, <span class=\"number\">0</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'bar'</span>);</div></pre></td></tr></table></figure>\n<p>process.nextTick()setTimeout(fn, 0)process.nextTick()process.nextTick()netxTicknextTick</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h4 id=\"CPU\"><a href=\"#CPU\" class=\"headerlink\" title=\"CPU\"></a>CPU</h4><p>compute()</p>\n<p>webserverprocess.nextTick()compute()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compute</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// performs complicated calculations continuously</span></div><div class=\"line\">   <span class=\"comment\">// ...</span></div><div class=\"line\">    process.nextTick(compute);</div><div class=\"line\">&#125;</div><div class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</div><div class=\"line\">     res.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/plain'</span>&#125;);</div><div class=\"line\">     res.end(<span class=\"string\">'Hello World'</span>);</div><div class=\"line\">&#125;).listen(<span class=\"number\">5000</span>, <span class=\"string\">'127.0.0.1'</span>);</div><div class=\"line\">compute();</div></pre></td></tr></table></figure>\n<p>compute()process.nextTick()compute()httpcompute()compute()compute()http</p>\n<p>process.nextTick()CPUCPU</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">maybeSync</span>(<span class=\"params\">arg, cb</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (arg) &#123;</div><div class=\"line\">    cb();</div><div class=\"line\">    <span class=\"keyword\">return</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  fs.stat(<span class=\"string\">'file'</span>, cb);</div><div class=\"line\">&#125;</div><div class=\"line\">maybeSync(<span class=\"literal\">true</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  foo();</div><div class=\"line\">&#125;);</div><div class=\"line\">bar();</div></pre></td></tr></table></figure>\n<p>, foo()bar()nextTick</p>\n<pre><code class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">definitelyAsync</span>(<span class=\"params\">arg, cb</span>) </span>{\n  <span class=\"keyword\">if</span> (arg) {\n    process.nextTick(cb);\n    <span class=\"keyword\">return</span>;\n  }\n\n  fs.stat(<span class=\"string\">'file'</span>, cb);\n}\n</code></pre>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<pre><code class=\"javascript\"><span class=\"keyword\">var</span> EventEmitter = <span class=\"built_in\">require</span>(<span class=\"string\">'events'</span>).EventEmitter;\n<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">StreamLibrary</span>(<span class=\"params\">resourceName</span>) </span>{ \n    <span class=\"keyword\">this</span>.emit(<span class=\"string\">'start'</span>);\n    <span class=\"comment\">// read from the file, and for every chunk read, do:       </span>\n    <span class=\"keyword\">this</span>.emit(<span class=\"string\">'data'</span>, chunkRead);      \n}\nStreamLibrary.prototype.__proto__ = EventEmitter.prototype;   <span class=\"comment\">// inherit from EventEmitter</span>\n</code></pre>\n<p></p>\n<pre><code class=\"javascript\"><span class=\"keyword\">var</span> stream = <span class=\"keyword\">new</span> StreamLibrary(<span class=\"string\">'fooResource'</span>);\nstream.on(<span class=\"string\">'start'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>{\n    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Reading has started'</span>);\n});\nstream.on(<span class=\"string\">'data'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">chunk</span>) </span>{\n    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Received: '</span> + chunk);\n});\n</code></pre>\n<p>startstartprocess.nextTick()</p>\n<pre><code class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">StreamLibrary</span>(<span class=\"params\">resourceName</span>) </span>{\n    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;\n    process.nextTick(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>{\n        self.emit(<span class=\"string\">'start'</span>);\n    });\n    <span class=\"comment\">// read from the file, and for every chunk read, do:       </span>\n    <span class=\"keyword\">this</span>.emit(<span class=\"string\">'data'</span>, chunkRead);\n}\n</code></pre>"},{"title":"axios","comments":1,"date":"2017-05-02T10:56:15.000Z","_content":"\naxios4.2Promiseaxiosvue\n\n``` javascript\nrequire('es6-promise').polyfill();\n```\n\n> GET\n\n``` javascript\n//ID\naxios.get('/user?ID=12345')\n  .then(function(response){\n    console.log(response);\n  })\n  .catch(function(err){\n    console.log(err);\n  });\n//\naxios.get('/user',{\n  params:{\n    ID:12345\n  }\n})\n.then(function(response){\n  console.log(response);\n})\n.catch(function(err){\n  console.log(err);\n});\n```\n\n<!-- more -->\n\n> POST\n\n``` javascript\naxios.post('/user',{\n  firstName:'Fred',\n  lastName:'Flintstone'\n})\n.then(function(res){\n  console.log(res);\n})\n.catch(function(err){\n  console.log(err);\n});\n```\n\n>\n\n``` javascript\nfunction getUserAccount(){\n  return axios.get('/user/12345');\n}\nfunction getUserPermissions(){\n  return axios.get('/user/12345/permissions');\n}\naxios.all([getUserAccount(),getUserPermissions()])\n  .then(axios.spread(function(acct,perms){\n    //\n  }))\n```\n\n>axiosconfig\n\n``` javascript\n//`POST`\naxios({\n    method:\"POST\",\n    url:'/user/12345',\n    data:{\n        firstName:\"Fred\",\n        lastName:\"Flintstone\"\n    }\n});\n```\n\n>,url,method,data\n\n``` javascript\naxios.request(config);\naxios.get(url[,config]);\naxios.delete(url[,config]);\naxios.head(url[,config]);\naxios.post(url[,data[,config]]);\naxios.put(url[,data[,config]])\naxios.patch(url[,data[,config]])\n```\n\n>concurrency,\n\n``` javascript\n//iterable\naxios.all(iterable)\n//callback\naxios.spread(callback)\n```\n\n>axios\n\n1axios.create([config])\n``` javascript\nvar instance = axios.create({\n  baseURL:\"https://some-domain.com/api/\",\n  timeout:1000,\n  headers: {'X-Custom-Header':'foobar'}\n});\n```\n\n2create\n``` javascript\naxios#request(config)\naxios#get(url[,config])\naxios#delete(url[,config])\naxios#head(url[,config])\naxios#post(url[,data[,config]])\naxios#put(url[,data[,config]])\naxios#patch(url[,data[,config]])\n```\n\n>request configurlmethodGET\n\n``` javascript\n{\n  //`url`\n  url:'/user',\n  //`method`\n  method:'get'//default\n  //`url``baseURL``url`\n  //`url``baseURL`\n  baseURL:'https://some-domain.com/api/',\n  //`transformRequest`\n  //`put/post/patch`\n  //-`ArrayBuffer``Stream`\n  transformRequest:[function(data){\n    //\n    return data;\n  }],\n  //`transformResponse``then/catch`\n  transformResponse:[function(data){\n    //\n    return data;\n  }],\n  //`headers`\n  headers: {'X-Requested-With':'XMLHttpRequest'},\n  //`params`----URL\n  //URLSearchParams\n  params: {\n    ID:12345\n  },\n  //`paramsSerializer`params\n  //(https://www.npmjs.com/package/qs,http://api.jquery.com/jquery.param)\n  paramsSerializer: function(params){\n    return Qs.stringify(params,{arrayFormat:'brackets'})\n  },\n  //`data`\n  //`put/post/patch`\n  //`transformRequest`dada\n  //string/plain/object/ArrayBuffer/ArrayBufferView/URLSearchParams\n  //FormData/File/Bold\n  //node:Stream\n  data {\n    firstName:\"Fred\"\n  },\n  //`timeout`\n  //\n\n  timeout:1000,\n  //`withCredentails`\n  \n  withCredentials:false,//default\n  //`adapter`\n  //promise,\n  adapter: function(config){\n    /*..........*/\n  },\n  //`auth`HTTP\n  //authorizationheader,headerAuthorization\n  auth: {\n    username:\"zhangsan\",\n    password: \"s00sdkf\"\n  },\n  //\n  //arraybuffer,blob,document,json,text,stream\n  responseType:'json',//default\n  //\n  xsrfCookieName: 'XSRF-TOKEN',//default\n  xsrfHeaderName:'X-XSRF-TOKEN',//default\n  //`onUploadProgress`\n  onUploadProgress:function(progressEvent){\n    //\nonDownloadProgress:function(progressEvent){\n}\n  },\n  //\n  maxContentLength:2000,\n  //`validateStatus`httpresolvereject promise\n  //`validateStatus`true(`null``undefined`),promiseresolved,rejected\n  validateStatus:function(status){\n    return status >= 200 && status <300;//default\n  },\n  //`maxRedirects`nodejs\n  maxRedirects: 5,//default\n  //`httpAgent/httpsAgent`http/https\n  //keeyAlive\n  httpAgent: new http.Agent({keeyAlive:true}),\n  httpsAgent: new https.Agent({keeyAlive:true}),\n  //proxy\n  //`auth`httpproxy\n  //`Proxy-Authorization` header,`Proxy-Authorization`  header\n  proxy: {\n    host:'127.0.0.1',\n    port: 9000,\n    auth: {\n      username:'skda',\n      password:'radsd'\n    }\n  },\n  //`cancelToken`cancel token\n  //cancelation\n  cancelToken: new cancelToken(function(cancel){\n\n  })\n}\n```\n\n >\n\n``` javascript\n {\n  data:{},\n  status:200,\n  //http\n  statusText:'OK',\n  //\n  headers: {},\n  //`config`\n  config: {}\n}\n```\n\n>\n\n1\n``` javascript\naxios.defaults.baseURL = 'http://api.exmple.com';\naxios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\naxios.defaults.headers.post['content-Type'] = 'appliction/x-www-form-urlencoded';\n```\n\n2\n``` javascript\n//\nvar instance = axios.create({\n    baseURL: 'https://api.example.com'\n});\n\n//\ninstance.defaults.headers.common[\"Authorization\"] = AUTH_TOKEN;\n```\n\n3configlib/defauts.jsconfig\n``` javascript\n//libray\n//timeout0libray\nvar instance = axios.create();\n//library\n//2.5S\ninstance.defaults.timeout = 2500;\n//timeout2.5S5s\ninstance.get('/longRequest',{\n  timeout: 5000\n});\n```\n\n>\n\n1then/catch\n``` javascript\n//\naxios.interceptors.request.use(function(config){\n  //\n  return config;\n},function(err){\n  //Do something with request error\n  return Promise.reject(error);\n});\n//\naxios.interceptors.response.use(function(res){\n  //\n  return res;\n},function(err){\n  //Do something with response error\n  return Promise.reject(error);\n})\n```\n\n2\n``` javascript\nvar myInterceptor = axios.interceptor.request.use(function(){/*....*/});\naxios.interceptors.request.eject(myInterceptor);\n```\n\n3axios\n``` javascript\nvar instance = axios.create();\ninstance.interceptors.request.use(function(){})\n```\n\n>\n\n``` javascript\naxios.get('/user/12345')\n  .catch(function(error){\n    if(error.response){\n      //2xx\n      console.log(error.response.data);\n      console.log(error.response.status);\n      console.log(error.response.header);\n    }else {\n      //\n      console.log('Error',error.message);\n    }\n    console.log(error.config);\n  });\n```\n\n>,cancel token\n\n1CancelToken.sourcecancel token\n``` javascript\nvar CancelToken = axios.CancelToken;\nvar source = CancelToken.source();\n\naxios.get('/user/12345',{\n  cancelToken: source.token\n}).catch(function(thrown){\n  if(axios.isCancel(thrown)){\n    console.log('Request canceled',thrown.message);\n  }else {\n    //handle error\n  }\n});\n\n//\nsource.cance(\"\");\n```\n\n2cancelTokenexecutor functioncancel token:\n``` javascript\nvar cancelToken = axios.CancelToken;\nvar cance;\naxios.get('/user/12345',{\n  cancelToken: new CancelToken(function(c){\n    //executorcancel function\n    cancel = c;\n  })\n})\n//\ncancel();\n```\n\n> application/x-www-form-urlencoded ,axiosjs JSON  application/x-wwww-form-urlencoded  URLSearchParams API:\n\n``` javascript\nvar params = new URLSearchParams();\nparams.append('param1','value1');\nparams.append('param2','value2');\naxios.post('/foo',params);\n```\n\n><font color=\"red\">URLSearchParams </font>,polyfill,\n\n``` javascript\nvar qs = require('qs');\naxios.post('/foo', qs.stringify({'bar':123}));\n```\n\n>nodequerystring\n\n``` javascript\nvar querystring = require('querystring');\naxios.post('http://something.com/', querystring.stringify({foo:'bar'}));\n```\n\n>axios ES6 Promise es6-promise","source":"_posts/2017-05-02.md","raw":"---\ntitle: 'axios'\ncomments: true\ndate: 2017-05-02 18:56:15\ntags: \n    - 'javascript'\n    - 'ajax'\n---\n\naxios4.2Promiseaxiosvue\n\n``` javascript\nrequire('es6-promise').polyfill();\n```\n\n> GET\n\n``` javascript\n//ID\naxios.get('/user?ID=12345')\n  .then(function(response){\n    console.log(response);\n  })\n  .catch(function(err){\n    console.log(err);\n  });\n//\naxios.get('/user',{\n  params:{\n    ID:12345\n  }\n})\n.then(function(response){\n  console.log(response);\n})\n.catch(function(err){\n  console.log(err);\n});\n```\n\n<!-- more -->\n\n> POST\n\n``` javascript\naxios.post('/user',{\n  firstName:'Fred',\n  lastName:'Flintstone'\n})\n.then(function(res){\n  console.log(res);\n})\n.catch(function(err){\n  console.log(err);\n});\n```\n\n>\n\n``` javascript\nfunction getUserAccount(){\n  return axios.get('/user/12345');\n}\nfunction getUserPermissions(){\n  return axios.get('/user/12345/permissions');\n}\naxios.all([getUserAccount(),getUserPermissions()])\n  .then(axios.spread(function(acct,perms){\n    //\n  }))\n```\n\n>axiosconfig\n\n``` javascript\n//`POST`\naxios({\n    method:\"POST\",\n    url:'/user/12345',\n    data:{\n        firstName:\"Fred\",\n        lastName:\"Flintstone\"\n    }\n});\n```\n\n>,url,method,data\n\n``` javascript\naxios.request(config);\naxios.get(url[,config]);\naxios.delete(url[,config]);\naxios.head(url[,config]);\naxios.post(url[,data[,config]]);\naxios.put(url[,data[,config]])\naxios.patch(url[,data[,config]])\n```\n\n>concurrency,\n\n``` javascript\n//iterable\naxios.all(iterable)\n//callback\naxios.spread(callback)\n```\n\n>axios\n\n1axios.create([config])\n``` javascript\nvar instance = axios.create({\n  baseURL:\"https://some-domain.com/api/\",\n  timeout:1000,\n  headers: {'X-Custom-Header':'foobar'}\n});\n```\n\n2create\n``` javascript\naxios#request(config)\naxios#get(url[,config])\naxios#delete(url[,config])\naxios#head(url[,config])\naxios#post(url[,data[,config]])\naxios#put(url[,data[,config]])\naxios#patch(url[,data[,config]])\n```\n\n>request configurlmethodGET\n\n``` javascript\n{\n  //`url`\n  url:'/user',\n  //`method`\n  method:'get'//default\n  //`url``baseURL``url`\n  //`url``baseURL`\n  baseURL:'https://some-domain.com/api/',\n  //`transformRequest`\n  //`put/post/patch`\n  //-`ArrayBuffer``Stream`\n  transformRequest:[function(data){\n    //\n    return data;\n  }],\n  //`transformResponse``then/catch`\n  transformResponse:[function(data){\n    //\n    return data;\n  }],\n  //`headers`\n  headers: {'X-Requested-With':'XMLHttpRequest'},\n  //`params`----URL\n  //URLSearchParams\n  params: {\n    ID:12345\n  },\n  //`paramsSerializer`params\n  //(https://www.npmjs.com/package/qs,http://api.jquery.com/jquery.param)\n  paramsSerializer: function(params){\n    return Qs.stringify(params,{arrayFormat:'brackets'})\n  },\n  //`data`\n  //`put/post/patch`\n  //`transformRequest`dada\n  //string/plain/object/ArrayBuffer/ArrayBufferView/URLSearchParams\n  //FormData/File/Bold\n  //node:Stream\n  data {\n    firstName:\"Fred\"\n  },\n  //`timeout`\n  //\n\n  timeout:1000,\n  //`withCredentails`\n  \n  withCredentials:false,//default\n  //`adapter`\n  //promise,\n  adapter: function(config){\n    /*..........*/\n  },\n  //`auth`HTTP\n  //authorizationheader,headerAuthorization\n  auth: {\n    username:\"zhangsan\",\n    password: \"s00sdkf\"\n  },\n  //\n  //arraybuffer,blob,document,json,text,stream\n  responseType:'json',//default\n  //\n  xsrfCookieName: 'XSRF-TOKEN',//default\n  xsrfHeaderName:'X-XSRF-TOKEN',//default\n  //`onUploadProgress`\n  onUploadProgress:function(progressEvent){\n    //\nonDownloadProgress:function(progressEvent){\n}\n  },\n  //\n  maxContentLength:2000,\n  //`validateStatus`httpresolvereject promise\n  //`validateStatus`true(`null``undefined`),promiseresolved,rejected\n  validateStatus:function(status){\n    return status >= 200 && status <300;//default\n  },\n  //`maxRedirects`nodejs\n  maxRedirects: 5,//default\n  //`httpAgent/httpsAgent`http/https\n  //keeyAlive\n  httpAgent: new http.Agent({keeyAlive:true}),\n  httpsAgent: new https.Agent({keeyAlive:true}),\n  //proxy\n  //`auth`httpproxy\n  //`Proxy-Authorization` header,`Proxy-Authorization`  header\n  proxy: {\n    host:'127.0.0.1',\n    port: 9000,\n    auth: {\n      username:'skda',\n      password:'radsd'\n    }\n  },\n  //`cancelToken`cancel token\n  //cancelation\n  cancelToken: new cancelToken(function(cancel){\n\n  })\n}\n```\n\n >\n\n``` javascript\n {\n  data:{},\n  status:200,\n  //http\n  statusText:'OK',\n  //\n  headers: {},\n  //`config`\n  config: {}\n}\n```\n\n>\n\n1\n``` javascript\naxios.defaults.baseURL = 'http://api.exmple.com';\naxios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\naxios.defaults.headers.post['content-Type'] = 'appliction/x-www-form-urlencoded';\n```\n\n2\n``` javascript\n//\nvar instance = axios.create({\n    baseURL: 'https://api.example.com'\n});\n\n//\ninstance.defaults.headers.common[\"Authorization\"] = AUTH_TOKEN;\n```\n\n3configlib/defauts.jsconfig\n``` javascript\n//libray\n//timeout0libray\nvar instance = axios.create();\n//library\n//2.5S\ninstance.defaults.timeout = 2500;\n//timeout2.5S5s\ninstance.get('/longRequest',{\n  timeout: 5000\n});\n```\n\n>\n\n1then/catch\n``` javascript\n//\naxios.interceptors.request.use(function(config){\n  //\n  return config;\n},function(err){\n  //Do something with request error\n  return Promise.reject(error);\n});\n//\naxios.interceptors.response.use(function(res){\n  //\n  return res;\n},function(err){\n  //Do something with response error\n  return Promise.reject(error);\n})\n```\n\n2\n``` javascript\nvar myInterceptor = axios.interceptor.request.use(function(){/*....*/});\naxios.interceptors.request.eject(myInterceptor);\n```\n\n3axios\n``` javascript\nvar instance = axios.create();\ninstance.interceptors.request.use(function(){})\n```\n\n>\n\n``` javascript\naxios.get('/user/12345')\n  .catch(function(error){\n    if(error.response){\n      //2xx\n      console.log(error.response.data);\n      console.log(error.response.status);\n      console.log(error.response.header);\n    }else {\n      //\n      console.log('Error',error.message);\n    }\n    console.log(error.config);\n  });\n```\n\n>,cancel token\n\n1CancelToken.sourcecancel token\n``` javascript\nvar CancelToken = axios.CancelToken;\nvar source = CancelToken.source();\n\naxios.get('/user/12345',{\n  cancelToken: source.token\n}).catch(function(thrown){\n  if(axios.isCancel(thrown)){\n    console.log('Request canceled',thrown.message);\n  }else {\n    //handle error\n  }\n});\n\n//\nsource.cance(\"\");\n```\n\n2cancelTokenexecutor functioncancel token:\n``` javascript\nvar cancelToken = axios.CancelToken;\nvar cance;\naxios.get('/user/12345',{\n  cancelToken: new CancelToken(function(c){\n    //executorcancel function\n    cancel = c;\n  })\n})\n//\ncancel();\n```\n\n> application/x-www-form-urlencoded ,axiosjs JSON  application/x-wwww-form-urlencoded  URLSearchParams API:\n\n``` javascript\nvar params = new URLSearchParams();\nparams.append('param1','value1');\nparams.append('param2','value2');\naxios.post('/foo',params);\n```\n\n><font color=\"red\">URLSearchParams </font>,polyfill,\n\n``` javascript\nvar qs = require('qs');\naxios.post('/foo', qs.stringify({'bar':123}));\n```\n\n>nodequerystring\n\n``` javascript\nvar querystring = require('querystring');\naxios.post('http://something.com/', querystring.stringify({foo:'bar'}));\n```\n\n>axios ES6 Promise es6-promise","slug":"2017-05-02","published":1,"updated":"2018-02-10T09:01:48.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1va40005fdldpwz8rowa","content":"<p>axios4.2Promiseaxiosvue</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'es6-promise'</span>).polyfill();</div></pre></td></tr></table></figure>\n<blockquote>\n<p>GET</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//ID</span></div><div class=\"line\">axios.get(<span class=\"string\">'/user?ID=12345'</span>)</div><div class=\"line\">  .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>)</span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(response);</div><div class=\"line\">  &#125;)</div><div class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">  &#125;);</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">axios.get(<span class=\"string\">'/user'</span>,&#123;</div><div class=\"line\">  params:&#123;</div><div class=\"line\">    ID:<span class=\"number\">12345</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>)</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(response);</div><div class=\"line\">&#125;)</div><div class=\"line\">.catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<blockquote>\n<p>POST</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">axios.post(<span class=\"string\">'/user'</span>,&#123;</div><div class=\"line\">  firstName:<span class=\"string\">'Fred'</span>,</div><div class=\"line\">  lastName:<span class=\"string\">'Flintstone'</span></div><div class=\"line\">&#125;)</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(res);</div><div class=\"line\">&#125;)</div><div class=\"line\">.catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<blockquote>\n<p></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserAccount</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">'/user/12345'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserPermissions</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">'/user/12345/permissions'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\">axios.all([getUserAccount(),getUserPermissions()])</div><div class=\"line\">  .then(axios.spread(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">acct,perms</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">  &#125;))</div></pre></td></tr></table></figure>\n<blockquote>\n<p>axiosconfig</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//`POST`</span></div><div class=\"line\">axios(&#123;</div><div class=\"line\">    method:<span class=\"string\">\"POST\"</span>,</div><div class=\"line\">    url:<span class=\"string\">'/user/12345'</span>,</div><div class=\"line\">    data:&#123;</div><div class=\"line\">        firstName:<span class=\"string\">\"Fred\"</span>,</div><div class=\"line\">        lastName:<span class=\"string\">\"Flintstone\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<blockquote>\n<p>,url,method,data</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">axios.request(config);</div><div class=\"line\">axios.get(url[,config]);</div><div class=\"line\">axios.delete(url[,config]);</div><div class=\"line\">axios.head(url[,config]);</div><div class=\"line\">axios.post(url[,data[,config]]);</div><div class=\"line\">axios.put(url[,data[,config]])</div><div class=\"line\">axios.patch(url[,data[,config]])</div></pre></td></tr></table></figure>\n<blockquote>\n<p>concurrency,</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//iterable</span></div><div class=\"line\">axios.all(iterable)</div><div class=\"line\"><span class=\"comment\">//callback</span></div><div class=\"line\">axios.spread(callback)</div></pre></td></tr></table></figure>\n<blockquote>\n<p>axios</p>\n</blockquote>\n<p>1axios.create([config])<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> instance = axios.create(&#123;</div><div class=\"line\">  baseURL:<span class=\"string\">\"https://some-domain.com/api/\"</span>,</div><div class=\"line\">  timeout:<span class=\"number\">1000</span>,</div><div class=\"line\">  headers: &#123;<span class=\"string\">'X-Custom-Header'</span>:<span class=\"string\">'foobar'</span>&#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>2create<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">axios#request(config)</div><div class=\"line\">axios#get(url[,config])</div><div class=\"line\">axios#delete(url[,config])</div><div class=\"line\">axios#head(url[,config])</div><div class=\"line\">axios#post(url[,data[,config]])</div><div class=\"line\">axios#put(url[,data[,config]])</div><div class=\"line\">axios#patch(url[,data[,config]])</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>request configurlmethodGET</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"comment\">//`url`</span></div><div class=\"line\">  url:<span class=\"string\">'/user'</span>,</div><div class=\"line\">  <span class=\"comment\">//`method`</span></div><div class=\"line\">  method:<span class=\"string\">'get'</span><span class=\"comment\">//default</span></div><div class=\"line\">  <span class=\"comment\">//`url``baseURL``url`</span></div><div class=\"line\">  <span class=\"comment\">//`url``baseURL`</span></div><div class=\"line\">  baseURL:<span class=\"string\">'https://some-domain.com/api/'</span>,</div><div class=\"line\">  <span class=\"comment\">//`transformRequest`</span></div><div class=\"line\">  <span class=\"comment\">//`put/post/patch`</span></div><div class=\"line\">  <span class=\"comment\">//-`ArrayBuffer``Stream`</span></div><div class=\"line\">  transformRequest:[<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">return</span> data;</div><div class=\"line\">  &#125;],</div><div class=\"line\">  <span class=\"comment\">//`transformResponse``then/catch`</span></div><div class=\"line\">  transformResponse:[<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">return</span> data;</div><div class=\"line\">  &#125;],</div><div class=\"line\">  <span class=\"comment\">//`headers`</span></div><div class=\"line\">  headers: &#123;<span class=\"string\">'X-Requested-With'</span>:<span class=\"string\">'XMLHttpRequest'</span>&#125;,</div><div class=\"line\">  <span class=\"comment\">//`params`----URL</span></div><div class=\"line\">  <span class=\"comment\">//URLSearchParams</span></div><div class=\"line\">  params: &#123;</div><div class=\"line\">    ID:<span class=\"number\">12345</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`paramsSerializer`params</span></div><div class=\"line\">  <span class=\"comment\">//(https://www.npmjs.com/package/qs,http://api.jquery.com/jquery.param)</span></div><div class=\"line\">  paramsSerializer: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">params</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> Qs.stringify(params,&#123;<span class=\"attr\">arrayFormat</span>:<span class=\"string\">'brackets'</span>&#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`data`</span></div><div class=\"line\">  <span class=\"comment\">//`put/post/patch`</span></div><div class=\"line\">  <span class=\"comment\">//`transformRequest`dada</span></div><div class=\"line\">  <span class=\"comment\">//string/plain/object/ArrayBuffer/ArrayBufferView/URLSearchParams</span></div><div class=\"line\">  <span class=\"comment\">//FormData/File/Bold</span></div><div class=\"line\">  <span class=\"comment\">//node:Stream</span></div><div class=\"line\">  data &#123;</div><div class=\"line\">    firstName:<span class=\"string\">\"Fred\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`timeout`</span></div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\"></div><div class=\"line\">  timeout:<span class=\"number\">1000</span>,</div><div class=\"line\">  <span class=\"comment\">//`withCredentails`</span></div><div class=\"line\">  </div><div class=\"line\">  withCredentials:<span class=\"literal\">false</span>,<span class=\"comment\">//default</span></div><div class=\"line\">  <span class=\"comment\">//`adapter`</span></div><div class=\"line\">  <span class=\"comment\">//promise,</span></div><div class=\"line\">  adapter: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">config</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">/*..........*/</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`auth`HTTP</span></div><div class=\"line\">  <span class=\"comment\">//authorizationheader,headerAuthorization</span></div><div class=\"line\">  auth: &#123;</div><div class=\"line\">    username:<span class=\"string\">\"zhangsan\"</span>,</div><div class=\"line\">    password: <span class=\"string\">\"s00sdkf\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"comment\">//arraybuffer,blob,document,json,text,stream</span></div><div class=\"line\">  responseType:<span class=\"string\">'json'</span>,<span class=\"comment\">//default</span></div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  xsrfCookieName: <span class=\"string\">'XSRF-TOKEN'</span>,<span class=\"comment\">//default</span></div><div class=\"line\">  xsrfHeaderName:<span class=\"string\">'X-XSRF-TOKEN'</span>,<span class=\"comment\">//default</span></div><div class=\"line\">  <span class=\"comment\">//`onUploadProgress`</span></div><div class=\"line\">  onUploadProgress:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">progressEvent</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">onDownloadProgress:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">progressEvent</span>)</span>&#123;</div><div class=\"line\">&#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  maxContentLength:<span class=\"number\">2000</span>,</div><div class=\"line\">  <span class=\"comment\">//`validateStatus`httpresolvereject promise</span></div><div class=\"line\">  <span class=\"comment\">//`validateStatus`true(`null``undefined`),promiseresolved,rejected</span></div><div class=\"line\">  validateStatus:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">status</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> status &gt;= <span class=\"number\">200</span> &amp;&amp; status &lt;<span class=\"number\">300</span>;<span class=\"comment\">//default</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`maxRedirects`nodejs</span></div><div class=\"line\">  maxRedirects: <span class=\"number\">5</span>,<span class=\"comment\">//default</span></div><div class=\"line\">  <span class=\"comment\">//`httpAgent/httpsAgent`http/https</span></div><div class=\"line\">  <span class=\"comment\">//keeyAlive</span></div><div class=\"line\">  httpAgent: <span class=\"keyword\">new</span> http.Agent(&#123;<span class=\"attr\">keeyAlive</span>:<span class=\"literal\">true</span>&#125;),</div><div class=\"line\">  httpsAgent: <span class=\"keyword\">new</span> https.Agent(&#123;<span class=\"attr\">keeyAlive</span>:<span class=\"literal\">true</span>&#125;),</div><div class=\"line\">  <span class=\"comment\">//proxy</span></div><div class=\"line\">  <span class=\"comment\">//`auth`httpproxy</span></div><div class=\"line\">  <span class=\"comment\">//`Proxy-Authorization` header,`Proxy-Authorization`  header</span></div><div class=\"line\">  proxy: &#123;</div><div class=\"line\">    host:<span class=\"string\">'127.0.0.1'</span>,</div><div class=\"line\">    port: <span class=\"number\">9000</span>,</div><div class=\"line\">    auth: &#123;</div><div class=\"line\">      username:<span class=\"string\">'skda'</span>,</div><div class=\"line\">      password:<span class=\"string\">'radsd'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`cancelToken`cancel token</span></div><div class=\"line\">  <span class=\"comment\">//cancelation</span></div><div class=\"line\">  cancelToken: <span class=\"keyword\">new</span> cancelToken(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">cancel</span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"> &#123;</div><div class=\"line\">  data:&#123;&#125;,</div><div class=\"line\">  status:<span class=\"number\">200</span>,</div><div class=\"line\">  <span class=\"comment\">//http</span></div><div class=\"line\">  statusText:<span class=\"string\">'OK'</span>,</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  headers: &#123;&#125;,</div><div class=\"line\">  <span class=\"comment\">//`config`</span></div><div class=\"line\">  config: &#123;&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p></p>\n</blockquote>\n<p>1<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">axios.defaults.baseURL = <span class=\"string\">'http://api.exmple.com'</span>;</div><div class=\"line\">axios.defaults.headers.common[<span class=\"string\">'Authorization'</span>] = AUTH_TOKEN;</div><div class=\"line\">axios.defaults.headers.post[<span class=\"string\">'content-Type'</span>] = <span class=\"string\">'appliction/x-www-form-urlencoded'</span>;</div></pre></td></tr></table></figure></p>\n<p>2<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">var</span> instance = axios.create(&#123;</div><div class=\"line\">    baseURL: <span class=\"string\">'https://api.example.com'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">instance.defaults.headers.common[<span class=\"string\">\"Authorization\"</span>] = AUTH_TOKEN;</div></pre></td></tr></table></figure></p>\n<p>3configlib/defauts.jsconfig<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//libray</span></div><div class=\"line\"><span class=\"comment\">//timeout0libray</span></div><div class=\"line\"><span class=\"keyword\">var</span> instance = axios.create();</div><div class=\"line\"><span class=\"comment\">//library</span></div><div class=\"line\"><span class=\"comment\">//2.5S</span></div><div class=\"line\">instance.defaults.timeout = <span class=\"number\">2500</span>;</div><div class=\"line\"><span class=\"comment\">//timeout2.5S5s</span></div><div class=\"line\">instance.get(<span class=\"string\">'/longRequest'</span>,&#123;</div><div class=\"line\">  timeout: <span class=\"number\">5000</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p>1then/catch<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">axios.interceptors.request.use(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">config</span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"keyword\">return</span> config;</div><div class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">//Do something with request error</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(error);</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">axios.interceptors.response.use(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">//Do something with response error</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(error);</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p>2<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> myInterceptor = axios.interceptor.request.use(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;<span class=\"comment\">/*....*/</span>&#125;);</div><div class=\"line\">axios.interceptors.request.eject(myInterceptor);</div></pre></td></tr></table></figure></p>\n<p>3axios<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> instance = axios.create();</div><div class=\"line\">instance.interceptors.request.use(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;)</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">axios.get(<span class=\"string\">'/user/12345'</span>)</div><div class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(error.response)&#123;</div><div class=\"line\">      <span class=\"comment\">//2xx</span></div><div class=\"line\">      <span class=\"built_in\">console</span>.log(error.response.data);</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(error.response.status);</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(error.response.header);</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"comment\">//</span></div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'Error'</span>,error.message);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(error.config);</div><div class=\"line\">  &#125;);</div></pre></td></tr></table></figure>\n<blockquote>\n<p>,cancel token</p>\n</blockquote>\n<p>1CancelToken.sourcecancel token<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> CancelToken = axios.CancelToken;</div><div class=\"line\"><span class=\"keyword\">var</span> source = CancelToken.source();</div><div class=\"line\"></div><div class=\"line\">axios.get(<span class=\"string\">'/user/12345'</span>,&#123;</div><div class=\"line\">  cancelToken: source.token</div><div class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">thrown</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span>(axios.isCancel(thrown))&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Request canceled'</span>,thrown.message);</div><div class=\"line\">  &#125;<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"comment\">//handle error</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">source.cance(<span class=\"string\">\"\"</span>);</div></pre></td></tr></table></figure></p>\n<p>2cancelTokenexecutor functioncancel token:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cancelToken = axios.CancelToken;</div><div class=\"line\"><span class=\"keyword\">var</span> cance;</div><div class=\"line\">axios.get(<span class=\"string\">'/user/12345'</span>,&#123;</div><div class=\"line\">  cancelToken: <span class=\"keyword\">new</span> CancelToken(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">c</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//executorcancel function</span></div><div class=\"line\">    cancel = c;</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;)</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">cancel();</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p> application/x-www-form-urlencoded ,axiosjs JSON  application/x-wwww-form-urlencoded  URLSearchParams API:</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> params = <span class=\"keyword\">new</span> URLSearchParams();</div><div class=\"line\">params.append(<span class=\"string\">'param1'</span>,<span class=\"string\">'value1'</span>);</div><div class=\"line\">params.append(<span class=\"string\">'param2'</span>,<span class=\"string\">'value2'</span>);</div><div class=\"line\">axios.post(<span class=\"string\">'/foo'</span>,params);</div></pre></td></tr></table></figure>\n<blockquote>\n<p><font color=\"red\">URLSearchParams </font>,polyfill,</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> qs = <span class=\"built_in\">require</span>(<span class=\"string\">'qs'</span>);</div><div class=\"line\">axios.post(<span class=\"string\">'/foo'</span>, qs.stringify(&#123;<span class=\"string\">'bar'</span>:<span class=\"number\">123</span>&#125;));</div></pre></td></tr></table></figure>\n<blockquote>\n<p>nodequerystring</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">'querystring'</span>);</div><div class=\"line\">axios.post(<span class=\"string\">'http://something.com/'</span>, querystring.stringify(&#123;<span class=\"attr\">foo</span>:<span class=\"string\">'bar'</span>&#125;));</div></pre></td></tr></table></figure>\n<blockquote>\n<p>axios ES6 Promise es6-promise</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p>axios4.2Promiseaxiosvue</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'es6-promise'</span>).polyfill();</div></pre></td></tr></table></figure>\n<blockquote>\n<p>GET</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//ID</span></div><div class=\"line\">axios.get(<span class=\"string\">'/user?ID=12345'</span>)</div><div class=\"line\">  .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>)</span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(response);</div><div class=\"line\">  &#125;)</div><div class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">  &#125;);</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">axios.get(<span class=\"string\">'/user'</span>,&#123;</div><div class=\"line\">  params:&#123;</div><div class=\"line\">    ID:<span class=\"number\">12345</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>)</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(response);</div><div class=\"line\">&#125;)</div><div class=\"line\">.catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>","more":"<blockquote>\n<p>POST</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">axios.post(<span class=\"string\">'/user'</span>,&#123;</div><div class=\"line\">  firstName:<span class=\"string\">'Fred'</span>,</div><div class=\"line\">  lastName:<span class=\"string\">'Flintstone'</span></div><div class=\"line\">&#125;)</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(res);</div><div class=\"line\">&#125;)</div><div class=\"line\">.catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<blockquote>\n<p></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserAccount</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">'/user/12345'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserPermissions</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">'/user/12345/permissions'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\">axios.all([getUserAccount(),getUserPermissions()])</div><div class=\"line\">  .then(axios.spread(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">acct,perms</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">  &#125;))</div></pre></td></tr></table></figure>\n<blockquote>\n<p>axiosconfig</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//`POST`</span></div><div class=\"line\">axios(&#123;</div><div class=\"line\">    method:<span class=\"string\">\"POST\"</span>,</div><div class=\"line\">    url:<span class=\"string\">'/user/12345'</span>,</div><div class=\"line\">    data:&#123;</div><div class=\"line\">        firstName:<span class=\"string\">\"Fred\"</span>,</div><div class=\"line\">        lastName:<span class=\"string\">\"Flintstone\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<blockquote>\n<p>,url,method,data</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">axios.request(config);</div><div class=\"line\">axios.get(url[,config]);</div><div class=\"line\">axios.delete(url[,config]);</div><div class=\"line\">axios.head(url[,config]);</div><div class=\"line\">axios.post(url[,data[,config]]);</div><div class=\"line\">axios.put(url[,data[,config]])</div><div class=\"line\">axios.patch(url[,data[,config]])</div></pre></td></tr></table></figure>\n<blockquote>\n<p>concurrency,</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//iterable</span></div><div class=\"line\">axios.all(iterable)</div><div class=\"line\"><span class=\"comment\">//callback</span></div><div class=\"line\">axios.spread(callback)</div></pre></td></tr></table></figure>\n<blockquote>\n<p>axios</p>\n</blockquote>\n<p>1axios.create([config])<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> instance = axios.create(&#123;</div><div class=\"line\">  baseURL:<span class=\"string\">\"https://some-domain.com/api/\"</span>,</div><div class=\"line\">  timeout:<span class=\"number\">1000</span>,</div><div class=\"line\">  headers: &#123;<span class=\"string\">'X-Custom-Header'</span>:<span class=\"string\">'foobar'</span>&#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>2create<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">axios#request(config)</div><div class=\"line\">axios#get(url[,config])</div><div class=\"line\">axios#delete(url[,config])</div><div class=\"line\">axios#head(url[,config])</div><div class=\"line\">axios#post(url[,data[,config]])</div><div class=\"line\">axios#put(url[,data[,config]])</div><div class=\"line\">axios#patch(url[,data[,config]])</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>request configurlmethodGET</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"comment\">//`url`</span></div><div class=\"line\">  url:<span class=\"string\">'/user'</span>,</div><div class=\"line\">  <span class=\"comment\">//`method`</span></div><div class=\"line\">  method:<span class=\"string\">'get'</span><span class=\"comment\">//default</span></div><div class=\"line\">  <span class=\"comment\">//`url``baseURL``url`</span></div><div class=\"line\">  <span class=\"comment\">//`url``baseURL`</span></div><div class=\"line\">  baseURL:<span class=\"string\">'https://some-domain.com/api/'</span>,</div><div class=\"line\">  <span class=\"comment\">//`transformRequest`</span></div><div class=\"line\">  <span class=\"comment\">//`put/post/patch`</span></div><div class=\"line\">  <span class=\"comment\">//-`ArrayBuffer``Stream`</span></div><div class=\"line\">  transformRequest:[<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">return</span> data;</div><div class=\"line\">  &#125;],</div><div class=\"line\">  <span class=\"comment\">//`transformResponse``then/catch`</span></div><div class=\"line\">  transformResponse:[<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">return</span> data;</div><div class=\"line\">  &#125;],</div><div class=\"line\">  <span class=\"comment\">//`headers`</span></div><div class=\"line\">  headers: &#123;<span class=\"string\">'X-Requested-With'</span>:<span class=\"string\">'XMLHttpRequest'</span>&#125;,</div><div class=\"line\">  <span class=\"comment\">//`params`----URL</span></div><div class=\"line\">  <span class=\"comment\">//URLSearchParams</span></div><div class=\"line\">  params: &#123;</div><div class=\"line\">    ID:<span class=\"number\">12345</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`paramsSerializer`params</span></div><div class=\"line\">  <span class=\"comment\">//(https://www.npmjs.com/package/qs,http://api.jquery.com/jquery.param)</span></div><div class=\"line\">  paramsSerializer: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">params</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> Qs.stringify(params,&#123;<span class=\"attr\">arrayFormat</span>:<span class=\"string\">'brackets'</span>&#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`data`</span></div><div class=\"line\">  <span class=\"comment\">//`put/post/patch`</span></div><div class=\"line\">  <span class=\"comment\">//`transformRequest`dada</span></div><div class=\"line\">  <span class=\"comment\">//string/plain/object/ArrayBuffer/ArrayBufferView/URLSearchParams</span></div><div class=\"line\">  <span class=\"comment\">//FormData/File/Bold</span></div><div class=\"line\">  <span class=\"comment\">//node:Stream</span></div><div class=\"line\">  data &#123;</div><div class=\"line\">    firstName:<span class=\"string\">\"Fred\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`timeout`</span></div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\"></div><div class=\"line\">  timeout:<span class=\"number\">1000</span>,</div><div class=\"line\">  <span class=\"comment\">//`withCredentails`</span></div><div class=\"line\">  </div><div class=\"line\">  withCredentials:<span class=\"literal\">false</span>,<span class=\"comment\">//default</span></div><div class=\"line\">  <span class=\"comment\">//`adapter`</span></div><div class=\"line\">  <span class=\"comment\">//promise,</span></div><div class=\"line\">  adapter: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">config</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">/*..........*/</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`auth`HTTP</span></div><div class=\"line\">  <span class=\"comment\">//authorizationheader,headerAuthorization</span></div><div class=\"line\">  auth: &#123;</div><div class=\"line\">    username:<span class=\"string\">\"zhangsan\"</span>,</div><div class=\"line\">    password: <span class=\"string\">\"s00sdkf\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"comment\">//arraybuffer,blob,document,json,text,stream</span></div><div class=\"line\">  responseType:<span class=\"string\">'json'</span>,<span class=\"comment\">//default</span></div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  xsrfCookieName: <span class=\"string\">'XSRF-TOKEN'</span>,<span class=\"comment\">//default</span></div><div class=\"line\">  xsrfHeaderName:<span class=\"string\">'X-XSRF-TOKEN'</span>,<span class=\"comment\">//default</span></div><div class=\"line\">  <span class=\"comment\">//`onUploadProgress`</span></div><div class=\"line\">  onUploadProgress:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">progressEvent</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">onDownloadProgress:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">progressEvent</span>)</span>&#123;</div><div class=\"line\">&#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  maxContentLength:<span class=\"number\">2000</span>,</div><div class=\"line\">  <span class=\"comment\">//`validateStatus`httpresolvereject promise</span></div><div class=\"line\">  <span class=\"comment\">//`validateStatus`true(`null``undefined`),promiseresolved,rejected</span></div><div class=\"line\">  validateStatus:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">status</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> status &gt;= <span class=\"number\">200</span> &amp;&amp; status &lt;<span class=\"number\">300</span>;<span class=\"comment\">//default</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`maxRedirects`nodejs</span></div><div class=\"line\">  maxRedirects: <span class=\"number\">5</span>,<span class=\"comment\">//default</span></div><div class=\"line\">  <span class=\"comment\">//`httpAgent/httpsAgent`http/https</span></div><div class=\"line\">  <span class=\"comment\">//keeyAlive</span></div><div class=\"line\">  httpAgent: <span class=\"keyword\">new</span> http.Agent(&#123;<span class=\"attr\">keeyAlive</span>:<span class=\"literal\">true</span>&#125;),</div><div class=\"line\">  httpsAgent: <span class=\"keyword\">new</span> https.Agent(&#123;<span class=\"attr\">keeyAlive</span>:<span class=\"literal\">true</span>&#125;),</div><div class=\"line\">  <span class=\"comment\">//proxy</span></div><div class=\"line\">  <span class=\"comment\">//`auth`httpproxy</span></div><div class=\"line\">  <span class=\"comment\">//`Proxy-Authorization` header,`Proxy-Authorization`  header</span></div><div class=\"line\">  proxy: &#123;</div><div class=\"line\">    host:<span class=\"string\">'127.0.0.1'</span>,</div><div class=\"line\">    port: <span class=\"number\">9000</span>,</div><div class=\"line\">    auth: &#123;</div><div class=\"line\">      username:<span class=\"string\">'skda'</span>,</div><div class=\"line\">      password:<span class=\"string\">'radsd'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">//`cancelToken`cancel token</span></div><div class=\"line\">  <span class=\"comment\">//cancelation</span></div><div class=\"line\">  cancelToken: <span class=\"keyword\">new</span> cancelToken(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">cancel</span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"> &#123;</div><div class=\"line\">  data:&#123;&#125;,</div><div class=\"line\">  status:<span class=\"number\">200</span>,</div><div class=\"line\">  <span class=\"comment\">//http</span></div><div class=\"line\">  statusText:<span class=\"string\">'OK'</span>,</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  headers: &#123;&#125;,</div><div class=\"line\">  <span class=\"comment\">//`config`</span></div><div class=\"line\">  config: &#123;&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p></p>\n</blockquote>\n<p>1<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">axios.defaults.baseURL = <span class=\"string\">'http://api.exmple.com'</span>;</div><div class=\"line\">axios.defaults.headers.common[<span class=\"string\">'Authorization'</span>] = AUTH_TOKEN;</div><div class=\"line\">axios.defaults.headers.post[<span class=\"string\">'content-Type'</span>] = <span class=\"string\">'appliction/x-www-form-urlencoded'</span>;</div></pre></td></tr></table></figure></p>\n<p>2<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">var</span> instance = axios.create(&#123;</div><div class=\"line\">    baseURL: <span class=\"string\">'https://api.example.com'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">instance.defaults.headers.common[<span class=\"string\">\"Authorization\"</span>] = AUTH_TOKEN;</div></pre></td></tr></table></figure></p>\n<p>3configlib/defauts.jsconfig<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//libray</span></div><div class=\"line\"><span class=\"comment\">//timeout0libray</span></div><div class=\"line\"><span class=\"keyword\">var</span> instance = axios.create();</div><div class=\"line\"><span class=\"comment\">//library</span></div><div class=\"line\"><span class=\"comment\">//2.5S</span></div><div class=\"line\">instance.defaults.timeout = <span class=\"number\">2500</span>;</div><div class=\"line\"><span class=\"comment\">//timeout2.5S5s</span></div><div class=\"line\">instance.get(<span class=\"string\">'/longRequest'</span>,&#123;</div><div class=\"line\">  timeout: <span class=\"number\">5000</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p>1then/catch<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">axios.interceptors.request.use(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">config</span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"keyword\">return</span> config;</div><div class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">//Do something with request error</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(error);</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">axios.interceptors.response.use(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">//Do something with response error</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(error);</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p>2<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> myInterceptor = axios.interceptor.request.use(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;<span class=\"comment\">/*....*/</span>&#125;);</div><div class=\"line\">axios.interceptors.request.eject(myInterceptor);</div></pre></td></tr></table></figure></p>\n<p>3axios<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> instance = axios.create();</div><div class=\"line\">instance.interceptors.request.use(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;)</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">axios.get(<span class=\"string\">'/user/12345'</span>)</div><div class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(error.response)&#123;</div><div class=\"line\">      <span class=\"comment\">//2xx</span></div><div class=\"line\">      <span class=\"built_in\">console</span>.log(error.response.data);</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(error.response.status);</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(error.response.header);</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"comment\">//</span></div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'Error'</span>,error.message);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(error.config);</div><div class=\"line\">  &#125;);</div></pre></td></tr></table></figure>\n<blockquote>\n<p>,cancel token</p>\n</blockquote>\n<p>1CancelToken.sourcecancel token<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> CancelToken = axios.CancelToken;</div><div class=\"line\"><span class=\"keyword\">var</span> source = CancelToken.source();</div><div class=\"line\"></div><div class=\"line\">axios.get(<span class=\"string\">'/user/12345'</span>,&#123;</div><div class=\"line\">  cancelToken: source.token</div><div class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">thrown</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span>(axios.isCancel(thrown))&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Request canceled'</span>,thrown.message);</div><div class=\"line\">  &#125;<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"comment\">//handle error</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">source.cance(<span class=\"string\">\"\"</span>);</div></pre></td></tr></table></figure></p>\n<p>2cancelTokenexecutor functioncancel token:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cancelToken = axios.CancelToken;</div><div class=\"line\"><span class=\"keyword\">var</span> cance;</div><div class=\"line\">axios.get(<span class=\"string\">'/user/12345'</span>,&#123;</div><div class=\"line\">  cancelToken: <span class=\"keyword\">new</span> CancelToken(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">c</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//executorcancel function</span></div><div class=\"line\">    cancel = c;</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;)</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">cancel();</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p> application/x-www-form-urlencoded ,axiosjs JSON  application/x-wwww-form-urlencoded  URLSearchParams API:</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> params = <span class=\"keyword\">new</span> URLSearchParams();</div><div class=\"line\">params.append(<span class=\"string\">'param1'</span>,<span class=\"string\">'value1'</span>);</div><div class=\"line\">params.append(<span class=\"string\">'param2'</span>,<span class=\"string\">'value2'</span>);</div><div class=\"line\">axios.post(<span class=\"string\">'/foo'</span>,params);</div></pre></td></tr></table></figure>\n<blockquote>\n<p><font color=\"red\">URLSearchParams </font>,polyfill,</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> qs = <span class=\"built_in\">require</span>(<span class=\"string\">'qs'</span>);</div><div class=\"line\">axios.post(<span class=\"string\">'/foo'</span>, qs.stringify(&#123;<span class=\"string\">'bar'</span>:<span class=\"number\">123</span>&#125;));</div></pre></td></tr></table></figure>\n<blockquote>\n<p>nodequerystring</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">'querystring'</span>);</div><div class=\"line\">axios.post(<span class=\"string\">'http://something.com/'</span>, querystring.stringify(&#123;<span class=\"attr\">foo</span>:<span class=\"string\">'bar'</span>&#125;));</div></pre></td></tr></table></figure>\n<blockquote>\n<p>axios ES6 Promise es6-promise</p>\n</blockquote>"},{"title":"React--React","comments":1,"toc":true,"date":"2017-06-11T13:09:11.000Z","_content":"\n### jQuery\n\nReactjQueryjQueryonclick\n``` html\n<div>\n  <button type=\"btn\" id=\"btn\"></button>\n</div> \n<script>\n  $(function(){\n    $(\"#btn\").click(fucntion(){\n      // do some things\n    })\n  })\n</script>\n```\njQuerycssidbtnDOMDOM\n\njQuery\n\n<!-- more -->\n\n### React\n\nreactdomdomreactdomrenderdatareact\n\n### Virtual DOM\n\nhtmlDOMDOMDOMjshtmljscreateElement'Button'DocumentFragmentDOMDOM\n\n``` javascript\nvar frag=document.createDocumentFragment();\nfor(var i=0;i<10;i++){\n   var l=document.createElement(\"li\");\n   l.innerHTML=\"ss\";\n   frag.appendChild(l);\n}\ndocument.getElementById(\"list\").appendChild(frag);\n```\n\nReactDOMDOMjsDOMDOMDOMjavascript\n``` javascript\nvar a = {\n  type: 'a',\n  props: {\n    children: 'React',\n    className: 'link',\n    href: 'facebook/react  GitHub'\n  },\n  _isReactElement: true\n}\n\nReact.render(a, document.body)\n```\n\nDOMdiff\n* JSDOM\n* DOM\n* DOM\nreactdiffDOMDOMdiffreact\n\n### React\n\njqueryjquery\n\n<img width=\"400\" src=\"2017-06-11/01.jpeg\" title=\"jquery\"/>\n\nreactreactDOMReactreact\n\n<img width=\"400\" src=\"2017-06-11/02.jpeg\" title=\"react\"/>\n\nreactReact\n\n\n\n","source":"_posts/2017-06-11.md","raw":"---\ntitle: React--React\ncomments: true\ntoc: true\ndate: 2017-06-11 21:09:11\ntags: \n    - 'javascript'\n    - 'react'\n---\n\n### jQuery\n\nReactjQueryjQueryonclick\n``` html\n<div>\n  <button type=\"btn\" id=\"btn\"></button>\n</div> \n<script>\n  $(function(){\n    $(\"#btn\").click(fucntion(){\n      // do some things\n    })\n  })\n</script>\n```\njQuerycssidbtnDOMDOM\n\njQuery\n\n<!-- more -->\n\n### React\n\nreactdomdomreactdomrenderdatareact\n\n### Virtual DOM\n\nhtmlDOMDOMDOMjshtmljscreateElement'Button'DocumentFragmentDOMDOM\n\n``` javascript\nvar frag=document.createDocumentFragment();\nfor(var i=0;i<10;i++){\n   var l=document.createElement(\"li\");\n   l.innerHTML=\"ss\";\n   frag.appendChild(l);\n}\ndocument.getElementById(\"list\").appendChild(frag);\n```\n\nReactDOMDOMjsDOMDOMDOMjavascript\n``` javascript\nvar a = {\n  type: 'a',\n  props: {\n    children: 'React',\n    className: 'link',\n    href: 'facebook/react  GitHub'\n  },\n  _isReactElement: true\n}\n\nReact.render(a, document.body)\n```\n\nDOMdiff\n* JSDOM\n* DOM\n* DOM\nreactdiffDOMDOMdiffreact\n\n### React\n\njqueryjquery\n\n<img width=\"400\" src=\"2017-06-11/01.jpeg\" title=\"jquery\"/>\n\nreactreactDOMReactreact\n\n<img width=\"400\" src=\"2017-06-11/02.jpeg\" title=\"react\"/>\n\nreactReact\n\n\n\n","slug":"2017-06-11","published":1,"updated":"2018-02-10T09:03:44.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1va60006fdldtx06s7o3","content":"<h3 id=\"jQuery\"><a href=\"#jQuery\" class=\"headerlink\" title=\"jQuery\"></a>jQuery</h3><p>ReactjQueryjQueryonclick<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"btn\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"btn\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span> </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">  $(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">    $(<span class=\"string\">\"#btn\"</span>).click(fucntion()&#123;</span></div><div class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// do some things</span></span></div><div class=\"line\"><span class=\"undefined\">    &#125;)</span></div><div class=\"line\"><span class=\"undefined\">  &#125;)</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>jQuerycssidbtnDOMDOM</p>\n<p>jQuery</p>\n<a id=\"more\"></a>\n<h3 id=\"React\"><a href=\"#React\" class=\"headerlink\" title=\"React\"></a>React</h3><p>reactdomdomreactdomrenderdatareact</p>\n<h3 id=\"Virtual-DOM\"><a href=\"#Virtual-DOM\" class=\"headerlink\" title=\"Virtual DOM\"></a>Virtual DOM</h3><p>htmlDOMDOMDOMjshtmljscreateElementButtonDocumentFragmentDOMDOM</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> frag=<span class=\"built_in\">document</span>.createDocumentFragment();</div><div class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">10</span>;i++)&#123;</div><div class=\"line\">   <span class=\"keyword\">var</span> l=<span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"li\"</span>);</div><div class=\"line\">   l.innerHTML=<span class=\"string\">\"ss\"</span>;</div><div class=\"line\">   frag.appendChild(l);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"list\"</span>).appendChild(frag);</div></pre></td></tr></table></figure>\n<p>ReactDOMDOMjsDOMDOMDOMjavascript<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a = &#123;</div><div class=\"line\">  type: <span class=\"string\">'a'</span>,</div><div class=\"line\">  props: &#123;</div><div class=\"line\">    children: <span class=\"string\">'React'</span>,</div><div class=\"line\">    className: <span class=\"string\">'link'</span>,</div><div class=\"line\">    href: <span class=\"string\">'facebook/react  GitHub'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  _isReactElement: <span class=\"literal\">true</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">React.render(a, <span class=\"built_in\">document</span>.body)</div></pre></td></tr></table></figure></p>\n<p>DOMdiff</p>\n<ul>\n<li>JSDOM</li>\n<li>DOM</li>\n<li>DOM<br>reactdiffDOMDOMdiffreact</li>\n</ul>\n<h3 id=\"React\"><a href=\"#React\" class=\"headerlink\" title=\"React\"></a>React</h3><p>jqueryjquery</p>\n<p><img width=\"400\" src=\"/2017-06-11/01.jpeg\" title=\"jquery\"></p>\n<p>reactreactDOMReactreact</p>\n<p><img width=\"400\" src=\"/2017-06-11/02.jpeg\" title=\"react\"></p>\n<p>reactReact</p>\n","site":{"data":{}},"excerpt":"<h3 id=\"jQuery\"><a href=\"#jQuery\" class=\"headerlink\" title=\"jQuery\"></a>jQuery</h3><p>ReactjQueryjQueryonclick<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"btn\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"btn\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span> </div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">  $(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">    $(<span class=\"string\">\"#btn\"</span>).click(fucntion()&#123;</span></div><div class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// do some things</span></span></div><div class=\"line\"><span class=\"undefined\">    &#125;)</span></div><div class=\"line\"><span class=\"undefined\">  &#125;)</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>jQuerycssidbtnDOMDOM</p>\n<p>jQuery</p>","more":"<h3 id=\"React\"><a href=\"#React\" class=\"headerlink\" title=\"React\"></a>React</h3><p>reactdomdomreactdomrenderdatareact</p>\n<h3 id=\"Virtual-DOM\"><a href=\"#Virtual-DOM\" class=\"headerlink\" title=\"Virtual DOM\"></a>Virtual DOM</h3><p>htmlDOMDOMDOMjshtmljscreateElementButtonDocumentFragmentDOMDOM</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> frag=<span class=\"built_in\">document</span>.createDocumentFragment();</div><div class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">10</span>;i++)&#123;</div><div class=\"line\">   <span class=\"keyword\">var</span> l=<span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"li\"</span>);</div><div class=\"line\">   l.innerHTML=<span class=\"string\">\"ss\"</span>;</div><div class=\"line\">   frag.appendChild(l);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"list\"</span>).appendChild(frag);</div></pre></td></tr></table></figure>\n<p>ReactDOMDOMjsDOMDOMDOMjavascript<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a = &#123;</div><div class=\"line\">  type: <span class=\"string\">'a'</span>,</div><div class=\"line\">  props: &#123;</div><div class=\"line\">    children: <span class=\"string\">'React'</span>,</div><div class=\"line\">    className: <span class=\"string\">'link'</span>,</div><div class=\"line\">    href: <span class=\"string\">'facebook/react  GitHub'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  _isReactElement: <span class=\"literal\">true</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">React.render(a, <span class=\"built_in\">document</span>.body)</div></pre></td></tr></table></figure></p>\n<p>DOMdiff</p>\n<ul>\n<li>JSDOM</li>\n<li>DOM</li>\n<li>DOM<br>reactdiffDOMDOMdiffreact</li>\n</ul>\n<h3 id=\"React\"><a href=\"#React\" class=\"headerlink\" title=\"React\"></a>React</h3><p>jqueryjquery</p>\n<p><img width=\"400\" src=\"/2017-06-11/01.jpeg\" title=\"jquery\"></p>\n<p>reactreactDOMReactreact</p>\n<p><img width=\"400\" src=\"/2017-06-11/02.jpeg\" title=\"react\"></p>\n<p>reactReact</p>"},{"title":"webworker","comments":1,"date":"2017-05-07T13:09:11.000Z","_content":"\n### webWorker\n\n\"setTimeout\"JavaScript\n\nJavaScriptDOMDOMDOM?\n\nJavaScript\n\n<!-- more -->\n\n\n\n\n``` html\n<!DOCTYPE html>\n    <head>\n        <title>singleThread</title>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n    </head>\n    <body>\n        <script>\n            //1\n            setTimeout(function(){\n                console.log('come on');\n            },1000);\n            //alert\n            alert('waiting');\n        </script>\n    </body>\n</html>\n```\n\nHTML5webWorker\n\nJavaScriptDOM\n\nwebWorker\n\n\n\n``` html\n<!DOCTYPE html>\n    <head>\n        <title>worker</title>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n        <script>\n            function init(){\n                //Workerurl\n                var worker = new Worker('worker.js');\n                //worker\n                worker.onmessage = function(event){\n                    document.getElementById('result').innerHTML+=event.data+\"<br/>\" ;\n                };\n            };\n        </script>\n    </head>\n    <body onload = \"init()\">\n        <div id=\"result\"></div>\n    </body>\n</html>\n```\n\nworker.js:\n\n``` javascript\nvar i = 0;\nfunction timedCount(){\n    for(var j = 0, sum = 0; j < 100; j++){\n        for(var i = 0; i < 100000000; i++){\n            sum+=i;\n        };\n    };\n    //sum\n    postMessage(sum);\n};\n//timedCountpostMessage\npostMessage('Before computing, '+new Date());\ntimedCount();\n//timedCount\npostMessage('After computing, ' +new Date());\n```\n\n\nworkeronmessageworker.jspostMessage(event.data)div#result\n\n\n\n![1](/webworker/1.png)\n\nworker.jstimedCountpostMessage\n\n![2](webworker/2.png)\n\n\n\n### webWorker\n\nworkerAPI\n\n#### 1postMessage(data)\n\ndata\n\n``` javascript\n//worker = new Worker('url');\n//worker.postMessage\nworker.postMessage({first:1,second:2});\n\n//postMessage\npostMessage(test);\n```\n\n#### 2terminate()\n\nworkerterminate\n\n``` javascript\n//worker = new Worker('url');\nworker.terminate();\n``` \n\n\n\n``` html\n<!DOCTYPE html>\n    <head>\n        <title>worker</title>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n        <script>\n            function init(){\n                var worker = new Worker('worker.js');\n                //100{name: 'monkey'}\n                setInterval(function(){\n                    worker.postMessage({name: 'monkey'});\n                },100);\n                //workermessage\n                worker.onmessage = function(event){\n                    document.getElementById('result').innerHTML+=event.data+\"<br/>\" ;\n                    //terminateevent.data\n                    worker.terminate();\n                };\n            };\n        </script>\n    </head>\n    <body onload = \"init()\">\n        <div id=\"result\"></div>\n    </body>\n</html>\n``` \n\nworker.js\n\n``` javascript\n<script>\n//message\nonmessage = function(event){\n    //event.data.name\n    postMessage(event.data.name);\n};\n</script>\n``` \n\n#### 3message\n\ndata\n\nmessageterminatedemo\n\n#### 4error\n\ne.message\n\n\n\n``` javascript\n//worker = new Worker('url');\nworker.onerror = function(e){\n    //\n    console.log(e.message);\n    //\n    worker.terminate();\n}\n``` \n\nworkerworkermessageworkerterminatecloseworker\n\n### worker\n\n\n\n\n``` javascript\n<!DOCTYPE html>\n    <head>\n        <title>worker</title>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n        <script>\n            function init(){\n                var worker = new Worker('worker.js');\n                //\n                worker.onmessage = function(event){\n                    console.log(event.data);\n                };\n                //\n                worker.onerror = function(e){\n                    console.log('erro: ' + e.message);\n                    //\n                    worker.terminate();\n                };\n            };\n        </script>\n    </head>\n    <body onload = \"init()\">\n        \n    </body>\n</html>\n```\n\nworker.js\n\n``` javascript\n//windowalert\nalert(1);\nonmessage = function(event){\n    //event.data.name\n    postMessage(event.data.name);\n};\n```\n\n\n\n![3](webworker/3.png)\n\n\nalertwindowundefined\n\nworker.jshtmlwindowwoker.jsWorkerGlobalScopewindowwindowDOM APIsetTimeoutsetInterval\nWorkerGlobalScope\n\n#### 1self\n\n WorkerGlobalScope  self \n\n#### 2location\n\nlocation  WorkerLocation  URL URL \n\n#### 3close\n\nterminate\n\n#### 4importScripts\n\nimportScripts()urlworker\n\n#### 5XMLHttpRequest\n\nAjax\n\n#### 6setTimeout/setIntervaladdEventListener/postMessage\n\n### worker\n\n\n1.JSpostMessageonmessage\n\n2.workerimportScripts(url)\n\n3. setTimeout(), clearTimeout(), setInterval(), and clearInterval()\n\n4.XMLHttpRequest\n\n5.navigator\n\n\n\n1.JS\n\n2.workerDOM\n\n3.WorkerFFworkerworker,Chrome\n\n4.IE","source":"_posts/2017-05-07.md","raw":"---\ntitle: webworker\ncomments: true\ndate: 2017-05-07 21:09:11\ntags: \n    - 'javascript'\n---\n\n### webWorker\n\n\"setTimeout\"JavaScript\n\nJavaScriptDOMDOMDOM?\n\nJavaScript\n\n<!-- more -->\n\n\n\n\n``` html\n<!DOCTYPE html>\n    <head>\n        <title>singleThread</title>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n    </head>\n    <body>\n        <script>\n            //1\n            setTimeout(function(){\n                console.log('come on');\n            },1000);\n            //alert\n            alert('waiting');\n        </script>\n    </body>\n</html>\n```\n\nHTML5webWorker\n\nJavaScriptDOM\n\nwebWorker\n\n\n\n``` html\n<!DOCTYPE html>\n    <head>\n        <title>worker</title>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n        <script>\n            function init(){\n                //Workerurl\n                var worker = new Worker('worker.js');\n                //worker\n                worker.onmessage = function(event){\n                    document.getElementById('result').innerHTML+=event.data+\"<br/>\" ;\n                };\n            };\n        </script>\n    </head>\n    <body onload = \"init()\">\n        <div id=\"result\"></div>\n    </body>\n</html>\n```\n\nworker.js:\n\n``` javascript\nvar i = 0;\nfunction timedCount(){\n    for(var j = 0, sum = 0; j < 100; j++){\n        for(var i = 0; i < 100000000; i++){\n            sum+=i;\n        };\n    };\n    //sum\n    postMessage(sum);\n};\n//timedCountpostMessage\npostMessage('Before computing, '+new Date());\ntimedCount();\n//timedCount\npostMessage('After computing, ' +new Date());\n```\n\n\nworkeronmessageworker.jspostMessage(event.data)div#result\n\n\n\n![1](/webworker/1.png)\n\nworker.jstimedCountpostMessage\n\n![2](webworker/2.png)\n\n\n\n### webWorker\n\nworkerAPI\n\n#### 1postMessage(data)\n\ndata\n\n``` javascript\n//worker = new Worker('url');\n//worker.postMessage\nworker.postMessage({first:1,second:2});\n\n//postMessage\npostMessage(test);\n```\n\n#### 2terminate()\n\nworkerterminate\n\n``` javascript\n//worker = new Worker('url');\nworker.terminate();\n``` \n\n\n\n``` html\n<!DOCTYPE html>\n    <head>\n        <title>worker</title>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n        <script>\n            function init(){\n                var worker = new Worker('worker.js');\n                //100{name: 'monkey'}\n                setInterval(function(){\n                    worker.postMessage({name: 'monkey'});\n                },100);\n                //workermessage\n                worker.onmessage = function(event){\n                    document.getElementById('result').innerHTML+=event.data+\"<br/>\" ;\n                    //terminateevent.data\n                    worker.terminate();\n                };\n            };\n        </script>\n    </head>\n    <body onload = \"init()\">\n        <div id=\"result\"></div>\n    </body>\n</html>\n``` \n\nworker.js\n\n``` javascript\n<script>\n//message\nonmessage = function(event){\n    //event.data.name\n    postMessage(event.data.name);\n};\n</script>\n``` \n\n#### 3message\n\ndata\n\nmessageterminatedemo\n\n#### 4error\n\ne.message\n\n\n\n``` javascript\n//worker = new Worker('url');\nworker.onerror = function(e){\n    //\n    console.log(e.message);\n    //\n    worker.terminate();\n}\n``` \n\nworkerworkermessageworkerterminatecloseworker\n\n### worker\n\n\n\n\n``` javascript\n<!DOCTYPE html>\n    <head>\n        <title>worker</title>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n        <script>\n            function init(){\n                var worker = new Worker('worker.js');\n                //\n                worker.onmessage = function(event){\n                    console.log(event.data);\n                };\n                //\n                worker.onerror = function(e){\n                    console.log('erro: ' + e.message);\n                    //\n                    worker.terminate();\n                };\n            };\n        </script>\n    </head>\n    <body onload = \"init()\">\n        \n    </body>\n</html>\n```\n\nworker.js\n\n``` javascript\n//windowalert\nalert(1);\nonmessage = function(event){\n    //event.data.name\n    postMessage(event.data.name);\n};\n```\n\n\n\n![3](webworker/3.png)\n\n\nalertwindowundefined\n\nworker.jshtmlwindowwoker.jsWorkerGlobalScopewindowwindowDOM APIsetTimeoutsetInterval\nWorkerGlobalScope\n\n#### 1self\n\n WorkerGlobalScope  self \n\n#### 2location\n\nlocation  WorkerLocation  URL URL \n\n#### 3close\n\nterminate\n\n#### 4importScripts\n\nimportScripts()urlworker\n\n#### 5XMLHttpRequest\n\nAjax\n\n#### 6setTimeout/setIntervaladdEventListener/postMessage\n\n### worker\n\n\n1.JSpostMessageonmessage\n\n2.workerimportScripts(url)\n\n3. setTimeout(), clearTimeout(), setInterval(), and clearInterval()\n\n4.XMLHttpRequest\n\n5.navigator\n\n\n\n1.JS\n\n2.workerDOM\n\n3.WorkerFFworkerworker,Chrome\n\n4.IE","slug":"2017-05-07","published":1,"updated":"2018-02-10T09:02:49.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vaa0009fdldtmgt8vrf","content":"<h3 id=\"webWorker\"><a href=\"#webWorker\" class=\"headerlink\" title=\"webWorker\"></a>webWorker</h3><p>setTimeoutJavaScript</p>\n<p>JavaScriptDOMDOMDOM?</p>\n<p>JavaScript</p>\n<a id=\"more\"></a>\n<p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>singleThread<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=utf-8\"</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//1</span></span></div><div class=\"line\"><span class=\"javascript\">            setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'come on'</span>);</span></div><div class=\"line\"><span class=\"undefined\">            &#125;,1000);</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//alert</span></span></div><div class=\"line\"><span class=\"javascript\">            alert(<span class=\"string\">'waiting'</span>);</span></div><div class=\"line\"><span class=\"undefined\">        </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>HTML5webWorker</p>\n<p>JavaScriptDOM</p>\n<p>webWorker</p>\n<p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>worker<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=utf-8\"</span>/&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\"></span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"comment\">//Workerurl</span></span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">var</span> worker = <span class=\"keyword\">new</span> Worker(<span class=\"string\">'worker.js'</span>);</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"comment\">//worker</span></span></div><div class=\"line\"><span class=\"javascript\">                worker.onmessage = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'result'</span>).innerHTML+=event.data+<span class=\"string\">\"&lt;br/&gt;\"</span> ;</span></div><div class=\"line\"><span class=\"undefined\">                &#125;;</span></div><div class=\"line\"><span class=\"undefined\">            &#125;;</span></div><div class=\"line\"><span class=\"undefined\">        </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">onload</span> = <span class=\"string\">\"init()\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"result\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>worker.js:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timedCount</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>, sum = <span class=\"number\">0</span>; j &lt; <span class=\"number\">100</span>; j++)&#123;</div><div class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000000</span>; i++)&#123;</div><div class=\"line\">            sum+=i;</div><div class=\"line\">        &#125;;</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"comment\">//sum</span></div><div class=\"line\">    postMessage(sum);</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"comment\">//timedCountpostMessage</span></div><div class=\"line\">postMessage(<span class=\"string\">'Before computing, '</span>+<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>());</div><div class=\"line\">timedCount();</div><div class=\"line\"><span class=\"comment\">//timedCount</span></div><div class=\"line\">postMessage(<span class=\"string\">'After computing, '</span> +<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>());</div></pre></td></tr></table></figure>\n<p>workeronmessageworker.jspostMessage(event.data)div#result</p>\n<p></p>\n<p><img src=\"/webworker/1.png\" alt=\"1\"></p>\n<p>worker.jstimedCountpostMessage</p>\n<p><img src=\"/2017-05-07/2.png\" alt=\"2\"></p>\n<h3 id=\"webWorkerAPI\"><a href=\"#webWorkerAPI\" class=\"headerlink\" title=\"webWorker\"></a>webWorker</h3><p>workerAPI</p>\n<h4 id=\"1postMessage-data\"><a href=\"#1postMessage-data\" class=\"headerlink\" title=\"1postMessage(data)\"></a>1postMessage(data)</h4><p>data</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//worker = new Worker('url');</span></div><div class=\"line\"><span class=\"comment\">//worker.postMessage</span></div><div class=\"line\">worker.postMessage(&#123;<span class=\"attr\">first</span>:<span class=\"number\">1</span>,<span class=\"attr\">second</span>:<span class=\"number\">2</span>&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//postMessage</span></div><div class=\"line\">postMessage(test);</div></pre></td></tr></table></figure>\n<h4 id=\"2terminate\"><a href=\"#2terminate\" class=\"headerlink\" title=\"2terminate()\"></a>2terminate()</h4><p>workerterminate</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//worker = new Worker('url');</span></div><div class=\"line\">worker.terminate();</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> html</div><div class=\"line\">&lt;!DOCTYPE html&gt;</div><div class=\"line\">    &lt;head&gt;</div><div class=\"line\">        &lt;title&gt;worker&lt;<span class=\"regexp\">/title&gt;</span></div><div class=\"line\"><span class=\"regexp\">        &lt;meta http-equiv=\"Content-Type\" content=\"text/</span>html; charset=utf<span class=\"number\">-8</span><span class=\"string\">\"/&gt;</span></div><div class=\"line\"><span class=\"string\">        &lt;script&gt;</span></div><div class=\"line\"><span class=\"string\">            function init()&#123;</span></div><div class=\"line\"><span class=\"string\">                var worker = new Worker('worker.js');</span></div><div class=\"line\"><span class=\"string\">                //100&#123;name: 'monkey'&#125;</span></div><div class=\"line\"><span class=\"string\">                setInterval(function()&#123;</span></div><div class=\"line\"><span class=\"string\">                    worker.postMessage(&#123;name: 'monkey'&#125;);</span></div><div class=\"line\"><span class=\"string\">                &#125;,100);</span></div><div class=\"line\"><span class=\"string\">                //workermessage</span></div><div class=\"line\"><span class=\"string\">                worker.onmessage = function(event)&#123;</span></div><div class=\"line\"><span class=\"string\">                    document.getElementById('result').innerHTML+=event.data+\"</span>&lt;br/&gt;<span class=\"string\">\" ;</span></div><div class=\"line\"><span class=\"string\">                    //terminateevent.data</span></div><div class=\"line\"><span class=\"string\">                    worker.terminate();</span></div><div class=\"line\"><span class=\"string\">                &#125;;</span></div><div class=\"line\"><span class=\"string\">            &#125;;</span></div><div class=\"line\"><span class=\"string\">        &lt;/script&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;/head&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;body onload = \"</span>init()<span class=\"string\">\"&gt;</span></div><div class=\"line\"><span class=\"string\">        &lt;div id=\"</span>result<span class=\"string\">\"&gt;&lt;/div&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;/body&gt;</span></div><div class=\"line\"><span class=\"string\">&lt;/html&gt;</span></div><div class=\"line\"><span class=\"string\">``` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">worker.js</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">``` javascript</span></div><div class=\"line\"><span class=\"string\">&lt;script&gt;</span></div><div class=\"line\"><span class=\"string\">//message</span></div><div class=\"line\"><span class=\"string\">onmessage = function(event)&#123;</span></div><div class=\"line\"><span class=\"string\">    //event.data.name</span></div><div class=\"line\"><span class=\"string\">    postMessage(event.data.name);</span></div><div class=\"line\"><span class=\"string\">&#125;;</span></div><div class=\"line\"><span class=\"string\">&lt;/script&gt;</span></div><div class=\"line\"><span class=\"string\">``` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">#### 3message</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">data</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">messageterminatedemo</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">#### 4error</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">e.message</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">``` javascript</span></div><div class=\"line\"><span class=\"string\">//worker = new Worker('url');</span></div><div class=\"line\"><span class=\"string\">worker.onerror = function(e)&#123;</span></div><div class=\"line\"><span class=\"string\">    //</span></div><div class=\"line\"><span class=\"string\">    console.log(e.message);</span></div><div class=\"line\"><span class=\"string\">    //</span></div><div class=\"line\"><span class=\"string\">    worker.terminate();</span></div><div class=\"line\"><span class=\"string\">&#125;</span></div><div class=\"line\"><span class=\"string\">``` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">workerworkermessageworkerterminatecloseworker</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">### worker</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">``` javascript</span></div><div class=\"line\"><span class=\"string\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;head&gt;</span></div><div class=\"line\"><span class=\"string\">        &lt;title&gt;worker&lt;/title&gt;</span></div><div class=\"line\"><span class=\"string\">        &lt;meta http-equiv=\"</span>Content-Type<span class=\"string\">\" content=\"</span>text/html; charset=utf<span class=\"number\">-8</span><span class=\"string\">\"/&gt;</span></div><div class=\"line\"><span class=\"string\">        &lt;script&gt;</span></div><div class=\"line\"><span class=\"string\">            function init()&#123;</span></div><div class=\"line\"><span class=\"string\">                var worker = new Worker('worker.js');</span></div><div class=\"line\"><span class=\"string\">                //</span></div><div class=\"line\"><span class=\"string\">                worker.onmessage = function(event)&#123;</span></div><div class=\"line\"><span class=\"string\">                    console.log(event.data);</span></div><div class=\"line\"><span class=\"string\">                &#125;;</span></div><div class=\"line\"><span class=\"string\">                //</span></div><div class=\"line\"><span class=\"string\">                worker.onerror = function(e)&#123;</span></div><div class=\"line\"><span class=\"string\">                    console.log('erro: ' + e.message);</span></div><div class=\"line\"><span class=\"string\">                    //</span></div><div class=\"line\"><span class=\"string\">                    worker.terminate();</span></div><div class=\"line\"><span class=\"string\">                &#125;;</span></div><div class=\"line\"><span class=\"string\">            &#125;;</span></div><div class=\"line\"><span class=\"string\">        &lt;/script&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;/head&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;body onload = \"</span>init()<span class=\"string\">\"&gt;</span></div><div class=\"line\"><span class=\"string\">        </span></div><div class=\"line\"><span class=\"string\">    &lt;/body&gt;</span></div><div class=\"line\"><span class=\"string\">&lt;/html&gt;</span></div></pre></td></tr></table></figure>\n<p>worker.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//windowalert</span></div><div class=\"line\">alert(<span class=\"number\">1</span>);</div><div class=\"line\">onmessage = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//event.data.name</span></div><div class=\"line\">    postMessage(event.data.name);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img src=\"/2017-05-07/3.png\" alt=\"3\"></p>\n<p>alertwindowundefined</p>\n<p>worker.jshtmlwindowwoker.jsWorkerGlobalScopewindowwindowDOM APIsetTimeoutsetInterval<br>WorkerGlobalScope</p>\n<h4 id=\"1self\"><a href=\"#1self\" class=\"headerlink\" title=\"1self\"></a>1self</h4><p> WorkerGlobalScope  self </p>\n<h4 id=\"2location\"><a href=\"#2location\" class=\"headerlink\" title=\"2location\"></a>2location</h4><p>location  WorkerLocation  URL URL </p>\n<h4 id=\"3close\"><a href=\"#3close\" class=\"headerlink\" title=\"3close\"></a>3close</h4><p>terminate</p>\n<h4 id=\"4importScripts\"><a href=\"#4importScripts\" class=\"headerlink\" title=\"4importScripts\"></a>4importScripts</h4><p>importScripts()urlworker</p>\n<h4 id=\"5XMLHttpRequest\"><a href=\"#5XMLHttpRequest\" class=\"headerlink\" title=\"5XMLHttpRequest\"></a>5XMLHttpRequest</h4><p>Ajax</p>\n<h4 id=\"6setTimeout-setIntervaladdEventListener-postMessage\"><a href=\"#6setTimeout-setIntervaladdEventListener-postMessage\" class=\"headerlink\" title=\"6setTimeout/setIntervaladdEventListener/postMessage\"></a>6setTimeout/setIntervaladdEventListener/postMessage</h4><h3 id=\"worker\"><a href=\"#worker\" class=\"headerlink\" title=\"worker\"></a>worker</h3><p></p>\n<p>1.JSpostMessageonmessage</p>\n<p>2.workerimportScripts(url)</p>\n<p>3. setTimeout(), clearTimeout(), setInterval(), and clearInterval()</p>\n<p>4.XMLHttpRequest</p>\n<p>5.navigator</p>\n<p></p>\n<p>1.JS</p>\n<p>2.workerDOM</p>\n<p>3.WorkerFFworkerworker,Chrome</p>\n<p>4.IE</p>\n","site":{"data":{}},"excerpt":"<h3 id=\"webWorker\"><a href=\"#webWorker\" class=\"headerlink\" title=\"webWorker\"></a>webWorker</h3><p>setTimeoutJavaScript</p>\n<p>JavaScriptDOMDOMDOM?</p>\n<p>JavaScript</p>","more":"<p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>singleThread<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=utf-8\"</span>/&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//1</span></span></div><div class=\"line\"><span class=\"javascript\">            setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'come on'</span>);</span></div><div class=\"line\"><span class=\"undefined\">            &#125;,1000);</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//alert</span></span></div><div class=\"line\"><span class=\"javascript\">            alert(<span class=\"string\">'waiting'</span>);</span></div><div class=\"line\"><span class=\"undefined\">        </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>HTML5webWorker</p>\n<p>JavaScriptDOM</p>\n<p>webWorker</p>\n<p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>worker<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=utf-8\"</span>/&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\"></span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"comment\">//Workerurl</span></span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">var</span> worker = <span class=\"keyword\">new</span> Worker(<span class=\"string\">'worker.js'</span>);</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"comment\">//worker</span></span></div><div class=\"line\"><span class=\"javascript\">                worker.onmessage = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'result'</span>).innerHTML+=event.data+<span class=\"string\">\"&lt;br/&gt;\"</span> ;</span></div><div class=\"line\"><span class=\"undefined\">                &#125;;</span></div><div class=\"line\"><span class=\"undefined\">            &#125;;</span></div><div class=\"line\"><span class=\"undefined\">        </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">onload</span> = <span class=\"string\">\"init()\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"result\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>worker.js:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">timedCount</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>, sum = <span class=\"number\">0</span>; j &lt; <span class=\"number\">100</span>; j++)&#123;</div><div class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000000</span>; i++)&#123;</div><div class=\"line\">            sum+=i;</div><div class=\"line\">        &#125;;</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"comment\">//sum</span></div><div class=\"line\">    postMessage(sum);</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"comment\">//timedCountpostMessage</span></div><div class=\"line\">postMessage(<span class=\"string\">'Before computing, '</span>+<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>());</div><div class=\"line\">timedCount();</div><div class=\"line\"><span class=\"comment\">//timedCount</span></div><div class=\"line\">postMessage(<span class=\"string\">'After computing, '</span> +<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>());</div></pre></td></tr></table></figure>\n<p>workeronmessageworker.jspostMessage(event.data)div#result</p>\n<p></p>\n<p><img src=\"/webworker/1.png\" alt=\"1\"></p>\n<p>worker.jstimedCountpostMessage</p>\n<p><img src=\"/2017-05-07/2.png\" alt=\"2\"></p>\n<h3 id=\"webWorkerAPI\"><a href=\"#webWorkerAPI\" class=\"headerlink\" title=\"webWorker\"></a>webWorker</h3><p>workerAPI</p>\n<h4 id=\"1postMessage-data\"><a href=\"#1postMessage-data\" class=\"headerlink\" title=\"1postMessage(data)\"></a>1postMessage(data)</h4><p>data</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//worker = new Worker('url');</span></div><div class=\"line\"><span class=\"comment\">//worker.postMessage</span></div><div class=\"line\">worker.postMessage(&#123;<span class=\"attr\">first</span>:<span class=\"number\">1</span>,<span class=\"attr\">second</span>:<span class=\"number\">2</span>&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//postMessage</span></div><div class=\"line\">postMessage(test);</div></pre></td></tr></table></figure>\n<h4 id=\"2terminate\"><a href=\"#2terminate\" class=\"headerlink\" title=\"2terminate()\"></a>2terminate()</h4><p>workerterminate</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//worker = new Worker('url');</span></div><div class=\"line\">worker.terminate();</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> html</div><div class=\"line\">&lt;!DOCTYPE html&gt;</div><div class=\"line\">    &lt;head&gt;</div><div class=\"line\">        &lt;title&gt;worker&lt;<span class=\"regexp\">/title&gt;</span></div><div class=\"line\"><span class=\"regexp\">        &lt;meta http-equiv=\"Content-Type\" content=\"text/</span>html; charset=utf<span class=\"number\">-8</span><span class=\"string\">\"/&gt;</span></div><div class=\"line\"><span class=\"string\">        &lt;script&gt;</span></div><div class=\"line\"><span class=\"string\">            function init()&#123;</span></div><div class=\"line\"><span class=\"string\">                var worker = new Worker('worker.js');</span></div><div class=\"line\"><span class=\"string\">                //100&#123;name: 'monkey'&#125;</span></div><div class=\"line\"><span class=\"string\">                setInterval(function()&#123;</span></div><div class=\"line\"><span class=\"string\">                    worker.postMessage(&#123;name: 'monkey'&#125;);</span></div><div class=\"line\"><span class=\"string\">                &#125;,100);</span></div><div class=\"line\"><span class=\"string\">                //workermessage</span></div><div class=\"line\"><span class=\"string\">                worker.onmessage = function(event)&#123;</span></div><div class=\"line\"><span class=\"string\">                    document.getElementById('result').innerHTML+=event.data+\"</span>&lt;br/&gt;<span class=\"string\">\" ;</span></div><div class=\"line\"><span class=\"string\">                    //terminateevent.data</span></div><div class=\"line\"><span class=\"string\">                    worker.terminate();</span></div><div class=\"line\"><span class=\"string\">                &#125;;</span></div><div class=\"line\"><span class=\"string\">            &#125;;</span></div><div class=\"line\"><span class=\"string\">        &lt;/script&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;/head&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;body onload = \"</span>init()<span class=\"string\">\"&gt;</span></div><div class=\"line\"><span class=\"string\">        &lt;div id=\"</span>result<span class=\"string\">\"&gt;&lt;/div&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;/body&gt;</span></div><div class=\"line\"><span class=\"string\">&lt;/html&gt;</span></div><div class=\"line\"><span class=\"string\">``` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">worker.js</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">``` javascript</span></div><div class=\"line\"><span class=\"string\">&lt;script&gt;</span></div><div class=\"line\"><span class=\"string\">//message</span></div><div class=\"line\"><span class=\"string\">onmessage = function(event)&#123;</span></div><div class=\"line\"><span class=\"string\">    //event.data.name</span></div><div class=\"line\"><span class=\"string\">    postMessage(event.data.name);</span></div><div class=\"line\"><span class=\"string\">&#125;;</span></div><div class=\"line\"><span class=\"string\">&lt;/script&gt;</span></div><div class=\"line\"><span class=\"string\">``` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">#### 3message</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">data</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">messageterminatedemo</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">#### 4error</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">e.message</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">``` javascript</span></div><div class=\"line\"><span class=\"string\">//worker = new Worker('url');</span></div><div class=\"line\"><span class=\"string\">worker.onerror = function(e)&#123;</span></div><div class=\"line\"><span class=\"string\">    //</span></div><div class=\"line\"><span class=\"string\">    console.log(e.message);</span></div><div class=\"line\"><span class=\"string\">    //</span></div><div class=\"line\"><span class=\"string\">    worker.terminate();</span></div><div class=\"line\"><span class=\"string\">&#125;</span></div><div class=\"line\"><span class=\"string\">``` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">workerworkermessageworkerterminatecloseworker</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">### worker</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">``` javascript</span></div><div class=\"line\"><span class=\"string\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;head&gt;</span></div><div class=\"line\"><span class=\"string\">        &lt;title&gt;worker&lt;/title&gt;</span></div><div class=\"line\"><span class=\"string\">        &lt;meta http-equiv=\"</span>Content-Type<span class=\"string\">\" content=\"</span>text/html; charset=utf<span class=\"number\">-8</span><span class=\"string\">\"/&gt;</span></div><div class=\"line\"><span class=\"string\">        &lt;script&gt;</span></div><div class=\"line\"><span class=\"string\">            function init()&#123;</span></div><div class=\"line\"><span class=\"string\">                var worker = new Worker('worker.js');</span></div><div class=\"line\"><span class=\"string\">                //</span></div><div class=\"line\"><span class=\"string\">                worker.onmessage = function(event)&#123;</span></div><div class=\"line\"><span class=\"string\">                    console.log(event.data);</span></div><div class=\"line\"><span class=\"string\">                &#125;;</span></div><div class=\"line\"><span class=\"string\">                //</span></div><div class=\"line\"><span class=\"string\">                worker.onerror = function(e)&#123;</span></div><div class=\"line\"><span class=\"string\">                    console.log('erro: ' + e.message);</span></div><div class=\"line\"><span class=\"string\">                    //</span></div><div class=\"line\"><span class=\"string\">                    worker.terminate();</span></div><div class=\"line\"><span class=\"string\">                &#125;;</span></div><div class=\"line\"><span class=\"string\">            &#125;;</span></div><div class=\"line\"><span class=\"string\">        &lt;/script&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;/head&gt;</span></div><div class=\"line\"><span class=\"string\">    &lt;body onload = \"</span>init()<span class=\"string\">\"&gt;</span></div><div class=\"line\"><span class=\"string\">        </span></div><div class=\"line\"><span class=\"string\">    &lt;/body&gt;</span></div><div class=\"line\"><span class=\"string\">&lt;/html&gt;</span></div></pre></td></tr></table></figure>\n<p>worker.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//windowalert</span></div><div class=\"line\">alert(<span class=\"number\">1</span>);</div><div class=\"line\">onmessage = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">//event.data.name</span></div><div class=\"line\">    postMessage(event.data.name);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img src=\"/2017-05-07/3.png\" alt=\"3\"></p>\n<p>alertwindowundefined</p>\n<p>worker.jshtmlwindowwoker.jsWorkerGlobalScopewindowwindowDOM APIsetTimeoutsetInterval<br>WorkerGlobalScope</p>\n<h4 id=\"1self\"><a href=\"#1self\" class=\"headerlink\" title=\"1self\"></a>1self</h4><p> WorkerGlobalScope  self </p>\n<h4 id=\"2location\"><a href=\"#2location\" class=\"headerlink\" title=\"2location\"></a>2location</h4><p>location  WorkerLocation  URL URL </p>\n<h4 id=\"3close\"><a href=\"#3close\" class=\"headerlink\" title=\"3close\"></a>3close</h4><p>terminate</p>\n<h4 id=\"4importScripts\"><a href=\"#4importScripts\" class=\"headerlink\" title=\"4importScripts\"></a>4importScripts</h4><p>importScripts()urlworker</p>\n<h4 id=\"5XMLHttpRequest\"><a href=\"#5XMLHttpRequest\" class=\"headerlink\" title=\"5XMLHttpRequest\"></a>5XMLHttpRequest</h4><p>Ajax</p>\n<h4 id=\"6setTimeout-setIntervaladdEventListener-postMessage\"><a href=\"#6setTimeout-setIntervaladdEventListener-postMessage\" class=\"headerlink\" title=\"6setTimeout/setIntervaladdEventListener/postMessage\"></a>6setTimeout/setIntervaladdEventListener/postMessage</h4><h3 id=\"worker\"><a href=\"#worker\" class=\"headerlink\" title=\"worker\"></a>worker</h3><p></p>\n<p>1.JSpostMessageonmessage</p>\n<p>2.workerimportScripts(url)</p>\n<p>3. setTimeout(), clearTimeout(), setInterval(), and clearInterval()</p>\n<p>4.XMLHttpRequest</p>\n<p>5.navigator</p>\n<p></p>\n<p>1.JS</p>\n<p>2.workerDOM</p>\n<p>3.WorkerFFworkerworker,Chrome</p>\n<p>4.IE</p>"},{"title":"React--JSX","comments":1,"date":"2017-06-10T13:09:11.000Z","_content":"\n### 1JSX\n\nJSX,javascriptXMLjavascriptHTML\n``` javascript\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <h2>Welcome to React</h2>\n        </div>\n      </div>\n    );\n  }\n}\n```\nJSXHTMLdiv,buttonJSXHTML\n\n<!-- more -->\n>ReactHTNMLReactReactHTML\n\n``` javascript\nclass App extends Component {\n  render() {\n    return (\n      <hello/> //html\n      <Hello/> //Hello\n    );\n  }\n}\n```\n\n### 2\n\n\n``` javascript\n  <button onclick=\"checkAndSubmit(this.form)\">Submit</button>\n```\nDOMhtmljsDOM\n``` javascript\n  $('#my-button').on('click', this.checkAndSubmit.bind(this));\n```\nreactJSX\n``` javascript\n  <button onClick={this.checkAndSubmit.bind(this)}>Submit</button>\n```\n>JavaScriptJSXReactDOM<font color=\"red\">bindthisconstructorthisthis</font>\n\n### 3JSXhtml\n\n  <b>html</b>\n\n  1htmlonclick\n\n  2DOMonclick\n\n  3onclickDOMDOMbug\n\n  <b>JSX</b>\n\n  1JSXonclickhtmlonclickDOMDOMonclick\n\n  2jsxjsxdomhtmlcssjs\n``` javascript\nclass App extends Component {\n  render() {\n    const Style = {\n      margin:'10px'\n    }\n    return (\n      <div style={Style}>\n        <p></p>\n      </div>\n    );\n  }\n}\n```\n\n### 4JSX\n\nJSXBabelJSXWebpack\n``` javascript\nmodule: {\n  loaders: [\n    { test: /\\.jsx?$/, loaders: ['babel-loader']}\n  ]\n}\n```\n\nJSXhtmlReactVirtual DOM","source":"_posts/2017-06-10.md","raw":"---\ntitle: React--JSX\ncomments: true\ndate: 2017-06-10 21:09:11\ntags: \n    - 'javascript'\n    - 'react'\n---\n\n### 1JSX\n\nJSX,javascriptXMLjavascriptHTML\n``` javascript\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <h2>Welcome to React</h2>\n        </div>\n      </div>\n    );\n  }\n}\n```\nJSXHTMLdiv,buttonJSXHTML\n\n<!-- more -->\n>ReactHTNMLReactReactHTML\n\n``` javascript\nclass App extends Component {\n  render() {\n    return (\n      <hello/> //html\n      <Hello/> //Hello\n    );\n  }\n}\n```\n\n### 2\n\n\n``` javascript\n  <button onclick=\"checkAndSubmit(this.form)\">Submit</button>\n```\nDOMhtmljsDOM\n``` javascript\n  $('#my-button').on('click', this.checkAndSubmit.bind(this));\n```\nreactJSX\n``` javascript\n  <button onClick={this.checkAndSubmit.bind(this)}>Submit</button>\n```\n>JavaScriptJSXReactDOM<font color=\"red\">bindthisconstructorthisthis</font>\n\n### 3JSXhtml\n\n  <b>html</b>\n\n  1htmlonclick\n\n  2DOMonclick\n\n  3onclickDOMDOMbug\n\n  <b>JSX</b>\n\n  1JSXonclickhtmlonclickDOMDOMonclick\n\n  2jsxjsxdomhtmlcssjs\n``` javascript\nclass App extends Component {\n  render() {\n    const Style = {\n      margin:'10px'\n    }\n    return (\n      <div style={Style}>\n        <p></p>\n      </div>\n    );\n  }\n}\n```\n\n### 4JSX\n\nJSXBabelJSXWebpack\n``` javascript\nmodule: {\n  loaders: [\n    { test: /\\.jsx?$/, loaders: ['babel-loader']}\n  ]\n}\n```\n\nJSXhtmlReactVirtual DOM","slug":"2017-06-10","published":1,"updated":"2018-02-10T09:03:11.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vac000afdldid278cos","content":"<h3 id=\"1JSX\"><a href=\"#1JSX\" class=\"headerlink\" title=\"1JSX\"></a>1JSX</h3><p>JSX,javascriptXMLjavascriptHTML<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;div className=<span class=\"string\">\"App\"</span>&gt;</div><div class=\"line\">        &lt;div className=<span class=\"string\">\"App-header\"</span>&gt;</div><div class=\"line\">          &lt;img src=&#123;logo&#125; className=<span class=\"string\">\"App-logo\"</span> alt=<span class=\"string\">\"logo\"</span> /&gt;</div><div class=\"line\">          &lt;h2&gt;Welcome to React&lt;<span class=\"regexp\">/h2&gt;</span></div><div class=\"line\"><span class=\"regexp\">        &lt;/</span>div&gt;</div><div class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\">    );</span></div><div class=\"line\"><span class=\"regexp\">  &#125;</span></div><div class=\"line\"><span class=\"regexp\">&#125;</span></div></pre></td></tr></table></figure></p>\n<p>JSXHTMLdiv,buttonJSXHTML</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>ReactHTNMLReactReactHTML</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;hello/&gt; <span class=\"comment\">//html</span></div><div class=\"line\">      &lt;Hello/&gt; <span class=\"comment\">//Hello</span></div><div class=\"line\">    );</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;button onclick=<span class=\"string\">\"checkAndSubmit(this.form)\"</span>&gt;Submit&lt;<span class=\"regexp\">/button&gt;</span></div></pre></td></tr></table></figure></p>\n<p>DOMhtmljsDOM<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(<span class=\"string\">'#my-button'</span>).on(<span class=\"string\">'click'</span>, <span class=\"keyword\">this</span>.checkAndSubmit.bind(<span class=\"keyword\">this</span>));</div></pre></td></tr></table></figure></p>\n<p>reactJSX<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;button onClick=&#123;<span class=\"keyword\">this</span>.checkAndSubmit.bind(<span class=\"keyword\">this</span>)&#125;&gt;Submit&lt;<span class=\"regexp\">/button&gt;</span></div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>JavaScriptJSXReactDOM<font color=\"red\">bindthisconstructorthisthis</font></p>\n</blockquote>\n<h3 id=\"3JSXhtml\"><a href=\"#3JSXhtml\" class=\"headerlink\" title=\"3JSXhtml\"></a>3JSXhtml</h3><p>  <b>html</b></p>\n<p>  1htmlonclick</p>\n<p>  2DOMonclick</p>\n<p>  3onclickDOMDOMbug</p>\n<p>  <b>JSX</b></p>\n<p>  1JSXonclickhtmlonclickDOMDOMonclick</p>\n<p>  2jsxjsxdomhtmlcssjs<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> Style = &#123;</div><div class=\"line\">      margin:<span class=\"string\">'10px'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;div style=&#123;Style&#125;&gt;</div><div class=\"line\">        &lt;p&gt;&lt;<span class=\"regexp\">/p&gt;</span></div><div class=\"line\"><span class=\"regexp\">      &lt;/</span>div&gt;</div><div class=\"line\">    );</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"4JSX\"><a href=\"#4JSX\" class=\"headerlink\" title=\"4JSX\"></a>4JSX</h3><p>JSXBabelJSXWebpack<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">  loaders: [</div><div class=\"line\">    &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.jsx?$/</span>, <span class=\"attr\">loaders</span>: [<span class=\"string\">'babel-loader'</span>]&#125;</div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>JSXhtmlReactVirtual DOM</p>\n","site":{"data":{}},"excerpt":"<h3 id=\"1JSX\"><a href=\"#1JSX\" class=\"headerlink\" title=\"1JSX\"></a>1JSX</h3><p>JSX,javascriptXMLjavascriptHTML<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;div className=<span class=\"string\">\"App\"</span>&gt;</div><div class=\"line\">        &lt;div className=<span class=\"string\">\"App-header\"</span>&gt;</div><div class=\"line\">          &lt;img src=&#123;logo&#125; className=<span class=\"string\">\"App-logo\"</span> alt=<span class=\"string\">\"logo\"</span> /&gt;</div><div class=\"line\">          &lt;h2&gt;Welcome to React&lt;<span class=\"regexp\">/h2&gt;</span></div><div class=\"line\"><span class=\"regexp\">        &lt;/</span>div&gt;</div><div class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\">    );</span></div><div class=\"line\"><span class=\"regexp\">  &#125;</span></div><div class=\"line\"><span class=\"regexp\">&#125;</span></div></pre></td></tr></table></figure></p>\n<p>JSXHTMLdiv,buttonJSXHTML</p>","more":"<blockquote>\n<p>ReactHTNMLReactReactHTML</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;hello/&gt; <span class=\"comment\">//html</span></div><div class=\"line\">      &lt;Hello/&gt; <span class=\"comment\">//Hello</span></div><div class=\"line\">    );</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;button onclick=<span class=\"string\">\"checkAndSubmit(this.form)\"</span>&gt;Submit&lt;<span class=\"regexp\">/button&gt;</span></div></pre></td></tr></table></figure></p>\n<p>DOMhtmljsDOM<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(<span class=\"string\">'#my-button'</span>).on(<span class=\"string\">'click'</span>, <span class=\"keyword\">this</span>.checkAndSubmit.bind(<span class=\"keyword\">this</span>));</div></pre></td></tr></table></figure></p>\n<p>reactJSX<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;button onClick=&#123;<span class=\"keyword\">this</span>.checkAndSubmit.bind(<span class=\"keyword\">this</span>)&#125;&gt;Submit&lt;<span class=\"regexp\">/button&gt;</span></div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>JavaScriptJSXReactDOM<font color=\"red\">bindthisconstructorthisthis</font></p>\n</blockquote>\n<h3 id=\"3JSXhtml\"><a href=\"#3JSXhtml\" class=\"headerlink\" title=\"3JSXhtml\"></a>3JSXhtml</h3><p>  <b>html</b></p>\n<p>  1htmlonclick</p>\n<p>  2DOMonclick</p>\n<p>  3onclickDOMDOMbug</p>\n<p>  <b>JSX</b></p>\n<p>  1JSXonclickhtmlonclickDOMDOMonclick</p>\n<p>  2jsxjsxdomhtmlcssjs<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> Style = &#123;</div><div class=\"line\">      margin:<span class=\"string\">'10px'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;div style=&#123;Style&#125;&gt;</div><div class=\"line\">        &lt;p&gt;&lt;<span class=\"regexp\">/p&gt;</span></div><div class=\"line\"><span class=\"regexp\">      &lt;/</span>div&gt;</div><div class=\"line\">    );</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"4JSX\"><a href=\"#4JSX\" class=\"headerlink\" title=\"4JSX\"></a>4JSX</h3><p>JSXBabelJSXWebpack<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">  loaders: [</div><div class=\"line\">    &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.jsx?$/</span>, <span class=\"attr\">loaders</span>: [<span class=\"string\">'babel-loader'</span>]&#125;</div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>JSXhtmlReactVirtual DOM</p>"},{"title":"Vuejavascript","comments":1,"toc":true,"date":"2018-06-30T07:16:04.000Z","_content":"\n## \n\n  vuemvvm`watch``computed`apivuevuejavascriptvue\n\n## flow \n\n  FlowJavaScriptFacebook2014Scale ConferenceJavaScriptFlowjavascript\n\n  <!-- more -->\t\n\n### \n\n  Flowvoidjsundefined\n  ```\n    boolean\n    number\n    string\n    null\n    void\n  ```\n  \n  ```js\n  let str:number = 1;\n  let str1:string = 'a';\n\n  // \n  str = 'd' // error\n  str1 = 3  // error\n  ```\n\n### \n\n  Flow\n  ```\n    Object\n    Array\n    Function\n    Class\n  ```\n  \n  ```js\n  // Object \n  let o:Object = {\n    key: 123\n  }\n  //Objectkey\n  let o2:{key:string} = {\n    key: '111'\n  }\n\n  // Array \n  //\n  let numberArr:number[] = [12,3,4,5,2];\n  //\n  let numberAr2r:Array<number> = [12,3,2,3];\n\n  let stringArr:string[] = ['12','a','cc'];\n  let booleanArr:boolean[] = [true,true,false];\n  let nullArr:null[] = [null,null,null];\n  let voidArr:void[] = [ , , undefined,void(0)];\n\n  //\n  //4\n  let arr:[number,string,boolean] = [1,'a',true,function(){},];\n  ```\n\n  Functionvue\n  ```js\n  /**\n   * \n   * fn\n   */\n  function fn(arg:number,arg2:string):Object{\n    return {\n      arg,\n      arg2\n    }\n  }\n\n  /**\n   * vue\n   * src/core/instance/lifecycle.js\n   */\n  export function mountComponent (\n    vm: Component,\n    el: ?Element,\n    hydrating?: boolean\n  ): Component {\n    // \n  }\n  ```\n\n  class\n  ```js\n  /**\n   * vue\n   * src/core/observer/index.js \n  */\n  export class Observer {\n    value: any;\n    dep: Dep;\n    vmCount: number;\n    constructor (value: any) {\n      // \n    }\n  }  \n  ```\n\n  flow.jsjavascriptbabelvuebabel-preset-flow-vuebabelrc\n  ```json\n  // package.json \n  \n  // \n  \"devDependencies\": {\n    \"@types/node\": \"^8.0.33\",\n    \"@types/webpack\": \"^3.0.13\",\n    \"acorn\": \"^5.2.1\",\n    \"babel-core\": \"^6.25.0\",\n    \"babel-eslint\": \"^8.0.3\",\n    \"babel-helper-vue-jsx-merge-props\": \"^2.0.2\",\n    \"babel-loader\": \"^7.0.0\",\n    \"babel-plugin-istanbul\": \"^4.1.4\",\n    \"babel-plugin-syntax-dynamic-import\": \"^6.18.0\",\n    \"babel-plugin-syntax-jsx\": \"^6.18.0\",\n    \"babel-plugin-transform-vue-jsx\": \"^3.4.3\",\n    \"babel-preset-es2015\": \"^6.24.1\",\n    \"babel-preset-flow-vue\": \"^1.0.0\"\n  }  \n  // \n\n  // babelrc \n  {\n    \"presets\": [\"es2015\", \"flow-vue\"],\n    \"plugins\": [\"transform-vue-jsx\", \"syntax-dynamic-import\"],\n    \"ignore\": [\n      \"dist/*.js\",\n      \"packages/**/*.js\"\n    ]\n  }\n  ```\n\n  ## \n\n  getter/setter\n\n  ### \n\n  \n  ```js\n    //  \n    let obj = { a: 1 }\n    obj.a // 1\n    typeof obj.toString // 'function'\n\n    // \n    let obj2 = Object.create({ a: 1 })\n    obj2.a // 1\n    typeof obj2.toString // 'function'\n\n    // \n    let obj3 = Object.create(null)\n    typeof obj3.toString // 'undefined'\n  ```\n  \n  \n\n  <img width=\"600\" src=\"2018-06-30-vue/obj.jpeg\"/>\n\n  Object.createES5vueie9+\n  ```js\n    if (!Object.create) {\n      Object.create = function (o) {\n        function F() {}  //\n        F.prototype = o;\n        return new F();  //new\n      };\n    }\n  ```\n  \n  vue`Object.create(null)`vue\n  ```js\n  // src/core/global-api/index.js\n  // VueoptionsASSET_TYPESvue'component','directive','filter'\n    Vue.options = Object.create(null)\n    ASSET_TYPES.forEach(type => {\n      Vue.options[type + 's'] = Object.create(null)\n    })\n  ```\n\n### \n\n  falseES5`Object.defineProperty`\n  \n  `Object.defineProperty(obj,prop,descriptor)``descriptor`\n  \n  * configurable  configurable  true  false\n  * enumerable enumerabletrue false\n  * value  JavaScript  undefined\n  * writable writabletruevalue false\n  * get  getter  getter  undefinedthisthis undefined\n  * set  setter  setter  undefined undefined\n\n  >  descriptor  (get  set)  value\n\n  \n  ```js\n    Object.defineProperty(obj,prop,\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: '',\n      get: function() {\n\n      },\n      set: function() {\n        \n      }\n    )\n  ```\n  \n  `Object.getOwnPropertyDescriptor`\n  ```js\n    // false\n    let obj = {}\n    Object.defineProperty(obj, 'name', {\n      value : \"wqzwh\"\n    })\n    Object.getOwnPropertyDescriptor(obj, 'name')\n    // {value: \"wqzwh\", writable: false, enumerable: false, configurable: false}\n\n    let obj2 = {}\n    Object.defineProperty(obj2, 'name', {\n      enumerable: true,\n      writable: true,\n      value : \"wqzwh\"\n    })\n    Object.getOwnPropertyDescriptor(obj2, 'name')\n    // {value: \"wqzwh\", writable: true, enumerable: true, configurable: false}\n  ```\n\n  `Object.keys()`key`enumerable`true\n  ```js\n    let obj = {}\n    Object.defineProperty(obj, 'name', {\n      enumerable: true,\n      value : \"wqzwh\"\n    })\n    Object.keys(obj) // ['name']\n  ```\n\n  `propertyIsEnumerable`\n  ```js\n    let obj = {}\n    Object.defineProperty(obj, 'name', {\n      value : \"wqzwh\"\n    })\n    obj.propertyIsEnumerable('name') // false\n\n    let obj = {}\n    Object.defineProperty(obj, 'name', {\n      enumerable: true,\n      value : \"wqzwh\"\n    })\n    obj.propertyIsEnumerable('name') // true\n  ```\n\n  `hasOwnProperty` in \n  ```js\n    // Object.defineProperty\n    let obj = {}\n    Object.defineProperty(obj, 'name', {\n      value : \"wqzwh\",\n      enumerable: true\n    })\n    let obj2 = Object.create(obj)\n    obj2.age = 20\n    for (key in obj2) {\n      console.log(key); // age, name\n    }\n    for (key in obj2) {\n      if (obj2.hasOwnProperty(key)) {\n        console.log(key); // age\n      }\n    }\n    \n    // \n    let obj = {}\n    obj.name = 'wqzwh'\n    let obj2 = Object.create(obj)\n    obj2.age = 20\n    for (key in obj2) {\n      console.log(key); // age, name\n    }\n    for (key in obj2) {\n      if (obj2.hasOwnProperty(key)) {\n        console.log(key); // age\n      }\n    }\n  ```\n\n  > `Object.defineProperty``enumerable``true``for in`\n\n### getter/setter\n\n  `get/set`\n  ```js\n    function foo() {}\n    Object.defineProperty(foo.prototype, 'z', \n      {\n        get: function(){\n          return 1\n        }\n      }\n    )\n    let obj = new foo();\n    console.log(obj.z) // 1\n    obj.z = 10\n    console.log(obj.z) // 1\n  ```\n  `z``foo.prototype``get``obj.z = 10``obj``z``get`\n\n  \n  <img width=\"600\" src=\"2018-06-30-vue/5.jpeg\"/>\n\n  `z``writable``configurable``true``z``z``obj.z`1\n  ```js\n    function foo() {}\n    Object.defineProperty(foo.prototype, 'z', \n      {\n        get: function(){\n          return 1\n        }\n      }\n    )\n    let obj = new foo();\n    console.log(obj.z) // 1\n    Object.defineProperty(obj, 'z', \n      {\n        value: 100,\n        writable: true,\n        configurable: true\n      }\n    )\n    console.log(obj.z) // 100\n    obj.z = 300\n    console.log(obj.z) // 300\n    delete obj.z\n    console.log(obj.z) // 1\n  ```\n\n  \n  <img width=\"600\" src=\"2018-06-30-vue/6.jpeg\"/>\n  \n  `Object.defineProperty``configurable``enumerable``writable``value``get``set`\n  <img width=\"600\" src=\"2018-06-30-vue/1.jpg\"/>\n\n### \n\n  `__proto__``Object.create(null)`\n  ```js\n    let obj = {x: 1, y: 2}\n    obj.__proto__.z = 3\n    console.log(obj.z) // 3\n  ```\n  <img width=\"600\" src=\"2018-06-30-vue/2.jpg\"/>\n\n  `Object.preventExtensions``Object.isExtensible`\n  ```js\n    let obj = {x : 1, y : 2};\n    Object.isExtensible(obj); // true\n    Object.preventExtensions(obj);\n    Object.isExtensible(obj); // false\n    obj.z = 1;\n    obj.z; // undefined, add new property failed\n    Object.getOwnPropertyDescriptor(obj, 'x');\n    // Object {value: 1, writable: true, enumerable: true, configurable: true}\n  ```\n\n  `Object.seal`configurablefalse,`Object.isSealed`\n  ```js\n    let obj = {x : 1, y : 2};\n    Object.seal(obj);\n    Object.getOwnPropertyDescriptor(obj, 'x');\n    // Object {value: 1, writable: true, enumerable: true, configurable: false}\n    Object.isSealed(obj); // true\n  ```\n\n  `Object.freeze`sealwirtablefalse`Object.isFrozen`\n  ```js\n    let obj = {x : 1, y : 2};\n    Object.freeze(obj);\n    Object.getOwnPropertyDescriptor(obj, 'x');\n    // Object {value: 1, writable: false, enumerable: true, configurable: false}\n    Object.isFrozen(obj); // true\n  ```\n\n## DOM\n\n  vuemodel`platforms/web/runtime/directives/model.js`\n  ```js\n    /* istanbul ignore if */\n    if (isIE9) {\n      // http://www.matts411.com/post/internet-explorer-9-oninput/\n      document.addEventListener('selectionchange', () => {\n        const el = document.activeElement\n        if (el && el.vmodel) {\n          trigger(el, 'input')\n        }\n      })\n    }\n\n    // \n    function trigger (el, type) {\n      const e = document.createEvent('HTMLEvents')\n      e.initEvent(type, true, true)\n      el.dispatchEvent(e)\n    }\n  ```\n\n  `document.activeElement``document.hasFocus()`\n\n  element.dispatchEvent(). \n  ```js\n    document.createEvent()\n    event.initEvent()\n    element.dispatchEvent()\n  ```\n\n  `createEvent()``Event`\n  ```\n    \t        \t        \n    HTMLEvents\tHTMLEvent\t  initEvent()\n    MouseEvents\tMouseEvent\t  initMouseEvent()\n    UIEvents\t  UIEvent\t  initUIEvent()\n  ```\n  `initEvent()``DocumentEvent``Event``initEvent(eventName, canBubble, preventDefault)`. \n\n  `dispatchEvent()`vue`el.dispatchEvent(e)`, e`createEvent()``Event`\n\n  `click`\n  ```js\n    // .\n    let event = document.createEvent('HTMLEvents');\n    // \n    event.initEvent('click', true, false);\n    let elm = document.getElementById('wq')\n    // .\n    elm.addEventListener('click', (e) => {\n      console.log(e)\n    }, false);\n    // \n    elm.dispatchEvent(event);\n  ```\n\n## \n\n  ### every/some\n\n  ``thisundefined\n\n  > \n\n  * every()  truetrue\n  * some()  truetrue\n\n  \n  ```js\n  let arr = [ 1, 2, 3, 4, 5, 6 ];  \n  console.log( arr.some( function( item, index, array ){  \n    console.log( 'item=' + item + ',index='+index+',array='+array );  \n    return item > 3;  \n  }));  \n  console.log( arr.every( function( item, index, array ){  \n    console.log( 'item=' + item + ',index='+index+',array='+array );  \n    return item > 3;  \n  }));  \n  ```\n  sometrueeveryfalse,\n\n## getBoundingClientRect\n\n  `lefttoprightbottom``xy`\n\n  <img width=\"500\" src=\"2018-06-30-vue/3.png\"/>\n\n  `lefttoprightbottomxy`topleft\n\n  >  window.pageXOffset  window.pageYOffset  window.scrollX  window.scrollY\n  \n  ```js\n  // For scrollX\n  (((t = document.documentElement) || (t = document.body.parentNode))\n    && typeof t.scrollLeft == 'number' ? t : document.body).scrollLeft\n  // For scrollY\n  (((t = document.documentElement) || (t = document.body.parentNode))\n    && typeof t.scrollTop == 'number' ? t : document.body).scrollTop\n  ```\n\n  IE(2,2)\n  ```js\n    document.documentElement.clientTop;  // IE0IE2\n    document.documentElement.clientLeft; // IE0IE2\n\n    // \n    functiongGetRect (element) {\n      let rect = element.getBoundingClientRect();\n      let top = document.documentElement.clientTop;\n      let left= document.documentElement.clientLeft;\n      return{\n        top: rect.top - top,\n        bottom: rect.bottom - top,\n        left: rect.left - left,\n        right: rect.right - left\n      }\n    }\n  ```\n\n## performance\n  \n  vue\n  ```js\n    if (process.env.NODE_ENV !== 'production') {\n      const perf = inBrowser && window.performance\n      /* istanbul ignore if */\n      if (\n        perf &&\n        perf.mark &&\n        perf.measure &&\n        perf.clearMarks &&\n        perf.clearMeasures\n      ) {\n        mark = tag => perf.mark(tag)\n        measure = (name, startTag, endTag) => {\n          perf.measure(name, startTag, endTag)\n          perf.clearMarks(startTag)\n          perf.clearMarks(endTag)\n          perf.clearMeasures(name)\n        }\n      }\n    }\n  ```\n  `performance.mark``performance.measure`\n  ```js\n    let _uid = 0\n    const perf = window.performance\n    function testPerf() {\n      _uid++\n      let startTag = `test-mark-start:${_uid}`\n      let endTag = `test-mark-end:${_uid}`\n\n      // mark\n      perf.mark(startTag)\n\n      for(let i = 0; i < 100000; i++) {\n        \n      }\n\n      // mark\n      perf.mark(endTag)\n      perf.measure(`test mark init`, startTag, endTag)\n    }\n  ```\n  `Performance`\n  <img width=\"600\" src=\"2018-06-30-vue/4.jpeg\"/>\n\n  `performance`[](https://www.w3.org/TR/navigation-timing/)\n  <img width=\"600\" src=\"2018-06-30-vue/timing-overview.png\"/>\n  \n\n## Proxy\n\n  ### get\n  \n  `get` proxy \n  > proxy.fooproxy['foo']\n\n  \n  ```js\n    let person = {\n      name: \"\"\n    };\n\n    let proxy = new Proxy(person, {\n      get: (target, property) => {\n        if (property in target) {\n          return target[property];\n        } else {\n          throw new ReferenceError(\"Property \\\"\" + property + \"\\\" does not exist.\");\n        }\n      }\n    });\n\n    proxy.name // \"\"\n    proxy.age // \n  ```\n\n  configurablewritable Proxy  Proxy \n  ```js\n    const target = Object.defineProperties({}, {\n      foo: {\n        value: 123,\n        writable: false,\n        configurable: false\n      },\n    });\n    const handler = {\n      get(target, propKey) {\n        return 'abc';\n      }\n    };\n    const proxy = new Proxy(target, handler);\n    proxy.foo // TypeError: Invariant check failed\n  ```\n\n  ### has\n\n  \n\n  * : foo in proxy\n  * : foo in Object.create(proxy)\n  * with : with(proxy) { (foo); }\n  * Reflect.has()\n\n  has\n  ```js\n    let obj = { a: 10 };\n    Object.preventExtensions(obj);\n    let p = new Proxy(obj, {\n      has: function(target, prop) {\n        return false;\n      }\n    });\n    'a' in p // TypeError is thrown\n  ```\n\n  `has``in``for...in`\n  ```js\n    let stu1 = {name: '', score: 59};\n    let stu2 = {name: '', score: 99};\n    let handler = {\n      has(target, prop) {\n        if (prop === 'score' && target[prop] < 60) {\n          console.log(`${target.name} `);\n          return false;\n        }\n        return prop in target;\n      }\n    }\n    let oproxy1 = new Proxy(stu1, handler);\n    let oproxy2 = new Proxy(stu2, handler);\n    'score' in oproxy1\n    //  \n    // false\n    'score' in oproxy2\n    // true\n    for (let a in oproxy1) {\n      console.log(oproxy1[a]);\n    }\n    // \n    // 59\n    for (let b in oproxy2) {\n      console.log(oproxy2[b]);\n    }\n    // \n    // 99\n  ```\n  \n  `with`\n  ```js\n    let qs = location.search.substring(1);\n    let hostName = location.hostname;\n    let url = location.href;\n\n    with (location){\n      let qs = search.substring(1);\n      let hostName = hostname;\n      let url = href;\n    }\n  ```\n\n  `with``let``var`\n  ```js\n    // with\n    function func() {\n      console.time(\"func\");\n      let obj = {\n        a: [1, 2, 3]\n      };\n      for (let i = 0; i < 100000; i++) {\n        let v = obj.a[0];\n      }\n      console.timeEnd(\"func\");// 1.310302734375ms\n    }\n    func();\n\n    // withlet\n    function funcWith() {\n      console.time(\"funcWith\");\n      const obj = {\n        a: [1, 2, 3]\n      };\n      with (obj) {\n        let a = obj.a\n        for (let i = 0; i < 100000; i++) {\n          let v = a[0];\n        }\n      }\n      console.timeEnd(\"funcWith\");// 14.533935546875ms\n    }\n    funcWith();\n\n    // with\n    function funcWith() {\n      console.time(\"funcWith\");\n      var obj = {\n        a: [1, 2, 3]\n      };\n      with (obj) {\n        for (var i = 0; i < 100000; i++) {\n          var v = a[0];\n        }\n      }\n      console.timeEnd(\"funcWith\");// 52.078857421875ms\n    }\n    funcWith();\n  ```\n  js`with`jsaobj`with`jsaobjjswith\n\n  `has``with`\n  ```js\n    let stu1 = {name: '', score: 59};\n    let handler = {\n      has(target, prop) {\n        if (prop === 'score' && target[prop] < 60) {\n          console.log(`${target.name} `);\n          return false;\n        }\n        return prop in target;\n      }\n    }\n    let oproxy1 = new Proxy(stu1, handler);\n\n    function test() {\n      let score\n      with(oproxy1) {\n        return score\n      }\n    }\n    test() //  \n  ```\n\n  `with`js\n  ```js\n    // \n    function funcWith() {\n      console.time(\"funcWith\");\n      const obj = {\n        a: [1, 2, 3]\n      };\n      with (obj) {\n        let a = obj.a\n        for (let i = 0; i < 100000; i++) {\n          let v = a[0];\n        }\n      }\n      console.timeEnd(\"funcWith\");// 1.7109375ms\n    }\n    funcWith();\n  ```\n\n  `with`\n  ```js\n    function func() {\n      console.time(\"func\");\n      let obj = {\n        a: [1, 2, 3]\n      };\n      let v = obj.a[0];\n      console.timeEnd(\"func\");// 0.01904296875ms\n    }\n    func();\n\n    // \n    function funcWith() {\n      console.time(\"funcWith\");\n      const obj = {\n        a: [1, 2, 3]\n      };\n      with (obj) {\n        let v = a[0];\n      }\n      console.timeEnd(\"funcWith\");// 0.028076171875ms\n    }\n    funcWith();\n  ```\n\n  `has`\n  ```js\n    // has\n    console.time(\"\");\n    let stu1 = {name: '', score: 59};\n    let handler = {\n      has(target, prop) {\n        if (prop === 'score' && target[prop] < 60) {\n          console.log(`${target.name} `);\n          return false;\n        }\n        return prop in target;\n      }\n    }\n    let oproxy1 = new Proxy(stu1, handler);\n\n    function test(oproxy1) {\n      return {\n        render: () => {\n          return oproxy1.score\n        }\n      }\n    }\n    console.log(test(oproxy1).render()) //  \n    console.timeEnd(\"\"); // 0.719970703125ms\n\n\n    console.time(\"\");\n    let stu1 = {name: '', score: 59};\n    let handler = {\n      has(target, prop) {\n        if (prop === 'score' && target[prop] < 60) {\n          console.log(`${target.name} `);\n          return false;\n        }\n        return prop in target;\n      }\n    }\n    let oproxy1 = new Proxy(stu1, handler);\n\n    function test(oproxy1) {\n      let score\n      return {\n        render: () => {\n          with(oproxy1) {\n            return score\n          }\n        }\n      }\n    }\n    console.log(test(oproxy1).render()) //  \n    console.timeEnd(\"\"); // 0.760009765625ms\n  ```\n\n  vue`with``proxy``AST``AST``vue``with`[](https://github.com/vuejs/vue/issues/3923)\n  ```js\n    export function generate (\n      ast: ASTElement | void,\n      options: CompilerOptions\n    ): CodegenResult {\n      const state = new CodegenState(options)\n      const code = ast ? genElement(ast, state) : '_c(\"div\")'\n      return {\n        render: `with(this){return ${code}}`,\n        staticRenderFns: state.staticRenderFns\n      }\n    }\n  ```\n\n## outerHTML\n\n  `platforms/web/entry-runtime-width-compile.js``getOuterHTML`\n  ```js\n    function getOuterHTML (el: Element): string {\n      if (el.outerHTML) {\n        return el.outerHTML\n      } else {\n        const container = document.createElement('div')\n        container.appendChild(el.cloneNode(true))\n        return container.innerHTML\n      }\n    }\n  ```\n  IE9-11`SVG``innerHTML``outerHTML``else`\n\n## 2018-07-17\n`proxy``Object.defineProperty``vue``vue``data``Object.defineProperty``data``Object.defineProperty`api?\n\n> `Object.defineProperty``obj`\n\n`Object.defineProperty``src/core/instance/state.js``initData`\n```js\n\nexport function proxy (target: Object, sourceKey: string, key: string) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  }\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition)\n}\n\n// \n\nfunction initData (vm: Component) {\n  // \n  while (i--) {\n    const key = keys[i]\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          `Method \"${key}\" has already been defined as a data property.`,\n          vm\n        )\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        `The data property \"${key}\" is already declared as a prop. ` +\n        `Use prop default value instead.`,\n        vm\n      )\n    } else if (!isReserved(key)) {\n      proxy(vm, `_data`, key)\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */)\n}\n```\n`proxy``observe``proxy``observe``src/core/observer/index.js`\n```js\nexport function observe (value: any, asRootData: ?boolean): Observer | void {\n  if (!isObject(value) || value instanceof VNode) {\n    return\n  }\n  let ob: Observer | void\n  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__\n  } else if (\n    shouldObserve &&\n    !isServerRendering() &&\n    (Array.isArray(value) || isPlainObject(value)) &&\n    Object.isExtensible(value) &&\n    !value._isVue\n  ) {\n    ob = new Observer(value)\n  }\n  if (asRootData && ob) {\n    ob.vmCount++\n  }\n  return ob\n}\n```\n`value`value`return``ob = new Observer(value)``src/core/observer/array.js`:\n```js\nconst arrayProto = Array.prototype\nexport const arrayMethods = Object.create(arrayProto)\n\nconst methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n]\n\n/**\n * Intercept mutating methods and emit events\n */\nmethodsToPatch.forEach(function (method) {\n  // cache original method\n  const original = arrayProto[method]\n  def(arrayMethods, method, function mutator (...args) {\n    const result = original.apply(this, args)\n    const ob = this.__ob__\n    let inserted\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args\n        break\n      case 'splice':\n        inserted = args.slice(2)\n        break\n    }\n    if (inserted) ob.observeArray(inserted)\n    // notify change\n    ob.dep.notify()\n    return result\n  })\n})\n```\n\n`Array.prototype``arrayProto``arrayMethods``arrayProto``methodsToPatch``def`(`src/core/util/lang.js``Object.defineProperty`)`Object.defineProperty``Object.defineProperty`api\n\n`vue``vm.$set``vm.$set``splice``splice`\n```\n<div>\n{{arr}}\n</div>\nlet vm = new Vue({\n  el: '#app',\n  data() {\n    return {\n      arr: [1, 2]\n    }\n  }\n})\n// vm.$set\nvm.$set(vm.arr, 0, 31)\n```\n\n> `Object.defineProperty`\n\n`proxy``get``set``proxy``Object.defineProperty`\n```js\n// proxy\nconst handler = {\n  get (target, key) {\n    console.log('----get-----')\n    return target[key];\n  },\n  set (target, key, value) {\n    console.log('----set-----')\n    target[key] = value;\n    return true;\n  }\n};\nconst target = [1,2];\nconst arr = new Proxy(target, handler);\n\narr[0] = 3 // '----set-----'\n```\n\n> vue`proxy``Object.defineProperty`\n\n`proxy``Object.defineProperty`\n\n## \n`api`[issues](https://github.com/wqzwh/blog/blob/master/source/_posts/2018-06-30-vue.md)","source":"_posts/2018-06-30-vue.md","raw":"---\ntitle: Vuejavascript\ncomments: true\ntoc: true\ndate: 2018-06-30 15:16:04\ntags:\n    - 'javascript'\n    - 'vue'\n---\n\n## \n\n  vuemvvm`watch``computed`apivuevuejavascriptvue\n\n## flow \n\n  FlowJavaScriptFacebook2014Scale ConferenceJavaScriptFlowjavascript\n\n  <!-- more -->\t\n\n### \n\n  Flowvoidjsundefined\n  ```\n    boolean\n    number\n    string\n    null\n    void\n  ```\n  \n  ```js\n  let str:number = 1;\n  let str1:string = 'a';\n\n  // \n  str = 'd' // error\n  str1 = 3  // error\n  ```\n\n### \n\n  Flow\n  ```\n    Object\n    Array\n    Function\n    Class\n  ```\n  \n  ```js\n  // Object \n  let o:Object = {\n    key: 123\n  }\n  //Objectkey\n  let o2:{key:string} = {\n    key: '111'\n  }\n\n  // Array \n  //\n  let numberArr:number[] = [12,3,4,5,2];\n  //\n  let numberAr2r:Array<number> = [12,3,2,3];\n\n  let stringArr:string[] = ['12','a','cc'];\n  let booleanArr:boolean[] = [true,true,false];\n  let nullArr:null[] = [null,null,null];\n  let voidArr:void[] = [ , , undefined,void(0)];\n\n  //\n  //4\n  let arr:[number,string,boolean] = [1,'a',true,function(){},];\n  ```\n\n  Functionvue\n  ```js\n  /**\n   * \n   * fn\n   */\n  function fn(arg:number,arg2:string):Object{\n    return {\n      arg,\n      arg2\n    }\n  }\n\n  /**\n   * vue\n   * src/core/instance/lifecycle.js\n   */\n  export function mountComponent (\n    vm: Component,\n    el: ?Element,\n    hydrating?: boolean\n  ): Component {\n    // \n  }\n  ```\n\n  class\n  ```js\n  /**\n   * vue\n   * src/core/observer/index.js \n  */\n  export class Observer {\n    value: any;\n    dep: Dep;\n    vmCount: number;\n    constructor (value: any) {\n      // \n    }\n  }  \n  ```\n\n  flow.jsjavascriptbabelvuebabel-preset-flow-vuebabelrc\n  ```json\n  // package.json \n  \n  // \n  \"devDependencies\": {\n    \"@types/node\": \"^8.0.33\",\n    \"@types/webpack\": \"^3.0.13\",\n    \"acorn\": \"^5.2.1\",\n    \"babel-core\": \"^6.25.0\",\n    \"babel-eslint\": \"^8.0.3\",\n    \"babel-helper-vue-jsx-merge-props\": \"^2.0.2\",\n    \"babel-loader\": \"^7.0.0\",\n    \"babel-plugin-istanbul\": \"^4.1.4\",\n    \"babel-plugin-syntax-dynamic-import\": \"^6.18.0\",\n    \"babel-plugin-syntax-jsx\": \"^6.18.0\",\n    \"babel-plugin-transform-vue-jsx\": \"^3.4.3\",\n    \"babel-preset-es2015\": \"^6.24.1\",\n    \"babel-preset-flow-vue\": \"^1.0.0\"\n  }  \n  // \n\n  // babelrc \n  {\n    \"presets\": [\"es2015\", \"flow-vue\"],\n    \"plugins\": [\"transform-vue-jsx\", \"syntax-dynamic-import\"],\n    \"ignore\": [\n      \"dist/*.js\",\n      \"packages/**/*.js\"\n    ]\n  }\n  ```\n\n  ## \n\n  getter/setter\n\n  ### \n\n  \n  ```js\n    //  \n    let obj = { a: 1 }\n    obj.a // 1\n    typeof obj.toString // 'function'\n\n    // \n    let obj2 = Object.create({ a: 1 })\n    obj2.a // 1\n    typeof obj2.toString // 'function'\n\n    // \n    let obj3 = Object.create(null)\n    typeof obj3.toString // 'undefined'\n  ```\n  \n  \n\n  <img width=\"600\" src=\"2018-06-30-vue/obj.jpeg\"/>\n\n  Object.createES5vueie9+\n  ```js\n    if (!Object.create) {\n      Object.create = function (o) {\n        function F() {}  //\n        F.prototype = o;\n        return new F();  //new\n      };\n    }\n  ```\n  \n  vue`Object.create(null)`vue\n  ```js\n  // src/core/global-api/index.js\n  // VueoptionsASSET_TYPESvue'component','directive','filter'\n    Vue.options = Object.create(null)\n    ASSET_TYPES.forEach(type => {\n      Vue.options[type + 's'] = Object.create(null)\n    })\n  ```\n\n### \n\n  falseES5`Object.defineProperty`\n  \n  `Object.defineProperty(obj,prop,descriptor)``descriptor`\n  \n  * configurable  configurable  true  false\n  * enumerable enumerabletrue false\n  * value  JavaScript  undefined\n  * writable writabletruevalue false\n  * get  getter  getter  undefinedthisthis undefined\n  * set  setter  setter  undefined undefined\n\n  >  descriptor  (get  set)  value\n\n  \n  ```js\n    Object.defineProperty(obj,prop,\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: '',\n      get: function() {\n\n      },\n      set: function() {\n        \n      }\n    )\n  ```\n  \n  `Object.getOwnPropertyDescriptor`\n  ```js\n    // false\n    let obj = {}\n    Object.defineProperty(obj, 'name', {\n      value : \"wqzwh\"\n    })\n    Object.getOwnPropertyDescriptor(obj, 'name')\n    // {value: \"wqzwh\", writable: false, enumerable: false, configurable: false}\n\n    let obj2 = {}\n    Object.defineProperty(obj2, 'name', {\n      enumerable: true,\n      writable: true,\n      value : \"wqzwh\"\n    })\n    Object.getOwnPropertyDescriptor(obj2, 'name')\n    // {value: \"wqzwh\", writable: true, enumerable: true, configurable: false}\n  ```\n\n  `Object.keys()`key`enumerable`true\n  ```js\n    let obj = {}\n    Object.defineProperty(obj, 'name', {\n      enumerable: true,\n      value : \"wqzwh\"\n    })\n    Object.keys(obj) // ['name']\n  ```\n\n  `propertyIsEnumerable`\n  ```js\n    let obj = {}\n    Object.defineProperty(obj, 'name', {\n      value : \"wqzwh\"\n    })\n    obj.propertyIsEnumerable('name') // false\n\n    let obj = {}\n    Object.defineProperty(obj, 'name', {\n      enumerable: true,\n      value : \"wqzwh\"\n    })\n    obj.propertyIsEnumerable('name') // true\n  ```\n\n  `hasOwnProperty` in \n  ```js\n    // Object.defineProperty\n    let obj = {}\n    Object.defineProperty(obj, 'name', {\n      value : \"wqzwh\",\n      enumerable: true\n    })\n    let obj2 = Object.create(obj)\n    obj2.age = 20\n    for (key in obj2) {\n      console.log(key); // age, name\n    }\n    for (key in obj2) {\n      if (obj2.hasOwnProperty(key)) {\n        console.log(key); // age\n      }\n    }\n    \n    // \n    let obj = {}\n    obj.name = 'wqzwh'\n    let obj2 = Object.create(obj)\n    obj2.age = 20\n    for (key in obj2) {\n      console.log(key); // age, name\n    }\n    for (key in obj2) {\n      if (obj2.hasOwnProperty(key)) {\n        console.log(key); // age\n      }\n    }\n  ```\n\n  > `Object.defineProperty``enumerable``true``for in`\n\n### getter/setter\n\n  `get/set`\n  ```js\n    function foo() {}\n    Object.defineProperty(foo.prototype, 'z', \n      {\n        get: function(){\n          return 1\n        }\n      }\n    )\n    let obj = new foo();\n    console.log(obj.z) // 1\n    obj.z = 10\n    console.log(obj.z) // 1\n  ```\n  `z``foo.prototype``get``obj.z = 10``obj``z``get`\n\n  \n  <img width=\"600\" src=\"2018-06-30-vue/5.jpeg\"/>\n\n  `z``writable``configurable``true``z``z``obj.z`1\n  ```js\n    function foo() {}\n    Object.defineProperty(foo.prototype, 'z', \n      {\n        get: function(){\n          return 1\n        }\n      }\n    )\n    let obj = new foo();\n    console.log(obj.z) // 1\n    Object.defineProperty(obj, 'z', \n      {\n        value: 100,\n        writable: true,\n        configurable: true\n      }\n    )\n    console.log(obj.z) // 100\n    obj.z = 300\n    console.log(obj.z) // 300\n    delete obj.z\n    console.log(obj.z) // 1\n  ```\n\n  \n  <img width=\"600\" src=\"2018-06-30-vue/6.jpeg\"/>\n  \n  `Object.defineProperty``configurable``enumerable``writable``value``get``set`\n  <img width=\"600\" src=\"2018-06-30-vue/1.jpg\"/>\n\n### \n\n  `__proto__``Object.create(null)`\n  ```js\n    let obj = {x: 1, y: 2}\n    obj.__proto__.z = 3\n    console.log(obj.z) // 3\n  ```\n  <img width=\"600\" src=\"2018-06-30-vue/2.jpg\"/>\n\n  `Object.preventExtensions``Object.isExtensible`\n  ```js\n    let obj = {x : 1, y : 2};\n    Object.isExtensible(obj); // true\n    Object.preventExtensions(obj);\n    Object.isExtensible(obj); // false\n    obj.z = 1;\n    obj.z; // undefined, add new property failed\n    Object.getOwnPropertyDescriptor(obj, 'x');\n    // Object {value: 1, writable: true, enumerable: true, configurable: true}\n  ```\n\n  `Object.seal`configurablefalse,`Object.isSealed`\n  ```js\n    let obj = {x : 1, y : 2};\n    Object.seal(obj);\n    Object.getOwnPropertyDescriptor(obj, 'x');\n    // Object {value: 1, writable: true, enumerable: true, configurable: false}\n    Object.isSealed(obj); // true\n  ```\n\n  `Object.freeze`sealwirtablefalse`Object.isFrozen`\n  ```js\n    let obj = {x : 1, y : 2};\n    Object.freeze(obj);\n    Object.getOwnPropertyDescriptor(obj, 'x');\n    // Object {value: 1, writable: false, enumerable: true, configurable: false}\n    Object.isFrozen(obj); // true\n  ```\n\n## DOM\n\n  vuemodel`platforms/web/runtime/directives/model.js`\n  ```js\n    /* istanbul ignore if */\n    if (isIE9) {\n      // http://www.matts411.com/post/internet-explorer-9-oninput/\n      document.addEventListener('selectionchange', () => {\n        const el = document.activeElement\n        if (el && el.vmodel) {\n          trigger(el, 'input')\n        }\n      })\n    }\n\n    // \n    function trigger (el, type) {\n      const e = document.createEvent('HTMLEvents')\n      e.initEvent(type, true, true)\n      el.dispatchEvent(e)\n    }\n  ```\n\n  `document.activeElement``document.hasFocus()`\n\n  element.dispatchEvent(). \n  ```js\n    document.createEvent()\n    event.initEvent()\n    element.dispatchEvent()\n  ```\n\n  `createEvent()``Event`\n  ```\n    \t        \t        \n    HTMLEvents\tHTMLEvent\t  initEvent()\n    MouseEvents\tMouseEvent\t  initMouseEvent()\n    UIEvents\t  UIEvent\t  initUIEvent()\n  ```\n  `initEvent()``DocumentEvent``Event``initEvent(eventName, canBubble, preventDefault)`. \n\n  `dispatchEvent()`vue`el.dispatchEvent(e)`, e`createEvent()``Event`\n\n  `click`\n  ```js\n    // .\n    let event = document.createEvent('HTMLEvents');\n    // \n    event.initEvent('click', true, false);\n    let elm = document.getElementById('wq')\n    // .\n    elm.addEventListener('click', (e) => {\n      console.log(e)\n    }, false);\n    // \n    elm.dispatchEvent(event);\n  ```\n\n## \n\n  ### every/some\n\n  ``thisundefined\n\n  > \n\n  * every()  truetrue\n  * some()  truetrue\n\n  \n  ```js\n  let arr = [ 1, 2, 3, 4, 5, 6 ];  \n  console.log( arr.some( function( item, index, array ){  \n    console.log( 'item=' + item + ',index='+index+',array='+array );  \n    return item > 3;  \n  }));  \n  console.log( arr.every( function( item, index, array ){  \n    console.log( 'item=' + item + ',index='+index+',array='+array );  \n    return item > 3;  \n  }));  \n  ```\n  sometrueeveryfalse,\n\n## getBoundingClientRect\n\n  `lefttoprightbottom``xy`\n\n  <img width=\"500\" src=\"2018-06-30-vue/3.png\"/>\n\n  `lefttoprightbottomxy`topleft\n\n  >  window.pageXOffset  window.pageYOffset  window.scrollX  window.scrollY\n  \n  ```js\n  // For scrollX\n  (((t = document.documentElement) || (t = document.body.parentNode))\n    && typeof t.scrollLeft == 'number' ? t : document.body).scrollLeft\n  // For scrollY\n  (((t = document.documentElement) || (t = document.body.parentNode))\n    && typeof t.scrollTop == 'number' ? t : document.body).scrollTop\n  ```\n\n  IE(2,2)\n  ```js\n    document.documentElement.clientTop;  // IE0IE2\n    document.documentElement.clientLeft; // IE0IE2\n\n    // \n    functiongGetRect (element) {\n      let rect = element.getBoundingClientRect();\n      let top = document.documentElement.clientTop;\n      let left= document.documentElement.clientLeft;\n      return{\n        top: rect.top - top,\n        bottom: rect.bottom - top,\n        left: rect.left - left,\n        right: rect.right - left\n      }\n    }\n  ```\n\n## performance\n  \n  vue\n  ```js\n    if (process.env.NODE_ENV !== 'production') {\n      const perf = inBrowser && window.performance\n      /* istanbul ignore if */\n      if (\n        perf &&\n        perf.mark &&\n        perf.measure &&\n        perf.clearMarks &&\n        perf.clearMeasures\n      ) {\n        mark = tag => perf.mark(tag)\n        measure = (name, startTag, endTag) => {\n          perf.measure(name, startTag, endTag)\n          perf.clearMarks(startTag)\n          perf.clearMarks(endTag)\n          perf.clearMeasures(name)\n        }\n      }\n    }\n  ```\n  `performance.mark``performance.measure`\n  ```js\n    let _uid = 0\n    const perf = window.performance\n    function testPerf() {\n      _uid++\n      let startTag = `test-mark-start:${_uid}`\n      let endTag = `test-mark-end:${_uid}`\n\n      // mark\n      perf.mark(startTag)\n\n      for(let i = 0; i < 100000; i++) {\n        \n      }\n\n      // mark\n      perf.mark(endTag)\n      perf.measure(`test mark init`, startTag, endTag)\n    }\n  ```\n  `Performance`\n  <img width=\"600\" src=\"2018-06-30-vue/4.jpeg\"/>\n\n  `performance`[](https://www.w3.org/TR/navigation-timing/)\n  <img width=\"600\" src=\"2018-06-30-vue/timing-overview.png\"/>\n  \n\n## Proxy\n\n  ### get\n  \n  `get` proxy \n  > proxy.fooproxy['foo']\n\n  \n  ```js\n    let person = {\n      name: \"\"\n    };\n\n    let proxy = new Proxy(person, {\n      get: (target, property) => {\n        if (property in target) {\n          return target[property];\n        } else {\n          throw new ReferenceError(\"Property \\\"\" + property + \"\\\" does not exist.\");\n        }\n      }\n    });\n\n    proxy.name // \"\"\n    proxy.age // \n  ```\n\n  configurablewritable Proxy  Proxy \n  ```js\n    const target = Object.defineProperties({}, {\n      foo: {\n        value: 123,\n        writable: false,\n        configurable: false\n      },\n    });\n    const handler = {\n      get(target, propKey) {\n        return 'abc';\n      }\n    };\n    const proxy = new Proxy(target, handler);\n    proxy.foo // TypeError: Invariant check failed\n  ```\n\n  ### has\n\n  \n\n  * : foo in proxy\n  * : foo in Object.create(proxy)\n  * with : with(proxy) { (foo); }\n  * Reflect.has()\n\n  has\n  ```js\n    let obj = { a: 10 };\n    Object.preventExtensions(obj);\n    let p = new Proxy(obj, {\n      has: function(target, prop) {\n        return false;\n      }\n    });\n    'a' in p // TypeError is thrown\n  ```\n\n  `has``in``for...in`\n  ```js\n    let stu1 = {name: '', score: 59};\n    let stu2 = {name: '', score: 99};\n    let handler = {\n      has(target, prop) {\n        if (prop === 'score' && target[prop] < 60) {\n          console.log(`${target.name} `);\n          return false;\n        }\n        return prop in target;\n      }\n    }\n    let oproxy1 = new Proxy(stu1, handler);\n    let oproxy2 = new Proxy(stu2, handler);\n    'score' in oproxy1\n    //  \n    // false\n    'score' in oproxy2\n    // true\n    for (let a in oproxy1) {\n      console.log(oproxy1[a]);\n    }\n    // \n    // 59\n    for (let b in oproxy2) {\n      console.log(oproxy2[b]);\n    }\n    // \n    // 99\n  ```\n  \n  `with`\n  ```js\n    let qs = location.search.substring(1);\n    let hostName = location.hostname;\n    let url = location.href;\n\n    with (location){\n      let qs = search.substring(1);\n      let hostName = hostname;\n      let url = href;\n    }\n  ```\n\n  `with``let``var`\n  ```js\n    // with\n    function func() {\n      console.time(\"func\");\n      let obj = {\n        a: [1, 2, 3]\n      };\n      for (let i = 0; i < 100000; i++) {\n        let v = obj.a[0];\n      }\n      console.timeEnd(\"func\");// 1.310302734375ms\n    }\n    func();\n\n    // withlet\n    function funcWith() {\n      console.time(\"funcWith\");\n      const obj = {\n        a: [1, 2, 3]\n      };\n      with (obj) {\n        let a = obj.a\n        for (let i = 0; i < 100000; i++) {\n          let v = a[0];\n        }\n      }\n      console.timeEnd(\"funcWith\");// 14.533935546875ms\n    }\n    funcWith();\n\n    // with\n    function funcWith() {\n      console.time(\"funcWith\");\n      var obj = {\n        a: [1, 2, 3]\n      };\n      with (obj) {\n        for (var i = 0; i < 100000; i++) {\n          var v = a[0];\n        }\n      }\n      console.timeEnd(\"funcWith\");// 52.078857421875ms\n    }\n    funcWith();\n  ```\n  js`with`jsaobj`with`jsaobjjswith\n\n  `has``with`\n  ```js\n    let stu1 = {name: '', score: 59};\n    let handler = {\n      has(target, prop) {\n        if (prop === 'score' && target[prop] < 60) {\n          console.log(`${target.name} `);\n          return false;\n        }\n        return prop in target;\n      }\n    }\n    let oproxy1 = new Proxy(stu1, handler);\n\n    function test() {\n      let score\n      with(oproxy1) {\n        return score\n      }\n    }\n    test() //  \n  ```\n\n  `with`js\n  ```js\n    // \n    function funcWith() {\n      console.time(\"funcWith\");\n      const obj = {\n        a: [1, 2, 3]\n      };\n      with (obj) {\n        let a = obj.a\n        for (let i = 0; i < 100000; i++) {\n          let v = a[0];\n        }\n      }\n      console.timeEnd(\"funcWith\");// 1.7109375ms\n    }\n    funcWith();\n  ```\n\n  `with`\n  ```js\n    function func() {\n      console.time(\"func\");\n      let obj = {\n        a: [1, 2, 3]\n      };\n      let v = obj.a[0];\n      console.timeEnd(\"func\");// 0.01904296875ms\n    }\n    func();\n\n    // \n    function funcWith() {\n      console.time(\"funcWith\");\n      const obj = {\n        a: [1, 2, 3]\n      };\n      with (obj) {\n        let v = a[0];\n      }\n      console.timeEnd(\"funcWith\");// 0.028076171875ms\n    }\n    funcWith();\n  ```\n\n  `has`\n  ```js\n    // has\n    console.time(\"\");\n    let stu1 = {name: '', score: 59};\n    let handler = {\n      has(target, prop) {\n        if (prop === 'score' && target[prop] < 60) {\n          console.log(`${target.name} `);\n          return false;\n        }\n        return prop in target;\n      }\n    }\n    let oproxy1 = new Proxy(stu1, handler);\n\n    function test(oproxy1) {\n      return {\n        render: () => {\n          return oproxy1.score\n        }\n      }\n    }\n    console.log(test(oproxy1).render()) //  \n    console.timeEnd(\"\"); // 0.719970703125ms\n\n\n    console.time(\"\");\n    let stu1 = {name: '', score: 59};\n    let handler = {\n      has(target, prop) {\n        if (prop === 'score' && target[prop] < 60) {\n          console.log(`${target.name} `);\n          return false;\n        }\n        return prop in target;\n      }\n    }\n    let oproxy1 = new Proxy(stu1, handler);\n\n    function test(oproxy1) {\n      let score\n      return {\n        render: () => {\n          with(oproxy1) {\n            return score\n          }\n        }\n      }\n    }\n    console.log(test(oproxy1).render()) //  \n    console.timeEnd(\"\"); // 0.760009765625ms\n  ```\n\n  vue`with``proxy``AST``AST``vue``with`[](https://github.com/vuejs/vue/issues/3923)\n  ```js\n    export function generate (\n      ast: ASTElement | void,\n      options: CompilerOptions\n    ): CodegenResult {\n      const state = new CodegenState(options)\n      const code = ast ? genElement(ast, state) : '_c(\"div\")'\n      return {\n        render: `with(this){return ${code}}`,\n        staticRenderFns: state.staticRenderFns\n      }\n    }\n  ```\n\n## outerHTML\n\n  `platforms/web/entry-runtime-width-compile.js``getOuterHTML`\n  ```js\n    function getOuterHTML (el: Element): string {\n      if (el.outerHTML) {\n        return el.outerHTML\n      } else {\n        const container = document.createElement('div')\n        container.appendChild(el.cloneNode(true))\n        return container.innerHTML\n      }\n    }\n  ```\n  IE9-11`SVG``innerHTML``outerHTML``else`\n\n## 2018-07-17\n`proxy``Object.defineProperty``vue``vue``data``Object.defineProperty``data``Object.defineProperty`api?\n\n> `Object.defineProperty``obj`\n\n`Object.defineProperty``src/core/instance/state.js``initData`\n```js\n\nexport function proxy (target: Object, sourceKey: string, key: string) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  }\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition)\n}\n\n// \n\nfunction initData (vm: Component) {\n  // \n  while (i--) {\n    const key = keys[i]\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          `Method \"${key}\" has already been defined as a data property.`,\n          vm\n        )\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        `The data property \"${key}\" is already declared as a prop. ` +\n        `Use prop default value instead.`,\n        vm\n      )\n    } else if (!isReserved(key)) {\n      proxy(vm, `_data`, key)\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */)\n}\n```\n`proxy``observe``proxy``observe``src/core/observer/index.js`\n```js\nexport function observe (value: any, asRootData: ?boolean): Observer | void {\n  if (!isObject(value) || value instanceof VNode) {\n    return\n  }\n  let ob: Observer | void\n  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__\n  } else if (\n    shouldObserve &&\n    !isServerRendering() &&\n    (Array.isArray(value) || isPlainObject(value)) &&\n    Object.isExtensible(value) &&\n    !value._isVue\n  ) {\n    ob = new Observer(value)\n  }\n  if (asRootData && ob) {\n    ob.vmCount++\n  }\n  return ob\n}\n```\n`value`value`return``ob = new Observer(value)``src/core/observer/array.js`:\n```js\nconst arrayProto = Array.prototype\nexport const arrayMethods = Object.create(arrayProto)\n\nconst methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n]\n\n/**\n * Intercept mutating methods and emit events\n */\nmethodsToPatch.forEach(function (method) {\n  // cache original method\n  const original = arrayProto[method]\n  def(arrayMethods, method, function mutator (...args) {\n    const result = original.apply(this, args)\n    const ob = this.__ob__\n    let inserted\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args\n        break\n      case 'splice':\n        inserted = args.slice(2)\n        break\n    }\n    if (inserted) ob.observeArray(inserted)\n    // notify change\n    ob.dep.notify()\n    return result\n  })\n})\n```\n\n`Array.prototype``arrayProto``arrayMethods``arrayProto``methodsToPatch``def`(`src/core/util/lang.js``Object.defineProperty`)`Object.defineProperty``Object.defineProperty`api\n\n`vue``vm.$set``vm.$set``splice``splice`\n```\n<div>\n{{arr}}\n</div>\nlet vm = new Vue({\n  el: '#app',\n  data() {\n    return {\n      arr: [1, 2]\n    }\n  }\n})\n// vm.$set\nvm.$set(vm.arr, 0, 31)\n```\n\n> `Object.defineProperty`\n\n`proxy``get``set``proxy``Object.defineProperty`\n```js\n// proxy\nconst handler = {\n  get (target, key) {\n    console.log('----get-----')\n    return target[key];\n  },\n  set (target, key, value) {\n    console.log('----set-----')\n    target[key] = value;\n    return true;\n  }\n};\nconst target = [1,2];\nconst arr = new Proxy(target, handler);\n\narr[0] = 3 // '----set-----'\n```\n\n> vue`proxy``Object.defineProperty`\n\n`proxy``Object.defineProperty`\n\n## \n`api`[issues](https://github.com/wqzwh/blog/blob/master/source/_posts/2018-06-30-vue.md)","slug":"2018-06-30-vue","published":1,"updated":"2018-07-17T13:01:21.935Z","layout":"post","photos":[],"link":"","_id":"cjosd1vag000dfdldg3lwvo54","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  vuemvvm<code>watch</code><code>computed</code>apivuevuejavascriptvue</p>\n<h2 id=\"flow-\"><a href=\"#flow-\" class=\"headerlink\" title=\"flow \"></a>flow </h2><p>  FlowJavaScriptFacebook2014Scale ConferenceJavaScriptFlowjavascript</p>\n  <a id=\"more\"></a>    \n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  Flowvoidjsundefined<br>  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">boolean</div><div class=\"line\">number</div><div class=\"line\">string</div><div class=\"line\">null</div><div class=\"line\">void</div></pre></td></tr></table></figure></p>\n<p>  <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> str:number = <span class=\"number\">1</span>;</div><div class=\"line\"><span class=\"keyword\">let</span> str1:string = <span class=\"string\">'a'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">str = <span class=\"string\">'d'</span> <span class=\"comment\">// error</span></div><div class=\"line\">str1 = <span class=\"number\">3</span>  <span class=\"comment\">// error</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  Flow<br>  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Object</div><div class=\"line\">Array</div><div class=\"line\">Function</div><div class=\"line\">Class</div></pre></td></tr></table></figure></p>\n<p>  <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Object </span></div><div class=\"line\"><span class=\"keyword\">let</span> o:<span class=\"built_in\">Object</span> = &#123;</div><div class=\"line\">  key: <span class=\"number\">123</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">//Objectkey</span></div><div class=\"line\"><span class=\"keyword\">let</span> o2:&#123;<span class=\"attr\">key</span>:string&#125; = &#123;</div><div class=\"line\">  key: <span class=\"string\">'111'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Array </span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">let</span> numberArr:number[] = [<span class=\"number\">12</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>];</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">let</span> numberAr2r:<span class=\"built_in\">Array</span>&lt;number&gt; = [<span class=\"number\">12</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> stringArr:string[] = [<span class=\"string\">'12'</span>,<span class=\"string\">'a'</span>,<span class=\"string\">'cc'</span>];</div><div class=\"line\"><span class=\"keyword\">let</span> booleanArr:boolean[] = [<span class=\"literal\">true</span>,<span class=\"literal\">true</span>,<span class=\"literal\">false</span>];</div><div class=\"line\"><span class=\"keyword\">let</span> nullArr:<span class=\"literal\">null</span>[] = [<span class=\"literal\">null</span>,<span class=\"literal\">null</span>,<span class=\"literal\">null</span>];</div><div class=\"line\"><span class=\"keyword\">let</span> voidArr:<span class=\"keyword\">void</span>[] = [ , , <span class=\"literal\">undefined</span>,<span class=\"keyword\">void</span>(<span class=\"number\">0</span>)];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">//4</span></div><div class=\"line\"><span class=\"keyword\">let</span> arr:[number,string,boolean] = [<span class=\"number\">1</span>,<span class=\"string\">'a'</span>,<span class=\"literal\">true</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;,];</div></pre></td></tr></table></figure></p>\n<p>  Functionvue<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * </span></div><div class=\"line\"><span class=\"comment\"> * fn</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">arg:number,arg2:string</span>):<span class=\"title\">Object</span></span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    arg,</div><div class=\"line\">    arg2</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * vue</span></div><div class=\"line\"><span class=\"comment\"> * src/core/instance/lifecycle.js</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mountComponent</span> (<span class=\"params\"></span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\">  vm: Component,</span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\">  el: ?Element,</span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\">  hydrating?: boolean</span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\"></span>): <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  class<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * vue</span></div><div class=\"line\"><span class=\"comment\"> * src/core/observer/index.js </span></div><div class=\"line\"><span class=\"comment\">*/</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observer</span> </span>&#123;</div><div class=\"line\">  value: any;</div><div class=\"line\">  dep: Dep;</div><div class=\"line\">  vmCount: number;</div><div class=\"line\">  <span class=\"keyword\">constructor</span> (value: any) &#123;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  flow.jsjavascriptbabelvuebabel-preset-flow-vuebabelrc<br>  <figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">// package.json </div><div class=\"line\"></div><div class=\"line\">// </div><div class=\"line\">\"devDependencies\": &#123;</div><div class=\"line\">  \"@types/node\": \"^8.0.33\",</div><div class=\"line\">  \"@types/webpack\": \"^3.0.13\",</div><div class=\"line\">  \"acorn\": \"^5.2.1\",</div><div class=\"line\">  \"babel-core\": \"^6.25.0\",</div><div class=\"line\">  \"babel-eslint\": \"^8.0.3\",</div><div class=\"line\">  \"babel-helper-vue-jsx-merge-props\": \"^2.0.2\",</div><div class=\"line\">  \"babel-loader\": \"^7.0.0\",</div><div class=\"line\">  \"babel-plugin-istanbul\": \"^4.1.4\",</div><div class=\"line\">  \"babel-plugin-syntax-dynamic-import\": \"^6.18.0\",</div><div class=\"line\">  \"babel-plugin-syntax-jsx\": \"^6.18.0\",</div><div class=\"line\">  \"babel-plugin-transform-vue-jsx\": \"^3.4.3\",</div><div class=\"line\">  \"babel-preset-es2015\": \"^6.24.1\",</div><div class=\"line\">  \"babel-preset-flow-vue\": \"^1.0.0\"</div><div class=\"line\">&#125;  </div><div class=\"line\">// </div><div class=\"line\"></div><div class=\"line\">// babelrc </div><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">\"presets\"</span>: [<span class=\"string\">\"es2015\"</span>, <span class=\"string\">\"flow-vue\"</span>],</div><div class=\"line\">  <span class=\"attr\">\"plugins\"</span>: [<span class=\"string\">\"transform-vue-jsx\"</span>, <span class=\"string\">\"syntax-dynamic-import\"</span>],</div><div class=\"line\">  <span class=\"attr\">\"ignore\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"dist/*.js\"</span>,</div><div class=\"line\">    <span class=\"string\">\"packages/**/*.js\"</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  getter/setter</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//  </span></div><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;</div><div class=\"line\">obj.a <span class=\"comment\">// 1</span></div><div class=\"line\"><span class=\"keyword\">typeof</span> obj.toString <span class=\"comment\">// 'function'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> obj2 = <span class=\"built_in\">Object</span>.create(&#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;)</div><div class=\"line\">obj2.a <span class=\"comment\">// 1</span></div><div class=\"line\"><span class=\"keyword\">typeof</span> obj2.toString <span class=\"comment\">// 'function'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> obj3 = <span class=\"built_in\">Object</span>.create(<span class=\"literal\">null</span>)</div><div class=\"line\"><span class=\"keyword\">typeof</span> obj3.toString <span class=\"comment\">// 'undefined'</span></div></pre></td></tr></table></figure></p>\n<p>  </p>\n<p>  <img width=\"600\" src=\"/2018-06-30-vue/obj.jpeg\"></p>\n<p>  Object.createES5vueie9+<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (!<span class=\"built_in\">Object</span>.create) &#123;</div><div class=\"line\">  <span class=\"built_in\">Object</span>.create = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">o</span>) </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">F</span>(<span class=\"params\"></span>) </span>&#123;&#125;  <span class=\"comment\">//</span></div><div class=\"line\">    F.prototype = o;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> F();  <span class=\"comment\">//new</span></div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  vue<code>Object.create(null)</code>vue<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// src/core/global-api/index.js</span></div><div class=\"line\"><span class=\"comment\">// VueoptionsASSET_TYPESvue'component','directive','filter'</span></div><div class=\"line\">  Vue.options = <span class=\"built_in\">Object</span>.create(<span class=\"literal\">null</span>)</div><div class=\"line\">  ASSET_TYPES.forEach(<span class=\"function\"><span class=\"params\">type</span> =&gt;</span> &#123;</div><div class=\"line\">    Vue.options[type + <span class=\"string\">'s'</span>] = <span class=\"built_in\">Object</span>.create(<span class=\"literal\">null</span>)</div><div class=\"line\">  &#125;)</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  falseES5<code>Object.defineProperty</code></p>\n<p>  <code>Object.defineProperty(obj,prop,descriptor)</code><code>descriptor</code></p>\n<ul>\n<li>configurable  configurable  true  false</li>\n<li>enumerable enumerabletrue false</li>\n<li>value  JavaScript  undefined</li>\n<li>writable writabletruevalue false</li>\n<li>get  getter  getter  undefinedthisthis undefined</li>\n<li><p>set  setter  setter  undefined undefined</p>\n<blockquote>\n<p> descriptor  (get  set)  value</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj,prop,</div><div class=\"line\">  configurable: <span class=\"literal\">true</span>,</div><div class=\"line\">  enumerable: <span class=\"literal\">true</span>,</div><div class=\"line\">  writable: <span class=\"literal\">true</span>,</div><div class=\"line\">  value: <span class=\"string\">''</span>,</div><div class=\"line\">  get: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;,</div><div class=\"line\">  set: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    </div><div class=\"line\">  &#125;</div><div class=\"line\">)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>  <code>Object.getOwnPropertyDescriptor</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// false</span></div><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span></div><div class=\"line\">&#125;)</div><div class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(obj, <span class=\"string\">'name'</span>)</div><div class=\"line\"><span class=\"comment\">// &#123;value: \"wqzwh\", writable: false, enumerable: false, configurable: false&#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> obj2 = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj2, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  enumerable: <span class=\"literal\">true</span>,</div><div class=\"line\">  writable: <span class=\"literal\">true</span>,</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span></div><div class=\"line\">&#125;)</div><div class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(obj2, <span class=\"string\">'name'</span>)</div><div class=\"line\"><span class=\"comment\">// &#123;value: \"wqzwh\", writable: true, enumerable: true, configurable: false&#125;</span></div></pre></td></tr></table></figure></p>\n<p>  <code>Object.keys()</code>key<code>enumerable</code>true<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  enumerable: <span class=\"literal\">true</span>,</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span></div><div class=\"line\">&#125;)</div><div class=\"line\"><span class=\"built_in\">Object</span>.keys(obj) <span class=\"comment\">// ['name']</span></div></pre></td></tr></table></figure></p>\n<p>  <code>propertyIsEnumerable</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span></div><div class=\"line\">&#125;)</div><div class=\"line\">obj.propertyIsEnumerable(<span class=\"string\">'name'</span>) <span class=\"comment\">// false</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  enumerable: <span class=\"literal\">true</span>,</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span></div><div class=\"line\">&#125;)</div><div class=\"line\">obj.propertyIsEnumerable(<span class=\"string\">'name'</span>) <span class=\"comment\">// true</span></div></pre></td></tr></table></figure></p>\n<p>  <code>hasOwnProperty</code> in <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Object.defineProperty</span></div><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span>,</div><div class=\"line\">  enumerable: <span class=\"literal\">true</span></div><div class=\"line\">&#125;)</div><div class=\"line\"><span class=\"keyword\">let</span> obj2 = <span class=\"built_in\">Object</span>.create(obj)</div><div class=\"line\">obj2.age = <span class=\"number\">20</span></div><div class=\"line\"><span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> obj2) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(key); <span class=\"comment\">// age, name</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> obj2) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (obj2.hasOwnProperty(key)) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(key); <span class=\"comment\">// age</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\">obj.name = <span class=\"string\">'wqzwh'</span></div><div class=\"line\"><span class=\"keyword\">let</span> obj2 = <span class=\"built_in\">Object</span>.create(obj)</div><div class=\"line\">obj2.age = <span class=\"number\">20</span></div><div class=\"line\"><span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> obj2) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(key); <span class=\"comment\">// age, name</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> obj2) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (obj2.hasOwnProperty(key)) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(key); <span class=\"comment\">// age</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p><code>Object.defineProperty</code><code>enumerable</code><code>true</code><code>for in</code></p>\n</blockquote>\n<h3 id=\"getter-setter\"><a href=\"#getter-setter\" class=\"headerlink\" title=\"getter/setter\"></a>getter/setter</h3><p>  <code>get/set</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(foo.prototype, <span class=\"string\">'z'</span>, </div><div class=\"line\">  &#123;</div><div class=\"line\">    get: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">1</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">)</div><div class=\"line\"><span class=\"keyword\">let</span> obj = <span class=\"keyword\">new</span> foo();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 1</span></div><div class=\"line\">obj.z = <span class=\"number\">10</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 1</span></div></pre></td></tr></table></figure></p>\n<p>  <code>z</code><code>foo.prototype</code><code>get</code><code>obj.z = 10</code><code>obj</code><code>z</code><code>get</code></p>\n<p>  <br>  <img width=\"600\" src=\"/2018-06-30-vue/5.jpeg\"></p>\n<p>  <code>z</code><code>writable</code><code>configurable</code><code>true</code><code>z</code><code>z</code><code>obj.z</code>1<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(foo.prototype, <span class=\"string\">'z'</span>, </div><div class=\"line\">  &#123;</div><div class=\"line\">    get: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">1</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">)</div><div class=\"line\"><span class=\"keyword\">let</span> obj = <span class=\"keyword\">new</span> foo();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 1</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'z'</span>, </div><div class=\"line\">  &#123;</div><div class=\"line\">    value: <span class=\"number\">100</span>,</div><div class=\"line\">    writable: <span class=\"literal\">true</span>,</div><div class=\"line\">    configurable: <span class=\"literal\">true</span></div><div class=\"line\">  &#125;</div><div class=\"line\">)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 100</span></div><div class=\"line\">obj.z = <span class=\"number\">300</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 300</span></div><div class=\"line\"><span class=\"keyword\">delete</span> obj.z</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 1</span></div></pre></td></tr></table></figure></p>\n<p>  <br>  <img width=\"600\" src=\"/2018-06-30-vue/6.jpeg\"></p>\n<p>  <code>Object.defineProperty</code><code>configurable</code><code>enumerable</code><code>writable</code><code>value</code><code>get</code><code>set</code><br>  <img width=\"600\" src=\"/2018-06-30-vue/1.jpg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  <code>__proto__</code><code>Object.create(null)</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"number\">2</span>&#125;</div><div class=\"line\">obj.__proto__.z = <span class=\"number\">3</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 3</span></div></pre></td></tr></table></figure></p>\n<p>  <img width=\"600\" src=\"/2018-06-30-vue/2.jpg\"></p>\n<p>  <code>Object.preventExtensions</code><code>Object.isExtensible</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">x</span> : <span class=\"number\">1</span>, <span class=\"attr\">y</span> : <span class=\"number\">2</span>&#125;;</div><div class=\"line\"><span class=\"built_in\">Object</span>.isExtensible(obj); <span class=\"comment\">// true</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.preventExtensions(obj);</div><div class=\"line\"><span class=\"built_in\">Object</span>.isExtensible(obj); <span class=\"comment\">// false</span></div><div class=\"line\">obj.z = <span class=\"number\">1</span>;</div><div class=\"line\">obj.z; <span class=\"comment\">// undefined, add new property failed</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(obj, <span class=\"string\">'x'</span>);</div><div class=\"line\"><span class=\"comment\">// Object &#123;value: 1, writable: true, enumerable: true, configurable: true&#125;</span></div></pre></td></tr></table></figure></p>\n<p>  <code>Object.seal</code>configurablefalse,<code>Object.isSealed</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">x</span> : <span class=\"number\">1</span>, <span class=\"attr\">y</span> : <span class=\"number\">2</span>&#125;;</div><div class=\"line\"><span class=\"built_in\">Object</span>.seal(obj);</div><div class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(obj, <span class=\"string\">'x'</span>);</div><div class=\"line\"><span class=\"comment\">// Object &#123;value: 1, writable: true, enumerable: true, configurable: false&#125;</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.isSealed(obj); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure></p>\n<p>  <code>Object.freeze</code>sealwirtablefalse<code>Object.isFrozen</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">x</span> : <span class=\"number\">1</span>, <span class=\"attr\">y</span> : <span class=\"number\">2</span>&#125;;</div><div class=\"line\"><span class=\"built_in\">Object</span>.freeze(obj);</div><div class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(obj, <span class=\"string\">'x'</span>);</div><div class=\"line\"><span class=\"comment\">// Object &#123;value: 1, writable: false, enumerable: true, configurable: false&#125;</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.isFrozen(obj); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"DOM\"><a href=\"#DOM\" class=\"headerlink\" title=\"DOM\"></a>DOM</h2><p>  vuemodel<code>platforms/web/runtime/directives/model.js</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* istanbul ignore if */</span></div><div class=\"line\"><span class=\"keyword\">if</span> (isIE9) &#123;</div><div class=\"line\">  <span class=\"comment\">// http://www.matts411.com/post/internet-explorer-9-oninput/</span></div><div class=\"line\">  <span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'selectionchange'</span>, () =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> el = <span class=\"built_in\">document</span>.activeElement</div><div class=\"line\">    <span class=\"keyword\">if</span> (el &amp;&amp; el.vmodel) &#123;</div><div class=\"line\">      trigger(el, <span class=\"string\">'input'</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">trigger</span> (<span class=\"params\">el, type</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> e = <span class=\"built_in\">document</span>.createEvent(<span class=\"string\">'HTMLEvents'</span>)</div><div class=\"line\">  e.initEvent(type, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>)</div><div class=\"line\">  el.dispatchEvent(e)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  <code>document.activeElement</code><code>document.hasFocus()</code></p>\n<p>  element.dispatchEvent(). <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">document</span>.createEvent()</div><div class=\"line\">event.initEvent()</div><div class=\"line\">element.dispatchEvent()</div></pre></td></tr></table></figure></p>\n<p>  <code>createEvent()</code><code>Event</code><br>  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">\t        \t        </div><div class=\"line\">HTMLEvents\tHTMLEvent\t  initEvent()</div><div class=\"line\">MouseEvents\tMouseEvent\t  initMouseEvent()</div><div class=\"line\">UIEvents\t  UIEvent\t  initUIEvent()</div></pre></td></tr></table></figure></p>\n<p>  <code>initEvent()</code><code>DocumentEvent</code><code>Event</code><code>initEvent(eventName, canBubble, preventDefault)</code>. </p>\n<p>  <code>dispatchEvent()</code>vue<code>el.dispatchEvent(e)</code>, e<code>createEvent()</code><code>Event</code></p>\n<p>  <code>click</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// .</span></div><div class=\"line\"><span class=\"keyword\">let</span> event = <span class=\"built_in\">document</span>.createEvent(<span class=\"string\">'HTMLEvents'</span>);</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">event.initEvent(<span class=\"string\">'click'</span>, <span class=\"literal\">true</span>, <span class=\"literal\">false</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> elm = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'wq'</span>)</div><div class=\"line\"><span class=\"comment\">// .</span></div><div class=\"line\">elm.addEventListener(<span class=\"string\">'click'</span>, (e) =&gt; &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(e)</div><div class=\"line\">&#125;, <span class=\"literal\">false</span>);</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">elm.dispatchEvent(event);</div></pre></td></tr></table></figure></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"every-some\"><a href=\"#every-some\" class=\"headerlink\" title=\"every/some\"></a>every/some</h3><p>  <code></code>thisundefined</p>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li>every()  truetrue</li>\n<li><p>some()  truetrue</p>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> arr = [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span> ];  </div><div class=\"line\"><span class=\"built_in\">console</span>.log( arr.some( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> item, index, array </span>)</span>&#123;  </div><div class=\"line\">  <span class=\"built_in\">console</span>.log( <span class=\"string\">'item='</span> + item + <span class=\"string\">',index='</span>+index+<span class=\"string\">',array='</span>+array );  </div><div class=\"line\">  <span class=\"keyword\">return</span> item &gt; <span class=\"number\">3</span>;  </div><div class=\"line\">&#125;));  </div><div class=\"line\"><span class=\"built_in\">console</span>.log( arr.every( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> item, index, array </span>)</span>&#123;  </div><div class=\"line\">  <span class=\"built_in\">console</span>.log( <span class=\"string\">'item='</span> + item + <span class=\"string\">',index='</span>+index+<span class=\"string\">',array='</span>+array );  </div><div class=\"line\">  <span class=\"keyword\">return</span> item &gt; <span class=\"number\">3</span>;  </div><div class=\"line\">&#125;));</div></pre></td></tr></table></figure>\n<p>sometrueeveryfalse,</p>\n</li>\n</ul>\n<h2 id=\"getBoundingClientRect\"><a href=\"#getBoundingClientRect\" class=\"headerlink\" title=\"getBoundingClientRect\"></a>getBoundingClientRect</h2><p>  <code>lefttoprightbottom</code><code>xy</code></p>\n<p>  <img width=\"500\" src=\"/2018-06-30-vue/3.png\"></p>\n<p>  <code>lefttoprightbottomxy</code>topleft</p>\n<blockquote>\n<p> window.pageXOffset  window.pageYOffset  window.scrollX  window.scrollY</p>\n</blockquote>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// For scrollX</span></div><div class=\"line\">(((t = <span class=\"built_in\">document</span>.documentElement) || (t = <span class=\"built_in\">document</span>.body.parentNode))</div><div class=\"line\">  &amp;&amp; <span class=\"keyword\">typeof</span> t.scrollLeft == <span class=\"string\">'number'</span> ? t : <span class=\"built_in\">document</span>.body).scrollLeft</div><div class=\"line\"><span class=\"comment\">// For scrollY</span></div><div class=\"line\">(((t = <span class=\"built_in\">document</span>.documentElement) || (t = <span class=\"built_in\">document</span>.body.parentNode))</div><div class=\"line\">  &amp;&amp; <span class=\"keyword\">typeof</span> t.scrollTop == <span class=\"string\">'number'</span> ? t : <span class=\"built_in\">document</span>.body).scrollTop</div></pre></td></tr></table></figure>\n<p>  IE(2,2)<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">document</span>.documentElement.clientTop;  <span class=\"comment\">// IE0IE2</span></div><div class=\"line\"><span class=\"built_in\">document</span>.documentElement.clientLeft; <span class=\"comment\">// IE0IE2</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">functiongGetRect (element) &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> rect = element.getBoundingClientRect();</div><div class=\"line\">  <span class=\"keyword\">let</span> top = <span class=\"built_in\">document</span>.documentElement.clientTop;</div><div class=\"line\">  <span class=\"keyword\">let</span> left= <span class=\"built_in\">document</span>.documentElement.clientLeft;</div><div class=\"line\">  <span class=\"keyword\">return</span>&#123;</div><div class=\"line\">    top: rect.top - top,</div><div class=\"line\">    bottom: rect.bottom - top,</div><div class=\"line\">    left: rect.left - left,</div><div class=\"line\">    right: rect.right - left</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"performance\"><a href=\"#performance\" class=\"headerlink\" title=\"performance\"></a>performance</h2><p>  vue<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> perf = inBrowser &amp;&amp; <span class=\"built_in\">window</span>.performance</div><div class=\"line\">  <span class=\"comment\">/* istanbul ignore if */</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (</div><div class=\"line\">    perf &amp;&amp;</div><div class=\"line\">    perf.mark &amp;&amp;</div><div class=\"line\">    perf.measure &amp;&amp;</div><div class=\"line\">    perf.clearMarks &amp;&amp;</div><div class=\"line\">    perf.clearMeasures</div><div class=\"line\">  ) &#123;</div><div class=\"line\">    mark = <span class=\"function\"><span class=\"params\">tag</span> =&gt;</span> perf.mark(tag)</div><div class=\"line\">    measure = <span class=\"function\">(<span class=\"params\">name, startTag, endTag</span>) =&gt;</span> &#123;</div><div class=\"line\">      perf.measure(name, startTag, endTag)</div><div class=\"line\">      perf.clearMarks(startTag)</div><div class=\"line\">      perf.clearMarks(endTag)</div><div class=\"line\">      perf.clearMeasures(name)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  <code>performance.mark</code><code>performance.measure</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> _uid = <span class=\"number\">0</span></div><div class=\"line\"><span class=\"keyword\">const</span> perf = <span class=\"built_in\">window</span>.performance</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testPerf</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  _uid++</div><div class=\"line\">  <span class=\"keyword\">let</span> startTag = <span class=\"string\">`test-mark-start:<span class=\"subst\">$&#123;_uid&#125;</span>`</span></div><div class=\"line\">  <span class=\"keyword\">let</span> endTag = <span class=\"string\">`test-mark-end:<span class=\"subst\">$&#123;_uid&#125;</span>`</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// mark</span></div><div class=\"line\">  perf.mark(startTag)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</div><div class=\"line\">    </div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// mark</span></div><div class=\"line\">  perf.mark(endTag)</div><div class=\"line\">  perf.measure(<span class=\"string\">`test mark init`</span>, startTag, endTag)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  <code>Performance</code><br>  <img width=\"600\" src=\"/2018-06-30-vue/4.jpeg\"></p>\n<p>  <code>performance</code><a href=\"https://www.w3.org/TR/navigation-timing/\" target=\"_blank\" rel=\"external\"></a><br>  <img width=\"600\" src=\"/2018-06-30-vue/timing-overview.png\"></p>\n<h2 id=\"Proxy\"><a href=\"#Proxy\" class=\"headerlink\" title=\"Proxy\"></a>Proxy</h2><h3 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h3><p>  <code>get</code> proxy </p>\n<blockquote>\n<p>proxy.fooproxy[foo]</p>\n</blockquote>\n<p>  <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> person = &#123;</div><div class=\"line\">  name: <span class=\"string\">\"\"</span></div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(person, &#123;</div><div class=\"line\">  get: <span class=\"function\">(<span class=\"params\">target, property</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (property <span class=\"keyword\">in</span> target) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> target[property];</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">ReferenceError</span>(<span class=\"string\">\"Property \\\"\"</span> + property + <span class=\"string\">\"\\\" does not exist.\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">proxy.name <span class=\"comment\">// \"\"</span></div><div class=\"line\">proxy.age <span class=\"comment\">// </span></div></pre></td></tr></table></figure></p>\n<p>  configurablewritable Proxy  Proxy <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> target = <span class=\"built_in\">Object</span>.defineProperties(&#123;&#125;, &#123;</div><div class=\"line\">  foo: &#123;</div><div class=\"line\">    value: <span class=\"number\">123</span>,</div><div class=\"line\">    writable: <span class=\"literal\">false</span>,</div><div class=\"line\">    configurable: <span class=\"literal\">false</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"keyword\">const</span> handler = &#123;</div><div class=\"line\">  get(target, propKey) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'abc'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">const</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(target, handler);</div><div class=\"line\">proxy.foo <span class=\"comment\">// TypeError: Invariant check failed</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"has\"><a href=\"#has\" class=\"headerlink\" title=\"has\"></a>has</h3><p>  </p>\n<ul>\n<li>: foo in proxy</li>\n<li>: foo in Object.create(proxy)</li>\n<li>with : with(proxy) { (foo); }</li>\n<li><p>Reflect.has()</p>\n<p>has</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">a</span>: <span class=\"number\">10</span> &#125;;</div><div class=\"line\"><span class=\"built_in\">Object</span>.preventExtensions(obj);</div><div class=\"line\"><span class=\"keyword\">let</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</div><div class=\"line\">  has: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">target, prop</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"string\">'a'</span> <span class=\"keyword\">in</span> p <span class=\"comment\">// TypeError is thrown</span></div></pre></td></tr></table></figure>\n<p><code>has</code><code>in</code><code>for...in</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> stu1 = &#123;<span class=\"attr\">name</span>: <span class=\"string\">''</span>, <span class=\"attr\">score</span>: <span class=\"number\">59</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">let</span> stu2 = &#123;<span class=\"attr\">name</span>: <span class=\"string\">''</span>, <span class=\"attr\">score</span>: <span class=\"number\">99</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">let</span> handler = &#123;</div><div class=\"line\">  has(target, prop) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (prop === <span class=\"string\">'score'</span> &amp;&amp; target[prop] &lt; <span class=\"number\">60</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;target.name&#125;</span> `</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> prop <span class=\"keyword\">in</span> target;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">let</span> oproxy1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(stu1, handler);</div><div class=\"line\"><span class=\"keyword\">let</span> oproxy2 = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(stu2, handler);</div><div class=\"line\"><span class=\"string\">'score'</span> <span class=\"keyword\">in</span> oproxy1</div><div class=\"line\"><span class=\"comment\">//  </span></div><div class=\"line\"><span class=\"comment\">// false</span></div><div class=\"line\"><span class=\"string\">'score'</span> <span class=\"keyword\">in</span> oproxy2</div><div class=\"line\"><span class=\"comment\">// true</span></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> a <span class=\"keyword\">in</span> oproxy1) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(oproxy1[a]);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// 59</span></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> b <span class=\"keyword\">in</span> oproxy2) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(oproxy2[b]);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// 99</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>  <code>with</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> qs = location.search.substring(<span class=\"number\">1</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> hostName = location.hostname;</div><div class=\"line\"><span class=\"keyword\">let</span> url = location.href;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">with</span> (location)&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> qs = search.substring(<span class=\"number\">1</span>);</div><div class=\"line\">  <span class=\"keyword\">let</span> hostName = hostname;</div><div class=\"line\">  <span class=\"keyword\">let</span> url = href;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  <code>with</code><code>let</code><code>var</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// with</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"func\"</span>);</div><div class=\"line\">  <span class=\"keyword\">let</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> v = obj.a[<span class=\"number\">0</span>];</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"func\"</span>);<span class=\"comment\">// 1.310302734375ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">func();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// withlet</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">funcWith</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"funcWith\"</span>);</div><div class=\"line\">  <span class=\"keyword\">const</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">with</span> (obj) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> a = obj.a</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> v = a[<span class=\"number\">0</span>];</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"funcWith\"</span>);<span class=\"comment\">// 14.533935546875ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">funcWith();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// with</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">funcWith</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"funcWith\"</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">with</span> (obj) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> v = a[<span class=\"number\">0</span>];</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"funcWith\"</span>);<span class=\"comment\">// 52.078857421875ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">funcWith();</div></pre></td></tr></table></figure></p>\n<p>  js<code>with</code>jsaobj<code>with</code>jsaobjjswith</p>\n<p>  <code>has</code><code>with</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> stu1 = &#123;<span class=\"attr\">name</span>: <span class=\"string\">''</span>, <span class=\"attr\">score</span>: <span class=\"number\">59</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">let</span> handler = &#123;</div><div class=\"line\">  has(target, prop) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (prop === <span class=\"string\">'score'</span> &amp;&amp; target[prop] &lt; <span class=\"number\">60</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;target.name&#125;</span> `</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> prop <span class=\"keyword\">in</span> target;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">let</span> oproxy1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(stu1, handler);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> score</div><div class=\"line\">  <span class=\"keyword\">with</span>(oproxy1) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> score</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">test() <span class=\"comment\">//  </span></div></pre></td></tr></table></figure></p>\n<p>  <code>with</code>js<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">funcWith</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"funcWith\"</span>);</div><div class=\"line\">  <span class=\"keyword\">const</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">with</span> (obj) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> a = obj.a</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> v = a[<span class=\"number\">0</span>];</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"funcWith\"</span>);<span class=\"comment\">// 1.7109375ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">funcWith();</div></pre></td></tr></table></figure></p>\n<p>  <code>with</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"func\"</span>);</div><div class=\"line\">  <span class=\"keyword\">let</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">let</span> v = obj.a[<span class=\"number\">0</span>];</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"func\"</span>);<span class=\"comment\">// 0.01904296875ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">func();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">funcWith</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"funcWith\"</span>);</div><div class=\"line\">  <span class=\"keyword\">const</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">with</span> (obj) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> v = a[<span class=\"number\">0</span>];</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"funcWith\"</span>);<span class=\"comment\">// 0.028076171875ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">funcWith();</div></pre></td></tr></table></figure></p>\n<p>  <code>has</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// has</span></div><div class=\"line\"><span class=\"built_in\">console</span>.time(<span class=\"string\">\"\"</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> stu1 = &#123;<span class=\"attr\">name</span>: <span class=\"string\">''</span>, <span class=\"attr\">score</span>: <span class=\"number\">59</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">let</span> handler = &#123;</div><div class=\"line\">  has(target, prop) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (prop === <span class=\"string\">'score'</span> &amp;&amp; target[prop] &lt; <span class=\"number\">60</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;target.name&#125;</span> `</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> prop <span class=\"keyword\">in</span> target;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">let</span> oproxy1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(stu1, handler);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">oproxy1</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    render: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> oproxy1.score</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(test(oproxy1).render()) <span class=\"comment\">//  </span></div><div class=\"line\"><span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"\"</span>); <span class=\"comment\">// 0.719970703125ms</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.time(<span class=\"string\">\"\"</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> stu1 = &#123;<span class=\"attr\">name</span>: <span class=\"string\">''</span>, <span class=\"attr\">score</span>: <span class=\"number\">59</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">let</span> handler = &#123;</div><div class=\"line\">  has(target, prop) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (prop === <span class=\"string\">'score'</span> &amp;&amp; target[prop] &lt; <span class=\"number\">60</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;target.name&#125;</span> `</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> prop <span class=\"keyword\">in</span> target;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">let</span> oproxy1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(stu1, handler);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">oproxy1</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> score</div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    render: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">with</span>(oproxy1) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> score</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(test(oproxy1).render()) <span class=\"comment\">//  </span></div><div class=\"line\"><span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"\"</span>); <span class=\"comment\">// 0.760009765625ms</span></div></pre></td></tr></table></figure></p>\n<p>  vue<code>with</code><code>proxy</code><code>AST</code><code>AST</code><code>vue</code><code>with</code><a href=\"https://github.com/vuejs/vue/issues/3923\" target=\"_blank\" rel=\"external\"></a><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">generate</span> (<span class=\"params\"></span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\">  ast: ASTElement | void,</span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\">  options: CompilerOptions</span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\"></span>): <span class=\"title\">CodegenResult</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> state = <span class=\"keyword\">new</span> CodegenState(options)</div><div class=\"line\">  <span class=\"keyword\">const</span> code = ast ? genElement(ast, state) : <span class=\"string\">'_c(\"div\")'</span></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    render: <span class=\"string\">`with(this)&#123;return <span class=\"subst\">$&#123;code&#125;</span>&#125;`</span>,</div><div class=\"line\">    staticRenderFns: state.staticRenderFns</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"outerHTML\"><a href=\"#outerHTML\" class=\"headerlink\" title=\"outerHTML\"></a>outerHTML</h2><p>  <code>platforms/web/entry-runtime-width-compile.js</code><code>getOuterHTML</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getOuterHTML</span> (<span class=\"params\">el: Element</span>): <span class=\"title\">string</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (el.outerHTML) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> el.outerHTML</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> container = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'div'</span>)</div><div class=\"line\">    container.appendChild(el.cloneNode(<span class=\"literal\">true</span>))</div><div class=\"line\">    <span class=\"keyword\">return</span> container.innerHTML</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  IE9-11<code>SVG</code><code>innerHTML</code><code>outerHTML</code><code>else</code></p>\n<h2 id=\"2018-07-17\"><a href=\"#2018-07-17\" class=\"headerlink\" title=\"2018-07-17\"></a>2018-07-17</h2><p><code>proxy</code><code>Object.defineProperty</code><code>vue</code><code>vue</code><code>data</code><code>Object.defineProperty</code><code>data</code><code>Object.defineProperty</code>api?</p>\n<blockquote>\n<p><code>Object.defineProperty</code><code>obj</code></p>\n</blockquote>\n<p><code>Object.defineProperty</code><code>src/core/instance/state.js</code><code>initData</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxy</span> (<span class=\"params\">target: Object, sourceKey: string, key: string</span>) </span>&#123;</div><div class=\"line\">  sharedPropertyDefinition.get = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxyGetter</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>[sourceKey][key]</div><div class=\"line\">  &#125;</div><div class=\"line\">  sharedPropertyDefinition.set = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxySetter</span> (<span class=\"params\">val</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>[sourceKey][key] = val</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">Object</span>.defineProperty(target, key, sharedPropertyDefinition)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">initData</span> (<span class=\"params\">vm: Component</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">while</span> (i--) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> key = keys[i]</div><div class=\"line\">    <span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (methods &amp;&amp; hasOwn(methods, key)) &#123;</div><div class=\"line\">        warn(</div><div class=\"line\">          <span class=\"string\">`Method \"<span class=\"subst\">$&#123;key&#125;</span>\" has already been defined as a data property.`</span>,</div><div class=\"line\">          vm</div><div class=\"line\">        )</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (props &amp;&amp; hasOwn(props, key)) &#123;</div><div class=\"line\">      process.env.NODE_ENV !== <span class=\"string\">'production'</span> &amp;&amp; warn(</div><div class=\"line\">        <span class=\"string\">`The data property \"<span class=\"subst\">$&#123;key&#125;</span>\" is already declared as a prop. `</span> +</div><div class=\"line\">        <span class=\"string\">`Use prop default value instead.`</span>,</div><div class=\"line\">        vm</div><div class=\"line\">      )</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!isReserved(key)) &#123;</div><div class=\"line\">      proxy(vm, <span class=\"string\">`_data`</span>, key)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// observe data</span></div><div class=\"line\">  observe(data, <span class=\"literal\">true</span> <span class=\"comment\">/* asRootData */</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>proxy</code><code>observe</code><code>proxy</code><code>observe</code><code>src/core/observer/index.js</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">observe</span> (<span class=\"params\">value: any, asRootData: ?boolean</span>): <span class=\"title\">Observer</span> | <span class=\"title\">void</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (!isObject(value) || value <span class=\"keyword\">instanceof</span> VNode) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">let</span> ob: Observer | <span class=\"keyword\">void</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (hasOwn(value, <span class=\"string\">'__ob__'</span>) &amp;&amp; value.__ob__ <span class=\"keyword\">instanceof</span> Observer) &#123;</div><div class=\"line\">    ob = value.__ob__</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (</div><div class=\"line\">    shouldObserve &amp;&amp;</div><div class=\"line\">    !isServerRendering() &amp;&amp;</div><div class=\"line\">    (<span class=\"built_in\">Array</span>.isArray(value) || isPlainObject(value)) &amp;&amp;</div><div class=\"line\">    <span class=\"built_in\">Object</span>.isExtensible(value) &amp;&amp;</div><div class=\"line\">    !value._isVue</div><div class=\"line\">  ) &#123;</div><div class=\"line\">    ob = <span class=\"keyword\">new</span> Observer(value)</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">if</span> (asRootData &amp;&amp; ob) &#123;</div><div class=\"line\">    ob.vmCount++</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> ob</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>value</code>value<code>return</code><code>ob = new Observer(value)</code><code>src/core/observer/array.js</code>:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> arrayProto = <span class=\"built_in\">Array</span>.prototype</div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> arrayMethods = <span class=\"built_in\">Object</span>.create(arrayProto)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> methodsToPatch = [</div><div class=\"line\">  <span class=\"string\">'push'</span>,</div><div class=\"line\">  <span class=\"string\">'pop'</span>,</div><div class=\"line\">  <span class=\"string\">'shift'</span>,</div><div class=\"line\">  <span class=\"string\">'unshift'</span>,</div><div class=\"line\">  <span class=\"string\">'splice'</span>,</div><div class=\"line\">  <span class=\"string\">'sort'</span>,</div><div class=\"line\">  <span class=\"string\">'reverse'</span></div><div class=\"line\">]</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * Intercept mutating methods and emit events</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\">methodsToPatch.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">method</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// cache original method</span></div><div class=\"line\">  <span class=\"keyword\">const</span> original = arrayProto[method]</div><div class=\"line\">  def(arrayMethods, method, <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mutator</span> (<span class=\"params\">...args</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> result = original.apply(<span class=\"keyword\">this</span>, args)</div><div class=\"line\">    <span class=\"keyword\">const</span> ob = <span class=\"keyword\">this</span>.__ob__</div><div class=\"line\">    <span class=\"keyword\">let</span> inserted</div><div class=\"line\">    <span class=\"keyword\">switch</span> (method) &#123;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'push'</span>:</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'unshift'</span>:</div><div class=\"line\">        inserted = args</div><div class=\"line\">        <span class=\"keyword\">break</span></div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'splice'</span>:</div><div class=\"line\">        inserted = args.slice(<span class=\"number\">2</span>)</div><div class=\"line\">        <span class=\"keyword\">break</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (inserted) ob.observeArray(inserted)</div><div class=\"line\">    <span class=\"comment\">// notify change</span></div><div class=\"line\">    ob.dep.notify()</div><div class=\"line\">    <span class=\"keyword\">return</span> result</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p><code>Array.prototype</code><code>arrayProto</code><code>arrayMethods</code><code>arrayProto</code><code>methodsToPatch</code><code>def</code>(<code>src/core/util/lang.js</code><code>Object.defineProperty</code>)<code>Object.defineProperty</code><code>Object.defineProperty</code>api</p>\n<p><code>vue</code><code>vm.$set</code><code>vm.$set</code><code>splice</code><code>splice</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;div&gt;</div><div class=\"line\">&#123;&#123;arr&#125;&#125;</div><div class=\"line\">&lt;/div&gt;</div><div class=\"line\">let vm = new Vue(&#123;</div><div class=\"line\">  el: &apos;#app&apos;,</div><div class=\"line\">  data() &#123;</div><div class=\"line\">    return &#123;</div><div class=\"line\">      arr: [1, 2]</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\">// vm.$set</div><div class=\"line\">vm.$set(vm.arr, 0, 31)</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p><code>Object.defineProperty</code></p>\n</blockquote>\n<p><code>proxy</code><code>get</code><code>set</code><code>proxy</code><code>Object.defineProperty</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// proxy</span></div><div class=\"line\"><span class=\"keyword\">const</span> handler = &#123;</div><div class=\"line\">  get (target, key) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'----get-----'</span>)</div><div class=\"line\">    <span class=\"keyword\">return</span> target[key];</div><div class=\"line\">  &#125;,</div><div class=\"line\">  set (target, key, value) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'----set-----'</span>)</div><div class=\"line\">    target[key] = value;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">const</span> target = [<span class=\"number\">1</span>,<span class=\"number\">2</span>];</div><div class=\"line\"><span class=\"keyword\">const</span> arr = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(target, handler);</div><div class=\"line\"></div><div class=\"line\">arr[<span class=\"number\">0</span>] = <span class=\"number\">3</span> <span class=\"comment\">// '----set-----'</span></div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>vue<code>proxy</code><code>Object.defineProperty</code></p>\n</blockquote>\n<p><code>proxy</code><code>Object.defineProperty</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>api</code><a href=\"https://github.com/wqzwh/blog/blob/master/source/_posts/2018-06-30-vue.md\" target=\"_blank\" rel=\"external\">issues</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  vuemvvm<code>watch</code><code>computed</code>apivuevuejavascriptvue</p>\n<h2 id=\"flow-\"><a href=\"#flow-\" class=\"headerlink\" title=\"flow \"></a>flow </h2><p>  FlowJavaScriptFacebook2014Scale ConferenceJavaScriptFlowjavascript</p>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  Flowvoidjsundefined<br>  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">boolean</div><div class=\"line\">number</div><div class=\"line\">string</div><div class=\"line\">null</div><div class=\"line\">void</div></pre></td></tr></table></figure></p>\n<p>  <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> str:number = <span class=\"number\">1</span>;</div><div class=\"line\"><span class=\"keyword\">let</span> str1:string = <span class=\"string\">'a'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">str = <span class=\"string\">'d'</span> <span class=\"comment\">// error</span></div><div class=\"line\">str1 = <span class=\"number\">3</span>  <span class=\"comment\">// error</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  Flow<br>  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Object</div><div class=\"line\">Array</div><div class=\"line\">Function</div><div class=\"line\">Class</div></pre></td></tr></table></figure></p>\n<p>  <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Object </span></div><div class=\"line\"><span class=\"keyword\">let</span> o:<span class=\"built_in\">Object</span> = &#123;</div><div class=\"line\">  key: <span class=\"number\">123</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">//Objectkey</span></div><div class=\"line\"><span class=\"keyword\">let</span> o2:&#123;<span class=\"attr\">key</span>:string&#125; = &#123;</div><div class=\"line\">  key: <span class=\"string\">'111'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Array </span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">let</span> numberArr:number[] = [<span class=\"number\">12</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>];</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">let</span> numberAr2r:<span class=\"built_in\">Array</span>&lt;number&gt; = [<span class=\"number\">12</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> stringArr:string[] = [<span class=\"string\">'12'</span>,<span class=\"string\">'a'</span>,<span class=\"string\">'cc'</span>];</div><div class=\"line\"><span class=\"keyword\">let</span> booleanArr:boolean[] = [<span class=\"literal\">true</span>,<span class=\"literal\">true</span>,<span class=\"literal\">false</span>];</div><div class=\"line\"><span class=\"keyword\">let</span> nullArr:<span class=\"literal\">null</span>[] = [<span class=\"literal\">null</span>,<span class=\"literal\">null</span>,<span class=\"literal\">null</span>];</div><div class=\"line\"><span class=\"keyword\">let</span> voidArr:<span class=\"keyword\">void</span>[] = [ , , <span class=\"literal\">undefined</span>,<span class=\"keyword\">void</span>(<span class=\"number\">0</span>)];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">//4</span></div><div class=\"line\"><span class=\"keyword\">let</span> arr:[number,string,boolean] = [<span class=\"number\">1</span>,<span class=\"string\">'a'</span>,<span class=\"literal\">true</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;,];</div></pre></td></tr></table></figure></p>\n<p>  Functionvue<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * </span></div><div class=\"line\"><span class=\"comment\"> * fn</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">arg:number,arg2:string</span>):<span class=\"title\">Object</span></span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    arg,</div><div class=\"line\">    arg2</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * vue</span></div><div class=\"line\"><span class=\"comment\"> * src/core/instance/lifecycle.js</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mountComponent</span> (<span class=\"params\"></span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\">  vm: Component,</span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\">  el: ?Element,</span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\">  hydrating?: boolean</span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\"></span>): <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  class<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * vue</span></div><div class=\"line\"><span class=\"comment\"> * src/core/observer/index.js </span></div><div class=\"line\"><span class=\"comment\">*/</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observer</span> </span>&#123;</div><div class=\"line\">  value: any;</div><div class=\"line\">  dep: Dep;</div><div class=\"line\">  vmCount: number;</div><div class=\"line\">  <span class=\"keyword\">constructor</span> (value: any) &#123;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  flow.jsjavascriptbabelvuebabel-preset-flow-vuebabelrc<br>  <figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">// package.json </div><div class=\"line\"></div><div class=\"line\">// </div><div class=\"line\">\"devDependencies\": &#123;</div><div class=\"line\">  \"@types/node\": \"^8.0.33\",</div><div class=\"line\">  \"@types/webpack\": \"^3.0.13\",</div><div class=\"line\">  \"acorn\": \"^5.2.1\",</div><div class=\"line\">  \"babel-core\": \"^6.25.0\",</div><div class=\"line\">  \"babel-eslint\": \"^8.0.3\",</div><div class=\"line\">  \"babel-helper-vue-jsx-merge-props\": \"^2.0.2\",</div><div class=\"line\">  \"babel-loader\": \"^7.0.0\",</div><div class=\"line\">  \"babel-plugin-istanbul\": \"^4.1.4\",</div><div class=\"line\">  \"babel-plugin-syntax-dynamic-import\": \"^6.18.0\",</div><div class=\"line\">  \"babel-plugin-syntax-jsx\": \"^6.18.0\",</div><div class=\"line\">  \"babel-plugin-transform-vue-jsx\": \"^3.4.3\",</div><div class=\"line\">  \"babel-preset-es2015\": \"^6.24.1\",</div><div class=\"line\">  \"babel-preset-flow-vue\": \"^1.0.0\"</div><div class=\"line\">&#125;  </div><div class=\"line\">// </div><div class=\"line\"></div><div class=\"line\">// babelrc </div><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">\"presets\"</span>: [<span class=\"string\">\"es2015\"</span>, <span class=\"string\">\"flow-vue\"</span>],</div><div class=\"line\">  <span class=\"attr\">\"plugins\"</span>: [<span class=\"string\">\"transform-vue-jsx\"</span>, <span class=\"string\">\"syntax-dynamic-import\"</span>],</div><div class=\"line\">  <span class=\"attr\">\"ignore\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"dist/*.js\"</span>,</div><div class=\"line\">    <span class=\"string\">\"packages/**/*.js\"</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  getter/setter</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//  </span></div><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;</div><div class=\"line\">obj.a <span class=\"comment\">// 1</span></div><div class=\"line\"><span class=\"keyword\">typeof</span> obj.toString <span class=\"comment\">// 'function'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> obj2 = <span class=\"built_in\">Object</span>.create(&#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;)</div><div class=\"line\">obj2.a <span class=\"comment\">// 1</span></div><div class=\"line\"><span class=\"keyword\">typeof</span> obj2.toString <span class=\"comment\">// 'function'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> obj3 = <span class=\"built_in\">Object</span>.create(<span class=\"literal\">null</span>)</div><div class=\"line\"><span class=\"keyword\">typeof</span> obj3.toString <span class=\"comment\">// 'undefined'</span></div></pre></td></tr></table></figure></p>\n<p>  </p>\n<p>  <img width=\"600\" src=\"/2018-06-30-vue/obj.jpeg\"></p>\n<p>  Object.createES5vueie9+<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (!<span class=\"built_in\">Object</span>.create) &#123;</div><div class=\"line\">  <span class=\"built_in\">Object</span>.create = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">o</span>) </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">F</span>(<span class=\"params\"></span>) </span>&#123;&#125;  <span class=\"comment\">//</span></div><div class=\"line\">    F.prototype = o;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> F();  <span class=\"comment\">//new</span></div><div class=\"line\">  &#125;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  vue<code>Object.create(null)</code>vue<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// src/core/global-api/index.js</span></div><div class=\"line\"><span class=\"comment\">// VueoptionsASSET_TYPESvue'component','directive','filter'</span></div><div class=\"line\">  Vue.options = <span class=\"built_in\">Object</span>.create(<span class=\"literal\">null</span>)</div><div class=\"line\">  ASSET_TYPES.forEach(<span class=\"function\"><span class=\"params\">type</span> =&gt;</span> &#123;</div><div class=\"line\">    Vue.options[type + <span class=\"string\">'s'</span>] = <span class=\"built_in\">Object</span>.create(<span class=\"literal\">null</span>)</div><div class=\"line\">  &#125;)</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  falseES5<code>Object.defineProperty</code></p>\n<p>  <code>Object.defineProperty(obj,prop,descriptor)</code><code>descriptor</code></p>\n<ul>\n<li>configurable  configurable  true  false</li>\n<li>enumerable enumerabletrue false</li>\n<li>value  JavaScript  undefined</li>\n<li>writable writabletruevalue false</li>\n<li>get  getter  getter  undefinedthisthis undefined</li>\n<li><p>set  setter  setter  undefined undefined</p>\n<blockquote>\n<p> descriptor  (get  set)  value</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj,prop,</div><div class=\"line\">  configurable: <span class=\"literal\">true</span>,</div><div class=\"line\">  enumerable: <span class=\"literal\">true</span>,</div><div class=\"line\">  writable: <span class=\"literal\">true</span>,</div><div class=\"line\">  value: <span class=\"string\">''</span>,</div><div class=\"line\">  get: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;,</div><div class=\"line\">  set: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    </div><div class=\"line\">  &#125;</div><div class=\"line\">)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>  <code>Object.getOwnPropertyDescriptor</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// false</span></div><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span></div><div class=\"line\">&#125;)</div><div class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(obj, <span class=\"string\">'name'</span>)</div><div class=\"line\"><span class=\"comment\">// &#123;value: \"wqzwh\", writable: false, enumerable: false, configurable: false&#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> obj2 = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj2, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  enumerable: <span class=\"literal\">true</span>,</div><div class=\"line\">  writable: <span class=\"literal\">true</span>,</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span></div><div class=\"line\">&#125;)</div><div class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(obj2, <span class=\"string\">'name'</span>)</div><div class=\"line\"><span class=\"comment\">// &#123;value: \"wqzwh\", writable: true, enumerable: true, configurable: false&#125;</span></div></pre></td></tr></table></figure></p>\n<p>  <code>Object.keys()</code>key<code>enumerable</code>true<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  enumerable: <span class=\"literal\">true</span>,</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span></div><div class=\"line\">&#125;)</div><div class=\"line\"><span class=\"built_in\">Object</span>.keys(obj) <span class=\"comment\">// ['name']</span></div></pre></td></tr></table></figure></p>\n<p>  <code>propertyIsEnumerable</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span></div><div class=\"line\">&#125;)</div><div class=\"line\">obj.propertyIsEnumerable(<span class=\"string\">'name'</span>) <span class=\"comment\">// false</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  enumerable: <span class=\"literal\">true</span>,</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span></div><div class=\"line\">&#125;)</div><div class=\"line\">obj.propertyIsEnumerable(<span class=\"string\">'name'</span>) <span class=\"comment\">// true</span></div></pre></td></tr></table></figure></p>\n<p>  <code>hasOwnProperty</code> in <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Object.defineProperty</span></div><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'name'</span>, &#123;</div><div class=\"line\">  value : <span class=\"string\">\"wqzwh\"</span>,</div><div class=\"line\">  enumerable: <span class=\"literal\">true</span></div><div class=\"line\">&#125;)</div><div class=\"line\"><span class=\"keyword\">let</span> obj2 = <span class=\"built_in\">Object</span>.create(obj)</div><div class=\"line\">obj2.age = <span class=\"number\">20</span></div><div class=\"line\"><span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> obj2) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(key); <span class=\"comment\">// age, name</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> obj2) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (obj2.hasOwnProperty(key)) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(key); <span class=\"comment\">// age</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;</div><div class=\"line\">obj.name = <span class=\"string\">'wqzwh'</span></div><div class=\"line\"><span class=\"keyword\">let</span> obj2 = <span class=\"built_in\">Object</span>.create(obj)</div><div class=\"line\">obj2.age = <span class=\"number\">20</span></div><div class=\"line\"><span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> obj2) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(key); <span class=\"comment\">// age, name</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> obj2) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (obj2.hasOwnProperty(key)) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(key); <span class=\"comment\">// age</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p><code>Object.defineProperty</code><code>enumerable</code><code>true</code><code>for in</code></p>\n</blockquote>\n<h3 id=\"getter-setter\"><a href=\"#getter-setter\" class=\"headerlink\" title=\"getter/setter\"></a>getter/setter</h3><p>  <code>get/set</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(foo.prototype, <span class=\"string\">'z'</span>, </div><div class=\"line\">  &#123;</div><div class=\"line\">    get: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">1</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">)</div><div class=\"line\"><span class=\"keyword\">let</span> obj = <span class=\"keyword\">new</span> foo();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 1</span></div><div class=\"line\">obj.z = <span class=\"number\">10</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 1</span></div></pre></td></tr></table></figure></p>\n<p>  <code>z</code><code>foo.prototype</code><code>get</code><code>obj.z = 10</code><code>obj</code><code>z</code><code>get</code></p>\n<p>  <br>  <img width=\"600\" src=\"/2018-06-30-vue/5.jpeg\"></p>\n<p>  <code>z</code><code>writable</code><code>configurable</code><code>true</code><code>z</code><code>z</code><code>obj.z</code>1<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;&#125;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(foo.prototype, <span class=\"string\">'z'</span>, </div><div class=\"line\">  &#123;</div><div class=\"line\">    get: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">1</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">)</div><div class=\"line\"><span class=\"keyword\">let</span> obj = <span class=\"keyword\">new</span> foo();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 1</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(obj, <span class=\"string\">'z'</span>, </div><div class=\"line\">  &#123;</div><div class=\"line\">    value: <span class=\"number\">100</span>,</div><div class=\"line\">    writable: <span class=\"literal\">true</span>,</div><div class=\"line\">    configurable: <span class=\"literal\">true</span></div><div class=\"line\">  &#125;</div><div class=\"line\">)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 100</span></div><div class=\"line\">obj.z = <span class=\"number\">300</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 300</span></div><div class=\"line\"><span class=\"keyword\">delete</span> obj.z</div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 1</span></div></pre></td></tr></table></figure></p>\n<p>  <br>  <img width=\"600\" src=\"/2018-06-30-vue/6.jpeg\"></p>\n<p>  <code>Object.defineProperty</code><code>configurable</code><code>enumerable</code><code>writable</code><code>value</code><code>get</code><code>set</code><br>  <img width=\"600\" src=\"/2018-06-30-vue/1.jpg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  <code>__proto__</code><code>Object.create(null)</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"number\">2</span>&#125;</div><div class=\"line\">obj.__proto__.z = <span class=\"number\">3</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj.z) <span class=\"comment\">// 3</span></div></pre></td></tr></table></figure></p>\n<p>  <img width=\"600\" src=\"/2018-06-30-vue/2.jpg\"></p>\n<p>  <code>Object.preventExtensions</code><code>Object.isExtensible</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">x</span> : <span class=\"number\">1</span>, <span class=\"attr\">y</span> : <span class=\"number\">2</span>&#125;;</div><div class=\"line\"><span class=\"built_in\">Object</span>.isExtensible(obj); <span class=\"comment\">// true</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.preventExtensions(obj);</div><div class=\"line\"><span class=\"built_in\">Object</span>.isExtensible(obj); <span class=\"comment\">// false</span></div><div class=\"line\">obj.z = <span class=\"number\">1</span>;</div><div class=\"line\">obj.z; <span class=\"comment\">// undefined, add new property failed</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(obj, <span class=\"string\">'x'</span>);</div><div class=\"line\"><span class=\"comment\">// Object &#123;value: 1, writable: true, enumerable: true, configurable: true&#125;</span></div></pre></td></tr></table></figure></p>\n<p>  <code>Object.seal</code>configurablefalse,<code>Object.isSealed</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">x</span> : <span class=\"number\">1</span>, <span class=\"attr\">y</span> : <span class=\"number\">2</span>&#125;;</div><div class=\"line\"><span class=\"built_in\">Object</span>.seal(obj);</div><div class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(obj, <span class=\"string\">'x'</span>);</div><div class=\"line\"><span class=\"comment\">// Object &#123;value: 1, writable: true, enumerable: true, configurable: false&#125;</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.isSealed(obj); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure></p>\n<p>  <code>Object.freeze</code>sealwirtablefalse<code>Object.isFrozen</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">x</span> : <span class=\"number\">1</span>, <span class=\"attr\">y</span> : <span class=\"number\">2</span>&#125;;</div><div class=\"line\"><span class=\"built_in\">Object</span>.freeze(obj);</div><div class=\"line\"><span class=\"built_in\">Object</span>.getOwnPropertyDescriptor(obj, <span class=\"string\">'x'</span>);</div><div class=\"line\"><span class=\"comment\">// Object &#123;value: 1, writable: false, enumerable: true, configurable: false&#125;</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.isFrozen(obj); <span class=\"comment\">// true</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"DOM\"><a href=\"#DOM\" class=\"headerlink\" title=\"DOM\"></a>DOM</h2><p>  vuemodel<code>platforms/web/runtime/directives/model.js</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* istanbul ignore if */</span></div><div class=\"line\"><span class=\"keyword\">if</span> (isIE9) &#123;</div><div class=\"line\">  <span class=\"comment\">// http://www.matts411.com/post/internet-explorer-9-oninput/</span></div><div class=\"line\">  <span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'selectionchange'</span>, () =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> el = <span class=\"built_in\">document</span>.activeElement</div><div class=\"line\">    <span class=\"keyword\">if</span> (el &amp;&amp; el.vmodel) &#123;</div><div class=\"line\">      trigger(el, <span class=\"string\">'input'</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">trigger</span> (<span class=\"params\">el, type</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> e = <span class=\"built_in\">document</span>.createEvent(<span class=\"string\">'HTMLEvents'</span>)</div><div class=\"line\">  e.initEvent(type, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>)</div><div class=\"line\">  el.dispatchEvent(e)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  <code>document.activeElement</code><code>document.hasFocus()</code></p>\n<p>  element.dispatchEvent(). <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">document</span>.createEvent()</div><div class=\"line\">event.initEvent()</div><div class=\"line\">element.dispatchEvent()</div></pre></td></tr></table></figure></p>\n<p>  <code>createEvent()</code><code>Event</code><br>  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">\t        \t        </div><div class=\"line\">HTMLEvents\tHTMLEvent\t  initEvent()</div><div class=\"line\">MouseEvents\tMouseEvent\t  initMouseEvent()</div><div class=\"line\">UIEvents\t  UIEvent\t  initUIEvent()</div></pre></td></tr></table></figure></p>\n<p>  <code>initEvent()</code><code>DocumentEvent</code><code>Event</code><code>initEvent(eventName, canBubble, preventDefault)</code>. </p>\n<p>  <code>dispatchEvent()</code>vue<code>el.dispatchEvent(e)</code>, e<code>createEvent()</code><code>Event</code></p>\n<p>  <code>click</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// .</span></div><div class=\"line\"><span class=\"keyword\">let</span> event = <span class=\"built_in\">document</span>.createEvent(<span class=\"string\">'HTMLEvents'</span>);</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">event.initEvent(<span class=\"string\">'click'</span>, <span class=\"literal\">true</span>, <span class=\"literal\">false</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> elm = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'wq'</span>)</div><div class=\"line\"><span class=\"comment\">// .</span></div><div class=\"line\">elm.addEventListener(<span class=\"string\">'click'</span>, (e) =&gt; &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(e)</div><div class=\"line\">&#125;, <span class=\"literal\">false</span>);</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">elm.dispatchEvent(event);</div></pre></td></tr></table></figure></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"every-some\"><a href=\"#every-some\" class=\"headerlink\" title=\"every/some\"></a>every/some</h3><p>  <code></code>thisundefined</p>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li>every()  truetrue</li>\n<li><p>some()  truetrue</p>\n<p></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> arr = [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span> ];  </div><div class=\"line\"><span class=\"built_in\">console</span>.log( arr.some( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> item, index, array </span>)</span>&#123;  </div><div class=\"line\">  <span class=\"built_in\">console</span>.log( <span class=\"string\">'item='</span> + item + <span class=\"string\">',index='</span>+index+<span class=\"string\">',array='</span>+array );  </div><div class=\"line\">  <span class=\"keyword\">return</span> item &gt; <span class=\"number\">3</span>;  </div><div class=\"line\">&#125;));  </div><div class=\"line\"><span class=\"built_in\">console</span>.log( arr.every( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> item, index, array </span>)</span>&#123;  </div><div class=\"line\">  <span class=\"built_in\">console</span>.log( <span class=\"string\">'item='</span> + item + <span class=\"string\">',index='</span>+index+<span class=\"string\">',array='</span>+array );  </div><div class=\"line\">  <span class=\"keyword\">return</span> item &gt; <span class=\"number\">3</span>;  </div><div class=\"line\">&#125;));</div></pre></td></tr></table></figure>\n<p>sometrueeveryfalse,</p>\n</li>\n</ul>\n<h2 id=\"getBoundingClientRect\"><a href=\"#getBoundingClientRect\" class=\"headerlink\" title=\"getBoundingClientRect\"></a>getBoundingClientRect</h2><p>  <code>lefttoprightbottom</code><code>xy</code></p>\n<p>  <img width=\"500\" src=\"/2018-06-30-vue/3.png\"></p>\n<p>  <code>lefttoprightbottomxy</code>topleft</p>\n<blockquote>\n<p> window.pageXOffset  window.pageYOffset  window.scrollX  window.scrollY</p>\n</blockquote>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// For scrollX</span></div><div class=\"line\">(((t = <span class=\"built_in\">document</span>.documentElement) || (t = <span class=\"built_in\">document</span>.body.parentNode))</div><div class=\"line\">  &amp;&amp; <span class=\"keyword\">typeof</span> t.scrollLeft == <span class=\"string\">'number'</span> ? t : <span class=\"built_in\">document</span>.body).scrollLeft</div><div class=\"line\"><span class=\"comment\">// For scrollY</span></div><div class=\"line\">(((t = <span class=\"built_in\">document</span>.documentElement) || (t = <span class=\"built_in\">document</span>.body.parentNode))</div><div class=\"line\">  &amp;&amp; <span class=\"keyword\">typeof</span> t.scrollTop == <span class=\"string\">'number'</span> ? t : <span class=\"built_in\">document</span>.body).scrollTop</div></pre></td></tr></table></figure>\n<p>  IE(2,2)<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">document</span>.documentElement.clientTop;  <span class=\"comment\">// IE0IE2</span></div><div class=\"line\"><span class=\"built_in\">document</span>.documentElement.clientLeft; <span class=\"comment\">// IE0IE2</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">functiongGetRect (element) &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> rect = element.getBoundingClientRect();</div><div class=\"line\">  <span class=\"keyword\">let</span> top = <span class=\"built_in\">document</span>.documentElement.clientTop;</div><div class=\"line\">  <span class=\"keyword\">let</span> left= <span class=\"built_in\">document</span>.documentElement.clientLeft;</div><div class=\"line\">  <span class=\"keyword\">return</span>&#123;</div><div class=\"line\">    top: rect.top - top,</div><div class=\"line\">    bottom: rect.bottom - top,</div><div class=\"line\">    left: rect.left - left,</div><div class=\"line\">    right: rect.right - left</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"performance\"><a href=\"#performance\" class=\"headerlink\" title=\"performance\"></a>performance</h2><p>  vue<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> perf = inBrowser &amp;&amp; <span class=\"built_in\">window</span>.performance</div><div class=\"line\">  <span class=\"comment\">/* istanbul ignore if */</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (</div><div class=\"line\">    perf &amp;&amp;</div><div class=\"line\">    perf.mark &amp;&amp;</div><div class=\"line\">    perf.measure &amp;&amp;</div><div class=\"line\">    perf.clearMarks &amp;&amp;</div><div class=\"line\">    perf.clearMeasures</div><div class=\"line\">  ) &#123;</div><div class=\"line\">    mark = <span class=\"function\"><span class=\"params\">tag</span> =&gt;</span> perf.mark(tag)</div><div class=\"line\">    measure = <span class=\"function\">(<span class=\"params\">name, startTag, endTag</span>) =&gt;</span> &#123;</div><div class=\"line\">      perf.measure(name, startTag, endTag)</div><div class=\"line\">      perf.clearMarks(startTag)</div><div class=\"line\">      perf.clearMarks(endTag)</div><div class=\"line\">      perf.clearMeasures(name)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  <code>performance.mark</code><code>performance.measure</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> _uid = <span class=\"number\">0</span></div><div class=\"line\"><span class=\"keyword\">const</span> perf = <span class=\"built_in\">window</span>.performance</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testPerf</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  _uid++</div><div class=\"line\">  <span class=\"keyword\">let</span> startTag = <span class=\"string\">`test-mark-start:<span class=\"subst\">$&#123;_uid&#125;</span>`</span></div><div class=\"line\">  <span class=\"keyword\">let</span> endTag = <span class=\"string\">`test-mark-end:<span class=\"subst\">$&#123;_uid&#125;</span>`</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// mark</span></div><div class=\"line\">  perf.mark(startTag)</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</div><div class=\"line\">    </div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// mark</span></div><div class=\"line\">  perf.mark(endTag)</div><div class=\"line\">  perf.measure(<span class=\"string\">`test mark init`</span>, startTag, endTag)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  <code>Performance</code><br>  <img width=\"600\" src=\"/2018-06-30-vue/4.jpeg\"></p>\n<p>  <code>performance</code><a href=\"https://www.w3.org/TR/navigation-timing/\" target=\"_blank\" rel=\"external\"></a><br>  <img width=\"600\" src=\"/2018-06-30-vue/timing-overview.png\"></p>\n<h2 id=\"Proxy\"><a href=\"#Proxy\" class=\"headerlink\" title=\"Proxy\"></a>Proxy</h2><h3 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h3><p>  <code>get</code> proxy </p>\n<blockquote>\n<p>proxy.fooproxy[foo]</p>\n</blockquote>\n<p>  <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> person = &#123;</div><div class=\"line\">  name: <span class=\"string\">\"\"</span></div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(person, &#123;</div><div class=\"line\">  get: <span class=\"function\">(<span class=\"params\">target, property</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (property <span class=\"keyword\">in</span> target) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> target[property];</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">ReferenceError</span>(<span class=\"string\">\"Property \\\"\"</span> + property + <span class=\"string\">\"\\\" does not exist.\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">proxy.name <span class=\"comment\">// \"\"</span></div><div class=\"line\">proxy.age <span class=\"comment\">// </span></div></pre></td></tr></table></figure></p>\n<p>  configurablewritable Proxy  Proxy <br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> target = <span class=\"built_in\">Object</span>.defineProperties(&#123;&#125;, &#123;</div><div class=\"line\">  foo: &#123;</div><div class=\"line\">    value: <span class=\"number\">123</span>,</div><div class=\"line\">    writable: <span class=\"literal\">false</span>,</div><div class=\"line\">    configurable: <span class=\"literal\">false</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"keyword\">const</span> handler = &#123;</div><div class=\"line\">  get(target, propKey) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'abc'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">const</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(target, handler);</div><div class=\"line\">proxy.foo <span class=\"comment\">// TypeError: Invariant check failed</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"has\"><a href=\"#has\" class=\"headerlink\" title=\"has\"></a>has</h3><p>  </p>\n<ul>\n<li>: foo in proxy</li>\n<li>: foo in Object.create(proxy)</li>\n<li>with : with(proxy) { (foo); }</li>\n<li><p>Reflect.has()</p>\n<p>has</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">a</span>: <span class=\"number\">10</span> &#125;;</div><div class=\"line\"><span class=\"built_in\">Object</span>.preventExtensions(obj);</div><div class=\"line\"><span class=\"keyword\">let</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, &#123;</div><div class=\"line\">  has: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">target, prop</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"string\">'a'</span> <span class=\"keyword\">in</span> p <span class=\"comment\">// TypeError is thrown</span></div></pre></td></tr></table></figure>\n<p><code>has</code><code>in</code><code>for...in</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> stu1 = &#123;<span class=\"attr\">name</span>: <span class=\"string\">''</span>, <span class=\"attr\">score</span>: <span class=\"number\">59</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">let</span> stu2 = &#123;<span class=\"attr\">name</span>: <span class=\"string\">''</span>, <span class=\"attr\">score</span>: <span class=\"number\">99</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">let</span> handler = &#123;</div><div class=\"line\">  has(target, prop) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (prop === <span class=\"string\">'score'</span> &amp;&amp; target[prop] &lt; <span class=\"number\">60</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;target.name&#125;</span> `</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> prop <span class=\"keyword\">in</span> target;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">let</span> oproxy1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(stu1, handler);</div><div class=\"line\"><span class=\"keyword\">let</span> oproxy2 = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(stu2, handler);</div><div class=\"line\"><span class=\"string\">'score'</span> <span class=\"keyword\">in</span> oproxy1</div><div class=\"line\"><span class=\"comment\">//  </span></div><div class=\"line\"><span class=\"comment\">// false</span></div><div class=\"line\"><span class=\"string\">'score'</span> <span class=\"keyword\">in</span> oproxy2</div><div class=\"line\"><span class=\"comment\">// true</span></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> a <span class=\"keyword\">in</span> oproxy1) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(oproxy1[a]);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// 59</span></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> b <span class=\"keyword\">in</span> oproxy2) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(oproxy2[b]);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// 99</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>  <code>with</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> qs = location.search.substring(<span class=\"number\">1</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> hostName = location.hostname;</div><div class=\"line\"><span class=\"keyword\">let</span> url = location.href;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">with</span> (location)&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> qs = search.substring(<span class=\"number\">1</span>);</div><div class=\"line\">  <span class=\"keyword\">let</span> hostName = hostname;</div><div class=\"line\">  <span class=\"keyword\">let</span> url = href;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  <code>with</code><code>let</code><code>var</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// with</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"func\"</span>);</div><div class=\"line\">  <span class=\"keyword\">let</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> v = obj.a[<span class=\"number\">0</span>];</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"func\"</span>);<span class=\"comment\">// 1.310302734375ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">func();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// withlet</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">funcWith</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"funcWith\"</span>);</div><div class=\"line\">  <span class=\"keyword\">const</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">with</span> (obj) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> a = obj.a</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> v = a[<span class=\"number\">0</span>];</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"funcWith\"</span>);<span class=\"comment\">// 14.533935546875ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">funcWith();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// with</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">funcWith</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"funcWith\"</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">with</span> (obj) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> v = a[<span class=\"number\">0</span>];</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"funcWith\"</span>);<span class=\"comment\">// 52.078857421875ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">funcWith();</div></pre></td></tr></table></figure></p>\n<p>  js<code>with</code>jsaobj<code>with</code>jsaobjjswith</p>\n<p>  <code>has</code><code>with</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> stu1 = &#123;<span class=\"attr\">name</span>: <span class=\"string\">''</span>, <span class=\"attr\">score</span>: <span class=\"number\">59</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">let</span> handler = &#123;</div><div class=\"line\">  has(target, prop) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (prop === <span class=\"string\">'score'</span> &amp;&amp; target[prop] &lt; <span class=\"number\">60</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;target.name&#125;</span> `</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> prop <span class=\"keyword\">in</span> target;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">let</span> oproxy1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(stu1, handler);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> score</div><div class=\"line\">  <span class=\"keyword\">with</span>(oproxy1) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> score</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">test() <span class=\"comment\">//  </span></div></pre></td></tr></table></figure></p>\n<p>  <code>with</code>js<br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">funcWith</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"funcWith\"</span>);</div><div class=\"line\">  <span class=\"keyword\">const</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">with</span> (obj) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> a = obj.a</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> v = a[<span class=\"number\">0</span>];</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"funcWith\"</span>);<span class=\"comment\">// 1.7109375ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">funcWith();</div></pre></td></tr></table></figure></p>\n<p>  <code>with</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"func\"</span>);</div><div class=\"line\">  <span class=\"keyword\">let</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">let</span> v = obj.a[<span class=\"number\">0</span>];</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"func\"</span>);<span class=\"comment\">// 0.01904296875ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">func();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">funcWith</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">\"funcWith\"</span>);</div><div class=\"line\">  <span class=\"keyword\">const</span> obj = &#123;</div><div class=\"line\">    a: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">with</span> (obj) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> v = a[<span class=\"number\">0</span>];</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"funcWith\"</span>);<span class=\"comment\">// 0.028076171875ms</span></div><div class=\"line\">&#125;</div><div class=\"line\">funcWith();</div></pre></td></tr></table></figure></p>\n<p>  <code>has</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// has</span></div><div class=\"line\"><span class=\"built_in\">console</span>.time(<span class=\"string\">\"\"</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> stu1 = &#123;<span class=\"attr\">name</span>: <span class=\"string\">''</span>, <span class=\"attr\">score</span>: <span class=\"number\">59</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">let</span> handler = &#123;</div><div class=\"line\">  has(target, prop) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (prop === <span class=\"string\">'score'</span> &amp;&amp; target[prop] &lt; <span class=\"number\">60</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;target.name&#125;</span> `</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> prop <span class=\"keyword\">in</span> target;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">let</span> oproxy1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(stu1, handler);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">oproxy1</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    render: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> oproxy1.score</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(test(oproxy1).render()) <span class=\"comment\">//  </span></div><div class=\"line\"><span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"\"</span>); <span class=\"comment\">// 0.719970703125ms</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.time(<span class=\"string\">\"\"</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> stu1 = &#123;<span class=\"attr\">name</span>: <span class=\"string\">''</span>, <span class=\"attr\">score</span>: <span class=\"number\">59</span>&#125;;</div><div class=\"line\"><span class=\"keyword\">let</span> handler = &#123;</div><div class=\"line\">  has(target, prop) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (prop === <span class=\"string\">'score'</span> &amp;&amp; target[prop] &lt; <span class=\"number\">60</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;target.name&#125;</span> `</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> prop <span class=\"keyword\">in</span> target;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">let</span> oproxy1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(stu1, handler);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">oproxy1</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> score</div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    render: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">with</span>(oproxy1) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> score</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(test(oproxy1).render()) <span class=\"comment\">//  </span></div><div class=\"line\"><span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">\"\"</span>); <span class=\"comment\">// 0.760009765625ms</span></div></pre></td></tr></table></figure></p>\n<p>  vue<code>with</code><code>proxy</code><code>AST</code><code>AST</code><code>vue</code><code>with</code><a href=\"https://github.com/vuejs/vue/issues/3923\" target=\"_blank\" rel=\"external\"></a><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">generate</span> (<span class=\"params\"></span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\">  ast: ASTElement | void,</span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\">  options: CompilerOptions</span></span></div><div class=\"line\"><span class=\"function\"><span class=\"params\"></span>): <span class=\"title\">CodegenResult</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> state = <span class=\"keyword\">new</span> CodegenState(options)</div><div class=\"line\">  <span class=\"keyword\">const</span> code = ast ? genElement(ast, state) : <span class=\"string\">'_c(\"div\")'</span></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">    render: <span class=\"string\">`with(this)&#123;return <span class=\"subst\">$&#123;code&#125;</span>&#125;`</span>,</div><div class=\"line\">    staticRenderFns: state.staticRenderFns</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"outerHTML\"><a href=\"#outerHTML\" class=\"headerlink\" title=\"outerHTML\"></a>outerHTML</h2><p>  <code>platforms/web/entry-runtime-width-compile.js</code><code>getOuterHTML</code><br>  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getOuterHTML</span> (<span class=\"params\">el: Element</span>): <span class=\"title\">string</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (el.outerHTML) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> el.outerHTML</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> container = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'div'</span>)</div><div class=\"line\">    container.appendChild(el.cloneNode(<span class=\"literal\">true</span>))</div><div class=\"line\">    <span class=\"keyword\">return</span> container.innerHTML</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>  IE9-11<code>SVG</code><code>innerHTML</code><code>outerHTML</code><code>else</code></p>\n<h2 id=\"2018-07-17\"><a href=\"#2018-07-17\" class=\"headerlink\" title=\"2018-07-17\"></a>2018-07-17</h2><p><code>proxy</code><code>Object.defineProperty</code><code>vue</code><code>vue</code><code>data</code><code>Object.defineProperty</code><code>data</code><code>Object.defineProperty</code>api?</p>\n<blockquote>\n<p><code>Object.defineProperty</code><code>obj</code></p>\n</blockquote>\n<p><code>Object.defineProperty</code><code>src/core/instance/state.js</code><code>initData</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxy</span> (<span class=\"params\">target: Object, sourceKey: string, key: string</span>) </span>&#123;</div><div class=\"line\">  sharedPropertyDefinition.get = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxyGetter</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>[sourceKey][key]</div><div class=\"line\">  &#125;</div><div class=\"line\">  sharedPropertyDefinition.set = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxySetter</span> (<span class=\"params\">val</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>[sourceKey][key] = val</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">Object</span>.defineProperty(target, key, sharedPropertyDefinition)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">initData</span> (<span class=\"params\">vm: Component</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">while</span> (i--) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> key = keys[i]</div><div class=\"line\">    <span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (methods &amp;&amp; hasOwn(methods, key)) &#123;</div><div class=\"line\">        warn(</div><div class=\"line\">          <span class=\"string\">`Method \"<span class=\"subst\">$&#123;key&#125;</span>\" has already been defined as a data property.`</span>,</div><div class=\"line\">          vm</div><div class=\"line\">        )</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (props &amp;&amp; hasOwn(props, key)) &#123;</div><div class=\"line\">      process.env.NODE_ENV !== <span class=\"string\">'production'</span> &amp;&amp; warn(</div><div class=\"line\">        <span class=\"string\">`The data property \"<span class=\"subst\">$&#123;key&#125;</span>\" is already declared as a prop. `</span> +</div><div class=\"line\">        <span class=\"string\">`Use prop default value instead.`</span>,</div><div class=\"line\">        vm</div><div class=\"line\">      )</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!isReserved(key)) &#123;</div><div class=\"line\">      proxy(vm, <span class=\"string\">`_data`</span>, key)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// observe data</span></div><div class=\"line\">  observe(data, <span class=\"literal\">true</span> <span class=\"comment\">/* asRootData */</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>proxy</code><code>observe</code><code>proxy</code><code>observe</code><code>src/core/observer/index.js</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">observe</span> (<span class=\"params\">value: any, asRootData: ?boolean</span>): <span class=\"title\">Observer</span> | <span class=\"title\">void</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (!isObject(value) || value <span class=\"keyword\">instanceof</span> VNode) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">let</span> ob: Observer | <span class=\"keyword\">void</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (hasOwn(value, <span class=\"string\">'__ob__'</span>) &amp;&amp; value.__ob__ <span class=\"keyword\">instanceof</span> Observer) &#123;</div><div class=\"line\">    ob = value.__ob__</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (</div><div class=\"line\">    shouldObserve &amp;&amp;</div><div class=\"line\">    !isServerRendering() &amp;&amp;</div><div class=\"line\">    (<span class=\"built_in\">Array</span>.isArray(value) || isPlainObject(value)) &amp;&amp;</div><div class=\"line\">    <span class=\"built_in\">Object</span>.isExtensible(value) &amp;&amp;</div><div class=\"line\">    !value._isVue</div><div class=\"line\">  ) &#123;</div><div class=\"line\">    ob = <span class=\"keyword\">new</span> Observer(value)</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">if</span> (asRootData &amp;&amp; ob) &#123;</div><div class=\"line\">    ob.vmCount++</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> ob</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>value</code>value<code>return</code><code>ob = new Observer(value)</code><code>src/core/observer/array.js</code>:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> arrayProto = <span class=\"built_in\">Array</span>.prototype</div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> arrayMethods = <span class=\"built_in\">Object</span>.create(arrayProto)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> methodsToPatch = [</div><div class=\"line\">  <span class=\"string\">'push'</span>,</div><div class=\"line\">  <span class=\"string\">'pop'</span>,</div><div class=\"line\">  <span class=\"string\">'shift'</span>,</div><div class=\"line\">  <span class=\"string\">'unshift'</span>,</div><div class=\"line\">  <span class=\"string\">'splice'</span>,</div><div class=\"line\">  <span class=\"string\">'sort'</span>,</div><div class=\"line\">  <span class=\"string\">'reverse'</span></div><div class=\"line\">]</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * Intercept mutating methods and emit events</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\">methodsToPatch.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">method</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// cache original method</span></div><div class=\"line\">  <span class=\"keyword\">const</span> original = arrayProto[method]</div><div class=\"line\">  def(arrayMethods, method, <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mutator</span> (<span class=\"params\">...args</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> result = original.apply(<span class=\"keyword\">this</span>, args)</div><div class=\"line\">    <span class=\"keyword\">const</span> ob = <span class=\"keyword\">this</span>.__ob__</div><div class=\"line\">    <span class=\"keyword\">let</span> inserted</div><div class=\"line\">    <span class=\"keyword\">switch</span> (method) &#123;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'push'</span>:</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'unshift'</span>:</div><div class=\"line\">        inserted = args</div><div class=\"line\">        <span class=\"keyword\">break</span></div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'splice'</span>:</div><div class=\"line\">        inserted = args.slice(<span class=\"number\">2</span>)</div><div class=\"line\">        <span class=\"keyword\">break</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (inserted) ob.observeArray(inserted)</div><div class=\"line\">    <span class=\"comment\">// notify change</span></div><div class=\"line\">    ob.dep.notify()</div><div class=\"line\">    <span class=\"keyword\">return</span> result</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p><code>Array.prototype</code><code>arrayProto</code><code>arrayMethods</code><code>arrayProto</code><code>methodsToPatch</code><code>def</code>(<code>src/core/util/lang.js</code><code>Object.defineProperty</code>)<code>Object.defineProperty</code><code>Object.defineProperty</code>api</p>\n<p><code>vue</code><code>vm.$set</code><code>vm.$set</code><code>splice</code><code>splice</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;div&gt;</div><div class=\"line\">&#123;&#123;arr&#125;&#125;</div><div class=\"line\">&lt;/div&gt;</div><div class=\"line\">let vm = new Vue(&#123;</div><div class=\"line\">  el: &apos;#app&apos;,</div><div class=\"line\">  data() &#123;</div><div class=\"line\">    return &#123;</div><div class=\"line\">      arr: [1, 2]</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\">// vm.$set</div><div class=\"line\">vm.$set(vm.arr, 0, 31)</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p><code>Object.defineProperty</code></p>\n</blockquote>\n<p><code>proxy</code><code>get</code><code>set</code><code>proxy</code><code>Object.defineProperty</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// proxy</span></div><div class=\"line\"><span class=\"keyword\">const</span> handler = &#123;</div><div class=\"line\">  get (target, key) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'----get-----'</span>)</div><div class=\"line\">    <span class=\"keyword\">return</span> target[key];</div><div class=\"line\">  &#125;,</div><div class=\"line\">  set (target, key, value) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'----set-----'</span>)</div><div class=\"line\">    target[key] = value;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">const</span> target = [<span class=\"number\">1</span>,<span class=\"number\">2</span>];</div><div class=\"line\"><span class=\"keyword\">const</span> arr = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(target, handler);</div><div class=\"line\"></div><div class=\"line\">arr[<span class=\"number\">0</span>] = <span class=\"number\">3</span> <span class=\"comment\">// '----set-----'</span></div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>vue<code>proxy</code><code>Object.defineProperty</code></p>\n</blockquote>\n<p><code>proxy</code><code>Object.defineProperty</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>api</code><a href=\"https://github.com/wqzwh/blog/blob/master/source/_posts/2018-06-30-vue.md\" target=\"_blank\" rel=\"external\">issues</a></p>"},{"title":"canvasAPI","comments":1,"toc":true,"date":"2018-09-22T08:30:57.000Z","_content":"\n## CanvasAPI\n\n<!-- more -->\n\n<img width=\"600\" src=\"2018-09-22-canvasAPI/doc.png\"/>","source":"_posts/2018-09-22-canvasAPI.md","raw":"---\ntitle: canvasAPI\ncomments: true\ntoc: true\ndate: 2018-09-22 16:30:57\ntags:\n    - 'canvas'\n    - 'javascript'\n---\n\n## CanvasAPI\n\n<!-- more -->\n\n<img width=\"600\" src=\"2018-09-22-canvasAPI/doc.png\"/>","slug":"2018-09-22-canvasAPI","published":1,"updated":"2018-09-24T08:59:39.411Z","layout":"post","photos":[],"link":"","_id":"cjosd1vaj000efdld0mj5aebp","content":"<h2 id=\"CanvasAPI\"><a href=\"#CanvasAPI\" class=\"headerlink\" title=\"CanvasAPI\"></a>CanvasAPI</h2><a id=\"more\"></a>\n<p><img width=\"600\" src=\"/2018-09-22-canvasAPI/doc.png\"></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"CanvasAPI\"><a href=\"#CanvasAPI\" class=\"headerlink\" title=\"CanvasAPI\"></a>CanvasAPI</h2>","more":"<p><img width=\"600\" src=\"/2018-09-22-canvasAPI/doc.png\"></p>"},{"title":"vue-cliwebpack4","comments":1,"toc":true,"date":"2018-07-14T07:19:49.000Z","_content":"\n## \n\n`Webpack` v4.16.0`Webpack4``.mjs``Chunk``splitChunks``Webpack````&```\n\n`Webpack4``2.7.0``4.16.0`\n  <!-- more -->\t\n\n## webpack4.0\n\n### node\n\n`Node4``node`\b`node v8.11.1``npm v5.6.0`\n\n### \n\nwebpack 4js  webpack  webpack 4  5 \n\n* javascript/auto: (webpack 3)JSCommonJSAMDESM\n* javascript/esm: EcmaScript  .mjs \n* javascript/dynamic:  CommonJS & AMDEcmaScript \n* json:  require  import  JSON ( .json )\n* webassembly/experimental: WebAssembly ( .wasm )\n\nwebpack 4  .wasm, .mjs, .js  .json \n\n### webpack-cli\n\n`webpack4``npm run build``webpack-cli/webpack-command``webpack-cli`\n\n### \n\n#### mode\n\n`webpack4``mode``````webpack.dev.conf.js``webpack.prod.conf.js``mode``process.env.NODE_ENV = 'production'`\n```js\n// webpack.dev.conf.js\nmodule.exports = merge(baseWebpackConfig, {\n  mode: 'development',\n  // \n  plugins: [\n    new webpack.DefinePlugin({\n        'process.env': config.dev.env\n    }),\n  ]\n} \n\n// webpack.prod.conf.js\nvar webpackConfig = merge(baseWebpackConfig, {\n  mode: 'production',\n  // \n  plugins: [\n    new webpack.DefinePlugin({\n      'process.env': env\n    }),\n  ]  \n}  \n```\n> new webpack.DefinePlugin`process.env`\n\n**development **\n* 1.\n* 2.process.env.NODE_ENV  development\n* 3. eval  source maps\n\n**production **\n* 1.minifysplite\n* 2.eval devtool\n* 3.watching\n* 4.Scope hoistingTree-shakingModuleConcatenationPlugin\n* 5.process.env.NODE_ENVDefinePlugin\n* 6.modenone\n* 7.webpack\n\n\n#### mini-css-extract-plugin\n\n`extract-text-webpack-plugin`webpack4.x`extract-text-webpack-plugin@next``contenthash``mini-css-extract-plugin`\n\n`webpack.prod.conf.js``loaders``utils.js`\n```js\n// webpack.dev.conf.js\nmodule.exports = merge(baseWebpackConfig, {\n  // \n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: utils.assetsPath('css/[name].[contenthash].css')\n    }),\n  ]\n} \n\n// utils.js\nif (options.extract) {\nreturn [\n  {\n    loader: MiniCssExtractPlugin.loader,\n    options: {\n      publicPath: '../../'\n    }\n  }\n  ].concat(loaders)\n} else {\n  return ['vue-style-loader'].concat(loaders)\n}\n```\n> `utils.js``publicPath`css\n\n#### optimization\n\n```js\nError: webpack.optimize.CommonsChunkPlugin has been removed, please use config.optimization.splitChunks instead.\n    at Object.get [as CommonsChunkPlugin] (/data/test/node_modules/webpack/lib/webpack.js:159:10)\n```\n\n`webpack4``webpack.optimize.CommonsChunkPlugin``optimization``splitChunk`\n\n`webpack.prod.conf.js``webpack.optimize.CommonsChunkPlugin`\n```js\nvar webpackConfig = merge(baseWebpackConfig, {\n  mode: 'production',\n  entry: {\n    charts: ['echarts'],\n    vendors: ['vue', 'vuex', 'vue-router', 'moment'],\n    iconfonts: ['ga-iconfont']\n  },\n  // \n  optimization: {\n    // minimizer: true, // [new UglifyJsPlugin({...})]\n    providedExports: true,\n    usedExports: true,\n    //package.jsonsideEffectstree-shake\n    //optimization.providedExportsoptimization.usedExports\n    sideEffects: true,\n    // new webpack.optimize.ModuleConcatenationPlugin()\n    concatenateModules: true,\n    // new webpack.NoEmitOnErrorsPlugin()\n    noEmitOnErrors: true,\n    splitChunks: {\n      // maxAsyncRequests: 1,                     //  1\n      // maxInitialRequests: 1,                   // 1\n      cacheGroups: {\n        // \n        commons: {\n          // test: path.resolve(__dirname, '../node_modules'),\n          chunks: 'all',\n          minChunks: 2,\n          maxInitialRequests: 5, // The default limit is too small to showcase the effect\n          minSize: 0, \n          name: 'common'\n        }\n      }\n    },\n}    \n```\n\n`test``entry``path.resolve(__dirname, '../node_modules')``node_modules`\n\n`chunks``entry``entry``test``test``all``async`\n\n  * `all``entry``enrty`\n<img width=\"600\" src=\"2018-07-14-wpk/2.jpeg\"/>\n<img width=\"600\" src=\"2018-07-14-wpk/21.jpeg\"/>\n\n  * `async``entry``entry`\n<img width=\"600\" src=\"2018-07-14-wpk/3.jpeg\"/>\n<img width=\"600\" src=\"2018-07-14-wpk/31.jpeg\"/>\n\n  * `initial``all``async`jsjsjs\n<img width=\"600\" src=\"2018-07-14-wpk/41.jpeg\"/>\n\n`sideEffects``tree-shake``package.json``webpack`(re-exports)\n\n`concatenateModules``webpack.optimize.ModuleConcatenationPlugin()`\n\n`noEmitOnErrors``new webpack.NoEmitOnErrorsPlugin()`\n\n`minChunks``split``chunks` 1`default`2`minChunks = 2`\n\n> `webpack.optimize.UglifyJsPlugin``optimization.minimize``true``production mode``true``optimization.minimizer`\n\n#### html-webpack-plugin\n\n`@4.0.0-alpha``chunksSortMode: dependency`\b`webpack4``CommonsChunkPlugin`API\n\n#### vue-loader\n\n15.x`VueLoaderPlugin`\b\n```js\n// webpack.prod.conf.js\nconst { VueLoaderPlugin } = require('vue-loader')\n// \nplugins: [\n    new VueLoaderPlugin(),\n]    \n```\n\n#### sourceMap\n\n`webpack4``sourceMap``loader``options``sourceMaptrue`\n\n#### \n\nloader\n* babel-loader 7.1.5\n* css-loader 1.0.0\n* file-loader 1.1.11\n* less-loader 4.1.0\n* url-loader 1.0.1\n* vue-style-loader 4.1.0\n* vue-template-compiler 2.5.16\n\n## \n\n### webpack.dev.conf.js\n```js\nconst utils = require('./utils')\nconst webpack = require('webpack')\nconst config = require('../config')\nconst merge = require('webpack-merge')\nconst baseWebpackConfig = require('./webpack.base.conf')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst FriendlyErrorsPlugin = require('friendly-errors-webpack-plugin')\nconst { VueLoaderPlugin } = require('vue-loader')\n\n// add hot-reload related code to entry chunks\nObject.keys(baseWebpackConfig.entry).forEach(function (name) {\n  baseWebpackConfig.entry[name] = ['./build/dev-client'].concat(baseWebpackConfig.entry[name])\n})\n\nbaseWebpackConfig.output.chunkFilename = '[name].[chunkhash].js';            // js  \n\nmodule.exports = merge(baseWebpackConfig, {\n  mode: 'development',\n  module: {\n    rules: utils.styleLoaders({ sourceMap: config.dev.cssSourceMap })\n  },\n  devtool: '#cheap-module-eval-source-map',\n  optimization: {\n    // minimizer: true,\n    providedExports: true,\n    usedExports: true,\n    //package.jsonsideEffectstree-shake\n    //optimization.providedExportsoptimization.usedExports\n    sideEffects: true,\n    // new webpack.optimize.ModuleConcatenationPlugin()\n    concatenateModules: true,\n    // new webpack.NoEmitOnErrorsPlugin()\n    noEmitOnErrors: true,\n    splitChunks: {\n      chunks: 'initial', //'all'|'async'|'initial'(||)chunks\n    },\n    //webpack\n    runtimeChunk: {\n      name: 'manifest'\n    }\n  },\n  plugins: [\n    new VueLoaderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new HtmlWebpackPlugin({\n      filename: 'index.html',\n      template: 'index.html',\n      inject: true\n    }),\n    new FriendlyErrorsPlugin()\n  ]\n})\n```\n\n### webpack.prod.conf.js\n```js\nconst path = require('path')\nconst utils = require('./utils')\nconst webpack = require('webpack')\nconst config = require('../config')\nconst merge = require('webpack-merge')\nconst baseWebpackConfig = require('./webpack.base.conf')\nconst CopyWebpackPlugin = require('copy-webpack-plugin')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin')\nconst OptimizeCSSPlugin = require('optimize-css-assets-webpack-plugin')\nconst { VueLoaderPlugin } = require('vue-loader')\n\nvar webpackConfig = merge(baseWebpackConfig, {\n  mode: 'production',\n  entry: {\n    charts: ['echarts'],\n    vendors: ['vue', 'vuex', 'vue-router', 'moment'],\n    iconfonts: ['ga-iconfont']\n  },\n  module: {\n    rules: utils.styleLoaders({\n      sourceMap: config.build.productionSourceMap,\n      extract: true\n    })\n  },\n  devtool: config.build.productionSourceMap ? '#source-map' : false,\n  output: {\n    path: config.build.assetsRoot,\n    filename: utils.assetsPath('js/[name].[chunkhash].js'),\n    chunkFilename: utils.assetsPath('js/[id].[chunkhash].js'),\n    publicPath: './'\n  },\n  optimization: {\n    // minimizer: true,\n    providedExports: true,\n    usedExports: true,\n    //package.jsonsideEffectstree-shake\n    //optimization.providedExportsoptimization.usedExports\n    sideEffects: true,\n    // new webpack.optimize.ModuleConcatenationPlugin()\n    concatenateModules: true,\n    // new webpack.NoEmitOnErrorsPlugin()\n    noEmitOnErrors: true,\n    splitChunks: {\n      // maxAsyncRequests: 1,                     //  1\n      // maxInitialRequests: 1,                   // 1\n      cacheGroups: {\n        // test: path.resolve(__dirname, '../node_modules'),\n        commons: {\n          chunks: 'all',\n          minChunks: 2,\n          maxInitialRequests: 5, // The default limit is too small to showcase the effect\n          minSize: 0, \n          name: 'common'\n        }\n      }\n    },\n    //webpack\n    runtimeChunk: {\n      name: 'manifest'\n    }\n  },\n  plugins: [\n    new VueLoaderPlugin(),\n    // moment\n    new webpack.ContextReplacementPlugin(\n      /moment[\\\\\\/]locale$/,\n      /^\\.\\/(zh-cn)$/\n    ),\n\n    new MiniCssExtractPlugin({\n      filename: utils.assetsPath('css/[name].[contenthash].css')\n    }),\n    new OptimizeCSSPlugin({\n      cssProcessorOptions: {\n        safe: true,\n        discardComments: { removeAll: true }\n      }\n    }),\n\n    new HtmlWebpackPlugin({\n      filename: config.build.index,\n      template: 'index.html',\n      inject: true,\n      hash:true,// \n      minify: {\n        removeComments: true,\n        collapseWhitespace: true,\n        removeAttributeQuotes: true\n      }\n    }),\n    new webpack.HashedModuleIdsPlugin(),\n\n    new CopyWebpackPlugin([{\n      from: path.resolve(__dirname, '../static'),\n      to: config.build.assetsSubDirectory,\n      ignore: ['.*']\n    }])\n  ]\n})\n\nif (config.build.productionGzip) {\n  var CompressionWebpackPlugin = require('compression-webpack-plugin')\n\n  webpackConfig.plugins.push(\n    new CompressionWebpackPlugin({\n      asset: '[path].gz[query]',\n      algorithm: 'gzip',\n      test: new RegExp(\n        '\\\\.(' +\n        config.build.productionGzipExtensions.join('|') +\n        ')$'\n      ),\n      threshold: 10240,\n      minRatio: 0.8\n    })\n  )\n}\n\nif (config.build.bundleAnalyzerReport) {\n  var BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin\n  webpackConfig.plugins.push(new BundleAnalyzerPlugin())\n}\n\nmodule.exports = webpackConfig\n```\n\n## \n\n### preload\n\n`preload-webpack-plugin``3.0.0-beta.1`\n```\nnpm i preload-webpack-plugin@next -D\n```\n\n`html-webpack-plugin``3.2.0`\b\b\n```js\n// \nplugins: [\n  new HtmlWebpackPlugin({\n    filename: config.build.index,\n    template: 'index.html',\n    inject: true,\n    minify: {\n      removeComments: true,\n      collapseWhitespace: true,\n      removeAttributeQuotes: true\n    },\n  }),\n  new PreloadWebpackPlugin({\n    rel: 'prefetch',\n  }),\n  new PreloadWebpackPlugin({\n    rel: 'preload'\n  }),\n  // \n]\n```\n\n### html-webpack-plugin-after-emit\b\n\n`webpack4``dev``cb is not a function``html-webpack-plugin-after-emit``webpack4``html-webpack-plugin3.2.0``build/dev-server.js`\n```js\ncompiler.plugin('compilation', function(compilation) {\n    compilation.plugin('html-webpack-plugin-after-emit', function(data, cb) {\n        hotMiddleware.publish({ action: 'reload' })\n        cb()\n    })\n})\n```\n\n## \n\n`webpack4``webpack4`\b50%`143894ms``58080ms`\n <img width=\"600\" src=\"2018-07-14-wpk/1.jpg\"/>\n\n `27534ms`\n <img width=\"600\" src=\"2018-07-14-wpk/12.jpeg\"/>\n\n## 2018-07-21\n\n  ### entryoptimization\n\n`optimization`\b`entry`\b`charts``vendors``iconfonts`jsjs`199 bytes`js\n```js\n// charts.js\n(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{21:function(n,o,p){n.exports=p(\"K8M1\")}},[[21,1,0]]]);\n//# sourceMappingURL=charts.2e5cbbfa2a894d2bb5aa.js.map\n\n// iconfonts.js\n(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{19:function(n,o,p){n.exports=p(\"t+cQ\")}},[[19,1,0]]]);\n//# sourceMappingURL=iconfonts.e90fd0507d501ef81b69.js.map\n\n// vendors.js\n(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{20:function(n,o,w){w(\"oCYn\"),w(\"L2JU\"),w(\"jE9Z\"),n.exports=w(\"wd/R\")}},[[20,1,0]]]);\n//# sourceMappingURL=vendors.5c535f00ba89522ba93b.js.map\n```\n\njs\b`common.js`jsjs\b`entry`\n```js\nentry: {\n  // charts: ['echarts'],\n  // vendors: ['vue', 'vuex', 'vue-router', 'moment'],\n  // iconfonts: ['ga-iconfont']\n}\n```\n\njs\n\njs\n```js\n// entry\n\n// \noptimization: {\n  // \n  splitChunks: {\n    cacheGroups: {\n      charts: {\n        chunks: 'async',\n        minChunks: 2,\n        maxInitialRequests: 5,\n        minSize: 0, \n        name: 'charts'\n      },\n      vendors: {\n        chunks: 'async',\n        minChunks: 2,\n        maxInitialRequests: 5,\n        minSize: 0, \n        name: 'vendors'\n      },\n      iconfonts: {\n        chunks: 'async',\n        minChunks: 2,\n        maxInitialRequests: 5,\n        minSize: 0, \n        name: 'iconfonts'\n      }\n    }\n  },\n  // \n}\n// \n```\n\n`cacheGroups`commons`chunks``async`\n<img width=\"600\" src=\"2018-07-14-wpk/4.jpeg\"/>\n\n  ### \n\n> 26ui\n\n\b`HappyPack`\n```js\n// webpack.base.conf.js\n// rulesbabel-loaderhappypackloader\n// \nmodule: {\n  rules: [{\n    test: /\\.js$/,\n    loader: 'happypack/loader', // HappyPackloader\n    include: [resolve('src')],\n    exclude: /node_modules/,\n    options: {\n      sourceMap: true,\n    }\n  }\n}    \n// \n\n// webpack.prod.conf.js\n// \nplugins: [\n  new HappyPack({\n    loaders: [{\n      loader: 'babel-loader',\n      options: { \n        babelrc: true, \n        cacheDirectory: true \n      }\n    }],\n    threadPool: happyThreadPool\n  })\n]    \n// \n```\n`26831ms`\n<img width=\"600\" src=\"2018-07-14-wpk/5.jpeg\"/>\n\n`20387ms``6.5s`\n<img width=\"600\" src=\"2018-07-14-wpk/6.jpeg\"/>\n\n`babel-loader``cacheDirectory`\b\n```js\n// \n{\n  test: /\\.js$/,\n  loader: 'babel-loader?cacheDirectory=true', // loader: 'babel-loader?cacheDirectory'\n  include: [resolve('src')],\n  exclude: /node_modules/,\n  options: {\n    sourceMap: true,\n  }\n}\n```\n\n`cacheDirectory``options`\n```js\n{\n  test: /\\.js$/,\n  loader: 'babel-loader',\n  include: [resolve('src')],\n  exclude: /node_modules/,\n  options: {\n    sourceMap: true,\n    cacheDirectory: true \n  }\n}\n```\n\n`20593ms`:\n<img width=\"600\" src=\"2018-07-14-wpk/7.jpeg\"/>\n\n`HappyPack``cacheDirectory`\b`20s`\n\n[issues](https://github.com/wqzwh/blog/blob/master/source/_posts/2018-07-14-wpk.md)\n\n\n\n\n\n","source":"_posts/2018-07-14-wpk.md","raw":"---\ntitle: vue-cliwebpack4\ncomments: true\ntoc: true\ndate: 2018-07-14 15:19:49\ntags:\n    - 'webpack'\n    - 'javascript'\n    - 'vue'\n---\n\n## \n\n`Webpack` v4.16.0`Webpack4``.mjs``Chunk``splitChunks``Webpack````&```\n\n`Webpack4``2.7.0``4.16.0`\n  <!-- more -->\t\n\n## webpack4.0\n\n### node\n\n`Node4``node`\b`node v8.11.1``npm v5.6.0`\n\n### \n\nwebpack 4js  webpack  webpack 4  5 \n\n* javascript/auto: (webpack 3)JSCommonJSAMDESM\n* javascript/esm: EcmaScript  .mjs \n* javascript/dynamic:  CommonJS & AMDEcmaScript \n* json:  require  import  JSON ( .json )\n* webassembly/experimental: WebAssembly ( .wasm )\n\nwebpack 4  .wasm, .mjs, .js  .json \n\n### webpack-cli\n\n`webpack4``npm run build``webpack-cli/webpack-command``webpack-cli`\n\n### \n\n#### mode\n\n`webpack4``mode``````webpack.dev.conf.js``webpack.prod.conf.js``mode``process.env.NODE_ENV = 'production'`\n```js\n// webpack.dev.conf.js\nmodule.exports = merge(baseWebpackConfig, {\n  mode: 'development',\n  // \n  plugins: [\n    new webpack.DefinePlugin({\n        'process.env': config.dev.env\n    }),\n  ]\n} \n\n// webpack.prod.conf.js\nvar webpackConfig = merge(baseWebpackConfig, {\n  mode: 'production',\n  // \n  plugins: [\n    new webpack.DefinePlugin({\n      'process.env': env\n    }),\n  ]  \n}  \n```\n> new webpack.DefinePlugin`process.env`\n\n**development **\n* 1.\n* 2.process.env.NODE_ENV  development\n* 3. eval  source maps\n\n**production **\n* 1.minifysplite\n* 2.eval devtool\n* 3.watching\n* 4.Scope hoistingTree-shakingModuleConcatenationPlugin\n* 5.process.env.NODE_ENVDefinePlugin\n* 6.modenone\n* 7.webpack\n\n\n#### mini-css-extract-plugin\n\n`extract-text-webpack-plugin`webpack4.x`extract-text-webpack-plugin@next``contenthash``mini-css-extract-plugin`\n\n`webpack.prod.conf.js``loaders``utils.js`\n```js\n// webpack.dev.conf.js\nmodule.exports = merge(baseWebpackConfig, {\n  // \n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: utils.assetsPath('css/[name].[contenthash].css')\n    }),\n  ]\n} \n\n// utils.js\nif (options.extract) {\nreturn [\n  {\n    loader: MiniCssExtractPlugin.loader,\n    options: {\n      publicPath: '../../'\n    }\n  }\n  ].concat(loaders)\n} else {\n  return ['vue-style-loader'].concat(loaders)\n}\n```\n> `utils.js``publicPath`css\n\n#### optimization\n\n```js\nError: webpack.optimize.CommonsChunkPlugin has been removed, please use config.optimization.splitChunks instead.\n    at Object.get [as CommonsChunkPlugin] (/data/test/node_modules/webpack/lib/webpack.js:159:10)\n```\n\n`webpack4``webpack.optimize.CommonsChunkPlugin``optimization``splitChunk`\n\n`webpack.prod.conf.js``webpack.optimize.CommonsChunkPlugin`\n```js\nvar webpackConfig = merge(baseWebpackConfig, {\n  mode: 'production',\n  entry: {\n    charts: ['echarts'],\n    vendors: ['vue', 'vuex', 'vue-router', 'moment'],\n    iconfonts: ['ga-iconfont']\n  },\n  // \n  optimization: {\n    // minimizer: true, // [new UglifyJsPlugin({...})]\n    providedExports: true,\n    usedExports: true,\n    //package.jsonsideEffectstree-shake\n    //optimization.providedExportsoptimization.usedExports\n    sideEffects: true,\n    // new webpack.optimize.ModuleConcatenationPlugin()\n    concatenateModules: true,\n    // new webpack.NoEmitOnErrorsPlugin()\n    noEmitOnErrors: true,\n    splitChunks: {\n      // maxAsyncRequests: 1,                     //  1\n      // maxInitialRequests: 1,                   // 1\n      cacheGroups: {\n        // \n        commons: {\n          // test: path.resolve(__dirname, '../node_modules'),\n          chunks: 'all',\n          minChunks: 2,\n          maxInitialRequests: 5, // The default limit is too small to showcase the effect\n          minSize: 0, \n          name: 'common'\n        }\n      }\n    },\n}    \n```\n\n`test``entry``path.resolve(__dirname, '../node_modules')``node_modules`\n\n`chunks``entry``entry``test``test``all``async`\n\n  * `all``entry``enrty`\n<img width=\"600\" src=\"2018-07-14-wpk/2.jpeg\"/>\n<img width=\"600\" src=\"2018-07-14-wpk/21.jpeg\"/>\n\n  * `async``entry``entry`\n<img width=\"600\" src=\"2018-07-14-wpk/3.jpeg\"/>\n<img width=\"600\" src=\"2018-07-14-wpk/31.jpeg\"/>\n\n  * `initial``all``async`jsjsjs\n<img width=\"600\" src=\"2018-07-14-wpk/41.jpeg\"/>\n\n`sideEffects``tree-shake``package.json``webpack`(re-exports)\n\n`concatenateModules``webpack.optimize.ModuleConcatenationPlugin()`\n\n`noEmitOnErrors``new webpack.NoEmitOnErrorsPlugin()`\n\n`minChunks``split``chunks` 1`default`2`minChunks = 2`\n\n> `webpack.optimize.UglifyJsPlugin``optimization.minimize``true``production mode``true``optimization.minimizer`\n\n#### html-webpack-plugin\n\n`@4.0.0-alpha``chunksSortMode: dependency`\b`webpack4``CommonsChunkPlugin`API\n\n#### vue-loader\n\n15.x`VueLoaderPlugin`\b\n```js\n// webpack.prod.conf.js\nconst { VueLoaderPlugin } = require('vue-loader')\n// \nplugins: [\n    new VueLoaderPlugin(),\n]    \n```\n\n#### sourceMap\n\n`webpack4``sourceMap``loader``options``sourceMaptrue`\n\n#### \n\nloader\n* babel-loader 7.1.5\n* css-loader 1.0.0\n* file-loader 1.1.11\n* less-loader 4.1.0\n* url-loader 1.0.1\n* vue-style-loader 4.1.0\n* vue-template-compiler 2.5.16\n\n## \n\n### webpack.dev.conf.js\n```js\nconst utils = require('./utils')\nconst webpack = require('webpack')\nconst config = require('../config')\nconst merge = require('webpack-merge')\nconst baseWebpackConfig = require('./webpack.base.conf')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst FriendlyErrorsPlugin = require('friendly-errors-webpack-plugin')\nconst { VueLoaderPlugin } = require('vue-loader')\n\n// add hot-reload related code to entry chunks\nObject.keys(baseWebpackConfig.entry).forEach(function (name) {\n  baseWebpackConfig.entry[name] = ['./build/dev-client'].concat(baseWebpackConfig.entry[name])\n})\n\nbaseWebpackConfig.output.chunkFilename = '[name].[chunkhash].js';            // js  \n\nmodule.exports = merge(baseWebpackConfig, {\n  mode: 'development',\n  module: {\n    rules: utils.styleLoaders({ sourceMap: config.dev.cssSourceMap })\n  },\n  devtool: '#cheap-module-eval-source-map',\n  optimization: {\n    // minimizer: true,\n    providedExports: true,\n    usedExports: true,\n    //package.jsonsideEffectstree-shake\n    //optimization.providedExportsoptimization.usedExports\n    sideEffects: true,\n    // new webpack.optimize.ModuleConcatenationPlugin()\n    concatenateModules: true,\n    // new webpack.NoEmitOnErrorsPlugin()\n    noEmitOnErrors: true,\n    splitChunks: {\n      chunks: 'initial', //'all'|'async'|'initial'(||)chunks\n    },\n    //webpack\n    runtimeChunk: {\n      name: 'manifest'\n    }\n  },\n  plugins: [\n    new VueLoaderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new HtmlWebpackPlugin({\n      filename: 'index.html',\n      template: 'index.html',\n      inject: true\n    }),\n    new FriendlyErrorsPlugin()\n  ]\n})\n```\n\n### webpack.prod.conf.js\n```js\nconst path = require('path')\nconst utils = require('./utils')\nconst webpack = require('webpack')\nconst config = require('../config')\nconst merge = require('webpack-merge')\nconst baseWebpackConfig = require('./webpack.base.conf')\nconst CopyWebpackPlugin = require('copy-webpack-plugin')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin')\nconst OptimizeCSSPlugin = require('optimize-css-assets-webpack-plugin')\nconst { VueLoaderPlugin } = require('vue-loader')\n\nvar webpackConfig = merge(baseWebpackConfig, {\n  mode: 'production',\n  entry: {\n    charts: ['echarts'],\n    vendors: ['vue', 'vuex', 'vue-router', 'moment'],\n    iconfonts: ['ga-iconfont']\n  },\n  module: {\n    rules: utils.styleLoaders({\n      sourceMap: config.build.productionSourceMap,\n      extract: true\n    })\n  },\n  devtool: config.build.productionSourceMap ? '#source-map' : false,\n  output: {\n    path: config.build.assetsRoot,\n    filename: utils.assetsPath('js/[name].[chunkhash].js'),\n    chunkFilename: utils.assetsPath('js/[id].[chunkhash].js'),\n    publicPath: './'\n  },\n  optimization: {\n    // minimizer: true,\n    providedExports: true,\n    usedExports: true,\n    //package.jsonsideEffectstree-shake\n    //optimization.providedExportsoptimization.usedExports\n    sideEffects: true,\n    // new webpack.optimize.ModuleConcatenationPlugin()\n    concatenateModules: true,\n    // new webpack.NoEmitOnErrorsPlugin()\n    noEmitOnErrors: true,\n    splitChunks: {\n      // maxAsyncRequests: 1,                     //  1\n      // maxInitialRequests: 1,                   // 1\n      cacheGroups: {\n        // test: path.resolve(__dirname, '../node_modules'),\n        commons: {\n          chunks: 'all',\n          minChunks: 2,\n          maxInitialRequests: 5, // The default limit is too small to showcase the effect\n          minSize: 0, \n          name: 'common'\n        }\n      }\n    },\n    //webpack\n    runtimeChunk: {\n      name: 'manifest'\n    }\n  },\n  plugins: [\n    new VueLoaderPlugin(),\n    // moment\n    new webpack.ContextReplacementPlugin(\n      /moment[\\\\\\/]locale$/,\n      /^\\.\\/(zh-cn)$/\n    ),\n\n    new MiniCssExtractPlugin({\n      filename: utils.assetsPath('css/[name].[contenthash].css')\n    }),\n    new OptimizeCSSPlugin({\n      cssProcessorOptions: {\n        safe: true,\n        discardComments: { removeAll: true }\n      }\n    }),\n\n    new HtmlWebpackPlugin({\n      filename: config.build.index,\n      template: 'index.html',\n      inject: true,\n      hash:true,// \n      minify: {\n        removeComments: true,\n        collapseWhitespace: true,\n        removeAttributeQuotes: true\n      }\n    }),\n    new webpack.HashedModuleIdsPlugin(),\n\n    new CopyWebpackPlugin([{\n      from: path.resolve(__dirname, '../static'),\n      to: config.build.assetsSubDirectory,\n      ignore: ['.*']\n    }])\n  ]\n})\n\nif (config.build.productionGzip) {\n  var CompressionWebpackPlugin = require('compression-webpack-plugin')\n\n  webpackConfig.plugins.push(\n    new CompressionWebpackPlugin({\n      asset: '[path].gz[query]',\n      algorithm: 'gzip',\n      test: new RegExp(\n        '\\\\.(' +\n        config.build.productionGzipExtensions.join('|') +\n        ')$'\n      ),\n      threshold: 10240,\n      minRatio: 0.8\n    })\n  )\n}\n\nif (config.build.bundleAnalyzerReport) {\n  var BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin\n  webpackConfig.plugins.push(new BundleAnalyzerPlugin())\n}\n\nmodule.exports = webpackConfig\n```\n\n## \n\n### preload\n\n`preload-webpack-plugin``3.0.0-beta.1`\n```\nnpm i preload-webpack-plugin@next -D\n```\n\n`html-webpack-plugin``3.2.0`\b\b\n```js\n// \nplugins: [\n  new HtmlWebpackPlugin({\n    filename: config.build.index,\n    template: 'index.html',\n    inject: true,\n    minify: {\n      removeComments: true,\n      collapseWhitespace: true,\n      removeAttributeQuotes: true\n    },\n  }),\n  new PreloadWebpackPlugin({\n    rel: 'prefetch',\n  }),\n  new PreloadWebpackPlugin({\n    rel: 'preload'\n  }),\n  // \n]\n```\n\n### html-webpack-plugin-after-emit\b\n\n`webpack4``dev``cb is not a function``html-webpack-plugin-after-emit``webpack4``html-webpack-plugin3.2.0``build/dev-server.js`\n```js\ncompiler.plugin('compilation', function(compilation) {\n    compilation.plugin('html-webpack-plugin-after-emit', function(data, cb) {\n        hotMiddleware.publish({ action: 'reload' })\n        cb()\n    })\n})\n```\n\n## \n\n`webpack4``webpack4`\b50%`143894ms``58080ms`\n <img width=\"600\" src=\"2018-07-14-wpk/1.jpg\"/>\n\n `27534ms`\n <img width=\"600\" src=\"2018-07-14-wpk/12.jpeg\"/>\n\n## 2018-07-21\n\n  ### entryoptimization\n\n`optimization`\b`entry`\b`charts``vendors``iconfonts`jsjs`199 bytes`js\n```js\n// charts.js\n(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{21:function(n,o,p){n.exports=p(\"K8M1\")}},[[21,1,0]]]);\n//# sourceMappingURL=charts.2e5cbbfa2a894d2bb5aa.js.map\n\n// iconfonts.js\n(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{19:function(n,o,p){n.exports=p(\"t+cQ\")}},[[19,1,0]]]);\n//# sourceMappingURL=iconfonts.e90fd0507d501ef81b69.js.map\n\n// vendors.js\n(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{20:function(n,o,w){w(\"oCYn\"),w(\"L2JU\"),w(\"jE9Z\"),n.exports=w(\"wd/R\")}},[[20,1,0]]]);\n//# sourceMappingURL=vendors.5c535f00ba89522ba93b.js.map\n```\n\njs\b`common.js`jsjs\b`entry`\n```js\nentry: {\n  // charts: ['echarts'],\n  // vendors: ['vue', 'vuex', 'vue-router', 'moment'],\n  // iconfonts: ['ga-iconfont']\n}\n```\n\njs\n\njs\n```js\n// entry\n\n// \noptimization: {\n  // \n  splitChunks: {\n    cacheGroups: {\n      charts: {\n        chunks: 'async',\n        minChunks: 2,\n        maxInitialRequests: 5,\n        minSize: 0, \n        name: 'charts'\n      },\n      vendors: {\n        chunks: 'async',\n        minChunks: 2,\n        maxInitialRequests: 5,\n        minSize: 0, \n        name: 'vendors'\n      },\n      iconfonts: {\n        chunks: 'async',\n        minChunks: 2,\n        maxInitialRequests: 5,\n        minSize: 0, \n        name: 'iconfonts'\n      }\n    }\n  },\n  // \n}\n// \n```\n\n`cacheGroups`commons`chunks``async`\n<img width=\"600\" src=\"2018-07-14-wpk/4.jpeg\"/>\n\n  ### \n\n> 26ui\n\n\b`HappyPack`\n```js\n// webpack.base.conf.js\n// rulesbabel-loaderhappypackloader\n// \nmodule: {\n  rules: [{\n    test: /\\.js$/,\n    loader: 'happypack/loader', // HappyPackloader\n    include: [resolve('src')],\n    exclude: /node_modules/,\n    options: {\n      sourceMap: true,\n    }\n  }\n}    \n// \n\n// webpack.prod.conf.js\n// \nplugins: [\n  new HappyPack({\n    loaders: [{\n      loader: 'babel-loader',\n      options: { \n        babelrc: true, \n        cacheDirectory: true \n      }\n    }],\n    threadPool: happyThreadPool\n  })\n]    \n// \n```\n`26831ms`\n<img width=\"600\" src=\"2018-07-14-wpk/5.jpeg\"/>\n\n`20387ms``6.5s`\n<img width=\"600\" src=\"2018-07-14-wpk/6.jpeg\"/>\n\n`babel-loader``cacheDirectory`\b\n```js\n// \n{\n  test: /\\.js$/,\n  loader: 'babel-loader?cacheDirectory=true', // loader: 'babel-loader?cacheDirectory'\n  include: [resolve('src')],\n  exclude: /node_modules/,\n  options: {\n    sourceMap: true,\n  }\n}\n```\n\n`cacheDirectory``options`\n```js\n{\n  test: /\\.js$/,\n  loader: 'babel-loader',\n  include: [resolve('src')],\n  exclude: /node_modules/,\n  options: {\n    sourceMap: true,\n    cacheDirectory: true \n  }\n}\n```\n\n`20593ms`:\n<img width=\"600\" src=\"2018-07-14-wpk/7.jpeg\"/>\n\n`HappyPack``cacheDirectory`\b`20s`\n\n[issues](https://github.com/wqzwh/blog/blob/master/source/_posts/2018-07-14-wpk.md)\n\n\n\n\n\n","slug":"2018-07-14-wpk","published":1,"updated":"2018-07-21T06:15:24.341Z","layout":"post","photos":[],"link":"","_id":"cjosd1vam000gfdldnonhg82y","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>Webpack</code> v4.16.0<code>Webpack4</code><code>.mjs</code><code>Chunk</code><code>splitChunks</code><code>Webpack</code><code></code><code>&amp;</code><code></code></p>\n<p><code>Webpack4</code><code>2.7.0</code><code>4.16.0</code><br>  <a id=\"more\"></a>    </p>\n<h2 id=\"webpack4-0\"><a href=\"#webpack4-0\" class=\"headerlink\" title=\"webpack4.0\"></a>webpack4.0</h2><h3 id=\"node\"><a href=\"#node\" class=\"headerlink\" title=\"node\"></a>node</h3><p><code>Node4</code><code>node</code>\b<code>node v8.11.1</code><code>npm v5.6.0</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>webpack 4js  webpack  webpack 4  5 </p>\n<ul>\n<li>javascript/auto: (webpack 3)JSCommonJSAMDESM</li>\n<li>javascript/esm: EcmaScript  .mjs </li>\n<li>javascript/dynamic:  CommonJS &amp; AMDEcmaScript </li>\n<li>json:  require  import  JSON ( .json )</li>\n<li>webassembly/experimental: WebAssembly ( .wasm )</li>\n</ul>\n<p>webpack 4  .wasm, .mjs, .js  .json </p>\n<h3 id=\"webpack-cli\"><a href=\"#webpack-cli\" class=\"headerlink\" title=\"webpack-cli\"></a>webpack-cli</h3><p><code>webpack4</code><code>npm run build</code><code>webpack-cli/webpack-command</code><code>webpack-cli</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"mode\"><a href=\"#mode\" class=\"headerlink\" title=\"mode\"></a>mode</h4><p><code>webpack4</code><code>mode</code><code></code><code></code><code>webpack.dev.conf.js</code><code>webpack.prod.conf.js</code><code>mode</code><code>process.env.NODE_ENV = &#39;production&#39;</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// webpack.dev.conf.js</span></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  mode: <span class=\"string\">'development'</span>,</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</div><div class=\"line\">        <span class=\"string\">'process.env'</span>: config.dev.env</div><div class=\"line\">    &#125;),</div><div class=\"line\">  ]</div><div class=\"line\">&#125; </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// webpack.prod.conf.js</span></div><div class=\"line\"><span class=\"keyword\">var</span> webpackConfig = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  mode: <span class=\"string\">'production'</span>,</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</div><div class=\"line\">      <span class=\"string\">'process.env'</span>: env</div><div class=\"line\">    &#125;),</div><div class=\"line\">  ]  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>new webpack.DefinePlugin<code>process.env</code></p>\n</blockquote>\n<p><strong>development </strong></p>\n<ul>\n<li>1.</li>\n<li>2.process.env.NODE_ENV  development</li>\n<li>3. eval  source maps</li>\n</ul>\n<p><strong>production </strong></p>\n<ul>\n<li>1.minifysplite</li>\n<li>2.eval devtool</li>\n<li>3.watching</li>\n<li>4.Scope hoistingTree-shakingModuleConcatenationPlugin</li>\n<li>5.process.env.NODE_ENVDefinePlugin</li>\n<li>6.modenone</li>\n<li>7.webpack</li>\n</ul>\n<h4 id=\"mini-css-extract-plugin\"><a href=\"#mini-css-extract-plugin\" class=\"headerlink\" title=\"mini-css-extract-plugin\"></a>mini-css-extract-plugin</h4><p><code>extract-text-webpack-plugin</code>webpack4.x<code>extract-text-webpack-plugin@next</code><code>contenthash</code><code>mini-css-extract-plugin</code></p>\n<p><code>webpack.prod.conf.js</code><code>loaders</code><code>utils.js</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// webpack.dev.conf.js</span></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</div><div class=\"line\">      filename: utils.assetsPath(<span class=\"string\">'css/[name].[contenthash].css'</span>)</div><div class=\"line\">    &#125;),</div><div class=\"line\">  ]</div><div class=\"line\">&#125; </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// utils.js</span></div><div class=\"line\"><span class=\"keyword\">if</span> (options.extract) &#123;</div><div class=\"line\"><span class=\"keyword\">return</span> [</div><div class=\"line\">  &#123;</div><div class=\"line\">    loader: MiniCssExtractPlugin.loader,</div><div class=\"line\">    options: &#123;</div><div class=\"line\">      publicPath: <span class=\"string\">'../../'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  ].concat(loaders)</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> [<span class=\"string\">'vue-style-loader'</span>].concat(loaders)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p><code>utils.js</code><code>publicPath</code>css</p>\n</blockquote>\n<h4 id=\"optimization\"><a href=\"#optimization\" class=\"headerlink\" title=\"optimization\"></a>optimization</h4><p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Error</span>: webpack.optimize.CommonsChunkPlugin has been removed, please use config.optimization.splitChunks instead.</div><div class=\"line\">    at <span class=\"built_in\">Object</span>.get [<span class=\"keyword\">as</span> CommonsChunkPlugin] (<span class=\"regexp\">/data/</span>test/node_modules/webpack/lib/webpack.js:<span class=\"number\">159</span>:<span class=\"number\">10</span>)</div></pre></td></tr></table></figure></p>\n<p><code>webpack4</code><code>webpack.optimize.CommonsChunkPlugin</code><code>optimization</code><code>splitChunk</code></p>\n<p><code>webpack.prod.conf.js</code><code>webpack.optimize.CommonsChunkPlugin</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> webpackConfig = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  mode: <span class=\"string\">'production'</span>,</div><div class=\"line\">  entry: &#123;</div><div class=\"line\">    charts: [<span class=\"string\">'echarts'</span>],</div><div class=\"line\">    vendors: [<span class=\"string\">'vue'</span>, <span class=\"string\">'vuex'</span>, <span class=\"string\">'vue-router'</span>, <span class=\"string\">'moment'</span>],</div><div class=\"line\">    iconfonts: [<span class=\"string\">'ga-iconfont'</span>]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  optimization: &#123;</div><div class=\"line\">    <span class=\"comment\">// minimizer: true, // [new UglifyJsPlugin(&#123;...&#125;)]</span></div><div class=\"line\">    providedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    usedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">//package.jsonsideEffectstree-shake</span></div><div class=\"line\">    <span class=\"comment\">//optimization.providedExportsoptimization.usedExports</span></div><div class=\"line\">    sideEffects: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.optimize.ModuleConcatenationPlugin()</span></div><div class=\"line\">    concatenateModules: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.NoEmitOnErrorsPlugin()</span></div><div class=\"line\">    noEmitOnErrors: <span class=\"literal\">true</span>,</div><div class=\"line\">    splitChunks: &#123;</div><div class=\"line\">      <span class=\"comment\">// maxAsyncRequests: 1,                     //  1</span></div><div class=\"line\">      <span class=\"comment\">// maxInitialRequests: 1,                   // 1</span></div><div class=\"line\">      cacheGroups: &#123;</div><div class=\"line\">        <span class=\"comment\">// </span></div><div class=\"line\">        commons: &#123;</div><div class=\"line\">          <span class=\"comment\">// test: path.resolve(__dirname, '../node_modules'),</span></div><div class=\"line\">          chunks: <span class=\"string\">'all'</span>,</div><div class=\"line\">          minChunks: <span class=\"number\">2</span>,</div><div class=\"line\">          maxInitialRequests: <span class=\"number\">5</span>, <span class=\"comment\">// The default limit is too small to showcase the effect</span></div><div class=\"line\">          minSize: <span class=\"number\">0</span>, </div><div class=\"line\">          name: <span class=\"string\">'common'</span></div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;,</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>test</code><code>entry</code><code>path.resolve(__dirname, &#39;../node_modules&#39;)</code><code>node_modules</code></p>\n<p><code>chunks</code><code>entry</code><code>entry</code><code>test</code><code>test</code><code>all</code><code>async</code></p>\n<ul>\n<li><p><code>all</code><code>entry</code><code>enrty</code><br><img width=\"600\" src=\"/2018-07-14-wpk/2.jpeg\"><br><img width=\"600\" src=\"/2018-07-14-wpk/21.jpeg\"></p>\n</li>\n<li><p><code>async</code><code>entry</code><code>entry</code><br><img width=\"600\" src=\"/2018-07-14-wpk/3.jpeg\"><br><img width=\"600\" src=\"/2018-07-14-wpk/31.jpeg\"></p>\n</li>\n<li><p><code>initial</code><code>all</code><code>async</code>jsjsjs<br><img width=\"600\" src=\"/2018-07-14-wpk/41.jpeg\"></p>\n</li>\n</ul>\n<p><code>sideEffects</code><code>tree-shake</code><code>package.json</code><code>webpack</code>(re-exports)</p>\n<p><code>concatenateModules</code><code>webpack.optimize.ModuleConcatenationPlugin()</code></p>\n<p><code>noEmitOnErrors</code><code>new webpack.NoEmitOnErrorsPlugin()</code></p>\n<p><code>minChunks</code><code>split</code><code>chunks</code> 1<code>default</code>2<code>minChunks = 2</code></p>\n<blockquote>\n<p><code>webpack.optimize.UglifyJsPlugin</code><code>optimization.minimize</code><code>true</code><code>production mode</code><code>true</code><code>optimization.minimizer</code></p>\n</blockquote>\n<h4 id=\"html-webpack-plugin\"><a href=\"#html-webpack-plugin\" class=\"headerlink\" title=\"html-webpack-plugin\"></a>html-webpack-plugin</h4><p><code>@4.0.0-alpha</code><code>chunksSortMode: dependency</code>\b<code>webpack4</code><code>CommonsChunkPlugin</code>API</p>\n<h4 id=\"vue-loader\"><a href=\"#vue-loader\" class=\"headerlink\" title=\"vue-loader\"></a>vue-loader</h4><p>15.x<code>VueLoaderPlugin</code>\b<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// webpack.prod.conf.js</span></div><div class=\"line\"><span class=\"keyword\">const</span> &#123; VueLoaderPlugin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader'</span>)</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin(),</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<h4 id=\"sourceMap\"><a href=\"#sourceMap\" class=\"headerlink\" title=\"sourceMap\"></a>sourceMap</h4><p><code>webpack4</code><code>sourceMap</code><code>loader</code><code>options</code><code>sourceMaptrue</code></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loader</p>\n<ul>\n<li>babel-loader 7.1.5</li>\n<li>css-loader 1.0.0</li>\n<li>file-loader 1.1.11</li>\n<li>less-loader 4.1.0</li>\n<li>url-loader 1.0.1</li>\n<li>vue-style-loader 4.1.0</li>\n<li>vue-template-compiler 2.5.16</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"webpack-dev-conf-js\"><a href=\"#webpack-dev-conf-js\" class=\"headerlink\" title=\"webpack.dev.conf.js\"></a>webpack.dev.conf.js</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> utils = <span class=\"built_in\">require</span>(<span class=\"string\">'./utils'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">'../config'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> baseWebpackConfig = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base.conf'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> FriendlyErrorsPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'friendly-errors-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> &#123; VueLoaderPlugin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// add hot-reload related code to entry chunks</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.keys(baseWebpackConfig.entry).forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">  baseWebpackConfig.entry[name] = [<span class=\"string\">'./build/dev-client'</span>].concat(baseWebpackConfig.entry[name])</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">baseWebpackConfig.output.chunkFilename = <span class=\"string\">'[name].[chunkhash].js'</span>;            <span class=\"comment\">// js  </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  mode: <span class=\"string\">'development'</span>,</div><div class=\"line\">  <span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">    rules: utils.styleLoaders(&#123; <span class=\"attr\">sourceMap</span>: config.dev.cssSourceMap &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\">  devtool: <span class=\"string\">'#cheap-module-eval-source-map'</span>,</div><div class=\"line\">  optimization: &#123;</div><div class=\"line\">    <span class=\"comment\">// minimizer: true,</span></div><div class=\"line\">    providedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    usedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">//package.jsonsideEffectstree-shake</span></div><div class=\"line\">    <span class=\"comment\">//optimization.providedExportsoptimization.usedExports</span></div><div class=\"line\">    sideEffects: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.optimize.ModuleConcatenationPlugin()</span></div><div class=\"line\">    concatenateModules: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.NoEmitOnErrorsPlugin()</span></div><div class=\"line\">    noEmitOnErrors: <span class=\"literal\">true</span>,</div><div class=\"line\">    splitChunks: &#123;</div><div class=\"line\">      chunks: <span class=\"string\">'initial'</span>, <span class=\"comment\">//'all'|'async'|'initial'(||)chunks</span></div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"comment\">//webpack</span></div><div class=\"line\">    runtimeChunk: &#123;</div><div class=\"line\">      name: <span class=\"string\">'manifest'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin(),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin(),</div><div class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">      filename: <span class=\"string\">'index.html'</span>,</div><div class=\"line\">      template: <span class=\"string\">'index.html'</span>,</div><div class=\"line\">      inject: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> FriendlyErrorsPlugin()</div><div class=\"line\">  ]</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<h3 id=\"webpack-prod-conf-js\"><a href=\"#webpack-prod-conf-js\" class=\"headerlink\" title=\"webpack.prod.conf.js\"></a>webpack.prod.conf.js</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> utils = <span class=\"built_in\">require</span>(<span class=\"string\">'./utils'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">'../config'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> baseWebpackConfig = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base.conf'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> CopyWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'copy-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'mini-css-extract-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> OptimizeCSSPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'optimize-css-assets-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> &#123; VueLoaderPlugin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> webpackConfig = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  mode: <span class=\"string\">'production'</span>,</div><div class=\"line\">  entry: &#123;</div><div class=\"line\">    charts: [<span class=\"string\">'echarts'</span>],</div><div class=\"line\">    vendors: [<span class=\"string\">'vue'</span>, <span class=\"string\">'vuex'</span>, <span class=\"string\">'vue-router'</span>, <span class=\"string\">'moment'</span>],</div><div class=\"line\">    iconfonts: [<span class=\"string\">'ga-iconfont'</span>]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">    rules: utils.styleLoaders(&#123;</div><div class=\"line\">      sourceMap: config.build.productionSourceMap,</div><div class=\"line\">      extract: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\">  devtool: config.build.productionSourceMap ? <span class=\"string\">'#source-map'</span> : <span class=\"literal\">false</span>,</div><div class=\"line\">  output: &#123;</div><div class=\"line\">    path: config.build.assetsRoot,</div><div class=\"line\">    filename: utils.assetsPath(<span class=\"string\">'js/[name].[chunkhash].js'</span>),</div><div class=\"line\">    chunkFilename: utils.assetsPath(<span class=\"string\">'js/[id].[chunkhash].js'</span>),</div><div class=\"line\">    publicPath: <span class=\"string\">'./'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  optimization: &#123;</div><div class=\"line\">    <span class=\"comment\">// minimizer: true,</span></div><div class=\"line\">    providedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    usedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">//package.jsonsideEffectstree-shake</span></div><div class=\"line\">    <span class=\"comment\">//optimization.providedExportsoptimization.usedExports</span></div><div class=\"line\">    sideEffects: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.optimize.ModuleConcatenationPlugin()</span></div><div class=\"line\">    concatenateModules: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.NoEmitOnErrorsPlugin()</span></div><div class=\"line\">    noEmitOnErrors: <span class=\"literal\">true</span>,</div><div class=\"line\">    splitChunks: &#123;</div><div class=\"line\">      <span class=\"comment\">// maxAsyncRequests: 1,                     //  1</span></div><div class=\"line\">      <span class=\"comment\">// maxInitialRequests: 1,                   // 1</span></div><div class=\"line\">      cacheGroups: &#123;</div><div class=\"line\">        <span class=\"comment\">// test: path.resolve(__dirname, '../node_modules'),</span></div><div class=\"line\">        commons: &#123;</div><div class=\"line\">          chunks: <span class=\"string\">'all'</span>,</div><div class=\"line\">          minChunks: <span class=\"number\">2</span>,</div><div class=\"line\">          maxInitialRequests: <span class=\"number\">5</span>, <span class=\"comment\">// The default limit is too small to showcase the effect</span></div><div class=\"line\">          minSize: <span class=\"number\">0</span>, </div><div class=\"line\">          name: <span class=\"string\">'common'</span></div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"comment\">//webpack</span></div><div class=\"line\">    runtimeChunk: &#123;</div><div class=\"line\">      name: <span class=\"string\">'manifest'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin(),</div><div class=\"line\">    <span class=\"comment\">// moment</span></div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.ContextReplacementPlugin(</div><div class=\"line\">      /moment[\\\\\\/]locale$/,</div><div class=\"line\">      /^\\.\\/(zh-cn)$/</div><div class=\"line\">    ),</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</div><div class=\"line\">      filename: utils.assetsPath(<span class=\"string\">'css/[name].[contenthash].css'</span>)</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> OptimizeCSSPlugin(&#123;</div><div class=\"line\">      cssProcessorOptions: &#123;</div><div class=\"line\">        safe: <span class=\"literal\">true</span>,</div><div class=\"line\">        discardComments: &#123; <span class=\"attr\">removeAll</span>: <span class=\"literal\">true</span> &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">      filename: config.build.index,</div><div class=\"line\">      template: <span class=\"string\">'index.html'</span>,</div><div class=\"line\">      inject: <span class=\"literal\">true</span>,</div><div class=\"line\">      hash:<span class=\"literal\">true</span>,<span class=\"comment\">// </span></div><div class=\"line\">      minify: &#123;</div><div class=\"line\">        removeComments: <span class=\"literal\">true</span>,</div><div class=\"line\">        collapseWhitespace: <span class=\"literal\">true</span>,</div><div class=\"line\">        removeAttributeQuotes: <span class=\"literal\">true</span></div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.HashedModuleIdsPlugin(),</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">new</span> CopyWebpackPlugin([&#123;</div><div class=\"line\">      <span class=\"keyword\">from</span>: path.resolve(__dirname, <span class=\"string\">'../static'</span>),</div><div class=\"line\">      to: config.build.assetsSubDirectory,</div><div class=\"line\">      ignore: [<span class=\"string\">'.*'</span>]</div><div class=\"line\">    &#125;])</div><div class=\"line\">  ]</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> (config.build.productionGzip) &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> CompressionWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'compression-webpack-plugin'</span>)</div><div class=\"line\"></div><div class=\"line\">  webpackConfig.plugins.push(</div><div class=\"line\">    <span class=\"keyword\">new</span> CompressionWebpackPlugin(&#123;</div><div class=\"line\">      asset: <span class=\"string\">'[path].gz[query]'</span>,</div><div class=\"line\">      algorithm: <span class=\"string\">'gzip'</span>,</div><div class=\"line\">      test: <span class=\"keyword\">new</span> <span class=\"built_in\">RegExp</span>(</div><div class=\"line\">        <span class=\"string\">'\\\\.('</span> +</div><div class=\"line\">        config.build.productionGzipExtensions.join(<span class=\"string\">'|'</span>) +</div><div class=\"line\">        <span class=\"string\">')$'</span></div><div class=\"line\">      ),</div><div class=\"line\">      threshold: <span class=\"number\">10240</span>,</div><div class=\"line\">      minRatio: <span class=\"number\">0.8</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">  )</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> (config.build.bundleAnalyzerReport) &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> BundleAnalyzerPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin</div><div class=\"line\">  webpackConfig.plugins.push(<span class=\"keyword\">new</span> BundleAnalyzerPlugin())</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = webpackConfig</div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"preload\"><a href=\"#preload\" class=\"headerlink\" title=\"preload\"></a>preload</h3><p><code>preload-webpack-plugin</code><code>3.0.0-beta.1</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm i preload-webpack-plugin@next -D</div></pre></td></tr></table></figure></p>\n<p><code>html-webpack-plugin</code><code>3.2.0</code>\b\b<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">plugins: [</div><div class=\"line\">  <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">    filename: config.build.index,</div><div class=\"line\">    template: <span class=\"string\">'index.html'</span>,</div><div class=\"line\">    inject: <span class=\"literal\">true</span>,</div><div class=\"line\">    minify: &#123;</div><div class=\"line\">      removeComments: <span class=\"literal\">true</span>,</div><div class=\"line\">      collapseWhitespace: <span class=\"literal\">true</span>,</div><div class=\"line\">      removeAttributeQuotes: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;,</div><div class=\"line\">  &#125;),</div><div class=\"line\">  <span class=\"keyword\">new</span> PreloadWebpackPlugin(&#123;</div><div class=\"line\">    rel: <span class=\"string\">'prefetch'</span>,</div><div class=\"line\">  &#125;),</div><div class=\"line\">  <span class=\"keyword\">new</span> PreloadWebpackPlugin(&#123;</div><div class=\"line\">    rel: <span class=\"string\">'preload'</span></div><div class=\"line\">  &#125;),</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<h3 id=\"html-webpack-plugin-after-emit\"><a href=\"#html-webpack-plugin-after-emit\" class=\"headerlink\" title=\"html-webpack-plugin-after-emit\b\"></a>html-webpack-plugin-after-emit\b</h3><p><code>webpack4</code><code>dev</code><code>cb is not a function</code><code>html-webpack-plugin-after-emit</code><code>webpack4</code><code>html-webpack-plugin3.2.0</code><code>build/dev-server.js</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">compiler.plugin(<span class=\"string\">'compilation'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compilation</span>) </span>&#123;</div><div class=\"line\">    compilation.plugin(<span class=\"string\">'html-webpack-plugin-after-emit'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data, cb</span>) </span>&#123;</div><div class=\"line\">        hotMiddleware.publish(&#123; <span class=\"attr\">action</span>: <span class=\"string\">'reload'</span> &#125;)</div><div class=\"line\">        cb()</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>webpack4</code><code>webpack4</code>\b50%<code>143894ms</code><code>58080ms</code><br> <img width=\"600\" src=\"/2018-07-14-wpk/1.jpg\"></p>\n<p> <code>27534ms</code><br> <img width=\"600\" src=\"/2018-07-14-wpk/12.jpeg\"></p>\n<h2 id=\"2018-07-21\"><a href=\"#2018-07-21\" class=\"headerlink\" title=\"2018-07-21\"></a>2018-07-21</h2><h3 id=\"entryoptimization\"><a href=\"#entryoptimization\" class=\"headerlink\" title=\"entryoptimization\"></a>entryoptimization</h3><p><code>optimization</code>\b<code>entry</code>\b<code>charts</code><code>vendors</code><code>iconfonts</code>jsjs<code>199 bytes</code>js<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// charts.js</span></div><div class=\"line\">(<span class=\"built_in\">window</span>.webpackJsonp=<span class=\"built_in\">window</span>.webpackJsonp||[]).push([[<span class=\"number\">24</span>],&#123;<span class=\"number\">21</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n,o,p</span>)</span>&#123;n.exports=p(<span class=\"string\">\"K8M1\"</span>)&#125;&#125;,[[<span class=\"number\">21</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>]]]);</div><div class=\"line\"><span class=\"comment\">//# sourceMappingURL=charts.2e5cbbfa2a894d2bb5aa.js.map</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// iconfonts.js</span></div><div class=\"line\">(<span class=\"built_in\">window</span>.webpackJsonp=<span class=\"built_in\">window</span>.webpackJsonp||[]).push([[<span class=\"number\">22</span>],&#123;<span class=\"number\">19</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n,o,p</span>)</span>&#123;n.exports=p(<span class=\"string\">\"t+cQ\"</span>)&#125;&#125;,[[<span class=\"number\">19</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>]]]);</div><div class=\"line\"><span class=\"comment\">//# sourceMappingURL=iconfonts.e90fd0507d501ef81b69.js.map</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// vendors.js</span></div><div class=\"line\">(<span class=\"built_in\">window</span>.webpackJsonp=<span class=\"built_in\">window</span>.webpackJsonp||[]).push([[<span class=\"number\">23</span>],&#123;<span class=\"number\">20</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n,o,w</span>)</span>&#123;w(<span class=\"string\">\"oCYn\"</span>),w(<span class=\"string\">\"L2JU\"</span>),w(<span class=\"string\">\"jE9Z\"</span>),n.exports=w(<span class=\"string\">\"wd/R\"</span>)&#125;&#125;,[[<span class=\"number\">20</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>]]]);</div><div class=\"line\"><span class=\"comment\">//# sourceMappingURL=vendors.5c535f00ba89522ba93b.js.map</span></div></pre></td></tr></table></figure></p>\n<p>js\b<code>common.js</code>jsjs\b<code>entry</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">entry: &#123;</div><div class=\"line\">  <span class=\"comment\">// charts: ['echarts'],</span></div><div class=\"line\">  <span class=\"comment\">// vendors: ['vue', 'vuex', 'vue-router', 'moment'],</span></div><div class=\"line\">  <span class=\"comment\">// iconfonts: ['ga-iconfont']</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>js</p>\n<p>js<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// entry</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">optimization: &#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  splitChunks: &#123;</div><div class=\"line\">    cacheGroups: &#123;</div><div class=\"line\">      charts: &#123;</div><div class=\"line\">        chunks: <span class=\"string\">'async'</span>,</div><div class=\"line\">        minChunks: <span class=\"number\">2</span>,</div><div class=\"line\">        maxInitialRequests: <span class=\"number\">5</span>,</div><div class=\"line\">        minSize: <span class=\"number\">0</span>, </div><div class=\"line\">        name: <span class=\"string\">'charts'</span></div><div class=\"line\">      &#125;,</div><div class=\"line\">      vendors: &#123;</div><div class=\"line\">        chunks: <span class=\"string\">'async'</span>,</div><div class=\"line\">        minChunks: <span class=\"number\">2</span>,</div><div class=\"line\">        maxInitialRequests: <span class=\"number\">5</span>,</div><div class=\"line\">        minSize: <span class=\"number\">0</span>, </div><div class=\"line\">        name: <span class=\"string\">'vendors'</span></div><div class=\"line\">      &#125;,</div><div class=\"line\">      iconfonts: &#123;</div><div class=\"line\">        chunks: <span class=\"string\">'async'</span>,</div><div class=\"line\">        minChunks: <span class=\"number\">2</span>,</div><div class=\"line\">        maxInitialRequests: <span class=\"number\">5</span>,</div><div class=\"line\">        minSize: <span class=\"number\">0</span>, </div><div class=\"line\">        name: <span class=\"string\">'iconfonts'</span></div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div></pre></td></tr></table></figure></p>\n<p><code>cacheGroups</code>commons<code>chunks</code><code>async</code><br><img width=\"600\" src=\"/2018-07-14-wpk/4.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote>\n<p>26ui</p>\n</blockquote>\n<p>\b<code>HappyPack</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// webpack.base.conf.js</span></div><div class=\"line\"><span class=\"comment\">// rulesbabel-loaderhappypackloader</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">  rules: [&#123;</div><div class=\"line\">    test: <span class=\"regexp\">/\\.js$/</span>,</div><div class=\"line\">    loader: <span class=\"string\">'happypack/loader'</span>, <span class=\"comment\">// HappyPackloader</span></div><div class=\"line\">    include: [resolve(<span class=\"string\">'src'</span>)],</div><div class=\"line\">    exclude: <span class=\"regexp\">/node_modules/</span>,</div><div class=\"line\">    options: &#123;</div><div class=\"line\">      sourceMap: <span class=\"literal\">true</span>,</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;    </div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// webpack.prod.conf.js</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">plugins: [</div><div class=\"line\">  <span class=\"keyword\">new</span> HappyPack(&#123;</div><div class=\"line\">    loaders: [&#123;</div><div class=\"line\">      loader: <span class=\"string\">'babel-loader'</span>,</div><div class=\"line\">      options: &#123; </div><div class=\"line\">        babelrc: <span class=\"literal\">true</span>, </div><div class=\"line\">        cacheDirectory: <span class=\"literal\">true</span> </div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;],</div><div class=\"line\">    threadPool: happyThreadPool</div><div class=\"line\">  &#125;)</div><div class=\"line\">]    </div><div class=\"line\"><span class=\"comment\">// </span></div></pre></td></tr></table></figure></p>\n<p><code>26831ms</code><br><img width=\"600\" src=\"/2018-07-14-wpk/5.jpeg\"></p>\n<p><code>20387ms</code><code>6.5s</code><br><img width=\"600\" src=\"/2018-07-14-wpk/6.jpeg\"></p>\n<p><code>babel-loader</code><code>cacheDirectory</code>\b<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">&#123;</div><div class=\"line\">  test: <span class=\"regexp\">/\\.js$/</span>,</div><div class=\"line\">  loader: <span class=\"string\">'babel-loader?cacheDirectory=true'</span>, <span class=\"comment\">// loader: 'babel-loader?cacheDirectory'</span></div><div class=\"line\">  include: [resolve(<span class=\"string\">'src'</span>)],</div><div class=\"line\">  exclude: <span class=\"regexp\">/node_modules/</span>,</div><div class=\"line\">  options: &#123;</div><div class=\"line\">    sourceMap: <span class=\"literal\">true</span>,</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>cacheDirectory</code><code>options</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  test: <span class=\"regexp\">/\\.js$/</span>,</div><div class=\"line\">  loader: <span class=\"string\">'babel-loader'</span>,</div><div class=\"line\">  include: [resolve(<span class=\"string\">'src'</span>)],</div><div class=\"line\">  exclude: <span class=\"regexp\">/node_modules/</span>,</div><div class=\"line\">  options: &#123;</div><div class=\"line\">    sourceMap: <span class=\"literal\">true</span>,</div><div class=\"line\">    cacheDirectory: <span class=\"literal\">true</span> </div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>20593ms</code>:<br><img width=\"600\" src=\"/2018-07-14-wpk/7.jpeg\"></p>\n<p><code>HappyPack</code><code>cacheDirectory</code>\b<code>20s</code></p>\n<p><a href=\"https://github.com/wqzwh/blog/blob/master/source/_posts/2018-07-14-wpk.md\" target=\"_blank\" rel=\"external\">issues</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>Webpack</code> v4.16.0<code>Webpack4</code><code>.mjs</code><code>Chunk</code><code>splitChunks</code><code>Webpack</code><code></code><code>&amp;</code><code></code></p>\n<p><code>Webpack4</code><code>2.7.0</code><code>4.16.0</code><br></p>","more":"<p></p>\n<h2 id=\"webpack4-0\"><a href=\"#webpack4-0\" class=\"headerlink\" title=\"webpack4.0\"></a>webpack4.0</h2><h3 id=\"node\"><a href=\"#node\" class=\"headerlink\" title=\"node\"></a>node</h3><p><code>Node4</code><code>node</code>\b<code>node v8.11.1</code><code>npm v5.6.0</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>webpack 4js  webpack  webpack 4  5 </p>\n<ul>\n<li>javascript/auto: (webpack 3)JSCommonJSAMDESM</li>\n<li>javascript/esm: EcmaScript  .mjs </li>\n<li>javascript/dynamic:  CommonJS &amp; AMDEcmaScript </li>\n<li>json:  require  import  JSON ( .json )</li>\n<li>webassembly/experimental: WebAssembly ( .wasm )</li>\n</ul>\n<p>webpack 4  .wasm, .mjs, .js  .json </p>\n<h3 id=\"webpack-cli\"><a href=\"#webpack-cli\" class=\"headerlink\" title=\"webpack-cli\"></a>webpack-cli</h3><p><code>webpack4</code><code>npm run build</code><code>webpack-cli/webpack-command</code><code>webpack-cli</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"mode\"><a href=\"#mode\" class=\"headerlink\" title=\"mode\"></a>mode</h4><p><code>webpack4</code><code>mode</code><code></code><code></code><code>webpack.dev.conf.js</code><code>webpack.prod.conf.js</code><code>mode</code><code>process.env.NODE_ENV = &#39;production&#39;</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// webpack.dev.conf.js</span></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  mode: <span class=\"string\">'development'</span>,</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</div><div class=\"line\">        <span class=\"string\">'process.env'</span>: config.dev.env</div><div class=\"line\">    &#125;),</div><div class=\"line\">  ]</div><div class=\"line\">&#125; </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// webpack.prod.conf.js</span></div><div class=\"line\"><span class=\"keyword\">var</span> webpackConfig = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  mode: <span class=\"string\">'production'</span>,</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</div><div class=\"line\">      <span class=\"string\">'process.env'</span>: env</div><div class=\"line\">    &#125;),</div><div class=\"line\">  ]  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>new webpack.DefinePlugin<code>process.env</code></p>\n</blockquote>\n<p><strong>development </strong></p>\n<ul>\n<li>1.</li>\n<li>2.process.env.NODE_ENV  development</li>\n<li>3. eval  source maps</li>\n</ul>\n<p><strong>production </strong></p>\n<ul>\n<li>1.minifysplite</li>\n<li>2.eval devtool</li>\n<li>3.watching</li>\n<li>4.Scope hoistingTree-shakingModuleConcatenationPlugin</li>\n<li>5.process.env.NODE_ENVDefinePlugin</li>\n<li>6.modenone</li>\n<li>7.webpack</li>\n</ul>\n<h4 id=\"mini-css-extract-plugin\"><a href=\"#mini-css-extract-plugin\" class=\"headerlink\" title=\"mini-css-extract-plugin\"></a>mini-css-extract-plugin</h4><p><code>extract-text-webpack-plugin</code>webpack4.x<code>extract-text-webpack-plugin@next</code><code>contenthash</code><code>mini-css-extract-plugin</code></p>\n<p><code>webpack.prod.conf.js</code><code>loaders</code><code>utils.js</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// webpack.dev.conf.js</span></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</div><div class=\"line\">      filename: utils.assetsPath(<span class=\"string\">'css/[name].[contenthash].css'</span>)</div><div class=\"line\">    &#125;),</div><div class=\"line\">  ]</div><div class=\"line\">&#125; </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// utils.js</span></div><div class=\"line\"><span class=\"keyword\">if</span> (options.extract) &#123;</div><div class=\"line\"><span class=\"keyword\">return</span> [</div><div class=\"line\">  &#123;</div><div class=\"line\">    loader: MiniCssExtractPlugin.loader,</div><div class=\"line\">    options: &#123;</div><div class=\"line\">      publicPath: <span class=\"string\">'../../'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  ].concat(loaders)</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> [<span class=\"string\">'vue-style-loader'</span>].concat(loaders)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p><code>utils.js</code><code>publicPath</code>css</p>\n</blockquote>\n<h4 id=\"optimization\"><a href=\"#optimization\" class=\"headerlink\" title=\"optimization\"></a>optimization</h4><p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Error</span>: webpack.optimize.CommonsChunkPlugin has been removed, please use config.optimization.splitChunks instead.</div><div class=\"line\">    at <span class=\"built_in\">Object</span>.get [<span class=\"keyword\">as</span> CommonsChunkPlugin] (<span class=\"regexp\">/data/</span>test/node_modules/webpack/lib/webpack.js:<span class=\"number\">159</span>:<span class=\"number\">10</span>)</div></pre></td></tr></table></figure></p>\n<p><code>webpack4</code><code>webpack.optimize.CommonsChunkPlugin</code><code>optimization</code><code>splitChunk</code></p>\n<p><code>webpack.prod.conf.js</code><code>webpack.optimize.CommonsChunkPlugin</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> webpackConfig = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  mode: <span class=\"string\">'production'</span>,</div><div class=\"line\">  entry: &#123;</div><div class=\"line\">    charts: [<span class=\"string\">'echarts'</span>],</div><div class=\"line\">    vendors: [<span class=\"string\">'vue'</span>, <span class=\"string\">'vuex'</span>, <span class=\"string\">'vue-router'</span>, <span class=\"string\">'moment'</span>],</div><div class=\"line\">    iconfonts: [<span class=\"string\">'ga-iconfont'</span>]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  optimization: &#123;</div><div class=\"line\">    <span class=\"comment\">// minimizer: true, // [new UglifyJsPlugin(&#123;...&#125;)]</span></div><div class=\"line\">    providedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    usedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">//package.jsonsideEffectstree-shake</span></div><div class=\"line\">    <span class=\"comment\">//optimization.providedExportsoptimization.usedExports</span></div><div class=\"line\">    sideEffects: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.optimize.ModuleConcatenationPlugin()</span></div><div class=\"line\">    concatenateModules: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.NoEmitOnErrorsPlugin()</span></div><div class=\"line\">    noEmitOnErrors: <span class=\"literal\">true</span>,</div><div class=\"line\">    splitChunks: &#123;</div><div class=\"line\">      <span class=\"comment\">// maxAsyncRequests: 1,                     //  1</span></div><div class=\"line\">      <span class=\"comment\">// maxInitialRequests: 1,                   // 1</span></div><div class=\"line\">      cacheGroups: &#123;</div><div class=\"line\">        <span class=\"comment\">// </span></div><div class=\"line\">        commons: &#123;</div><div class=\"line\">          <span class=\"comment\">// test: path.resolve(__dirname, '../node_modules'),</span></div><div class=\"line\">          chunks: <span class=\"string\">'all'</span>,</div><div class=\"line\">          minChunks: <span class=\"number\">2</span>,</div><div class=\"line\">          maxInitialRequests: <span class=\"number\">5</span>, <span class=\"comment\">// The default limit is too small to showcase the effect</span></div><div class=\"line\">          minSize: <span class=\"number\">0</span>, </div><div class=\"line\">          name: <span class=\"string\">'common'</span></div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;,</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>test</code><code>entry</code><code>path.resolve(__dirname, &#39;../node_modules&#39;)</code><code>node_modules</code></p>\n<p><code>chunks</code><code>entry</code><code>entry</code><code>test</code><code>test</code><code>all</code><code>async</code></p>\n<ul>\n<li><p><code>all</code><code>entry</code><code>enrty</code><br><img width=\"600\" src=\"/2018-07-14-wpk/2.jpeg\"><br><img width=\"600\" src=\"/2018-07-14-wpk/21.jpeg\"></p>\n</li>\n<li><p><code>async</code><code>entry</code><code>entry</code><br><img width=\"600\" src=\"/2018-07-14-wpk/3.jpeg\"><br><img width=\"600\" src=\"/2018-07-14-wpk/31.jpeg\"></p>\n</li>\n<li><p><code>initial</code><code>all</code><code>async</code>jsjsjs<br><img width=\"600\" src=\"/2018-07-14-wpk/41.jpeg\"></p>\n</li>\n</ul>\n<p><code>sideEffects</code><code>tree-shake</code><code>package.json</code><code>webpack</code>(re-exports)</p>\n<p><code>concatenateModules</code><code>webpack.optimize.ModuleConcatenationPlugin()</code></p>\n<p><code>noEmitOnErrors</code><code>new webpack.NoEmitOnErrorsPlugin()</code></p>\n<p><code>minChunks</code><code>split</code><code>chunks</code> 1<code>default</code>2<code>minChunks = 2</code></p>\n<blockquote>\n<p><code>webpack.optimize.UglifyJsPlugin</code><code>optimization.minimize</code><code>true</code><code>production mode</code><code>true</code><code>optimization.minimizer</code></p>\n</blockquote>\n<h4 id=\"html-webpack-plugin\"><a href=\"#html-webpack-plugin\" class=\"headerlink\" title=\"html-webpack-plugin\"></a>html-webpack-plugin</h4><p><code>@4.0.0-alpha</code><code>chunksSortMode: dependency</code>\b<code>webpack4</code><code>CommonsChunkPlugin</code>API</p>\n<h4 id=\"vue-loader\"><a href=\"#vue-loader\" class=\"headerlink\" title=\"vue-loader\"></a>vue-loader</h4><p>15.x<code>VueLoaderPlugin</code>\b<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// webpack.prod.conf.js</span></div><div class=\"line\"><span class=\"keyword\">const</span> &#123; VueLoaderPlugin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader'</span>)</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin(),</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<h4 id=\"sourceMap\"><a href=\"#sourceMap\" class=\"headerlink\" title=\"sourceMap\"></a>sourceMap</h4><p><code>webpack4</code><code>sourceMap</code><code>loader</code><code>options</code><code>sourceMaptrue</code></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>loader</p>\n<ul>\n<li>babel-loader 7.1.5</li>\n<li>css-loader 1.0.0</li>\n<li>file-loader 1.1.11</li>\n<li>less-loader 4.1.0</li>\n<li>url-loader 1.0.1</li>\n<li>vue-style-loader 4.1.0</li>\n<li>vue-template-compiler 2.5.16</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"webpack-dev-conf-js\"><a href=\"#webpack-dev-conf-js\" class=\"headerlink\" title=\"webpack.dev.conf.js\"></a>webpack.dev.conf.js</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> utils = <span class=\"built_in\">require</span>(<span class=\"string\">'./utils'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">'../config'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> baseWebpackConfig = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base.conf'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> FriendlyErrorsPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'friendly-errors-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> &#123; VueLoaderPlugin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// add hot-reload related code to entry chunks</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.keys(baseWebpackConfig.entry).forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">  baseWebpackConfig.entry[name] = [<span class=\"string\">'./build/dev-client'</span>].concat(baseWebpackConfig.entry[name])</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">baseWebpackConfig.output.chunkFilename = <span class=\"string\">'[name].[chunkhash].js'</span>;            <span class=\"comment\">// js  </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  mode: <span class=\"string\">'development'</span>,</div><div class=\"line\">  <span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">    rules: utils.styleLoaders(&#123; <span class=\"attr\">sourceMap</span>: config.dev.cssSourceMap &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\">  devtool: <span class=\"string\">'#cheap-module-eval-source-map'</span>,</div><div class=\"line\">  optimization: &#123;</div><div class=\"line\">    <span class=\"comment\">// minimizer: true,</span></div><div class=\"line\">    providedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    usedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">//package.jsonsideEffectstree-shake</span></div><div class=\"line\">    <span class=\"comment\">//optimization.providedExportsoptimization.usedExports</span></div><div class=\"line\">    sideEffects: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.optimize.ModuleConcatenationPlugin()</span></div><div class=\"line\">    concatenateModules: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.NoEmitOnErrorsPlugin()</span></div><div class=\"line\">    noEmitOnErrors: <span class=\"literal\">true</span>,</div><div class=\"line\">    splitChunks: &#123;</div><div class=\"line\">      chunks: <span class=\"string\">'initial'</span>, <span class=\"comment\">//'all'|'async'|'initial'(||)chunks</span></div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"comment\">//webpack</span></div><div class=\"line\">    runtimeChunk: &#123;</div><div class=\"line\">      name: <span class=\"string\">'manifest'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin(),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin(),</div><div class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">      filename: <span class=\"string\">'index.html'</span>,</div><div class=\"line\">      template: <span class=\"string\">'index.html'</span>,</div><div class=\"line\">      inject: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> FriendlyErrorsPlugin()</div><div class=\"line\">  ]</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<h3 id=\"webpack-prod-conf-js\"><a href=\"#webpack-prod-conf-js\" class=\"headerlink\" title=\"webpack.prod.conf.js\"></a>webpack.prod.conf.js</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> utils = <span class=\"built_in\">require</span>(<span class=\"string\">'./utils'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">'../config'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> baseWebpackConfig = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base.conf'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> CopyWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'copy-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'mini-css-extract-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> OptimizeCSSPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'optimize-css-assets-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> &#123; VueLoaderPlugin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> webpackConfig = merge(baseWebpackConfig, &#123;</div><div class=\"line\">  mode: <span class=\"string\">'production'</span>,</div><div class=\"line\">  entry: &#123;</div><div class=\"line\">    charts: [<span class=\"string\">'echarts'</span>],</div><div class=\"line\">    vendors: [<span class=\"string\">'vue'</span>, <span class=\"string\">'vuex'</span>, <span class=\"string\">'vue-router'</span>, <span class=\"string\">'moment'</span>],</div><div class=\"line\">    iconfonts: [<span class=\"string\">'ga-iconfont'</span>]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">    rules: utils.styleLoaders(&#123;</div><div class=\"line\">      sourceMap: config.build.productionSourceMap,</div><div class=\"line\">      extract: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\">  devtool: config.build.productionSourceMap ? <span class=\"string\">'#source-map'</span> : <span class=\"literal\">false</span>,</div><div class=\"line\">  output: &#123;</div><div class=\"line\">    path: config.build.assetsRoot,</div><div class=\"line\">    filename: utils.assetsPath(<span class=\"string\">'js/[name].[chunkhash].js'</span>),</div><div class=\"line\">    chunkFilename: utils.assetsPath(<span class=\"string\">'js/[id].[chunkhash].js'</span>),</div><div class=\"line\">    publicPath: <span class=\"string\">'./'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  optimization: &#123;</div><div class=\"line\">    <span class=\"comment\">// minimizer: true,</span></div><div class=\"line\">    providedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    usedExports: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">//package.jsonsideEffectstree-shake</span></div><div class=\"line\">    <span class=\"comment\">//optimization.providedExportsoptimization.usedExports</span></div><div class=\"line\">    sideEffects: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.optimize.ModuleConcatenationPlugin()</span></div><div class=\"line\">    concatenateModules: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"comment\">// new webpack.NoEmitOnErrorsPlugin()</span></div><div class=\"line\">    noEmitOnErrors: <span class=\"literal\">true</span>,</div><div class=\"line\">    splitChunks: &#123;</div><div class=\"line\">      <span class=\"comment\">// maxAsyncRequests: 1,                     //  1</span></div><div class=\"line\">      <span class=\"comment\">// maxInitialRequests: 1,                   // 1</span></div><div class=\"line\">      cacheGroups: &#123;</div><div class=\"line\">        <span class=\"comment\">// test: path.resolve(__dirname, '../node_modules'),</span></div><div class=\"line\">        commons: &#123;</div><div class=\"line\">          chunks: <span class=\"string\">'all'</span>,</div><div class=\"line\">          minChunks: <span class=\"number\">2</span>,</div><div class=\"line\">          maxInitialRequests: <span class=\"number\">5</span>, <span class=\"comment\">// The default limit is too small to showcase the effect</span></div><div class=\"line\">          minSize: <span class=\"number\">0</span>, </div><div class=\"line\">          name: <span class=\"string\">'common'</span></div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"comment\">//webpack</span></div><div class=\"line\">    runtimeChunk: &#123;</div><div class=\"line\">      name: <span class=\"string\">'manifest'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin(),</div><div class=\"line\">    <span class=\"comment\">// moment</span></div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.ContextReplacementPlugin(</div><div class=\"line\">      /moment[\\\\\\/]locale$/,</div><div class=\"line\">      /^\\.\\/(zh-cn)$/</div><div class=\"line\">    ),</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</div><div class=\"line\">      filename: utils.assetsPath(<span class=\"string\">'css/[name].[contenthash].css'</span>)</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> OptimizeCSSPlugin(&#123;</div><div class=\"line\">      cssProcessorOptions: &#123;</div><div class=\"line\">        safe: <span class=\"literal\">true</span>,</div><div class=\"line\">        discardComments: &#123; <span class=\"attr\">removeAll</span>: <span class=\"literal\">true</span> &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">      filename: config.build.index,</div><div class=\"line\">      template: <span class=\"string\">'index.html'</span>,</div><div class=\"line\">      inject: <span class=\"literal\">true</span>,</div><div class=\"line\">      hash:<span class=\"literal\">true</span>,<span class=\"comment\">// </span></div><div class=\"line\">      minify: &#123;</div><div class=\"line\">        removeComments: <span class=\"literal\">true</span>,</div><div class=\"line\">        collapseWhitespace: <span class=\"literal\">true</span>,</div><div class=\"line\">        removeAttributeQuotes: <span class=\"literal\">true</span></div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.HashedModuleIdsPlugin(),</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">new</span> CopyWebpackPlugin([&#123;</div><div class=\"line\">      <span class=\"keyword\">from</span>: path.resolve(__dirname, <span class=\"string\">'../static'</span>),</div><div class=\"line\">      to: config.build.assetsSubDirectory,</div><div class=\"line\">      ignore: [<span class=\"string\">'.*'</span>]</div><div class=\"line\">    &#125;])</div><div class=\"line\">  ]</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> (config.build.productionGzip) &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> CompressionWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'compression-webpack-plugin'</span>)</div><div class=\"line\"></div><div class=\"line\">  webpackConfig.plugins.push(</div><div class=\"line\">    <span class=\"keyword\">new</span> CompressionWebpackPlugin(&#123;</div><div class=\"line\">      asset: <span class=\"string\">'[path].gz[query]'</span>,</div><div class=\"line\">      algorithm: <span class=\"string\">'gzip'</span>,</div><div class=\"line\">      test: <span class=\"keyword\">new</span> <span class=\"built_in\">RegExp</span>(</div><div class=\"line\">        <span class=\"string\">'\\\\.('</span> +</div><div class=\"line\">        config.build.productionGzipExtensions.join(<span class=\"string\">'|'</span>) +</div><div class=\"line\">        <span class=\"string\">')$'</span></div><div class=\"line\">      ),</div><div class=\"line\">      threshold: <span class=\"number\">10240</span>,</div><div class=\"line\">      minRatio: <span class=\"number\">0.8</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">  )</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> (config.build.bundleAnalyzerReport) &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> BundleAnalyzerPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin</div><div class=\"line\">  webpackConfig.plugins.push(<span class=\"keyword\">new</span> BundleAnalyzerPlugin())</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = webpackConfig</div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"preload\"><a href=\"#preload\" class=\"headerlink\" title=\"preload\"></a>preload</h3><p><code>preload-webpack-plugin</code><code>3.0.0-beta.1</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm i preload-webpack-plugin@next -D</div></pre></td></tr></table></figure></p>\n<p><code>html-webpack-plugin</code><code>3.2.0</code>\b\b<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">plugins: [</div><div class=\"line\">  <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">    filename: config.build.index,</div><div class=\"line\">    template: <span class=\"string\">'index.html'</span>,</div><div class=\"line\">    inject: <span class=\"literal\">true</span>,</div><div class=\"line\">    minify: &#123;</div><div class=\"line\">      removeComments: <span class=\"literal\">true</span>,</div><div class=\"line\">      collapseWhitespace: <span class=\"literal\">true</span>,</div><div class=\"line\">      removeAttributeQuotes: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;,</div><div class=\"line\">  &#125;),</div><div class=\"line\">  <span class=\"keyword\">new</span> PreloadWebpackPlugin(&#123;</div><div class=\"line\">    rel: <span class=\"string\">'prefetch'</span>,</div><div class=\"line\">  &#125;),</div><div class=\"line\">  <span class=\"keyword\">new</span> PreloadWebpackPlugin(&#123;</div><div class=\"line\">    rel: <span class=\"string\">'preload'</span></div><div class=\"line\">  &#125;),</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<h3 id=\"html-webpack-plugin-after-emit\"><a href=\"#html-webpack-plugin-after-emit\" class=\"headerlink\" title=\"html-webpack-plugin-after-emit\b\"></a>html-webpack-plugin-after-emit\b</h3><p><code>webpack4</code><code>dev</code><code>cb is not a function</code><code>html-webpack-plugin-after-emit</code><code>webpack4</code><code>html-webpack-plugin3.2.0</code><code>build/dev-server.js</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">compiler.plugin(<span class=\"string\">'compilation'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">compilation</span>) </span>&#123;</div><div class=\"line\">    compilation.plugin(<span class=\"string\">'html-webpack-plugin-after-emit'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data, cb</span>) </span>&#123;</div><div class=\"line\">        hotMiddleware.publish(&#123; <span class=\"attr\">action</span>: <span class=\"string\">'reload'</span> &#125;)</div><div class=\"line\">        cb()</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>webpack4</code><code>webpack4</code>\b50%<code>143894ms</code><code>58080ms</code><br> <img width=\"600\" src=\"/2018-07-14-wpk/1.jpg\"></p>\n<p> <code>27534ms</code><br> <img width=\"600\" src=\"/2018-07-14-wpk/12.jpeg\"></p>\n<h2 id=\"2018-07-21\"><a href=\"#2018-07-21\" class=\"headerlink\" title=\"2018-07-21\"></a>2018-07-21</h2><h3 id=\"entryoptimization\"><a href=\"#entryoptimization\" class=\"headerlink\" title=\"entryoptimization\"></a>entryoptimization</h3><p><code>optimization</code>\b<code>entry</code>\b<code>charts</code><code>vendors</code><code>iconfonts</code>jsjs<code>199 bytes</code>js<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// charts.js</span></div><div class=\"line\">(<span class=\"built_in\">window</span>.webpackJsonp=<span class=\"built_in\">window</span>.webpackJsonp||[]).push([[<span class=\"number\">24</span>],&#123;<span class=\"number\">21</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n,o,p</span>)</span>&#123;n.exports=p(<span class=\"string\">\"K8M1\"</span>)&#125;&#125;,[[<span class=\"number\">21</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>]]]);</div><div class=\"line\"><span class=\"comment\">//# sourceMappingURL=charts.2e5cbbfa2a894d2bb5aa.js.map</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// iconfonts.js</span></div><div class=\"line\">(<span class=\"built_in\">window</span>.webpackJsonp=<span class=\"built_in\">window</span>.webpackJsonp||[]).push([[<span class=\"number\">22</span>],&#123;<span class=\"number\">19</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n,o,p</span>)</span>&#123;n.exports=p(<span class=\"string\">\"t+cQ\"</span>)&#125;&#125;,[[<span class=\"number\">19</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>]]]);</div><div class=\"line\"><span class=\"comment\">//# sourceMappingURL=iconfonts.e90fd0507d501ef81b69.js.map</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// vendors.js</span></div><div class=\"line\">(<span class=\"built_in\">window</span>.webpackJsonp=<span class=\"built_in\">window</span>.webpackJsonp||[]).push([[<span class=\"number\">23</span>],&#123;<span class=\"number\">20</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n,o,w</span>)</span>&#123;w(<span class=\"string\">\"oCYn\"</span>),w(<span class=\"string\">\"L2JU\"</span>),w(<span class=\"string\">\"jE9Z\"</span>),n.exports=w(<span class=\"string\">\"wd/R\"</span>)&#125;&#125;,[[<span class=\"number\">20</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>]]]);</div><div class=\"line\"><span class=\"comment\">//# sourceMappingURL=vendors.5c535f00ba89522ba93b.js.map</span></div></pre></td></tr></table></figure></p>\n<p>js\b<code>common.js</code>jsjs\b<code>entry</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">entry: &#123;</div><div class=\"line\">  <span class=\"comment\">// charts: ['echarts'],</span></div><div class=\"line\">  <span class=\"comment\">// vendors: ['vue', 'vuex', 'vue-router', 'moment'],</span></div><div class=\"line\">  <span class=\"comment\">// iconfonts: ['ga-iconfont']</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>js</p>\n<p>js<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// entry</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">optimization: &#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  splitChunks: &#123;</div><div class=\"line\">    cacheGroups: &#123;</div><div class=\"line\">      charts: &#123;</div><div class=\"line\">        chunks: <span class=\"string\">'async'</span>,</div><div class=\"line\">        minChunks: <span class=\"number\">2</span>,</div><div class=\"line\">        maxInitialRequests: <span class=\"number\">5</span>,</div><div class=\"line\">        minSize: <span class=\"number\">0</span>, </div><div class=\"line\">        name: <span class=\"string\">'charts'</span></div><div class=\"line\">      &#125;,</div><div class=\"line\">      vendors: &#123;</div><div class=\"line\">        chunks: <span class=\"string\">'async'</span>,</div><div class=\"line\">        minChunks: <span class=\"number\">2</span>,</div><div class=\"line\">        maxInitialRequests: <span class=\"number\">5</span>,</div><div class=\"line\">        minSize: <span class=\"number\">0</span>, </div><div class=\"line\">        name: <span class=\"string\">'vendors'</span></div><div class=\"line\">      &#125;,</div><div class=\"line\">      iconfonts: &#123;</div><div class=\"line\">        chunks: <span class=\"string\">'async'</span>,</div><div class=\"line\">        minChunks: <span class=\"number\">2</span>,</div><div class=\"line\">        maxInitialRequests: <span class=\"number\">5</span>,</div><div class=\"line\">        minSize: <span class=\"number\">0</span>, </div><div class=\"line\">        name: <span class=\"string\">'iconfonts'</span></div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div></pre></td></tr></table></figure></p>\n<p><code>cacheGroups</code>commons<code>chunks</code><code>async</code><br><img width=\"600\" src=\"/2018-07-14-wpk/4.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote>\n<p>26ui</p>\n</blockquote>\n<p>\b<code>HappyPack</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// webpack.base.conf.js</span></div><div class=\"line\"><span class=\"comment\">// rulesbabel-loaderhappypackloader</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">  rules: [&#123;</div><div class=\"line\">    test: <span class=\"regexp\">/\\.js$/</span>,</div><div class=\"line\">    loader: <span class=\"string\">'happypack/loader'</span>, <span class=\"comment\">// HappyPackloader</span></div><div class=\"line\">    include: [resolve(<span class=\"string\">'src'</span>)],</div><div class=\"line\">    exclude: <span class=\"regexp\">/node_modules/</span>,</div><div class=\"line\">    options: &#123;</div><div class=\"line\">      sourceMap: <span class=\"literal\">true</span>,</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;    </div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// webpack.prod.conf.js</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">plugins: [</div><div class=\"line\">  <span class=\"keyword\">new</span> HappyPack(&#123;</div><div class=\"line\">    loaders: [&#123;</div><div class=\"line\">      loader: <span class=\"string\">'babel-loader'</span>,</div><div class=\"line\">      options: &#123; </div><div class=\"line\">        babelrc: <span class=\"literal\">true</span>, </div><div class=\"line\">        cacheDirectory: <span class=\"literal\">true</span> </div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;],</div><div class=\"line\">    threadPool: happyThreadPool</div><div class=\"line\">  &#125;)</div><div class=\"line\">]    </div><div class=\"line\"><span class=\"comment\">// </span></div></pre></td></tr></table></figure></p>\n<p><code>26831ms</code><br><img width=\"600\" src=\"/2018-07-14-wpk/5.jpeg\"></p>\n<p><code>20387ms</code><code>6.5s</code><br><img width=\"600\" src=\"/2018-07-14-wpk/6.jpeg\"></p>\n<p><code>babel-loader</code><code>cacheDirectory</code>\b<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">&#123;</div><div class=\"line\">  test: <span class=\"regexp\">/\\.js$/</span>,</div><div class=\"line\">  loader: <span class=\"string\">'babel-loader?cacheDirectory=true'</span>, <span class=\"comment\">// loader: 'babel-loader?cacheDirectory'</span></div><div class=\"line\">  include: [resolve(<span class=\"string\">'src'</span>)],</div><div class=\"line\">  exclude: <span class=\"regexp\">/node_modules/</span>,</div><div class=\"line\">  options: &#123;</div><div class=\"line\">    sourceMap: <span class=\"literal\">true</span>,</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>cacheDirectory</code><code>options</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  test: <span class=\"regexp\">/\\.js$/</span>,</div><div class=\"line\">  loader: <span class=\"string\">'babel-loader'</span>,</div><div class=\"line\">  include: [resolve(<span class=\"string\">'src'</span>)],</div><div class=\"line\">  exclude: <span class=\"regexp\">/node_modules/</span>,</div><div class=\"line\">  options: &#123;</div><div class=\"line\">    sourceMap: <span class=\"literal\">true</span>,</div><div class=\"line\">    cacheDirectory: <span class=\"literal\">true</span> </div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>20593ms</code>:<br><img width=\"600\" src=\"/2018-07-14-wpk/7.jpeg\"></p>\n<p><code>HappyPack</code><code>cacheDirectory</code>\b<code>20s</code></p>\n<p><a href=\"https://github.com/wqzwh/blog/blob/master/source/_posts/2018-07-14-wpk.md\" target=\"_blank\" rel=\"external\">issues</a></p>"},{"title":"React--React","comments":1,"toc":true,"date":"2017-06-12T13:09:11.000Z","_content":"\n### \n\n\n\n<b></b><b></b>\n\n<b>:</b>htmlcssjsreactcssjshtml\n\n<b>:</b>\n\n<!-- more -->\n\n### react\n\nreact<b>prop</b><b>state</b>propstatereactpropstate\n\n``` javascript\n// \nclass Counter extends Component {\n  constructor(props) {\n    // superthis.props\n    super(props);\n    //state\n    this.state = {\n      text: 1\n    }\n  }\n  render() {\n    const {caption} = this.props; //this.propscaption\n    return (\n      <div className=\"App\">\n        {this.state.text}\n      </div>\n    );\n  }\n}\n// \nclass ControlPanel extends Component {\n  render() {\n    console.log('enter ControlPanel render');\n    return (\n      <div style={style}>\n        <Counter caption=\"First\"/>\n      </div>\n    );\n  }\n};\n```\n\n#### Reactprop\n\npropprop\n``` javascript\n//\nconstructor(props) {\n    // superthis.props\n    super(props);\n    //state\n    this.state = {\n      text: 1\n    }\n  }\n\n//render  \nreturn (\n    <Counter caption=\"First\"/>\n);\n```\n\nsuperReact.Componentthis.propsthisrender\n\n#### propTypes\n\npropTypesproppropTypes\n\n``` javascript\nCounter.propTypes = {\n  caption:PropTypes.string.isRequired,\n  initValue:PropTypes.number\n}\n```\ncaptionstringinitValuenumberisRequiredcaptioninitValue\n\npropTypesbabel-react-optimizepropTypes\n\n#### Reactstate\n\nstatestatestringnumber\n\n``` javascript\nconstructor(props) {\n    this.state = {\n      text: 1, // state\n      num:props.num || 1 // \n    }\n  }\n```\nthis.statethis.statereactsetStaterender\n\n#### propstate\n\n* propstate\n* propstate\n* propstate\n\npropsreactpropsprops\n\n### prop\n\n\n\n<img width=\"600\" src=\"2017-06-12/01.jpeg\" title=\"\"/>\n\nprop\n\nCounterupdateCountthis.props.onUpdate\n``` javascript\n  onClickIncrementButton() {\n    this.updateCount(true);\n  }\n\n  onClickDecrementButton() {\n    this.updateCount(false);\n  }\n\n  updateCount(isIncrement) {\n    const previousValue = this.state.count;\n    const newValue = isIncrement ? previousValue + 1 : previousValue - 1;\n\n    this.setState({count: newValue})\n    this.props.onUpdate(newValue, previousValue)\n  }\n```\n\n\n\n``` javascript\n  Counter.propTypes = {\n    caption: PropTypes.string.isRequired,\n    initValue: PropTypes.number,\n    onUpdate: PropTypes.func\n  };\n\n  Counter.defaultProps = {\n    initValue: 0,\n    onUpdate: f => f //\n  };\n```\n\nrenderonCounterUpdateonUpdateonUpdate\n\n``` javascript\n  onCounterUpdate(newValue, previousValue) {\n    const valueChange = newValue - previousValue;\n    this.setState({ sum: this.state.sum + valueChange});\n  }\n  render() {\n    return (\n      <div style={style}>\n        <Counter onUpdate={this.onCounterUpdate} caption=\"First\" />\n        <Counter onUpdate={this.onCounterUpdate} caption=\"Second\" initValue={this.initValues[1]} />\n        <Counter onUpdate={this.onCounterUpdate} caption=\"Third\" initValue={this.initValues[2]} />\n        <hr/>\n        <div>Total Count: {this.state.sum}</div>\n      </div>\n    );\n  }\n```\n\n### prop\n\nupdateupdatebug\n\n\n<img width=\"300\" src=\"2017-06-12/02.jpeg\" title=\"\"/>\n\n<img width=\"300\" src=\"2017-06-12/03.jpeg\" title=\"\"/>\n\npropReduxRedux\n\n### react\n\n\n* \n* \n* DOM\n\n#### \n\n(es6)\n\n* constructor\n* defaultProps\n* componentWillMount\n* render\n* componentDidMount\n\n##### constructor\n\nes6React\n* statestate\n* this\n\n\n``` javascript\nconstructor(props) {\n    super(props);\n    this.onClickIncrementButton = this.onClickIncrementButton.bind(this);\n    this.onClickDecrementButton = this.onClickDecrementButton.bind(this);\n  }\n```\n\n##### defaultProps\n\nprops\n``` javascript\nCounter.defaultProps = {\n  initValue: 0,\n  onUpdate: f => f //\n};\n```\n\n##### render\n\nJSXReactJSXnullfalseReactDOM\n\n>render\n\n##### componentWillMountcomponentDidMount\n\ncomponentWillMountrenderDOMthis.setStatecomponentWillMount\n\ncomponentDidMountrenderDOMDOMrenderDOMDOMcomponentDidMountDOM\n\n<img width=\"700\" src=\"2017-06-12/04.jpeg\" title=\"DOM\"/>\n\n#### \n* componentWillReceiveProps\n* shouldComponentUpdate\n* componentWillUpdate\n* render\n* componentDidUpdate\n\n##### componentWillReceiveProps\npropsstaterenderrenderpropscomponentWillReceiveProps\n\nCounter\n``` javascript\ncomponentWillReceiveProps(nextProps) {\n    console.log('enter componentWillReceiveProps ' + this.props.caption)\n  }\n```\n\nControlPanel\n``` javascript\nrender() {\n    console.log('enter ControlPanel render');\n    return (\n      <div style={style}>\n        <Counter onUpdate={this.onCounterUpdate} caption=\"First\" />\n        <Counter onUpdate={this.onCounterUpdate} caption=\"Second\" initValue={this.initValues[1]} />\n        <Counter onUpdate={this.onCounterUpdate} caption=\"Third\" initValue={this.initValues[2]} />\n        <button onClick={ () => this.forceUpdate() }>\n          Click me to re-render!\n        </button>\n        <hr/>\n        <div>Total Count: {this.state.sum}</div>\n      </div>\n    );\n```\nControlPanelrendercomponentWillReceivePropsprops\n<img width=\"700\" src=\"2017-06-12/05.jpeg\" title=\"\"/>\n\nnextPropsnextPropsthis.propsthis.setState\n\n##### shouldComponentUpdate\n\nnextProps, nextStaterenderreacttrue\nCounter\n``` javascript\nshouldComponentUpdate(nextProps, nextState) {\n    return (nextProps.caption !== this.props.caption) ||\n           (nextState.count !== this.state.count);\n  }\n```\nrender\n<img width=\"700\" src=\"2017-06-12/05.jpeg\" title=\"\"/>\n\n##### componentWillUpdatecomponentDidUpdate\n\nshouldComponentUpdatetruecomponentWillUpdaterendercomponentDidUpdate\n\n#### \n\nDOMReactDOMcomponentDidMountjsDOMDOM\n\nReactpropReduxprophttps://github.com/wqzwh/react-redux-demo/tree/master/src/demo/01 \n\n\n\n\n\n\n\n\n","source":"_posts/2017-06-12.md","raw":"---\ntitle: React--React\ncomments: true\ntoc: true\ndate: 2017-06-12 21:09:11\ntags: \n    - 'javascript'\n    - 'react'\n---\n\n### \n\n\n\n<b></b><b></b>\n\n<b>:</b>htmlcssjsreactcssjshtml\n\n<b>:</b>\n\n<!-- more -->\n\n### react\n\nreact<b>prop</b><b>state</b>propstatereactpropstate\n\n``` javascript\n// \nclass Counter extends Component {\n  constructor(props) {\n    // superthis.props\n    super(props);\n    //state\n    this.state = {\n      text: 1\n    }\n  }\n  render() {\n    const {caption} = this.props; //this.propscaption\n    return (\n      <div className=\"App\">\n        {this.state.text}\n      </div>\n    );\n  }\n}\n// \nclass ControlPanel extends Component {\n  render() {\n    console.log('enter ControlPanel render');\n    return (\n      <div style={style}>\n        <Counter caption=\"First\"/>\n      </div>\n    );\n  }\n};\n```\n\n#### Reactprop\n\npropprop\n``` javascript\n//\nconstructor(props) {\n    // superthis.props\n    super(props);\n    //state\n    this.state = {\n      text: 1\n    }\n  }\n\n//render  \nreturn (\n    <Counter caption=\"First\"/>\n);\n```\n\nsuperReact.Componentthis.propsthisrender\n\n#### propTypes\n\npropTypesproppropTypes\n\n``` javascript\nCounter.propTypes = {\n  caption:PropTypes.string.isRequired,\n  initValue:PropTypes.number\n}\n```\ncaptionstringinitValuenumberisRequiredcaptioninitValue\n\npropTypesbabel-react-optimizepropTypes\n\n#### Reactstate\n\nstatestatestringnumber\n\n``` javascript\nconstructor(props) {\n    this.state = {\n      text: 1, // state\n      num:props.num || 1 // \n    }\n  }\n```\nthis.statethis.statereactsetStaterender\n\n#### propstate\n\n* propstate\n* propstate\n* propstate\n\npropsreactpropsprops\n\n### prop\n\n\n\n<img width=\"600\" src=\"2017-06-12/01.jpeg\" title=\"\"/>\n\nprop\n\nCounterupdateCountthis.props.onUpdate\n``` javascript\n  onClickIncrementButton() {\n    this.updateCount(true);\n  }\n\n  onClickDecrementButton() {\n    this.updateCount(false);\n  }\n\n  updateCount(isIncrement) {\n    const previousValue = this.state.count;\n    const newValue = isIncrement ? previousValue + 1 : previousValue - 1;\n\n    this.setState({count: newValue})\n    this.props.onUpdate(newValue, previousValue)\n  }\n```\n\n\n\n``` javascript\n  Counter.propTypes = {\n    caption: PropTypes.string.isRequired,\n    initValue: PropTypes.number,\n    onUpdate: PropTypes.func\n  };\n\n  Counter.defaultProps = {\n    initValue: 0,\n    onUpdate: f => f //\n  };\n```\n\nrenderonCounterUpdateonUpdateonUpdate\n\n``` javascript\n  onCounterUpdate(newValue, previousValue) {\n    const valueChange = newValue - previousValue;\n    this.setState({ sum: this.state.sum + valueChange});\n  }\n  render() {\n    return (\n      <div style={style}>\n        <Counter onUpdate={this.onCounterUpdate} caption=\"First\" />\n        <Counter onUpdate={this.onCounterUpdate} caption=\"Second\" initValue={this.initValues[1]} />\n        <Counter onUpdate={this.onCounterUpdate} caption=\"Third\" initValue={this.initValues[2]} />\n        <hr/>\n        <div>Total Count: {this.state.sum}</div>\n      </div>\n    );\n  }\n```\n\n### prop\n\nupdateupdatebug\n\n\n<img width=\"300\" src=\"2017-06-12/02.jpeg\" title=\"\"/>\n\n<img width=\"300\" src=\"2017-06-12/03.jpeg\" title=\"\"/>\n\npropReduxRedux\n\n### react\n\n\n* \n* \n* DOM\n\n#### \n\n(es6)\n\n* constructor\n* defaultProps\n* componentWillMount\n* render\n* componentDidMount\n\n##### constructor\n\nes6React\n* statestate\n* this\n\n\n``` javascript\nconstructor(props) {\n    super(props);\n    this.onClickIncrementButton = this.onClickIncrementButton.bind(this);\n    this.onClickDecrementButton = this.onClickDecrementButton.bind(this);\n  }\n```\n\n##### defaultProps\n\nprops\n``` javascript\nCounter.defaultProps = {\n  initValue: 0,\n  onUpdate: f => f //\n};\n```\n\n##### render\n\nJSXReactJSXnullfalseReactDOM\n\n>render\n\n##### componentWillMountcomponentDidMount\n\ncomponentWillMountrenderDOMthis.setStatecomponentWillMount\n\ncomponentDidMountrenderDOMDOMrenderDOMDOMcomponentDidMountDOM\n\n<img width=\"700\" src=\"2017-06-12/04.jpeg\" title=\"DOM\"/>\n\n#### \n* componentWillReceiveProps\n* shouldComponentUpdate\n* componentWillUpdate\n* render\n* componentDidUpdate\n\n##### componentWillReceiveProps\npropsstaterenderrenderpropscomponentWillReceiveProps\n\nCounter\n``` javascript\ncomponentWillReceiveProps(nextProps) {\n    console.log('enter componentWillReceiveProps ' + this.props.caption)\n  }\n```\n\nControlPanel\n``` javascript\nrender() {\n    console.log('enter ControlPanel render');\n    return (\n      <div style={style}>\n        <Counter onUpdate={this.onCounterUpdate} caption=\"First\" />\n        <Counter onUpdate={this.onCounterUpdate} caption=\"Second\" initValue={this.initValues[1]} />\n        <Counter onUpdate={this.onCounterUpdate} caption=\"Third\" initValue={this.initValues[2]} />\n        <button onClick={ () => this.forceUpdate() }>\n          Click me to re-render!\n        </button>\n        <hr/>\n        <div>Total Count: {this.state.sum}</div>\n      </div>\n    );\n```\nControlPanelrendercomponentWillReceivePropsprops\n<img width=\"700\" src=\"2017-06-12/05.jpeg\" title=\"\"/>\n\nnextPropsnextPropsthis.propsthis.setState\n\n##### shouldComponentUpdate\n\nnextProps, nextStaterenderreacttrue\nCounter\n``` javascript\nshouldComponentUpdate(nextProps, nextState) {\n    return (nextProps.caption !== this.props.caption) ||\n           (nextState.count !== this.state.count);\n  }\n```\nrender\n<img width=\"700\" src=\"2017-06-12/05.jpeg\" title=\"\"/>\n\n##### componentWillUpdatecomponentDidUpdate\n\nshouldComponentUpdatetruecomponentWillUpdaterendercomponentDidUpdate\n\n#### \n\nDOMReactDOMcomponentDidMountjsDOMDOM\n\nReactpropReduxprophttps://github.com/wqzwh/react-redux-demo/tree/master/src/demo/01 \n\n\n\n\n\n\n\n\n","slug":"2017-06-12","published":1,"updated":"2018-02-10T09:04:39.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vap000ifdldf16u32iu","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><b></b><b></b></p>\n<p><b>:</b>htmlcssjsreactcssjshtml</p>\n<p><b>:</b></p>\n<a id=\"more\"></a>\n<h3 id=\"react\"><a href=\"#react\" class=\"headerlink\" title=\"react\"></a>react</h3><p>react<b>prop</b><b>state</b>propstatereactpropstate</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Counter</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(props) &#123;</div><div class=\"line\">    <span class=\"comment\">// superthis.props</span></div><div class=\"line\">    <span class=\"keyword\">super</span>(props);</div><div class=\"line\">    <span class=\"comment\">//state</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.state = &#123;</div><div class=\"line\">      text: <span class=\"number\">1</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> &#123;caption&#125; = <span class=\"keyword\">this</span>.props; <span class=\"comment\">//this.propscaption</span></div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;div className=<span class=\"string\">\"App\"</span>&gt;</div><div class=\"line\">        &#123;<span class=\"keyword\">this</span>.state.text&#125;</div><div class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\">    );</span></div><div class=\"line\"><span class=\"regexp\">  &#125;</span></div><div class=\"line\"><span class=\"regexp\">&#125;</span></div><div class=\"line\"><span class=\"regexp\">/</span><span class=\"regexp\">/ </span></div><div class=\"line\"><span class=\"regexp\">class ControlPanel extends Component &#123;</span></div><div class=\"line\"><span class=\"regexp\">  render() &#123;</span></div><div class=\"line\"><span class=\"regexp\">    console.log('enter ControlPanel render');</span></div><div class=\"line\"><span class=\"regexp\">    return (</span></div><div class=\"line\"><span class=\"regexp\">      &lt;div style=&#123;style&#125;&gt;</span></div><div class=\"line\"><span class=\"regexp\">        &lt;Counter caption=\"First\"/</span>&gt;</div><div class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\">    );</span></div><div class=\"line\"><span class=\"regexp\">  &#125;</span></div><div class=\"line\"><span class=\"regexp\">&#125;;</span></div></pre></td></tr></table></figure>\n<h4 id=\"Reactprop\"><a href=\"#Reactprop\" class=\"headerlink\" title=\"Reactprop\"></a>Reactprop</h4><p>propprop<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">constructor</span>(props) &#123;</div><div class=\"line\">    <span class=\"comment\">// superthis.props</span></div><div class=\"line\">    <span class=\"keyword\">super</span>(props);</div><div class=\"line\">    <span class=\"comment\">//state</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.state = &#123;</div><div class=\"line\">      text: <span class=\"number\">1</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//render  </span></div><div class=\"line\"><span class=\"keyword\">return</span> (</div><div class=\"line\">    &lt;Counter caption=<span class=\"string\">\"First\"</span>/&gt;</div><div class=\"line\">);</div></pre></td></tr></table></figure></p>\n<p>superReact.Componentthis.propsthisrender</p>\n<h4 id=\"propTypes\"><a href=\"#propTypes\" class=\"headerlink\" title=\"propTypes\"></a>propTypes</h4><p>propTypesproppropTypes</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Counter.propTypes = &#123;</div><div class=\"line\">  caption:PropTypes.string.isRequired,</div><div class=\"line\">  initValue:PropTypes.number</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>captionstringinitValuenumberisRequiredcaptioninitValue</p>\n<p>propTypesbabel-react-optimizepropTypes</p>\n<h4 id=\"Reactstate\"><a href=\"#Reactstate\" class=\"headerlink\" title=\"Reactstate\"></a>Reactstate</h4><p>statestatestringnumber</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">constructor</span>(props) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.state = &#123;</div><div class=\"line\">      text: <span class=\"number\">1</span>, <span class=\"comment\">// state</span></div><div class=\"line\">      num:props.num || <span class=\"number\">1</span> <span class=\"comment\">// </span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<p>this.statethis.statereactsetStaterender</p>\n<h4 id=\"propstate\"><a href=\"#propstate\" class=\"headerlink\" title=\"propstate\"></a>propstate</h4><ul>\n<li>propstate</li>\n<li>propstate</li>\n<li>propstate</li>\n</ul>\n<p>propsreactpropsprops</p>\n<h3 id=\"prop\"><a href=\"#prop\" class=\"headerlink\" title=\"prop\"></a>prop</h3><p></p>\n<p><img width=\"600\" src=\"/2017-06-12/01.jpeg\" title=\"\"></p>\n<p>prop</p>\n<p>CounterupdateCountthis.props.onUpdate<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">onClickIncrementButton() &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.updateCount(<span class=\"literal\">true</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">onClickDecrementButton() &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.updateCount(<span class=\"literal\">false</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">updateCount(isIncrement) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> previousValue = <span class=\"keyword\">this</span>.state.count;</div><div class=\"line\">  <span class=\"keyword\">const</span> newValue = isIncrement ? previousValue + <span class=\"number\">1</span> : previousValue - <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.setState(&#123;<span class=\"attr\">count</span>: newValue&#125;)</div><div class=\"line\">  <span class=\"keyword\">this</span>.props.onUpdate(newValue, previousValue)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Counter.propTypes = &#123;</div><div class=\"line\">  caption: PropTypes.string.isRequired,</div><div class=\"line\">  initValue: PropTypes.number,</div><div class=\"line\">  onUpdate: PropTypes.func</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">Counter.defaultProps = &#123;</div><div class=\"line\">  initValue: <span class=\"number\">0</span>,</div><div class=\"line\">  onUpdate: <span class=\"function\"><span class=\"params\">f</span> =&gt;</span> f <span class=\"comment\">//</span></div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p>renderonCounterUpdateonUpdateonUpdate</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">onCounterUpdate(newValue, previousValue) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> valueChange = newValue - previousValue;</div><div class=\"line\">  <span class=\"keyword\">this</span>.setState(&#123; <span class=\"attr\">sum</span>: <span class=\"keyword\">this</span>.state.sum + valueChange&#125;);</div><div class=\"line\">&#125;</div><div class=\"line\">render() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> (</div><div class=\"line\">    &lt;div style=&#123;style&#125;&gt;</div><div class=\"line\">      &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"First\"</span> /&gt;</div><div class=\"line\">      &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"Second\"</span> initValue=&#123;<span class=\"keyword\">this</span>.initValues[<span class=\"number\">1</span>]&#125; /&gt;</div><div class=\"line\">      &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"Third\"</span> initValue=&#123;<span class=\"keyword\">this</span>.initValues[<span class=\"number\">2</span>]&#125; /&gt;</div><div class=\"line\">      &lt;hr/&gt;</div><div class=\"line\">      &lt;div&gt;Total Count: &#123;<span class=\"keyword\">this</span>.state.sum&#125;&lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</div><div class=\"line\">  );</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"prop\"><a href=\"#prop\" class=\"headerlink\" title=\"prop\"></a>prop</h3><p>updateupdatebug</p>\n<p><br><img width=\"300\" src=\"/2017-06-12/02.jpeg\" title=\"\"><br><br><img width=\"300\" src=\"/2017-06-12/03.jpeg\" title=\"\"></p>\n<p>propReduxRedux</p>\n<h3 id=\"react\"><a href=\"#react\" class=\"headerlink\" title=\"react\"></a>react</h3><p></p>\n<ul>\n<li></li>\n<li></li>\n<li>DOM</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>(es6)</p>\n<ul>\n<li>constructor</li>\n<li>defaultProps</li>\n<li>componentWillMount</li>\n<li>render</li>\n<li>componentDidMount</li>\n</ul>\n<h5 id=\"constructor-NaN\"><a href=\"#constructor-NaN\" class=\"headerlink\" title=\"constructor\"></a>constructor</h5><p>es6React</p>\n<ul>\n<li>statestate</li>\n<li>this</li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">constructor</span>(props) &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(props);</div><div class=\"line\">    <span class=\"keyword\">this</span>.onClickIncrementButton = <span class=\"keyword\">this</span>.onClickIncrementButton.bind(<span class=\"keyword\">this</span>);</div><div class=\"line\">    <span class=\"keyword\">this</span>.onClickDecrementButton = <span class=\"keyword\">this</span>.onClickDecrementButton.bind(<span class=\"keyword\">this</span>);</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<h5 id=\"defaultProps\"><a href=\"#defaultProps\" class=\"headerlink\" title=\"defaultProps\"></a>defaultProps</h5><p>props<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Counter.defaultProps = &#123;</div><div class=\"line\">  initValue: <span class=\"number\">0</span>,</div><div class=\"line\">  onUpdate: <span class=\"function\"><span class=\"params\">f</span> =&gt;</span> f <span class=\"comment\">//</span></div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure></p>\n<h5 id=\"render\"><a href=\"#render\" class=\"headerlink\" title=\"render\"></a>render</h5><p>JSXReactJSXnullfalseReactDOM</p>\n<blockquote>\n<p>render</p>\n</blockquote>\n<h5 id=\"componentWillMountcomponentDidMount\"><a href=\"#componentWillMountcomponentDidMount\" class=\"headerlink\" title=\"componentWillMountcomponentDidMount\"></a>componentWillMountcomponentDidMount</h5><p>componentWillMountrenderDOMthis.setStatecomponentWillMount</p>\n<p>componentDidMountrenderDOMDOMrenderDOMDOMcomponentDidMountDOM</p>\n<p><img width=\"700\" src=\"/2017-06-12/04.jpeg\" title=\"DOM\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>componentWillReceiveProps</li>\n<li>shouldComponentUpdate</li>\n<li>componentWillUpdate</li>\n<li>render</li>\n<li>componentDidUpdate</li>\n</ul>\n<h5 id=\"componentWillReceiveProps\"><a href=\"#componentWillReceiveProps\" class=\"headerlink\" title=\"componentWillReceiveProps\"></a>componentWillReceiveProps</h5><p>propsstaterenderrenderpropscomponentWillReceiveProps</p>\n<p>Counter<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">componentWillReceiveProps(nextProps) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'enter componentWillReceiveProps '</span> + <span class=\"keyword\">this</span>.props.caption)</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>ControlPanel<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">render() &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'enter ControlPanel render'</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;div style=&#123;style&#125;&gt;</div><div class=\"line\">        &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"First\"</span> /&gt;</div><div class=\"line\">        &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"Second\"</span> initValue=&#123;<span class=\"keyword\">this</span>.initValues[<span class=\"number\">1</span>]&#125; /&gt;</div><div class=\"line\">        &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"Third\"</span> initValue=&#123;<span class=\"keyword\">this</span>.initValues[<span class=\"number\">2</span>]&#125; /&gt;</div><div class=\"line\">        &lt;button onClick=&#123; () =&gt; <span class=\"keyword\">this</span>.forceUpdate() &#125;&gt;</div><div class=\"line\">          Click me to re-render!</div><div class=\"line\">        &lt;<span class=\"regexp\">/button&gt;</span></div><div class=\"line\"><span class=\"regexp\">        &lt;hr/</span>&gt;</div><div class=\"line\">        &lt;div&gt;Total Count: &#123;<span class=\"keyword\">this</span>.state.sum&#125;&lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\">      &lt;/</span>div&gt;</div><div class=\"line\">    );</div></pre></td></tr></table></figure></p>\n<p>ControlPanelrendercomponentWillReceivePropsprops<br><img width=\"700\" src=\"/2017-06-12/05.jpeg\" title=\"\"></p>\n<p>nextPropsnextPropsthis.propsthis.setState</p>\n<h5 id=\"shouldComponentUpdate\"><a href=\"#shouldComponentUpdate\" class=\"headerlink\" title=\"shouldComponentUpdate\"></a>shouldComponentUpdate</h5><p>nextProps, nextStaterenderreacttrue<br>Counter<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">shouldComponentUpdate(nextProps, nextState) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (nextProps.caption !== <span class=\"keyword\">this</span>.props.caption) ||</div><div class=\"line\">           (nextState.count !== <span class=\"keyword\">this</span>.state.count);</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>render<br><img width=\"700\" src=\"/2017-06-12/05.jpeg\" title=\"\"></p>\n<h5 id=\"componentWillUpdatecomponentDidUpdate\"><a href=\"#componentWillUpdatecomponentDidUpdate\" class=\"headerlink\" title=\"componentWillUpdatecomponentDidUpdate\"></a>componentWillUpdatecomponentDidUpdate</h5><p>shouldComponentUpdatetruecomponentWillUpdaterendercomponentDidUpdate</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>DOMReactDOMcomponentDidMountjsDOMDOM</p>\n<p>ReactpropReduxprop<a href=\"https://github.com/wqzwh/react-redux-demo/tree/master/src/demo/01\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/react-redux-demo/tree/master/src/demo/01</a> </p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><b></b><b></b></p>\n<p><b>:</b>htmlcssjsreactcssjshtml</p>\n<p><b>:</b></p>","more":"<h3 id=\"react\"><a href=\"#react\" class=\"headerlink\" title=\"react\"></a>react</h3><p>react<b>prop</b><b>state</b>propstatereactpropstate</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Counter</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(props) &#123;</div><div class=\"line\">    <span class=\"comment\">// superthis.props</span></div><div class=\"line\">    <span class=\"keyword\">super</span>(props);</div><div class=\"line\">    <span class=\"comment\">//state</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.state = &#123;</div><div class=\"line\">      text: <span class=\"number\">1</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> &#123;caption&#125; = <span class=\"keyword\">this</span>.props; <span class=\"comment\">//this.propscaption</span></div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;div className=<span class=\"string\">\"App\"</span>&gt;</div><div class=\"line\">        &#123;<span class=\"keyword\">this</span>.state.text&#125;</div><div class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\">    );</span></div><div class=\"line\"><span class=\"regexp\">  &#125;</span></div><div class=\"line\"><span class=\"regexp\">&#125;</span></div><div class=\"line\"><span class=\"regexp\">/</span><span class=\"regexp\">/ </span></div><div class=\"line\"><span class=\"regexp\">class ControlPanel extends Component &#123;</span></div><div class=\"line\"><span class=\"regexp\">  render() &#123;</span></div><div class=\"line\"><span class=\"regexp\">    console.log('enter ControlPanel render');</span></div><div class=\"line\"><span class=\"regexp\">    return (</span></div><div class=\"line\"><span class=\"regexp\">      &lt;div style=&#123;style&#125;&gt;</span></div><div class=\"line\"><span class=\"regexp\">        &lt;Counter caption=\"First\"/</span>&gt;</div><div class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\">    );</span></div><div class=\"line\"><span class=\"regexp\">  &#125;</span></div><div class=\"line\"><span class=\"regexp\">&#125;;</span></div></pre></td></tr></table></figure>\n<h4 id=\"Reactprop\"><a href=\"#Reactprop\" class=\"headerlink\" title=\"Reactprop\"></a>Reactprop</h4><p>propprop<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">constructor</span>(props) &#123;</div><div class=\"line\">    <span class=\"comment\">// superthis.props</span></div><div class=\"line\">    <span class=\"keyword\">super</span>(props);</div><div class=\"line\">    <span class=\"comment\">//state</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.state = &#123;</div><div class=\"line\">      text: <span class=\"number\">1</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//render  </span></div><div class=\"line\"><span class=\"keyword\">return</span> (</div><div class=\"line\">    &lt;Counter caption=<span class=\"string\">\"First\"</span>/&gt;</div><div class=\"line\">);</div></pre></td></tr></table></figure></p>\n<p>superReact.Componentthis.propsthisrender</p>\n<h4 id=\"propTypes\"><a href=\"#propTypes\" class=\"headerlink\" title=\"propTypes\"></a>propTypes</h4><p>propTypesproppropTypes</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Counter.propTypes = &#123;</div><div class=\"line\">  caption:PropTypes.string.isRequired,</div><div class=\"line\">  initValue:PropTypes.number</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>captionstringinitValuenumberisRequiredcaptioninitValue</p>\n<p>propTypesbabel-react-optimizepropTypes</p>\n<h4 id=\"Reactstate\"><a href=\"#Reactstate\" class=\"headerlink\" title=\"Reactstate\"></a>Reactstate</h4><p>statestatestringnumber</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">constructor</span>(props) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.state = &#123;</div><div class=\"line\">      text: <span class=\"number\">1</span>, <span class=\"comment\">// state</span></div><div class=\"line\">      num:props.num || <span class=\"number\">1</span> <span class=\"comment\">// </span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<p>this.statethis.statereactsetStaterender</p>\n<h4 id=\"propstate\"><a href=\"#propstate\" class=\"headerlink\" title=\"propstate\"></a>propstate</h4><ul>\n<li>propstate</li>\n<li>propstate</li>\n<li>propstate</li>\n</ul>\n<p>propsreactpropsprops</p>\n<h3 id=\"prop\"><a href=\"#prop\" class=\"headerlink\" title=\"prop\"></a>prop</h3><p></p>\n<p><img width=\"600\" src=\"/2017-06-12/01.jpeg\" title=\"\"></p>\n<p>prop</p>\n<p>CounterupdateCountthis.props.onUpdate<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">onClickIncrementButton() &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.updateCount(<span class=\"literal\">true</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">onClickDecrementButton() &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.updateCount(<span class=\"literal\">false</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">updateCount(isIncrement) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> previousValue = <span class=\"keyword\">this</span>.state.count;</div><div class=\"line\">  <span class=\"keyword\">const</span> newValue = isIncrement ? previousValue + <span class=\"number\">1</span> : previousValue - <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.setState(&#123;<span class=\"attr\">count</span>: newValue&#125;)</div><div class=\"line\">  <span class=\"keyword\">this</span>.props.onUpdate(newValue, previousValue)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Counter.propTypes = &#123;</div><div class=\"line\">  caption: PropTypes.string.isRequired,</div><div class=\"line\">  initValue: PropTypes.number,</div><div class=\"line\">  onUpdate: PropTypes.func</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">Counter.defaultProps = &#123;</div><div class=\"line\">  initValue: <span class=\"number\">0</span>,</div><div class=\"line\">  onUpdate: <span class=\"function\"><span class=\"params\">f</span> =&gt;</span> f <span class=\"comment\">//</span></div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p>renderonCounterUpdateonUpdateonUpdate</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">onCounterUpdate(newValue, previousValue) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> valueChange = newValue - previousValue;</div><div class=\"line\">  <span class=\"keyword\">this</span>.setState(&#123; <span class=\"attr\">sum</span>: <span class=\"keyword\">this</span>.state.sum + valueChange&#125;);</div><div class=\"line\">&#125;</div><div class=\"line\">render() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> (</div><div class=\"line\">    &lt;div style=&#123;style&#125;&gt;</div><div class=\"line\">      &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"First\"</span> /&gt;</div><div class=\"line\">      &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"Second\"</span> initValue=&#123;<span class=\"keyword\">this</span>.initValues[<span class=\"number\">1</span>]&#125; /&gt;</div><div class=\"line\">      &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"Third\"</span> initValue=&#123;<span class=\"keyword\">this</span>.initValues[<span class=\"number\">2</span>]&#125; /&gt;</div><div class=\"line\">      &lt;hr/&gt;</div><div class=\"line\">      &lt;div&gt;Total Count: &#123;<span class=\"keyword\">this</span>.state.sum&#125;&lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</div><div class=\"line\">  );</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"prop\"><a href=\"#prop\" class=\"headerlink\" title=\"prop\"></a>prop</h3><p>updateupdatebug</p>\n<p><br><img width=\"300\" src=\"/2017-06-12/02.jpeg\" title=\"\"><br><br><img width=\"300\" src=\"/2017-06-12/03.jpeg\" title=\"\"></p>\n<p>propReduxRedux</p>\n<h3 id=\"react\"><a href=\"#react\" class=\"headerlink\" title=\"react\"></a>react</h3><p></p>\n<ul>\n<li></li>\n<li></li>\n<li>DOM</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>(es6)</p>\n<ul>\n<li>constructor</li>\n<li>defaultProps</li>\n<li>componentWillMount</li>\n<li>render</li>\n<li>componentDidMount</li>\n</ul>\n<h5 id=\"constructor-NaN\"><a href=\"#constructor-NaN\" class=\"headerlink\" title=\"constructor\"></a>constructor</h5><p>es6React</p>\n<ul>\n<li>statestate</li>\n<li>this</li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">constructor</span>(props) &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(props);</div><div class=\"line\">    <span class=\"keyword\">this</span>.onClickIncrementButton = <span class=\"keyword\">this</span>.onClickIncrementButton.bind(<span class=\"keyword\">this</span>);</div><div class=\"line\">    <span class=\"keyword\">this</span>.onClickDecrementButton = <span class=\"keyword\">this</span>.onClickDecrementButton.bind(<span class=\"keyword\">this</span>);</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<h5 id=\"defaultProps\"><a href=\"#defaultProps\" class=\"headerlink\" title=\"defaultProps\"></a>defaultProps</h5><p>props<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Counter.defaultProps = &#123;</div><div class=\"line\">  initValue: <span class=\"number\">0</span>,</div><div class=\"line\">  onUpdate: <span class=\"function\"><span class=\"params\">f</span> =&gt;</span> f <span class=\"comment\">//</span></div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure></p>\n<h5 id=\"render\"><a href=\"#render\" class=\"headerlink\" title=\"render\"></a>render</h5><p>JSXReactJSXnullfalseReactDOM</p>\n<blockquote>\n<p>render</p>\n</blockquote>\n<h5 id=\"componentWillMountcomponentDidMount\"><a href=\"#componentWillMountcomponentDidMount\" class=\"headerlink\" title=\"componentWillMountcomponentDidMount\"></a>componentWillMountcomponentDidMount</h5><p>componentWillMountrenderDOMthis.setStatecomponentWillMount</p>\n<p>componentDidMountrenderDOMDOMrenderDOMDOMcomponentDidMountDOM</p>\n<p><img width=\"700\" src=\"/2017-06-12/04.jpeg\" title=\"DOM\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>componentWillReceiveProps</li>\n<li>shouldComponentUpdate</li>\n<li>componentWillUpdate</li>\n<li>render</li>\n<li>componentDidUpdate</li>\n</ul>\n<h5 id=\"componentWillReceiveProps\"><a href=\"#componentWillReceiveProps\" class=\"headerlink\" title=\"componentWillReceiveProps\"></a>componentWillReceiveProps</h5><p>propsstaterenderrenderpropscomponentWillReceiveProps</p>\n<p>Counter<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">componentWillReceiveProps(nextProps) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'enter componentWillReceiveProps '</span> + <span class=\"keyword\">this</span>.props.caption)</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>ControlPanel<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">render() &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'enter ControlPanel render'</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      &lt;div style=&#123;style&#125;&gt;</div><div class=\"line\">        &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"First\"</span> /&gt;</div><div class=\"line\">        &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"Second\"</span> initValue=&#123;<span class=\"keyword\">this</span>.initValues[<span class=\"number\">1</span>]&#125; /&gt;</div><div class=\"line\">        &lt;Counter onUpdate=&#123;<span class=\"keyword\">this</span>.onCounterUpdate&#125; caption=<span class=\"string\">\"Third\"</span> initValue=&#123;<span class=\"keyword\">this</span>.initValues[<span class=\"number\">2</span>]&#125; /&gt;</div><div class=\"line\">        &lt;button onClick=&#123; () =&gt; <span class=\"keyword\">this</span>.forceUpdate() &#125;&gt;</div><div class=\"line\">          Click me to re-render!</div><div class=\"line\">        &lt;<span class=\"regexp\">/button&gt;</span></div><div class=\"line\"><span class=\"regexp\">        &lt;hr/</span>&gt;</div><div class=\"line\">        &lt;div&gt;Total Count: &#123;<span class=\"keyword\">this</span>.state.sum&#125;&lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\">      &lt;/</span>div&gt;</div><div class=\"line\">    );</div></pre></td></tr></table></figure></p>\n<p>ControlPanelrendercomponentWillReceivePropsprops<br><img width=\"700\" src=\"/2017-06-12/05.jpeg\" title=\"\"></p>\n<p>nextPropsnextPropsthis.propsthis.setState</p>\n<h5 id=\"shouldComponentUpdate\"><a href=\"#shouldComponentUpdate\" class=\"headerlink\" title=\"shouldComponentUpdate\"></a>shouldComponentUpdate</h5><p>nextProps, nextStaterenderreacttrue<br>Counter<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">shouldComponentUpdate(nextProps, nextState) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (nextProps.caption !== <span class=\"keyword\">this</span>.props.caption) ||</div><div class=\"line\">           (nextState.count !== <span class=\"keyword\">this</span>.state.count);</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>render<br><img width=\"700\" src=\"/2017-06-12/05.jpeg\" title=\"\"></p>\n<h5 id=\"componentWillUpdatecomponentDidUpdate\"><a href=\"#componentWillUpdatecomponentDidUpdate\" class=\"headerlink\" title=\"componentWillUpdatecomponentDidUpdate\"></a>componentWillUpdatecomponentDidUpdate</h5><p>shouldComponentUpdatetruecomponentWillUpdaterendercomponentDidUpdate</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>DOMReactDOMcomponentDidMountjsDOMDOM</p>\n<p>ReactpropReduxprop<a href=\"https://github.com/wqzwh/react-redux-demo/tree/master/src/demo/01\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/react-redux-demo/tree/master/src/demo/01</a> </p>"},{"title":"WebHTTP","comments":1,"toc":true,"date":"2018-09-23T08:30:57.000Z","_content":"\n## \n\nHTTPHTTP\n<img width=\"800\" src=\"/2018-09-23-HTTP/http.png\"/>\n\nhttp`http`http`request``response``DOMContentLoad``load``http``http`\n\n<!-- more -->\n\n> `domContentLoadedEventEnd`DOMContentLoadedjQuerydomready`load``onload`\n\n## HTTP\n\n### \n\n`JSONP``CORS```\n\n`JSONP``src/href``JSONP``GET``url``JSONP`\n\n`CORS`ajaxie9+`CORS``Access-Control-Allow-Origin`\n\n\n\n<img width=\"800\" src=\"/2018-09-23-HTTP/ky.png\"/>\n\n> `JSONP``GET``url``GET``JSONP``CORS```\n\n`Access-Control-Allow-Origin`*`*`\n```js\n// node\nconst http = require('http')\nconst allowDomains = [\n    'http://www.a.com',\n    'http://www.b.com',\n    'http://www.c.com'\n]\nconst server = http.createServer((req, res) => {\n    let acao = ''\n    for(let i = 0, l = allowDomains.length; i < l; i++) {\n        if(allowDomains[i].indexOf(req.headers.host) > -1) {\n            acao = allowDomains[i]\n            break\n        }\n    }\n    res.writeHead(200, \n        {\n            'Access-Control-Allow-Origin': acao\n        }\n    )\n    res.end('Hello World\\n')\n}).listen(3001)\nconsole.log('server listen 3001')\n```\n\n### CORS\n\n* `GET``HEAD``POST`\n* Content-Type`text/plain``multipart/form-data``application/x-www-form-urlencoded`\n* HTTP`Accept``Accept-Language``Content-Language``Last-Event-ID`\n\n\n\n\n\n<img width=\"800\" src=\"/2018-09-23-HTTP/ky2.png\"/>\n\n```headers``headers`\n\n```js\n// \nconst http = require('http')\nconst server = http.createServer((req, res) => {\n    res.writeHead(200, \n        {\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'aa' // \n        }\n    )\n    res.end('Hello World\\n')\n}).listen(3001)\nconsole.log('server listen 3001')\n\n// \nconst http = require('http')\nconst fs = require('fs')\nconst server = http.createServer((req, res) => {\nconst html = fs.readFileSync('index.html', 'utf8')\n    res.writeHead(200, \n        {\n            'Content-Type': 'text/html' \n        }\n    )\n    res.end(html)\n}).listen(3000)\nconsole.log('server listen 3000')\n\n// index.html\nfetch('http://localhost:3001', {\n    method: 'post',\n    headers: {\n        aa:'123'\n    }\n}) \n```\n\n`post``headers``headers`\n\n> `Access-Control-Request-Method``PUT``DELETE` \n\n\n\n`Access-Control-Max-Age`\n\n## HTTPCache-Control\n\n`Cache-Control``no-cache`\n\n<img width=\"800\" src=\"/2018-09-23-HTTP/Cache-Control.png\"/>\n\n\n\n* `public`http\n* `private`\n* `no-cache` \n\n\n* `max-age=<seconds>` \n* `s-maxage=<seconds>` `max-age``Expires`\n* `max-stale[=<seconds>]` `max-age`\n\n\n* `must-revalidate` `max-age`\n* `proxy-revalidate` \n\n\n* `no-store` \n* `no-transform` \n\n[](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control)\n\n### \n\n* `Last-Modified``If-Modified-Since`\n* `Etag`md5hash`If-Match``If-None-Match`\n\n`Etag`\n```js\n// server.js\nconst http = require('http')\nconst fs = require('fs')\nconst server = http.createServer((req, res) => {\nconst url = req.url\nconst html = fs.readFileSync('index.html', 'utf8')\nconst etag = req.headers['if-none-match']\nif(url === '/') {\nres.writeHead(200, \n    {\n    'Content-Type': 'text/html',\n    'Cache-Control': 'max-age=2000, no-cache',\n    'Last-Modified': '123',\n    'Etag': '444'\n    }\n)\nres.end(html)\n}\nif(url === '/aa.js') {\nif(etag === '444') {\n    res.writeHead(304, \n    {\n        'Content-Type': 'text/javascript',\n        'Cache-Control': 'max-age=2000, no-cache',\n        'Last-Modified': '123',\n        'Etag': '444'\n    }\n    )\n    res.end('888888')\n} else {\n    res.writeHead(200, \n    {\n        'Content-Type': 'text/javascript',\n        'Cache-Control': 'max-age=2000, no-cache',\n        'Last-Modified': '123',\n        'Etag': '444'\n    }\n    )\n    res.end('1111111111')\n}\n}\n}).listen(3000)\nconsole.log('server listen 3000')\n```\n```html\n<!-- html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n<title>Document</title>\n</head>\n<body>\n<script src=\"/aa.js\"></script>\n</body>\n</html>\n```\n\n<img width=\"600\" src=\"/2018-09-23-HTTP/1.gif\"/>\n<img width=\"600\" src=\"/2018-09-23-HTTP/2.gif\"/>\n`etag === '444'``1111111111`\n\n### \n\n2\n\n1\n2\n<img width=\"800\" src=\"/2018-09-23-HTTP/page_3.png\"/>\n\n## HTTPcookie\n\n* `Set-Cookie``cookie``cookie`String/Array\n* `max-age``Expires`\n* `Secure``https`\n* `HttpOnly``document.cookie`\n* `domain=``cookie`\n\n\n<img width=\"800\" src=\"/2018-09-23-HTTP/page_4.png\"/>\n\n## HTTPkeep-alive\n\nweb`Connection: keep-alive``Connection: close``keep-alive``tcp`\n\n## HTTP\n\nweb\n* Accept \n* Accept-Encoding gzipdeflatebr\n* Accept-Language \n* User-Agent\n\n\n* Content-type \n* Content-Encoding  `Accept-Encoding` \n* Content-Language  `Accept-Language` \n\nweb`Content-type``form``Content-type:multipart/form-data`\n\n## HTTP\n\n`code``301``302`\n* `301```\n* `302`\n\n\n```js\n// 302\nconst http = require('http')\nconst fs = require('fs')\nconst server = http.createServer((req, res) => {\nconst url = req.url\nconst html = fs.readFileSync('index.html', 'utf8')\nconsole.log(url)\nif(url === '/') {\nres.writeHead(302, \n    {\n        Location: '/wq'\n    }\n)\nres.end('')\n}\nif(url === '/wq') {\nres.writeHead(200, \n    {\n        'Content-Type': 'text/html',\n    }\n)\nres.end(html)\n}\n    \n}).listen(3000)\nconsole.log('server listen 3000')\n```\n`301``302``301``302``console.log(url)``/  /wq``301``/wq``302``301`\n\n## HTTP\n\n`Content-Security-Policy`HTTP[](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP)\n\n\n```js\n//  ()\n'Content-Security-Policy': default-src 'self'\n\n//  (CSP)\n'Content-Security-Policy': default-src 'self' *.trusted.com\n\n// HTTPSonlinebanking.jumbobank.com\n'Content-Security-Policy': default-src https://onlinebanking.jumbobank.com\n\n// \n'Content-Security-Policy': connect-src http://baidu.com\n\n// report-uri\n'Content-Security-Policy': default-src 'self'; report-uri http://reportcollector.example.com/collector.cgi\n```\n\n## HTTPHTTP2\n\n`HTTP/2`HTTP1999HTTP1.1`SPDY`IETFHypertext Transfer Protocol Bishttpbis201412HTTP/2IESG2015217HTTP/220155RFC 7540\n\n\n\n* \n* \n* HTML\n* HTTP/2HPACKhttp2HTTP/1.x\n\n[](https://tech.upyun.com/article/227/%E4%B8%80%E6%96%87%E8%AF%BB%E6%87%82%20HTTP%2F2%20%E7%89%B9%E6%80%A7.html)\n<img width=\"800\" src=\"/2018-09-23-HTTP/page_5.png\"/>\n\n`express``node``http2``SSL`\n```\n// cmd\nopenssl req -x509 -nodes -newkey rsa:2048 -keyout example.com.key -out example.com.crt\n```\n\n`server.js`\n```js\nconst port = 3000\nconst spdy = require('spdy')\nconst express = require('express')\nconst path = require('path')\nconst fs = require('fs')\nconst resolve = file => path.resolve(__dirname, file)\nconst app = express()\n\nconst serve = (path, cache) => express.static(resolve(path), {\n  maxAge: cache ? 1000 * 60 * 60 * 24 * 30 : 0\n})\napp.use('/html', serve('./html', true))\n\napp.get('/', (req, res) => {\n    res.status(200)\n    res.send('hello world')\n})\n\napp.get('/timg.jpeg', (req, res) => {\n    const img = fs.readFileSync('/html/timg.jpeg')\n    res.writeHead(200,\n        {\"Content-Type\": 'image/jpeg'\n    });\n    res.send(img)\n})\n\nconst options = {\n    key: fs.readFileSync(__dirname + '/example.com.key'),\n    cert:  fs.readFileSync(__dirname + '/example.com.crt')\n}\nspdy\n    .createServer(options, app)\n    .listen(port, (error) => {\n    if (error) {\n        console.error(error)\n        return process.exit(1)\n    } else {\n        console.log('Listening on port: ' + port + '.')\n    }\n    })\n```\n\n`fetch``100`\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>http2</title>\n</head>\n<body>\n    <script>\n        for(let i = 0; i < 100; i++) {\n            fetch('//localhost:3000/html/timg.jpeg')\n        }\n    </script>\n</body>\n</html>\n```\n\n`HTTP/1.1`1HTTP/1.12HTTP2\n<img width=\"800\" src=\"/2018-09-23-HTTP/1.png\"/>\n<img width=\"800\" src=\"/2018-09-23-HTTP/2.png\"/>\n\n122`Connection ID`1`Connection ID``TCP``Size``HTTP2``Finsh`100`HTTP2`\n\n## \n\n`HTTP`[`Issues`](https://github.com/wqzwh/blog/issues)","source":"_posts/2018-09-23-HTTP.md","raw":"---\ntitle: WebHTTP\ncomments: true\ntoc: true\ndate: 2018-09-23 16:30:57\ntags:\n    - 'HTTP'\n    - 'javascript'\n---\n\n## \n\nHTTPHTTP\n<img width=\"800\" src=\"/2018-09-23-HTTP/http.png\"/>\n\nhttp`http`http`request``response``DOMContentLoad``load``http``http`\n\n<!-- more -->\n\n> `domContentLoadedEventEnd`DOMContentLoadedjQuerydomready`load``onload`\n\n## HTTP\n\n### \n\n`JSONP``CORS```\n\n`JSONP``src/href``JSONP``GET``url``JSONP`\n\n`CORS`ajaxie9+`CORS``Access-Control-Allow-Origin`\n\n\n\n<img width=\"800\" src=\"/2018-09-23-HTTP/ky.png\"/>\n\n> `JSONP``GET``url``GET``JSONP``CORS```\n\n`Access-Control-Allow-Origin`*`*`\n```js\n// node\nconst http = require('http')\nconst allowDomains = [\n    'http://www.a.com',\n    'http://www.b.com',\n    'http://www.c.com'\n]\nconst server = http.createServer((req, res) => {\n    let acao = ''\n    for(let i = 0, l = allowDomains.length; i < l; i++) {\n        if(allowDomains[i].indexOf(req.headers.host) > -1) {\n            acao = allowDomains[i]\n            break\n        }\n    }\n    res.writeHead(200, \n        {\n            'Access-Control-Allow-Origin': acao\n        }\n    )\n    res.end('Hello World\\n')\n}).listen(3001)\nconsole.log('server listen 3001')\n```\n\n### CORS\n\n* `GET``HEAD``POST`\n* Content-Type`text/plain``multipart/form-data``application/x-www-form-urlencoded`\n* HTTP`Accept``Accept-Language``Content-Language``Last-Event-ID`\n\n\n\n\n\n<img width=\"800\" src=\"/2018-09-23-HTTP/ky2.png\"/>\n\n```headers``headers`\n\n```js\n// \nconst http = require('http')\nconst server = http.createServer((req, res) => {\n    res.writeHead(200, \n        {\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'aa' // \n        }\n    )\n    res.end('Hello World\\n')\n}).listen(3001)\nconsole.log('server listen 3001')\n\n// \nconst http = require('http')\nconst fs = require('fs')\nconst server = http.createServer((req, res) => {\nconst html = fs.readFileSync('index.html', 'utf8')\n    res.writeHead(200, \n        {\n            'Content-Type': 'text/html' \n        }\n    )\n    res.end(html)\n}).listen(3000)\nconsole.log('server listen 3000')\n\n// index.html\nfetch('http://localhost:3001', {\n    method: 'post',\n    headers: {\n        aa:'123'\n    }\n}) \n```\n\n`post``headers``headers`\n\n> `Access-Control-Request-Method``PUT``DELETE` \n\n\n\n`Access-Control-Max-Age`\n\n## HTTPCache-Control\n\n`Cache-Control``no-cache`\n\n<img width=\"800\" src=\"/2018-09-23-HTTP/Cache-Control.png\"/>\n\n\n\n* `public`http\n* `private`\n* `no-cache` \n\n\n* `max-age=<seconds>` \n* `s-maxage=<seconds>` `max-age``Expires`\n* `max-stale[=<seconds>]` `max-age`\n\n\n* `must-revalidate` `max-age`\n* `proxy-revalidate` \n\n\n* `no-store` \n* `no-transform` \n\n[](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control)\n\n### \n\n* `Last-Modified``If-Modified-Since`\n* `Etag`md5hash`If-Match``If-None-Match`\n\n`Etag`\n```js\n// server.js\nconst http = require('http')\nconst fs = require('fs')\nconst server = http.createServer((req, res) => {\nconst url = req.url\nconst html = fs.readFileSync('index.html', 'utf8')\nconst etag = req.headers['if-none-match']\nif(url === '/') {\nres.writeHead(200, \n    {\n    'Content-Type': 'text/html',\n    'Cache-Control': 'max-age=2000, no-cache',\n    'Last-Modified': '123',\n    'Etag': '444'\n    }\n)\nres.end(html)\n}\nif(url === '/aa.js') {\nif(etag === '444') {\n    res.writeHead(304, \n    {\n        'Content-Type': 'text/javascript',\n        'Cache-Control': 'max-age=2000, no-cache',\n        'Last-Modified': '123',\n        'Etag': '444'\n    }\n    )\n    res.end('888888')\n} else {\n    res.writeHead(200, \n    {\n        'Content-Type': 'text/javascript',\n        'Cache-Control': 'max-age=2000, no-cache',\n        'Last-Modified': '123',\n        'Etag': '444'\n    }\n    )\n    res.end('1111111111')\n}\n}\n}).listen(3000)\nconsole.log('server listen 3000')\n```\n```html\n<!-- html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n<title>Document</title>\n</head>\n<body>\n<script src=\"/aa.js\"></script>\n</body>\n</html>\n```\n\n<img width=\"600\" src=\"/2018-09-23-HTTP/1.gif\"/>\n<img width=\"600\" src=\"/2018-09-23-HTTP/2.gif\"/>\n`etag === '444'``1111111111`\n\n### \n\n2\n\n1\n2\n<img width=\"800\" src=\"/2018-09-23-HTTP/page_3.png\"/>\n\n## HTTPcookie\n\n* `Set-Cookie``cookie``cookie`String/Array\n* `max-age``Expires`\n* `Secure``https`\n* `HttpOnly``document.cookie`\n* `domain=``cookie`\n\n\n<img width=\"800\" src=\"/2018-09-23-HTTP/page_4.png\"/>\n\n## HTTPkeep-alive\n\nweb`Connection: keep-alive``Connection: close``keep-alive``tcp`\n\n## HTTP\n\nweb\n* Accept \n* Accept-Encoding gzipdeflatebr\n* Accept-Language \n* User-Agent\n\n\n* Content-type \n* Content-Encoding  `Accept-Encoding` \n* Content-Language  `Accept-Language` \n\nweb`Content-type``form``Content-type:multipart/form-data`\n\n## HTTP\n\n`code``301``302`\n* `301```\n* `302`\n\n\n```js\n// 302\nconst http = require('http')\nconst fs = require('fs')\nconst server = http.createServer((req, res) => {\nconst url = req.url\nconst html = fs.readFileSync('index.html', 'utf8')\nconsole.log(url)\nif(url === '/') {\nres.writeHead(302, \n    {\n        Location: '/wq'\n    }\n)\nres.end('')\n}\nif(url === '/wq') {\nres.writeHead(200, \n    {\n        'Content-Type': 'text/html',\n    }\n)\nres.end(html)\n}\n    \n}).listen(3000)\nconsole.log('server listen 3000')\n```\n`301``302``301``302``console.log(url)``/  /wq``301``/wq``302``301`\n\n## HTTP\n\n`Content-Security-Policy`HTTP[](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP)\n\n\n```js\n//  ()\n'Content-Security-Policy': default-src 'self'\n\n//  (CSP)\n'Content-Security-Policy': default-src 'self' *.trusted.com\n\n// HTTPSonlinebanking.jumbobank.com\n'Content-Security-Policy': default-src https://onlinebanking.jumbobank.com\n\n// \n'Content-Security-Policy': connect-src http://baidu.com\n\n// report-uri\n'Content-Security-Policy': default-src 'self'; report-uri http://reportcollector.example.com/collector.cgi\n```\n\n## HTTPHTTP2\n\n`HTTP/2`HTTP1999HTTP1.1`SPDY`IETFHypertext Transfer Protocol Bishttpbis201412HTTP/2IESG2015217HTTP/220155RFC 7540\n\n\n\n* \n* \n* HTML\n* HTTP/2HPACKhttp2HTTP/1.x\n\n[](https://tech.upyun.com/article/227/%E4%B8%80%E6%96%87%E8%AF%BB%E6%87%82%20HTTP%2F2%20%E7%89%B9%E6%80%A7.html)\n<img width=\"800\" src=\"/2018-09-23-HTTP/page_5.png\"/>\n\n`express``node``http2``SSL`\n```\n// cmd\nopenssl req -x509 -nodes -newkey rsa:2048 -keyout example.com.key -out example.com.crt\n```\n\n`server.js`\n```js\nconst port = 3000\nconst spdy = require('spdy')\nconst express = require('express')\nconst path = require('path')\nconst fs = require('fs')\nconst resolve = file => path.resolve(__dirname, file)\nconst app = express()\n\nconst serve = (path, cache) => express.static(resolve(path), {\n  maxAge: cache ? 1000 * 60 * 60 * 24 * 30 : 0\n})\napp.use('/html', serve('./html', true))\n\napp.get('/', (req, res) => {\n    res.status(200)\n    res.send('hello world')\n})\n\napp.get('/timg.jpeg', (req, res) => {\n    const img = fs.readFileSync('/html/timg.jpeg')\n    res.writeHead(200,\n        {\"Content-Type\": 'image/jpeg'\n    });\n    res.send(img)\n})\n\nconst options = {\n    key: fs.readFileSync(__dirname + '/example.com.key'),\n    cert:  fs.readFileSync(__dirname + '/example.com.crt')\n}\nspdy\n    .createServer(options, app)\n    .listen(port, (error) => {\n    if (error) {\n        console.error(error)\n        return process.exit(1)\n    } else {\n        console.log('Listening on port: ' + port + '.')\n    }\n    })\n```\n\n`fetch``100`\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>http2</title>\n</head>\n<body>\n    <script>\n        for(let i = 0; i < 100; i++) {\n            fetch('//localhost:3000/html/timg.jpeg')\n        }\n    </script>\n</body>\n</html>\n```\n\n`HTTP/1.1`1HTTP/1.12HTTP2\n<img width=\"800\" src=\"/2018-09-23-HTTP/1.png\"/>\n<img width=\"800\" src=\"/2018-09-23-HTTP/2.png\"/>\n\n122`Connection ID`1`Connection ID``TCP``Size``HTTP2``Finsh`100`HTTP2`\n\n## \n\n`HTTP`[`Issues`](https://github.com/wqzwh/blog/issues)","slug":"2018-09-23-HTTP","published":1,"updated":"2018-10-04T03:18:29.442Z","layout":"post","photos":[],"link":"","_id":"cjosd1vas000lfdldcl7ot71o","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HTTPHTTP<br><img width=\"800\" src=\"/2018-09-23-HTTP/http.png\"></p>\n<p>http<code>http</code>http<code>request</code><code>response</code><code>DOMContentLoad</code><code>load</code><code>http</code><code>http</code></p>\n<a id=\"more\"></a>\n<blockquote>\n<p><code>domContentLoadedEventEnd</code>DOMContentLoadedjQuerydomready<code>load</code><code>onload</code></p>\n</blockquote>\n<h2 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>JSONP</code><code>CORS</code><code></code></p>\n<p><code>JSONP</code><code>src/href</code><code>JSONP</code><code>GET</code><code>url</code><code>JSONP</code></p>\n<p><code>CORS</code>ajaxie9+<code>CORS</code><code>Access-Control-Allow-Origin</code></p>\n<p></p>\n<p><img width=\"800\" src=\"/2018-09-23-HTTP/ky.png\"></p>\n<blockquote>\n<p><code>JSONP</code><code>GET</code><code>url</code><code>GET</code><code>JSONP</code><code>CORS</code><code></code></p>\n</blockquote>\n<p><code>Access-Control-Allow-Origin</code><em>`</em>`<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// node</span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> allowDomains = [</div><div class=\"line\">    <span class=\"string\">'http://www.a.com'</span>,</div><div class=\"line\">    <span class=\"string\">'http://www.b.com'</span>,</div><div class=\"line\">    <span class=\"string\">'http://www.c.com'</span></div><div class=\"line\">]</div><div class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> acao = <span class=\"string\">''</span></div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = allowDomains.length; i &lt; l; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(allowDomains[i].indexOf(req.headers.host) &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">            acao = allowDomains[i]</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">'Access-Control-Allow-Origin'</span>: acao</div><div class=\"line\">        &#125;</div><div class=\"line\">    )</div><div class=\"line\">    res.end(<span class=\"string\">'Hello World\\n'</span>)</div><div class=\"line\">&#125;).listen(<span class=\"number\">3001</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'server listen 3001'</span>)</div></pre></td></tr></table></figure></p>\n<h3 id=\"CORS\"><a href=\"#CORS\" class=\"headerlink\" title=\"CORS\"></a>CORS</h3><ul>\n<li><code>GET</code><code>HEAD</code><code>POST</code></li>\n<li>Content-Type<code>text/plain</code><code>multipart/form-data</code><code>application/x-www-form-urlencoded</code></li>\n<li>HTTP<code>Accept</code><code>Accept-Language</code><code>Content-Language</code><code>Last-Event-ID</code></li>\n</ul>\n<p></p>\n<p></p>\n<p><img width=\"800\" src=\"/2018-09-23-HTTP/ky2.png\"></p>\n<p><code></code><code>headers</code><code>headers</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">'Access-Control-Allow-Origin'</span>: <span class=\"string\">'*'</span>,</div><div class=\"line\">            <span class=\"string\">'Access-Control-Allow-Headers'</span>: <span class=\"string\">'aa'</span> <span class=\"comment\">// </span></div><div class=\"line\">        &#125;</div><div class=\"line\">    )</div><div class=\"line\">    res.end(<span class=\"string\">'Hello World\\n'</span>)</div><div class=\"line\">&#125;).listen(<span class=\"number\">3001</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'server listen 3001'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</div><div class=\"line\"><span class=\"keyword\">const</span> html = fs.readFileSync(<span class=\"string\">'index.html'</span>, <span class=\"string\">'utf8'</span>)</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/html'</span> </div><div class=\"line\">        &#125;</div><div class=\"line\">    )</div><div class=\"line\">    res.end(html)</div><div class=\"line\">&#125;).listen(<span class=\"number\">3000</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'server listen 3000'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// index.html</span></div><div class=\"line\">fetch(<span class=\"string\">'http://localhost:3001'</span>, &#123;</div><div class=\"line\">    method: <span class=\"string\">'post'</span>,</div><div class=\"line\">    headers: &#123;</div><div class=\"line\">        aa:<span class=\"string\">'123'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p><code>post</code><code>headers</code><code>headers</code></p>\n<blockquote>\n<p><code>Access-Control-Request-Method</code><code>PUT</code><code>DELETE</code> </p>\n</blockquote>\n<p></p>\n<p><code>Access-Control-Max-Age</code></p>\n<h2 id=\"HTTPCache-Control\"><a href=\"#HTTPCache-Control\" class=\"headerlink\" title=\"HTTPCache-Control\"></a>HTTPCache-Control</h2><p><code>Cache-Control</code><code>no-cache</code></p>\n<p><img width=\"800\" src=\"/2018-09-23-HTTP/Cache-Control.png\"></p>\n<p></p>\n<ul>\n<li><code>public</code>http</li>\n<li><code>private</code></li>\n<li><code>no-cache</code> </li>\n</ul>\n<ul>\n<li><code>max-age=&lt;seconds&gt;</code> </li>\n<li><code>s-maxage=&lt;seconds&gt;</code> <code>max-age</code><code>Expires</code></li>\n<li><code>max-stale[=&lt;seconds&gt;]</code> <code>max-age</code></li>\n</ul>\n<ul>\n<li><code>must-revalidate</code> <code>max-age</code></li>\n<li><code>proxy-revalidate</code> </li>\n</ul>\n<ul>\n<li><code>no-store</code> </li>\n<li><code>no-transform</code> </li>\n</ul>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control\" target=\"_blank\" rel=\"external\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><code>Last-Modified</code><code>If-Modified-Since</code></li>\n<li><code>Etag</code>md5hash<code>If-Match</code><code>If-None-Match</code></li>\n</ul>\n<p><code>Etag</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// server.js</span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</div><div class=\"line\"><span class=\"keyword\">const</span> url = req.url</div><div class=\"line\"><span class=\"keyword\">const</span> html = fs.readFileSync(<span class=\"string\">'index.html'</span>, <span class=\"string\">'utf8'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> etag = req.headers[<span class=\"string\">'if-none-match'</span>]</div><div class=\"line\"><span class=\"keyword\">if</span>(url === <span class=\"string\">'/'</span>) &#123;</div><div class=\"line\">res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">    &#123;</div><div class=\"line\">    <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/html'</span>,</div><div class=\"line\">    <span class=\"string\">'Cache-Control'</span>: <span class=\"string\">'max-age=2000, no-cache'</span>,</div><div class=\"line\">    <span class=\"string\">'Last-Modified'</span>: <span class=\"string\">'123'</span>,</div><div class=\"line\">    <span class=\"string\">'Etag'</span>: <span class=\"string\">'444'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">)</div><div class=\"line\">res.end(html)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">if</span>(url === <span class=\"string\">'/aa.js'</span>) &#123;</div><div class=\"line\"><span class=\"keyword\">if</span>(etag === <span class=\"string\">'444'</span>) &#123;</div><div class=\"line\">    res.writeHead(<span class=\"number\">304</span>, </div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/javascript'</span>,</div><div class=\"line\">        <span class=\"string\">'Cache-Control'</span>: <span class=\"string\">'max-age=2000, no-cache'</span>,</div><div class=\"line\">        <span class=\"string\">'Last-Modified'</span>: <span class=\"string\">'123'</span>,</div><div class=\"line\">        <span class=\"string\">'Etag'</span>: <span class=\"string\">'444'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    )</div><div class=\"line\">    res.end(<span class=\"string\">'888888'</span>)</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/javascript'</span>,</div><div class=\"line\">        <span class=\"string\">'Cache-Control'</span>: <span class=\"string\">'max-age=2000, no-cache'</span>,</div><div class=\"line\">        <span class=\"string\">'Last-Modified'</span>: <span class=\"string\">'123'</span>,</div><div class=\"line\">        <span class=\"string\">'Etag'</span>: <span class=\"string\">'444'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    )</div><div class=\"line\">    res.end(<span class=\"string\">'1111111111'</span>)</div><div class=\"line\">&#125;</div><div class=\"line\">&#125;</div><div class=\"line\">&#125;).listen(<span class=\"number\">3000</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'server listen 3000'</span>)</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- html --&gt;</span></div><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/aa.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><br><img width=\"600\" src=\"/2018-09-23-HTTP/1.gif\"><br><img width=\"600\" src=\"/2018-09-23-HTTP/2.gif\"><br><code>etag === &#39;444&#39;</code><code>1111111111</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>2</p>\n<p>1<br>2<br><img width=\"800\" src=\"/2018-09-23-HTTP/page_3.png\"></p>\n<h2 id=\"HTTPcookie\"><a href=\"#HTTPcookie\" class=\"headerlink\" title=\"HTTPcookie\"></a>HTTPcookie</h2><ul>\n<li><code>Set-Cookie</code><code>cookie</code><code>cookie</code>String/Array</li>\n<li><code>max-age</code><code>Expires</code></li>\n<li><code>Secure</code><code>https</code></li>\n<li><code>HttpOnly</code><code>document.cookie</code></li>\n<li><code>domain=</code><code>cookie</code></li>\n</ul>\n<p><br><img width=\"800\" src=\"/2018-09-23-HTTP/page_4.png\"></p>\n<h2 id=\"HTTPkeep-alive\"><a href=\"#HTTPkeep-alive\" class=\"headerlink\" title=\"HTTPkeep-alive\"></a>HTTPkeep-alive</h2><p>web<code>Connection: keep-alive</code><code>Connection: close</code><code>keep-alive</code><code>tcp</code></p>\n<h2 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h2><p>web</p>\n<ul>\n<li>Accept </li>\n<li>Accept-Encoding gzipdeflatebr</li>\n<li>Accept-Language </li>\n<li>User-Agent</li>\n</ul>\n<p></p>\n<ul>\n<li>Content-type </li>\n<li>Content-Encoding  <code>Accept-Encoding</code> </li>\n<li>Content-Language  <code>Accept-Language</code> </li>\n</ul>\n<p>web<code>Content-type</code><code>form</code><code>Content-type:multipart/form-data</code></p>\n<h2 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h2><p><code>code</code><code>301</code><code>302</code></p>\n<ul>\n<li><code>301</code><code></code></li>\n<li><code>302</code></li>\n</ul>\n<p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 302</span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</div><div class=\"line\"><span class=\"keyword\">const</span> url = req.url</div><div class=\"line\"><span class=\"keyword\">const</span> html = fs.readFileSync(<span class=\"string\">'index.html'</span>, <span class=\"string\">'utf8'</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(url)</div><div class=\"line\"><span class=\"keyword\">if</span>(url === <span class=\"string\">'/'</span>) &#123;</div><div class=\"line\">res.writeHead(<span class=\"number\">302</span>, </div><div class=\"line\">    &#123;</div><div class=\"line\">        Location: <span class=\"string\">'/wq'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">)</div><div class=\"line\">res.end(<span class=\"string\">''</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">if</span>(url === <span class=\"string\">'/wq'</span>) &#123;</div><div class=\"line\">res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/html'</span>,</div><div class=\"line\">    &#125;</div><div class=\"line\">)</div><div class=\"line\">res.end(html)</div><div class=\"line\">&#125;</div><div class=\"line\">    </div><div class=\"line\">&#125;).listen(<span class=\"number\">3000</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'server listen 3000'</span>)</div></pre></td></tr></table></figure></p>\n<p><code>301</code><code>302</code><code>301</code><code>302</code><code>console.log(url)</code><code>/  /wq</code><code>301</code><code>/wq</code><code>302</code><code>301</code></p>\n<h2 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h2><p><code>Content-Security-Policy</code>HTTP<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP\" target=\"_blank\" rel=\"external\"></a></p>\n<p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//  ()</span></div><div class=\"line\"><span class=\"string\">'Content-Security-Policy'</span>: <span class=\"keyword\">default</span>-src <span class=\"string\">'self'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//  (CSP)</span></div><div class=\"line\"><span class=\"string\">'Content-Security-Policy'</span>: <span class=\"keyword\">default</span>-src <span class=\"string\">'self'</span> *.trusted.com</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// HTTPSonlinebanking.jumbobank.com</span></div><div class=\"line\"><span class=\"string\">'Content-Security-Policy'</span>: <span class=\"keyword\">default</span>-src https:<span class=\"comment\">//onlinebanking.jumbobank.com</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"string\">'Content-Security-Policy'</span>: connect-src http:<span class=\"comment\">//baidu.com</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// report-uri</span></div><div class=\"line\"><span class=\"string\">'Content-Security-Policy'</span>: <span class=\"keyword\">default</span>-src <span class=\"string\">'self'</span>; report-uri http:<span class=\"comment\">//reportcollector.example.com/collector.cgi</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"HTTPHTTP2\"><a href=\"#HTTPHTTP2\" class=\"headerlink\" title=\"HTTPHTTP2\"></a>HTTPHTTP2</h2><p><code>HTTP/2</code>HTTP1999HTTP1.1<code>SPDY</code>IETFHypertext Transfer Protocol Bishttpbis201412HTTP/2IESG2015217HTTP/220155RFC 7540</p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n<li>HTML</li>\n<li>HTTP/2HPACKhttp2HTTP/1.x</li>\n</ul>\n<p><a href=\"https://tech.upyun.com/article/227/%E4%B8%80%E6%96%87%E8%AF%BB%E6%87%82%20HTTP%2F2%20%E7%89%B9%E6%80%A7.html\" target=\"_blank\" rel=\"external\"></a><br><img width=\"800\" src=\"/2018-09-23-HTTP/page_5.png\"></p>\n<p><code>express</code><code>node</code><code>http2</code><code>SSL</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">// cmd</div><div class=\"line\">openssl req -x509 -nodes -newkey rsa:2048 -keyout example.com.key -out example.com.crt</div></pre></td></tr></table></figure></p>\n<p><code>server.js</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></div><div class=\"line\"><span class=\"keyword\">const</span> spdy = <span class=\"built_in\">require</span>(<span class=\"string\">'spdy'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> resolve = <span class=\"function\"><span class=\"params\">file</span> =&gt;</span> path.resolve(__dirname, file)</div><div class=\"line\"><span class=\"keyword\">const</span> app = express()</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> serve = <span class=\"function\">(<span class=\"params\">path, cache</span>) =&gt;</span> express.static(resolve(path), &#123;</div><div class=\"line\">  maxAge: cache ? <span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span> * <span class=\"number\">30</span> : <span class=\"number\">0</span></div><div class=\"line\">&#125;)</div><div class=\"line\">app.use(<span class=\"string\">'/html'</span>, serve(<span class=\"string\">'./html'</span>, <span class=\"literal\">true</span>))</div><div class=\"line\"></div><div class=\"line\">app.get(<span class=\"string\">'/'</span>, (req, res) =&gt; &#123;</div><div class=\"line\">    res.status(<span class=\"number\">200</span>)</div><div class=\"line\">    res.send(<span class=\"string\">'hello world'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">app.get(<span class=\"string\">'/timg.jpeg'</span>, (req, res) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> img = fs.readFileSync(<span class=\"string\">'/html/timg.jpeg'</span>)</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>,</div><div class=\"line\">        &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">'image/jpeg'</span></div><div class=\"line\">    &#125;);</div><div class=\"line\">    res.send(img)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> options = &#123;</div><div class=\"line\">    key: fs.readFileSync(__dirname + <span class=\"string\">'/example.com.key'</span>),</div><div class=\"line\">    cert:  fs.readFileSync(__dirname + <span class=\"string\">'/example.com.crt'</span>)</div><div class=\"line\">&#125;</div><div class=\"line\">spdy</div><div class=\"line\">    .createServer(options, app)</div><div class=\"line\">    .listen(port, (error) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.error(error)</div><div class=\"line\">        <span class=\"keyword\">return</span> process.exit(<span class=\"number\">1</span>)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'Listening on port: '</span> + port + <span class=\"string\">'.'</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\">    &#125;)</div></pre></td></tr></table></figure></p>\n<p><code>fetch</code><code>100</code><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>http2<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span></div><div class=\"line\"><span class=\"javascript\">            fetch(<span class=\"string\">'//localhost:3000/html/timg.jpeg'</span>)</span></div><div class=\"line\"><span class=\"undefined\">        &#125;</span></div><div class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p><code>HTTP/1.1</code>1HTTP/1.12HTTP2<br><img width=\"800\" src=\"/2018-09-23-HTTP/1.png\"><br><img width=\"800\" src=\"/2018-09-23-HTTP/2.png\"></p>\n<p>122<code>Connection ID</code>1<code>Connection ID</code><code>TCP</code><code>Size</code><code>HTTP2</code><code>Finsh</code>100<code>HTTP2</code></p>\n<h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><p><code>HTTP</code><a href=\"https://github.com/wqzwh/blog/issues\" target=\"_blank\" rel=\"external\"><code>Issues</code></a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HTTPHTTP<br><img width=\"800\" src=\"/2018-09-23-HTTP/http.png\"></p>\n<p>http<code>http</code>http<code>request</code><code>response</code><code>DOMContentLoad</code><code>load</code><code>http</code><code>http</code></p>","more":"<blockquote>\n<p><code>domContentLoadedEventEnd</code>DOMContentLoadedjQuerydomready<code>load</code><code>onload</code></p>\n</blockquote>\n<h2 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>JSONP</code><code>CORS</code><code></code></p>\n<p><code>JSONP</code><code>src/href</code><code>JSONP</code><code>GET</code><code>url</code><code>JSONP</code></p>\n<p><code>CORS</code>ajaxie9+<code>CORS</code><code>Access-Control-Allow-Origin</code></p>\n<p></p>\n<p><img width=\"800\" src=\"/2018-09-23-HTTP/ky.png\"></p>\n<blockquote>\n<p><code>JSONP</code><code>GET</code><code>url</code><code>GET</code><code>JSONP</code><code>CORS</code><code></code></p>\n</blockquote>\n<p><code>Access-Control-Allow-Origin</code><em>`</em>`<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// node</span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> allowDomains = [</div><div class=\"line\">    <span class=\"string\">'http://www.a.com'</span>,</div><div class=\"line\">    <span class=\"string\">'http://www.b.com'</span>,</div><div class=\"line\">    <span class=\"string\">'http://www.c.com'</span></div><div class=\"line\">]</div><div class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> acao = <span class=\"string\">''</span></div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = allowDomains.length; i &lt; l; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(allowDomains[i].indexOf(req.headers.host) &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">            acao = allowDomains[i]</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">'Access-Control-Allow-Origin'</span>: acao</div><div class=\"line\">        &#125;</div><div class=\"line\">    )</div><div class=\"line\">    res.end(<span class=\"string\">'Hello World\\n'</span>)</div><div class=\"line\">&#125;).listen(<span class=\"number\">3001</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'server listen 3001'</span>)</div></pre></td></tr></table></figure></p>\n<h3 id=\"CORS\"><a href=\"#CORS\" class=\"headerlink\" title=\"CORS\"></a>CORS</h3><ul>\n<li><code>GET</code><code>HEAD</code><code>POST</code></li>\n<li>Content-Type<code>text/plain</code><code>multipart/form-data</code><code>application/x-www-form-urlencoded</code></li>\n<li>HTTP<code>Accept</code><code>Accept-Language</code><code>Content-Language</code><code>Last-Event-ID</code></li>\n</ul>\n<p></p>\n<p></p>\n<p><img width=\"800\" src=\"/2018-09-23-HTTP/ky2.png\"></p>\n<p><code></code><code>headers</code><code>headers</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">'Access-Control-Allow-Origin'</span>: <span class=\"string\">'*'</span>,</div><div class=\"line\">            <span class=\"string\">'Access-Control-Allow-Headers'</span>: <span class=\"string\">'aa'</span> <span class=\"comment\">// </span></div><div class=\"line\">        &#125;</div><div class=\"line\">    )</div><div class=\"line\">    res.end(<span class=\"string\">'Hello World\\n'</span>)</div><div class=\"line\">&#125;).listen(<span class=\"number\">3001</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'server listen 3001'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</div><div class=\"line\"><span class=\"keyword\">const</span> html = fs.readFileSync(<span class=\"string\">'index.html'</span>, <span class=\"string\">'utf8'</span>)</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/html'</span> </div><div class=\"line\">        &#125;</div><div class=\"line\">    )</div><div class=\"line\">    res.end(html)</div><div class=\"line\">&#125;).listen(<span class=\"number\">3000</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'server listen 3000'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// index.html</span></div><div class=\"line\">fetch(<span class=\"string\">'http://localhost:3001'</span>, &#123;</div><div class=\"line\">    method: <span class=\"string\">'post'</span>,</div><div class=\"line\">    headers: &#123;</div><div class=\"line\">        aa:<span class=\"string\">'123'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p><code>post</code><code>headers</code><code>headers</code></p>\n<blockquote>\n<p><code>Access-Control-Request-Method</code><code>PUT</code><code>DELETE</code> </p>\n</blockquote>\n<p></p>\n<p><code>Access-Control-Max-Age</code></p>\n<h2 id=\"HTTPCache-Control\"><a href=\"#HTTPCache-Control\" class=\"headerlink\" title=\"HTTPCache-Control\"></a>HTTPCache-Control</h2><p><code>Cache-Control</code><code>no-cache</code></p>\n<p><img width=\"800\" src=\"/2018-09-23-HTTP/Cache-Control.png\"></p>\n<p></p>\n<ul>\n<li><code>public</code>http</li>\n<li><code>private</code></li>\n<li><code>no-cache</code> </li>\n</ul>\n<ul>\n<li><code>max-age=&lt;seconds&gt;</code> </li>\n<li><code>s-maxage=&lt;seconds&gt;</code> <code>max-age</code><code>Expires</code></li>\n<li><code>max-stale[=&lt;seconds&gt;]</code> <code>max-age</code></li>\n</ul>\n<ul>\n<li><code>must-revalidate</code> <code>max-age</code></li>\n<li><code>proxy-revalidate</code> </li>\n</ul>\n<ul>\n<li><code>no-store</code> </li>\n<li><code>no-transform</code> </li>\n</ul>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control\" target=\"_blank\" rel=\"external\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><code>Last-Modified</code><code>If-Modified-Since</code></li>\n<li><code>Etag</code>md5hash<code>If-Match</code><code>If-None-Match</code></li>\n</ul>\n<p><code>Etag</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// server.js</span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</div><div class=\"line\"><span class=\"keyword\">const</span> url = req.url</div><div class=\"line\"><span class=\"keyword\">const</span> html = fs.readFileSync(<span class=\"string\">'index.html'</span>, <span class=\"string\">'utf8'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> etag = req.headers[<span class=\"string\">'if-none-match'</span>]</div><div class=\"line\"><span class=\"keyword\">if</span>(url === <span class=\"string\">'/'</span>) &#123;</div><div class=\"line\">res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">    &#123;</div><div class=\"line\">    <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/html'</span>,</div><div class=\"line\">    <span class=\"string\">'Cache-Control'</span>: <span class=\"string\">'max-age=2000, no-cache'</span>,</div><div class=\"line\">    <span class=\"string\">'Last-Modified'</span>: <span class=\"string\">'123'</span>,</div><div class=\"line\">    <span class=\"string\">'Etag'</span>: <span class=\"string\">'444'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">)</div><div class=\"line\">res.end(html)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">if</span>(url === <span class=\"string\">'/aa.js'</span>) &#123;</div><div class=\"line\"><span class=\"keyword\">if</span>(etag === <span class=\"string\">'444'</span>) &#123;</div><div class=\"line\">    res.writeHead(<span class=\"number\">304</span>, </div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/javascript'</span>,</div><div class=\"line\">        <span class=\"string\">'Cache-Control'</span>: <span class=\"string\">'max-age=2000, no-cache'</span>,</div><div class=\"line\">        <span class=\"string\">'Last-Modified'</span>: <span class=\"string\">'123'</span>,</div><div class=\"line\">        <span class=\"string\">'Etag'</span>: <span class=\"string\">'444'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    )</div><div class=\"line\">    res.end(<span class=\"string\">'888888'</span>)</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/javascript'</span>,</div><div class=\"line\">        <span class=\"string\">'Cache-Control'</span>: <span class=\"string\">'max-age=2000, no-cache'</span>,</div><div class=\"line\">        <span class=\"string\">'Last-Modified'</span>: <span class=\"string\">'123'</span>,</div><div class=\"line\">        <span class=\"string\">'Etag'</span>: <span class=\"string\">'444'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    )</div><div class=\"line\">    res.end(<span class=\"string\">'1111111111'</span>)</div><div class=\"line\">&#125;</div><div class=\"line\">&#125;</div><div class=\"line\">&#125;).listen(<span class=\"number\">3000</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'server listen 3000'</span>)</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- html --&gt;</span></div><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/aa.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><br><img width=\"600\" src=\"/2018-09-23-HTTP/1.gif\"><br><img width=\"600\" src=\"/2018-09-23-HTTP/2.gif\"><br><code>etag === &#39;444&#39;</code><code>1111111111</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>2</p>\n<p>1<br>2<br><img width=\"800\" src=\"/2018-09-23-HTTP/page_3.png\"></p>\n<h2 id=\"HTTPcookie\"><a href=\"#HTTPcookie\" class=\"headerlink\" title=\"HTTPcookie\"></a>HTTPcookie</h2><ul>\n<li><code>Set-Cookie</code><code>cookie</code><code>cookie</code>String/Array</li>\n<li><code>max-age</code><code>Expires</code></li>\n<li><code>Secure</code><code>https</code></li>\n<li><code>HttpOnly</code><code>document.cookie</code></li>\n<li><code>domain=</code><code>cookie</code></li>\n</ul>\n<p><br><img width=\"800\" src=\"/2018-09-23-HTTP/page_4.png\"></p>\n<h2 id=\"HTTPkeep-alive\"><a href=\"#HTTPkeep-alive\" class=\"headerlink\" title=\"HTTPkeep-alive\"></a>HTTPkeep-alive</h2><p>web<code>Connection: keep-alive</code><code>Connection: close</code><code>keep-alive</code><code>tcp</code></p>\n<h2 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h2><p>web</p>\n<ul>\n<li>Accept </li>\n<li>Accept-Encoding gzipdeflatebr</li>\n<li>Accept-Language </li>\n<li>User-Agent</li>\n</ul>\n<p></p>\n<ul>\n<li>Content-type </li>\n<li>Content-Encoding  <code>Accept-Encoding</code> </li>\n<li>Content-Language  <code>Accept-Language</code> </li>\n</ul>\n<p>web<code>Content-type</code><code>form</code><code>Content-type:multipart/form-data</code></p>\n<h2 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h2><p><code>code</code><code>301</code><code>302</code></p>\n<ul>\n<li><code>301</code><code></code></li>\n<li><code>302</code></li>\n</ul>\n<p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 302</span></div><div class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</div><div class=\"line\"><span class=\"keyword\">const</span> url = req.url</div><div class=\"line\"><span class=\"keyword\">const</span> html = fs.readFileSync(<span class=\"string\">'index.html'</span>, <span class=\"string\">'utf8'</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(url)</div><div class=\"line\"><span class=\"keyword\">if</span>(url === <span class=\"string\">'/'</span>) &#123;</div><div class=\"line\">res.writeHead(<span class=\"number\">302</span>, </div><div class=\"line\">    &#123;</div><div class=\"line\">        Location: <span class=\"string\">'/wq'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">)</div><div class=\"line\">res.end(<span class=\"string\">''</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">if</span>(url === <span class=\"string\">'/wq'</span>) &#123;</div><div class=\"line\">res.writeHead(<span class=\"number\">200</span>, </div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'text/html'</span>,</div><div class=\"line\">    &#125;</div><div class=\"line\">)</div><div class=\"line\">res.end(html)</div><div class=\"line\">&#125;</div><div class=\"line\">    </div><div class=\"line\">&#125;).listen(<span class=\"number\">3000</span>)</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'server listen 3000'</span>)</div></pre></td></tr></table></figure></p>\n<p><code>301</code><code>302</code><code>301</code><code>302</code><code>console.log(url)</code><code>/  /wq</code><code>301</code><code>/wq</code><code>302</code><code>301</code></p>\n<h2 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h2><p><code>Content-Security-Policy</code>HTTP<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP\" target=\"_blank\" rel=\"external\"></a></p>\n<p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//  ()</span></div><div class=\"line\"><span class=\"string\">'Content-Security-Policy'</span>: <span class=\"keyword\">default</span>-src <span class=\"string\">'self'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//  (CSP)</span></div><div class=\"line\"><span class=\"string\">'Content-Security-Policy'</span>: <span class=\"keyword\">default</span>-src <span class=\"string\">'self'</span> *.trusted.com</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// HTTPSonlinebanking.jumbobank.com</span></div><div class=\"line\"><span class=\"string\">'Content-Security-Policy'</span>: <span class=\"keyword\">default</span>-src https:<span class=\"comment\">//onlinebanking.jumbobank.com</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"string\">'Content-Security-Policy'</span>: connect-src http:<span class=\"comment\">//baidu.com</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// report-uri</span></div><div class=\"line\"><span class=\"string\">'Content-Security-Policy'</span>: <span class=\"keyword\">default</span>-src <span class=\"string\">'self'</span>; report-uri http:<span class=\"comment\">//reportcollector.example.com/collector.cgi</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"HTTPHTTP2\"><a href=\"#HTTPHTTP2\" class=\"headerlink\" title=\"HTTPHTTP2\"></a>HTTPHTTP2</h2><p><code>HTTP/2</code>HTTP1999HTTP1.1<code>SPDY</code>IETFHypertext Transfer Protocol Bishttpbis201412HTTP/2IESG2015217HTTP/220155RFC 7540</p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n<li>HTML</li>\n<li>HTTP/2HPACKhttp2HTTP/1.x</li>\n</ul>\n<p><a href=\"https://tech.upyun.com/article/227/%E4%B8%80%E6%96%87%E8%AF%BB%E6%87%82%20HTTP%2F2%20%E7%89%B9%E6%80%A7.html\" target=\"_blank\" rel=\"external\"></a><br><img width=\"800\" src=\"/2018-09-23-HTTP/page_5.png\"></p>\n<p><code>express</code><code>node</code><code>http2</code><code>SSL</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">// cmd</div><div class=\"line\">openssl req -x509 -nodes -newkey rsa:2048 -keyout example.com.key -out example.com.crt</div></pre></td></tr></table></figure></p>\n<p><code>server.js</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></div><div class=\"line\"><span class=\"keyword\">const</span> spdy = <span class=\"built_in\">require</span>(<span class=\"string\">'spdy'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> resolve = <span class=\"function\"><span class=\"params\">file</span> =&gt;</span> path.resolve(__dirname, file)</div><div class=\"line\"><span class=\"keyword\">const</span> app = express()</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> serve = <span class=\"function\">(<span class=\"params\">path, cache</span>) =&gt;</span> express.static(resolve(path), &#123;</div><div class=\"line\">  maxAge: cache ? <span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span> * <span class=\"number\">30</span> : <span class=\"number\">0</span></div><div class=\"line\">&#125;)</div><div class=\"line\">app.use(<span class=\"string\">'/html'</span>, serve(<span class=\"string\">'./html'</span>, <span class=\"literal\">true</span>))</div><div class=\"line\"></div><div class=\"line\">app.get(<span class=\"string\">'/'</span>, (req, res) =&gt; &#123;</div><div class=\"line\">    res.status(<span class=\"number\">200</span>)</div><div class=\"line\">    res.send(<span class=\"string\">'hello world'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">app.get(<span class=\"string\">'/timg.jpeg'</span>, (req, res) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> img = fs.readFileSync(<span class=\"string\">'/html/timg.jpeg'</span>)</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>,</div><div class=\"line\">        &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">'image/jpeg'</span></div><div class=\"line\">    &#125;);</div><div class=\"line\">    res.send(img)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> options = &#123;</div><div class=\"line\">    key: fs.readFileSync(__dirname + <span class=\"string\">'/example.com.key'</span>),</div><div class=\"line\">    cert:  fs.readFileSync(__dirname + <span class=\"string\">'/example.com.crt'</span>)</div><div class=\"line\">&#125;</div><div class=\"line\">spdy</div><div class=\"line\">    .createServer(options, app)</div><div class=\"line\">    .listen(port, (error) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.error(error)</div><div class=\"line\">        <span class=\"keyword\">return</span> process.exit(<span class=\"number\">1</span>)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'Listening on port: '</span> + port + <span class=\"string\">'.'</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\">    &#125;)</div></pre></td></tr></table></figure></p>\n<p><code>fetch</code><code>100</code><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>http2<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span></div><div class=\"line\"><span class=\"javascript\">            fetch(<span class=\"string\">'//localhost:3000/html/timg.jpeg'</span>)</span></div><div class=\"line\"><span class=\"undefined\">        &#125;</span></div><div class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p><code>HTTP/1.1</code>1HTTP/1.12HTTP2<br><img width=\"800\" src=\"/2018-09-23-HTTP/1.png\"><br><img width=\"800\" src=\"/2018-09-23-HTTP/2.png\"></p>\n<p>122<code>Connection ID</code>1<code>Connection ID</code><code>TCP</code><code>Size</code><code>HTTP2</code><code>Finsh</code>100<code>HTTP2</code></p>\n<h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><p><code>HTTP</code><a href=\"https://github.com/wqzwh/blog/issues\" target=\"_blank\" rel=\"external\"><code>Issues</code></a></p>"},{"title":"javascriptnodejs","comments":1,"toc":true,"date":"2018-11-20T06:01:23.000Z","_content":"\n### \n\njsjsjsjs\n\n> js\n\njscall stack\n\n<!-- more -->\n\njsjsajaxajaxajax\n\n> ajaxajax\n\nstackjs\n\nPhilip Roberts[Help, I'm stuck in an event-loop](https://vimeo.com/96425312)\n\n<img width=\"600\" src=\"2018-11-20-EventLoop/11.png\"/>\n\nheapstackAPI\"\"clickloaddone\"\"\n\n#### \n\najax\n\n> macrotaskmicrotask\n\n**macrotask**  **microtask**\n\n> node\n\n\n\n**macrotask**jsXHRsetTimeoutsetIntervalrequestAnimationFrameI/OUI render\n\n**microtask**promiseObject.observeasync awaitMutationObserver\n\n[HTMLmacrotaskmicrotask](https://zhuanlan.zhihu.com/p/24460769)\n\n<img width=\"600\" src=\"2018-11-20-EventLoop/22.jpg\"/>\n\n> 12\n\n\n\n1. macrotask23\n2. macrotask\n3. microtask45\n4. microtask3\n5. 1\n\n5\n\n1js\n2\n3UIUI\n4UI\n\n\n```js\nconsole.log('start')\n\nsetTimeout(() => {\n  console.log('setTimeout')\n}, 0)\n\nPromise.resolve().then(() => {\n  console.log('promise1')\n}).then(() => {\n  console.log('promise2')\n})\n\nconsole.log('end')\n\n// start end promise1 promise2 setTimeout\n```\n<img width=\"600\" src=\"2018-11-20-EventLoop/33.gif\"/>\n\n`start``end`js`promise1``promise2`UI`setTimeout`UI\n\n`promise``then`\n```js\nsetTimeout(() => console.log(4))\n\nnew Promise(resolve => {\n  resolve()\n  console.log(1)\n}).then(_ => {\n  console.log(3)\n})\n\nconsole.log(2)\n\n// 1 2 3 4\n```\n\n#### UI\n\nUI5UI\n\n##### \n\nvue`nextTick`API`Promise.then``MessageChannel``setTimeout(fn, 0)`vue[](https://cn.vuejs.org/v2/guide/reactivity.html)\n\n> nextTickAPI\n\n##### \n\n`requestAnimationFrame`API\n```js\nsetTimeout(() => {console.log('setTimeout1')}, 0)\n\nrequestAnimationFrame(() =>{\n  console.log('requestAnimationFrame')\n})\n\nsetTimeout(() => {console.log('setTimeout2')}, 0)\n\nnew Promise((resolve) => {\n  console.log('promise 1')\n  resolve()\n  console.log('promise 2')\n}).then(() => {\n  console.log('promise then')\n})\n\nconsole.log('end')\n\n//  promise 1 promise 2 end promise then requestAnimationFrame setTimeout1 setTimeout2\n// promise 1 promise 2 end promise then setTimeout1 setTimeout2 requestAnimationFrame\n```\n<img width=\"600\" src=\"2018-11-20-EventLoop/huohu.jpg\"/>\n<img width=\"600\" src=\"2018-11-20-EventLoop/guge.jpg\"/>\n`requestAnimationFrame`\n\n### Node\n\n\n```js\nsetTimeout(()=>{\n  console.log('timer1')\n  Promise.resolve().then(() => {\n    console.log('promise1')\n  })\n}, 0)\n\nsetTimeout(()=>{\n  console.log('timer2')\n  Promise.resolve().then(() => {\n    console.log('promise2')\n  })\n}, 0)\n\n// timer1 promise1 timer2 promise2\n// nodetimer1 timer2 promise1 promise2\n```\nnode[JavaScript Event Loop](http://www.ruanyifeng.com/blog/2014/10/event-loop.html)\n\n<img width=\"600\" src=\"2018-11-20-EventLoop/node1.png\"/>\n\nNode.js\n\n1V8JavaScript\n\n2Node API\n\n3libuvNode APIEvent LoopV8\n\n4V8\n\nnode\n\n**macrotask**jsXHRsetTimeoutsetIntervalI/O setImmediate\n\n**microtask**promiseasync awaitprocess.nextTick\n\nlibuv[](https://github.com/libuv/libuv/blob/v1.x/src/unix/core.c#L348-L397)\n```c\nint uv_run(uv_loop_t* loop, uv_run_mode mode) {\n  int timeout;\n  int r;\n  int ran_pending;\n  //\n  r = uv__loop_alive(loop);\n  //\n  if (!r)\n    uv__update_time(loop);\n  //\n  while (r != 0 && loop->stop_flag == 0) {\n    //\n    uv__update_time(loop);\n    // timers\n    uv__run_timers(loop);\n    // I/O \n    ran_pending = uv__run_pending(loop);\n    // idle \n    uv__run_idle(loop);\n    // prepare \n    uv__run_prepare(loop);\n\n    timeout = 0;\n    if ((mode == UV_RUN_ONCE && !ran_pending) || mode == UV_RUN_DEFAULT)\n      // timer\n      timeout = uv_backend_timeout(loop);\n\n    // pollI/Otimeout\n    uv__io_poll(loop, timeout);\n    // check  setImmediate \n    uv__run_check(loop);\n    // close callbacks\n    uv__run_closing_handles(loop);\n\n    if (mode == UV_RUN_ONCE) {\n      //\n      uv__update_time(loop);\n      //timers\n      uv__run_timers(loop);\n    }\n\n    r = uv__loop_alive(loop);\n    if (mode == UV_RUN_ONCE || mode == UV_RUN_NOWAIT)\n      break;\n  }\n\n  /* The if statement lets gcc compile it to a conditional store. Avoids\n   * dirtying a cache line.\n   */\n  if (loop->stop_flag != 0)\n    loop->stop_flag = 0;\n\n  return r;\n}\n```\nNode.js, \n\n```js\n   \n>           timers           uv__run_timers(loop)\n  \n  \n         I/O callbacks        uv__run_pending(loop)\n  \n  \n         idle, prepare        uv__run_idle(loop)\n        \n           incoming:   \n             poll            <  connections,  uv__io_poll()\n           data, etc.  \n        \n             check            uv__run_check(loop)\n  \n  \n      close callbacks       uv__run_prepare(loop)\n   \n```\n* timers : setTimeout(callback) and setInterval(callback)callback;\n* I/O callbacks : closecallbackstimers(setTimeoutsetInterval)callbackssetImmediate()callbackscallbacks; ()\n* idle, prepare : node;\n* poll : I/O, node;\n* check : setImmediate() callbacks;\n* close callbacks : socket.on(close, callback)callback\n\n`check``setImmediate`callback`uv__run_prepare`callback`timers``setImmediate`\n\n#### timer\n\ntimer[](https://github.com/libuv/libuv/blob/v1.x/src/timer.c#L159-L176)\n```c\nstatic struct heap *timer_heap(const uv_loop_t* loop) {\n#ifdef _WIN32\n  return (struct heap*) loop->timer_heap;\n#else\n  return (struct heap*) &loop->timer_heap;\n#endif\n}\n\nint uv_timer_again(uv_timer_t* handle) {\n  if (handle->timer_cb == NULL)\n    return UV_EINVAL;\n\n  // repeat\n  if (handle->repeat) {\n    uv_timer_stop(handle);\n    uv_timer_start(handle, handle->timer_cb, handle->repeat, handle->repeat);\n  }\n\n  return 0;\n}\n\nvoid uv__run_timers(uv_loop_t* loop) {\n  struct heap_node* heap_node;\n  uv_timer_t* handle;\n\n  for (;;) {\n    // setTimeout/setInterval\n    heap_node = heap_min(timer_heap(loop));\n    if (heap_node == NULL)\n      break;\n\n    handle = container_of(heap_node, uv_timer_t, heap_node);\n    // \n    if (handle->timeout > loop->time)\n      break;\n    // \n    uv_timer_stop(handle);\n    // repeat\n    uv_timer_again(handle);\n    // \n    handle->timer_cb(handle);\n  }\n}\n```\n\nnodesetTimeoutsetImmediatesetTimeout\n```js\nsetTimeout(() => {\n  console.log('timeout')\n}, 0)\n\nsetImmediate(() => {\n  console.log('immediate')\n})\n\n// node  timeout immediate  immediate timeout\n```\n\n`setTimeout``setTimeout`\n```js\nsetTimeout(() => {\n  console.log('timeout')\n}, 0)\n\nsetImmediate(() => {\n  console.log('immediate')\n})\n\nconsole.log('')\n\n// node   timeout immediate\n```\n\n#### I/O callbacks\n\nTCPTCP socketECONNREFUSED,\nunix I/O callbacks \n\n> idle, prepare\n\n#### poll\n\n[](https://github.com/libuv/libuv/blob/e4087dedf837f415056a45a838f639a3d9dc3ced/src/unix/kqueue.c#L112-L381)\n```c\nvoid uv__io_poll(uv_loop_t* loop, int timeout) {\n  // \n  if (loop->nfds == 0) {\n    // \n    assert(QUEUE_EMPTY(&loop->watcher_queue));\n    return;\n  }\n\n  nevents = 0;\n  // \n  while (!QUEUE_EMPTY(&loop->watcher_queue)) {\n    /*\n    \n    \n    */\n    w->events = w->pevents;\n  }\n\n  pset = NULL;\n  if (loop->flags & UV_LOOP_BLOCK_SIGPROF) {\n    pset = &set;\n    sigemptyset(pset);\n    sigaddset(pset, SIGPROF);\n  }\n\n  assert(timeout >= -1);\n  // base\n  base = loop->time;\n  // \n  count = 48; /* Benchmarks suggest this gives the best throughput. */\n  // \n  for (;; nevents = 0) {\n    // spec\n    if (timeout != -1) {\n      spec.tv_sec = timeout / 1000;\n      spec.tv_nsec = (timeout % 1000) * 1000000;\n    }\n\n    if (pset != NULL)\n      pthread_sigmask(SIG_BLOCK, pset, NULL);\n    // \n    // timeout \n    // timeouttimerstimeoutevent-loop\n    nfds = kevent(loop->backend_fd,\n                  events,\n                  nevents,\n                  events,\n                  ARRAY_SIZE(events),\n                  timeout == -1 ? NULL : &spec);\n\n    if (pset != NULL)\n      pthread_sigmask(SIG_UNBLOCK, pset, NULL);\n\n    /* Update loop->time unconditionally. It's tempting to skip the update when\n     * timeout == 0 (i.e. non-blocking poll) but there is no guarantee that the\n     * operating system didn't reschedule our process while in the syscall.\n     */\n    SAVE_ERRNO(uv__update_time(loop));\n    //\n    if (nfds == 0) {\n      assert(timeout != -1);\n      return;\n    }\n\n    if (nfds == -1) {\n      if (errno != EINTR)\n        abort();\n\n      if (timeout == 0)\n        return;\n\n      if (timeout == -1)\n        continue;\n\n      /* Interrupted by a signal. Update timeout and poll again. */\n      goto update_timeout;\n    }\n\n    have_signals = 0;\n    nevents = 0;\n\n    //\n    assert(loop->watchers != NULL);\n    loop->watchers[loop->nwatchers] = (void*) events;\n    loop->watchers[loop->nwatchers + 1] = (void*) (uintptr_t) nfds;\n    // \n    for (i = 0; i < nfds; i++) {\n      // ...\n    }\n\n    if (have_signals != 0)\n      loop->signal_io_watcher.cb(loop, &loop->signal_io_watcher, POLLIN);\n\n    loop->watchers[loop->nwatchers] = NULL;\n    loop->watchers[loop->nwatchers + 1] = NULL;\n\n    if (have_signals != 0)\n      return;  /* Event loop should cycle now so don't poll again. */\n\n    if (nevents != 0) {\n      if (nfds == ARRAY_SIZE(events) && --count != 0) {\n        /* Poll for more events but don't block this time. */\n        timeout = 0;\n        continue;\n      }\n      return;\n    }\n\n    if (timeout == 0)\n      return;\n\n    if (timeout == -1)\n      continue;\n\nupdate_timeout:\n    assert(timeout > 0);\n\n    diff = loop->time - base;\n    if (diff >= (uint64_t) timeout)\n      return;\n\n    timeout -= diff;\n  }\n}\n```\n\npoll \n\n1`timers`\n2`poll`\n\nevent loop`poll``timers`\n  1`poll`event loop\n  2`poll`\n    1`setImmediate()`, event loop`poll``check``check`\n    2`setImmediate()`event loop`poll`\n\nevent loop`poll`timers`poll`poll \n\nevent loop`timers`,1`timers`event loop **timers**  **timer** \n\n#### check\n\n`setImmediate()``check` event loop`check``poll``setImmediate()``poll``poll``check``poll`\n\n#### close callbacks\nsockethandle socket.destroy()closeprocess.nextTick()\n\nnode**node**\n\n\n\n<img width=\"600\" src=\"2018-11-20-EventLoop/1.png\"/>\n\nnode\n\n<img width=\"600\" src=\"2018-11-20-EventLoop/2.png\"/>\n\nnodenode\n\n> timerstimer1timer1promise1.thenmicrotasktimer2timer2timerevent loopmicrotaskpromise1promise2\n\n#### process.nextTick()\n\n`process.nextTick()`nextTicknode`nextTickQueue``nextTickQueue``setImmediate()``process.nextTick()`\n```js\nconst fs = require('fs')\nconst starttime = Date.now()\nlet endtime\n\nsetTimeout(() => {\n  endtime = Date.now()\n  console.log('finish reading time: ', endtime - starttime)\n})\n\nlet index = 0\nfunction handler () {\n  if (index++ >= 1000) return\n  console.log(`nextTick ${index}`)\n  process.nextTick(handler)\n}\nhandler()\n\n// \n// nextTick 1\n// nextTick 2\n// ......\n// nextTick 999\n// nextTick 1000\n// finish reading time: 58\n```\n\n`setImmediate()`\n```js\nconst fs = require('fs')\nconst starttime = Date.now()\nlet endtime\n\nsetTimeout(() => {\n  endtime = Date.now()\n  console.log('finish reading time: ', endtime - starttime)\n})\n\nlet index = 0\nfunction handler () {\n  if (index++ >= 1000) return\n  console.log(`setImmediate ${index}`)\n  setImmediate(handler)\n}\nhandler()\n\n// \n// setImmediate 1\n// finish reading time:  4\n// setImmediate 2\n// ......\n// nextTick 1000\n```\n\n### \n\n\n\n****\n\n* 1. macrotask23\n* 2. macrotask\n* 3. microtask45\n* 4. microtask3\n* 5. 1\n\n\n\n* js\n* \n* UIUI\n* UI\n* UI\n\n**node**\n\n1timer\n*  timer  timer  timer  timerId \n*  process.nextTick \n* microtask\n* \n> \n\n2IO callbacks\n*  pending  I/O \n*  process.nextTick \n* microtask\n* \n\n3idleprepare\n* \n\n4poll\n\n\n  ****\n  * IO\n  *  process.nextTick \n  *  microtaks\n  * \n  ****\n  * \n  * immediatepoll\npoll\n\n5check\n* immediateimmediate\n*  process.nextTick \n*  microtaks\n* check\n> immediate()\n\n6closing\n* sockethandleclose\n*  process.nextTick \n*  microtaks\n*  closing \n\n7handlesIO\n* \n* \n\n### \n\nhttp://lynnelv.github.io/js-event-loop-nodejs\nhttps://juejin.im/post/5b73d7a6518825610072b42b\nhttp://javascript.ruanyifeng.com/dom/mutationobserver.html\nhttps://github.com/creeperyang/blog/issues/26\nhttps://juejin.im/post/5af1413ef265da0b851cce80\nhttps://cnodejs.org/topic/57d68794cb6f605d360105bf\n","source":"_posts/2018-11-20-EventLoop.md","raw":"---\ntitle: javascriptnodejs\ncomments: true\ntoc: true\ndate: 2018-11-20 14:01:23\ntags:\n    - 'javascript'\n    - 'node'\n---\n\n### \n\njsjsjsjs\n\n> js\n\njscall stack\n\n<!-- more -->\n\njsjsajaxajaxajax\n\n> ajaxajax\n\nstackjs\n\nPhilip Roberts[Help, I'm stuck in an event-loop](https://vimeo.com/96425312)\n\n<img width=\"600\" src=\"2018-11-20-EventLoop/11.png\"/>\n\nheapstackAPI\"\"clickloaddone\"\"\n\n#### \n\najax\n\n> macrotaskmicrotask\n\n**macrotask**  **microtask**\n\n> node\n\n\n\n**macrotask**jsXHRsetTimeoutsetIntervalrequestAnimationFrameI/OUI render\n\n**microtask**promiseObject.observeasync awaitMutationObserver\n\n[HTMLmacrotaskmicrotask](https://zhuanlan.zhihu.com/p/24460769)\n\n<img width=\"600\" src=\"2018-11-20-EventLoop/22.jpg\"/>\n\n> 12\n\n\n\n1. macrotask23\n2. macrotask\n3. microtask45\n4. microtask3\n5. 1\n\n5\n\n1js\n2\n3UIUI\n4UI\n\n\n```js\nconsole.log('start')\n\nsetTimeout(() => {\n  console.log('setTimeout')\n}, 0)\n\nPromise.resolve().then(() => {\n  console.log('promise1')\n}).then(() => {\n  console.log('promise2')\n})\n\nconsole.log('end')\n\n// start end promise1 promise2 setTimeout\n```\n<img width=\"600\" src=\"2018-11-20-EventLoop/33.gif\"/>\n\n`start``end`js`promise1``promise2`UI`setTimeout`UI\n\n`promise``then`\n```js\nsetTimeout(() => console.log(4))\n\nnew Promise(resolve => {\n  resolve()\n  console.log(1)\n}).then(_ => {\n  console.log(3)\n})\n\nconsole.log(2)\n\n// 1 2 3 4\n```\n\n#### UI\n\nUI5UI\n\n##### \n\nvue`nextTick`API`Promise.then``MessageChannel``setTimeout(fn, 0)`vue[](https://cn.vuejs.org/v2/guide/reactivity.html)\n\n> nextTickAPI\n\n##### \n\n`requestAnimationFrame`API\n```js\nsetTimeout(() => {console.log('setTimeout1')}, 0)\n\nrequestAnimationFrame(() =>{\n  console.log('requestAnimationFrame')\n})\n\nsetTimeout(() => {console.log('setTimeout2')}, 0)\n\nnew Promise((resolve) => {\n  console.log('promise 1')\n  resolve()\n  console.log('promise 2')\n}).then(() => {\n  console.log('promise then')\n})\n\nconsole.log('end')\n\n//  promise 1 promise 2 end promise then requestAnimationFrame setTimeout1 setTimeout2\n// promise 1 promise 2 end promise then setTimeout1 setTimeout2 requestAnimationFrame\n```\n<img width=\"600\" src=\"2018-11-20-EventLoop/huohu.jpg\"/>\n<img width=\"600\" src=\"2018-11-20-EventLoop/guge.jpg\"/>\n`requestAnimationFrame`\n\n### Node\n\n\n```js\nsetTimeout(()=>{\n  console.log('timer1')\n  Promise.resolve().then(() => {\n    console.log('promise1')\n  })\n}, 0)\n\nsetTimeout(()=>{\n  console.log('timer2')\n  Promise.resolve().then(() => {\n    console.log('promise2')\n  })\n}, 0)\n\n// timer1 promise1 timer2 promise2\n// nodetimer1 timer2 promise1 promise2\n```\nnode[JavaScript Event Loop](http://www.ruanyifeng.com/blog/2014/10/event-loop.html)\n\n<img width=\"600\" src=\"2018-11-20-EventLoop/node1.png\"/>\n\nNode.js\n\n1V8JavaScript\n\n2Node API\n\n3libuvNode APIEvent LoopV8\n\n4V8\n\nnode\n\n**macrotask**jsXHRsetTimeoutsetIntervalI/O setImmediate\n\n**microtask**promiseasync awaitprocess.nextTick\n\nlibuv[](https://github.com/libuv/libuv/blob/v1.x/src/unix/core.c#L348-L397)\n```c\nint uv_run(uv_loop_t* loop, uv_run_mode mode) {\n  int timeout;\n  int r;\n  int ran_pending;\n  //\n  r = uv__loop_alive(loop);\n  //\n  if (!r)\n    uv__update_time(loop);\n  //\n  while (r != 0 && loop->stop_flag == 0) {\n    //\n    uv__update_time(loop);\n    // timers\n    uv__run_timers(loop);\n    // I/O \n    ran_pending = uv__run_pending(loop);\n    // idle \n    uv__run_idle(loop);\n    // prepare \n    uv__run_prepare(loop);\n\n    timeout = 0;\n    if ((mode == UV_RUN_ONCE && !ran_pending) || mode == UV_RUN_DEFAULT)\n      // timer\n      timeout = uv_backend_timeout(loop);\n\n    // pollI/Otimeout\n    uv__io_poll(loop, timeout);\n    // check  setImmediate \n    uv__run_check(loop);\n    // close callbacks\n    uv__run_closing_handles(loop);\n\n    if (mode == UV_RUN_ONCE) {\n      //\n      uv__update_time(loop);\n      //timers\n      uv__run_timers(loop);\n    }\n\n    r = uv__loop_alive(loop);\n    if (mode == UV_RUN_ONCE || mode == UV_RUN_NOWAIT)\n      break;\n  }\n\n  /* The if statement lets gcc compile it to a conditional store. Avoids\n   * dirtying a cache line.\n   */\n  if (loop->stop_flag != 0)\n    loop->stop_flag = 0;\n\n  return r;\n}\n```\nNode.js, \n\n```js\n   \n>           timers           uv__run_timers(loop)\n  \n  \n         I/O callbacks        uv__run_pending(loop)\n  \n  \n         idle, prepare        uv__run_idle(loop)\n        \n           incoming:   \n             poll            <  connections,  uv__io_poll()\n           data, etc.  \n        \n             check            uv__run_check(loop)\n  \n  \n      close callbacks       uv__run_prepare(loop)\n   \n```\n* timers : setTimeout(callback) and setInterval(callback)callback;\n* I/O callbacks : closecallbackstimers(setTimeoutsetInterval)callbackssetImmediate()callbackscallbacks; ()\n* idle, prepare : node;\n* poll : I/O, node;\n* check : setImmediate() callbacks;\n* close callbacks : socket.on(close, callback)callback\n\n`check``setImmediate`callback`uv__run_prepare`callback`timers``setImmediate`\n\n#### timer\n\ntimer[](https://github.com/libuv/libuv/blob/v1.x/src/timer.c#L159-L176)\n```c\nstatic struct heap *timer_heap(const uv_loop_t* loop) {\n#ifdef _WIN32\n  return (struct heap*) loop->timer_heap;\n#else\n  return (struct heap*) &loop->timer_heap;\n#endif\n}\n\nint uv_timer_again(uv_timer_t* handle) {\n  if (handle->timer_cb == NULL)\n    return UV_EINVAL;\n\n  // repeat\n  if (handle->repeat) {\n    uv_timer_stop(handle);\n    uv_timer_start(handle, handle->timer_cb, handle->repeat, handle->repeat);\n  }\n\n  return 0;\n}\n\nvoid uv__run_timers(uv_loop_t* loop) {\n  struct heap_node* heap_node;\n  uv_timer_t* handle;\n\n  for (;;) {\n    // setTimeout/setInterval\n    heap_node = heap_min(timer_heap(loop));\n    if (heap_node == NULL)\n      break;\n\n    handle = container_of(heap_node, uv_timer_t, heap_node);\n    // \n    if (handle->timeout > loop->time)\n      break;\n    // \n    uv_timer_stop(handle);\n    // repeat\n    uv_timer_again(handle);\n    // \n    handle->timer_cb(handle);\n  }\n}\n```\n\nnodesetTimeoutsetImmediatesetTimeout\n```js\nsetTimeout(() => {\n  console.log('timeout')\n}, 0)\n\nsetImmediate(() => {\n  console.log('immediate')\n})\n\n// node  timeout immediate  immediate timeout\n```\n\n`setTimeout``setTimeout`\n```js\nsetTimeout(() => {\n  console.log('timeout')\n}, 0)\n\nsetImmediate(() => {\n  console.log('immediate')\n})\n\nconsole.log('')\n\n// node   timeout immediate\n```\n\n#### I/O callbacks\n\nTCPTCP socketECONNREFUSED,\nunix I/O callbacks \n\n> idle, prepare\n\n#### poll\n\n[](https://github.com/libuv/libuv/blob/e4087dedf837f415056a45a838f639a3d9dc3ced/src/unix/kqueue.c#L112-L381)\n```c\nvoid uv__io_poll(uv_loop_t* loop, int timeout) {\n  // \n  if (loop->nfds == 0) {\n    // \n    assert(QUEUE_EMPTY(&loop->watcher_queue));\n    return;\n  }\n\n  nevents = 0;\n  // \n  while (!QUEUE_EMPTY(&loop->watcher_queue)) {\n    /*\n    \n    \n    */\n    w->events = w->pevents;\n  }\n\n  pset = NULL;\n  if (loop->flags & UV_LOOP_BLOCK_SIGPROF) {\n    pset = &set;\n    sigemptyset(pset);\n    sigaddset(pset, SIGPROF);\n  }\n\n  assert(timeout >= -1);\n  // base\n  base = loop->time;\n  // \n  count = 48; /* Benchmarks suggest this gives the best throughput. */\n  // \n  for (;; nevents = 0) {\n    // spec\n    if (timeout != -1) {\n      spec.tv_sec = timeout / 1000;\n      spec.tv_nsec = (timeout % 1000) * 1000000;\n    }\n\n    if (pset != NULL)\n      pthread_sigmask(SIG_BLOCK, pset, NULL);\n    // \n    // timeout \n    // timeouttimerstimeoutevent-loop\n    nfds = kevent(loop->backend_fd,\n                  events,\n                  nevents,\n                  events,\n                  ARRAY_SIZE(events),\n                  timeout == -1 ? NULL : &spec);\n\n    if (pset != NULL)\n      pthread_sigmask(SIG_UNBLOCK, pset, NULL);\n\n    /* Update loop->time unconditionally. It's tempting to skip the update when\n     * timeout == 0 (i.e. non-blocking poll) but there is no guarantee that the\n     * operating system didn't reschedule our process while in the syscall.\n     */\n    SAVE_ERRNO(uv__update_time(loop));\n    //\n    if (nfds == 0) {\n      assert(timeout != -1);\n      return;\n    }\n\n    if (nfds == -1) {\n      if (errno != EINTR)\n        abort();\n\n      if (timeout == 0)\n        return;\n\n      if (timeout == -1)\n        continue;\n\n      /* Interrupted by a signal. Update timeout and poll again. */\n      goto update_timeout;\n    }\n\n    have_signals = 0;\n    nevents = 0;\n\n    //\n    assert(loop->watchers != NULL);\n    loop->watchers[loop->nwatchers] = (void*) events;\n    loop->watchers[loop->nwatchers + 1] = (void*) (uintptr_t) nfds;\n    // \n    for (i = 0; i < nfds; i++) {\n      // ...\n    }\n\n    if (have_signals != 0)\n      loop->signal_io_watcher.cb(loop, &loop->signal_io_watcher, POLLIN);\n\n    loop->watchers[loop->nwatchers] = NULL;\n    loop->watchers[loop->nwatchers + 1] = NULL;\n\n    if (have_signals != 0)\n      return;  /* Event loop should cycle now so don't poll again. */\n\n    if (nevents != 0) {\n      if (nfds == ARRAY_SIZE(events) && --count != 0) {\n        /* Poll for more events but don't block this time. */\n        timeout = 0;\n        continue;\n      }\n      return;\n    }\n\n    if (timeout == 0)\n      return;\n\n    if (timeout == -1)\n      continue;\n\nupdate_timeout:\n    assert(timeout > 0);\n\n    diff = loop->time - base;\n    if (diff >= (uint64_t) timeout)\n      return;\n\n    timeout -= diff;\n  }\n}\n```\n\npoll \n\n1`timers`\n2`poll`\n\nevent loop`poll``timers`\n  1`poll`event loop\n  2`poll`\n    1`setImmediate()`, event loop`poll``check``check`\n    2`setImmediate()`event loop`poll`\n\nevent loop`poll`timers`poll`poll \n\nevent loop`timers`,1`timers`event loop **timers**  **timer** \n\n#### check\n\n`setImmediate()``check` event loop`check``poll``setImmediate()``poll``poll``check``poll`\n\n#### close callbacks\nsockethandle socket.destroy()closeprocess.nextTick()\n\nnode**node**\n\n\n\n<img width=\"600\" src=\"2018-11-20-EventLoop/1.png\"/>\n\nnode\n\n<img width=\"600\" src=\"2018-11-20-EventLoop/2.png\"/>\n\nnodenode\n\n> timerstimer1timer1promise1.thenmicrotasktimer2timer2timerevent loopmicrotaskpromise1promise2\n\n#### process.nextTick()\n\n`process.nextTick()`nextTicknode`nextTickQueue``nextTickQueue``setImmediate()``process.nextTick()`\n```js\nconst fs = require('fs')\nconst starttime = Date.now()\nlet endtime\n\nsetTimeout(() => {\n  endtime = Date.now()\n  console.log('finish reading time: ', endtime - starttime)\n})\n\nlet index = 0\nfunction handler () {\n  if (index++ >= 1000) return\n  console.log(`nextTick ${index}`)\n  process.nextTick(handler)\n}\nhandler()\n\n// \n// nextTick 1\n// nextTick 2\n// ......\n// nextTick 999\n// nextTick 1000\n// finish reading time: 58\n```\n\n`setImmediate()`\n```js\nconst fs = require('fs')\nconst starttime = Date.now()\nlet endtime\n\nsetTimeout(() => {\n  endtime = Date.now()\n  console.log('finish reading time: ', endtime - starttime)\n})\n\nlet index = 0\nfunction handler () {\n  if (index++ >= 1000) return\n  console.log(`setImmediate ${index}`)\n  setImmediate(handler)\n}\nhandler()\n\n// \n// setImmediate 1\n// finish reading time:  4\n// setImmediate 2\n// ......\n// nextTick 1000\n```\n\n### \n\n\n\n****\n\n* 1. macrotask23\n* 2. macrotask\n* 3. microtask45\n* 4. microtask3\n* 5. 1\n\n\n\n* js\n* \n* UIUI\n* UI\n* UI\n\n**node**\n\n1timer\n*  timer  timer  timer  timerId \n*  process.nextTick \n* microtask\n* \n> \n\n2IO callbacks\n*  pending  I/O \n*  process.nextTick \n* microtask\n* \n\n3idleprepare\n* \n\n4poll\n\n\n  ****\n  * IO\n  *  process.nextTick \n  *  microtaks\n  * \n  ****\n  * \n  * immediatepoll\npoll\n\n5check\n* immediateimmediate\n*  process.nextTick \n*  microtaks\n* check\n> immediate()\n\n6closing\n* sockethandleclose\n*  process.nextTick \n*  microtaks\n*  closing \n\n7handlesIO\n* \n* \n\n### \n\nhttp://lynnelv.github.io/js-event-loop-nodejs\nhttps://juejin.im/post/5b73d7a6518825610072b42b\nhttp://javascript.ruanyifeng.com/dom/mutationobserver.html\nhttps://github.com/creeperyang/blog/issues/26\nhttps://juejin.im/post/5af1413ef265da0b851cce80\nhttps://cnodejs.org/topic/57d68794cb6f605d360105bf\n","slug":"2018-11-20-EventLoop","published":1,"updated":"2018-11-22T14:00:08.200Z","_id":"cjosd1vav000mfdldngdeewnm","layout":"post","photos":[],"link":"","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>jsjsjsjs</p>\n<blockquote>\n<p>js</p>\n</blockquote>\n<p>jscall stack</p>\n<a id=\"more\"></a>\n<p>jsjsajaxajaxajax</p>\n<blockquote>\n<p>ajaxajax</p>\n</blockquote>\n<p>stackjs</p>\n<p>Philip Roberts<a href=\"https://vimeo.com/96425312\" target=\"_blank\" rel=\"external\">Help, Im stuck in an event-loop</a></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/11.png\"></p>\n<p>heapstackAPIclickloaddone</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ajax</p>\n<blockquote>\n<p>macrotaskmicrotask</p>\n</blockquote>\n<p><strong>macrotask</strong>  <strong>microtask</strong></p>\n<blockquote>\n<p>node</p>\n</blockquote>\n<p></p>\n<p><strong>macrotask</strong>jsXHRsetTimeoutsetIntervalrequestAnimationFrameI/OUI render</p>\n<p><strong>microtask</strong>promiseObject.observeasync awaitMutationObserver</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/24460769\" target=\"_blank\" rel=\"external\">HTMLmacrotaskmicrotask</a></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/22.jpg\"></p>\n<blockquote>\n<p>12</p>\n</blockquote>\n<p></p>\n<ol>\n<li>macrotask23</li>\n<li>macrotask</li>\n<li>microtask45</li>\n<li>microtask3</li>\n<li>1</li>\n</ol>\n<p>5</p>\n<p>1js<br>2<br>3UIUI<br>4UI</p>\n<p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</div><div class=\"line\"></div><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'setTimeout'</span>)</div><div class=\"line\">&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'end'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// start end promise1 promise2 setTimeout</span></div></pre></td></tr></table></figure></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/33.gif\"></p>\n<p><code>start</code><code>end</code>js<code>promise1</code><code>promise2</code>UI<code>setTimeout</code>UI</p>\n<p><code>promise</code><code>then</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>))</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</div><div class=\"line\">  resolve()</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">_</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 1 2 3 4</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"UI\"><a href=\"#UI\" class=\"headerlink\" title=\"UI\"></a>UI</h4><p>UI5UI</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>vue<code>nextTick</code>API<code>Promise.then</code><code>MessageChannel</code><code>setTimeout(fn, 0)</code>vue<a href=\"https://cn.vuejs.org/v2/guide/reactivity.html\" target=\"_blank\" rel=\"external\"></a></p>\n<blockquote>\n<p>nextTickAPI</p>\n</blockquote>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><code>requestAnimationFrame</code>API<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;<span class=\"built_in\">console</span>.log(<span class=\"string\">'setTimeout1'</span>)&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\">requestAnimationFrame(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'requestAnimationFrame'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;<span class=\"built_in\">console</span>.log(<span class=\"string\">'setTimeout2'</span>)&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 1'</span>)</div><div class=\"line\">  resolve()</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 2'</span>)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise then'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'end'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//  promise 1 promise 2 end promise then requestAnimationFrame setTimeout1 setTimeout2</span></div><div class=\"line\"><span class=\"comment\">// promise 1 promise 2 end promise then setTimeout1 setTimeout2 requestAnimationFrame</span></div></pre></td></tr></table></figure></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/huohu.jpg\"><br><img width=\"600\" src=\"/2018-11-20-EventLoop/guge.jpg\"><br><code>requestAnimationFrame</code></p>\n<h3 id=\"Node\"><a href=\"#Node\" class=\"headerlink\" title=\"Node\"></a>Node</h3><p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>)</div><div class=\"line\">  <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</div><div class=\"line\">  <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// timer1 promise1 timer2 promise2</span></div><div class=\"line\"><span class=\"comment\">// nodetimer1 timer2 promise1 promise2</span></div></pre></td></tr></table></figure></p>\n<p>node<a href=\"http://www.ruanyifeng.com/blog/2014/10/event-loop.html\" target=\"_blank\" rel=\"external\">JavaScript Event Loop</a></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/node1.png\"></p>\n<p>Node.js</p>\n<p>1V8JavaScript</p>\n<p>2Node API</p>\n<p>3libuvNode APIEvent LoopV8</p>\n<p>4V8</p>\n<p>node</p>\n<p><strong>macrotask</strong>jsXHRsetTimeoutsetIntervalI/O setImmediate</p>\n<p><strong>microtask</strong>promiseasync awaitprocess.nextTick</p>\n<p>libuv<a href=\"https://github.com/libuv/libuv/blob/v1.x/src/unix/core.c#L348-L397\" target=\"_blank\" rel=\"external\"></a><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">uv_run</span><span class=\"params\">(<span class=\"keyword\">uv_loop_t</span>* loop, uv_run_mode mode)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">int</span> timeout;</div><div class=\"line\">  <span class=\"keyword\">int</span> r;</div><div class=\"line\">  <span class=\"keyword\">int</span> ran_pending;</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  r = uv__loop_alive(loop);</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (!r)</div><div class=\"line\">    uv__update_time(loop);</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"keyword\">while</span> (r != <span class=\"number\">0</span> &amp;&amp; loop-&gt;stop_flag == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    uv__update_time(loop);</div><div class=\"line\">    <span class=\"comment\">// timers</span></div><div class=\"line\">    uv__run_timers(loop);</div><div class=\"line\">    <span class=\"comment\">// I/O </span></div><div class=\"line\">    ran_pending = uv__run_pending(loop);</div><div class=\"line\">    <span class=\"comment\">// idle </span></div><div class=\"line\">    uv__run_idle(loop);</div><div class=\"line\">    <span class=\"comment\">// prepare </span></div><div class=\"line\">    uv__run_prepare(loop);</div><div class=\"line\"></div><div class=\"line\">    timeout = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> ((mode == UV_RUN_ONCE &amp;&amp; !ran_pending) || mode == UV_RUN_DEFAULT)</div><div class=\"line\">      <span class=\"comment\">// timer</span></div><div class=\"line\">      timeout = uv_backend_timeout(loop);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// pollI/Otimeout</span></div><div class=\"line\">    uv__io_poll(loop, timeout);</div><div class=\"line\">    <span class=\"comment\">// check  setImmediate </span></div><div class=\"line\">    uv__run_check(loop);</div><div class=\"line\">    <span class=\"comment\">// close callbacks</span></div><div class=\"line\">    uv__run_closing_handles(loop);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (mode == UV_RUN_ONCE) &#123;</div><div class=\"line\">      <span class=\"comment\">//</span></div><div class=\"line\">      uv__update_time(loop);</div><div class=\"line\">      <span class=\"comment\">//timers</span></div><div class=\"line\">      uv__run_timers(loop);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    r = uv__loop_alive(loop);</div><div class=\"line\">    <span class=\"keyword\">if</span> (mode == UV_RUN_ONCE || mode == UV_RUN_NOWAIT)</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">/* The if statement lets gcc compile it to a conditional store. Avoids</span></div><div class=\"line\"><span class=\"comment\">   * dirtying a cache line.</span></div><div class=\"line\"><span class=\"comment\">   */</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (loop-&gt;stop_flag != <span class=\"number\">0</span>)</div><div class=\"line\">    loop-&gt;stop_flag = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> r;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>Node.js, </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">   </div><div class=\"line\">&gt;           timers           uv__run_timers(loop)</div><div class=\"line\">  </div><div class=\"line\">  </div><div class=\"line\">         I/O callbacks        uv__run_pending(loop)</div><div class=\"line\">  </div><div class=\"line\">  </div><div class=\"line\">         idle, prepare        uv__run_idle(loop)</div><div class=\"line\">        </div><div class=\"line\">           incoming:   </div><div class=\"line\">             poll            &lt;  connections,  uv__io_poll()</div><div class=\"line\">           data, etc.  </div><div class=\"line\">        </div><div class=\"line\">             check            uv__run_check(loop)</div><div class=\"line\">  </div><div class=\"line\">  </div><div class=\"line\">      close callbacks       uv__run_prepare(loop)</div><div class=\"line\">   </div></pre></td></tr></table></figure>\n<ul>\n<li>timers : setTimeout(callback) and setInterval(callback)callback;</li>\n<li>I/O callbacks : closecallbackstimers(setTimeoutsetInterval)callbackssetImmediate()callbackscallbacks; ()</li>\n<li>idle, prepare : node;</li>\n<li>poll : I/O, node;</li>\n<li>check : setImmediate() callbacks;</li>\n<li>close callbacks : socket.on(close, callback)callback</li>\n</ul>\n<p><code>check</code><code>setImmediate</code>callback<code>uv__run_prepare</code>callback<code>timers</code><code>setImmediate</code></p>\n<h4 id=\"timer\"><a href=\"#timer\" class=\"headerlink\" title=\"timer\"></a>timer</h4><p>timer<a href=\"https://github.com/libuv/libuv/blob/v1.x/src/timer.c#L159-L176\" target=\"_blank\" rel=\"external\"></a><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> struct heap *<span class=\"title\">timer_heap</span><span class=\"params\">(<span class=\"keyword\">const</span> <span class=\"keyword\">uv_loop_t</span>* loop)</span> </span>&#123;</div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifdef</span> _WIN32</span></div><div class=\"line\">  <span class=\"keyword\">return</span> (struct heap*) loop-&gt;timer_heap;</div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">else</span></span></div><div class=\"line\">  <span class=\"keyword\">return</span> (struct heap*) &amp;loop-&gt;timer_heap;</div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">uv_timer_again</span><span class=\"params\">(<span class=\"keyword\">uv_timer_t</span>* handle)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (handle-&gt;timer_cb == <span class=\"literal\">NULL</span>)</div><div class=\"line\">    <span class=\"keyword\">return</span> UV_EINVAL;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// repeat</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (handle-&gt;repeat) &#123;</div><div class=\"line\">    uv_timer_stop(handle);</div><div class=\"line\">    uv_timer_start(handle, handle-&gt;timer_cb, handle-&gt;repeat, handle-&gt;repeat);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">uv__run_timers</span><span class=\"params\">(<span class=\"keyword\">uv_loop_t</span>* loop)</span> </span>&#123;</div><div class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">heap_node</span>* <span class=\"title\">heap_node</span>;</span></div><div class=\"line\">  <span class=\"keyword\">uv_timer_t</span>* handle;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">for</span> (;;) &#123;</div><div class=\"line\">    <span class=\"comment\">// setTimeout/setInterval</span></div><div class=\"line\">    heap_node = heap_min(timer_heap(loop));</div><div class=\"line\">    <span class=\"keyword\">if</span> (heap_node == <span class=\"literal\">NULL</span>)</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\"></div><div class=\"line\">    handle = container_of(heap_node, <span class=\"keyword\">uv_timer_t</span>, heap_node);</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">if</span> (handle-&gt;timeout &gt; loop-&gt;time)</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    uv_timer_stop(handle);</div><div class=\"line\">    <span class=\"comment\">// repeat</span></div><div class=\"line\">    uv_timer_again(handle);</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    handle-&gt;timer_cb(handle);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>nodesetTimeoutsetImmediatesetTimeout<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timeout'</span>)</div><div class=\"line\">&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\">setImmediate(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'immediate'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// node  timeout immediate  immediate timeout</span></div></pre></td></tr></table></figure></p>\n<p><code>setTimeout</code><code>setTimeout</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timeout'</span>)</div><div class=\"line\">&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\">setImmediate(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'immediate'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// node   timeout immediate</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"I-O-callbacks\"><a href=\"#I-O-callbacks\" class=\"headerlink\" title=\"I/O callbacks\"></a>I/O callbacks</h4><p>TCPTCP socketECONNREFUSED,<br>unix I/O callbacks </p>\n<blockquote>\n<p>idle, prepare</p>\n</blockquote>\n<h4 id=\"poll\"><a href=\"#poll\" class=\"headerlink\" title=\"poll\"></a>poll</h4><p><a href=\"https://github.com/libuv/libuv/blob/e4087dedf837f415056a45a838f639a3d9dc3ced/src/unix/kqueue.c#L112-L381\" target=\"_blank\" rel=\"external\"></a><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">uv__io_poll</span><span class=\"params\">(<span class=\"keyword\">uv_loop_t</span>* loop, <span class=\"keyword\">int</span> timeout)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">if</span> (loop-&gt;nfds == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    assert(QUEUE_EMPTY(&amp;loop-&gt;watcher_queue));</div><div class=\"line\">    <span class=\"keyword\">return</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  nevents = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">while</span> (!QUEUE_EMPTY(&amp;loop-&gt;watcher_queue)) &#123;</div><div class=\"line\">    <span class=\"comment\">/*</span></div><div class=\"line\"><span class=\"comment\">    </span></div><div class=\"line\"><span class=\"comment\">    </span></div><div class=\"line\"><span class=\"comment\">    */</span></div><div class=\"line\">    w-&gt;events = w-&gt;pevents;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  pset = <span class=\"literal\">NULL</span>;</div><div class=\"line\">  <span class=\"keyword\">if</span> (loop-&gt;flags &amp; UV_LOOP_BLOCK_SIGPROF) &#123;</div><div class=\"line\">    pset = &amp;<span class=\"built_in\">set</span>;</div><div class=\"line\">    sigemptyset(pset);</div><div class=\"line\">    sigaddset(pset, SIGPROF);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  assert(timeout &gt;= <span class=\"number\">-1</span>);</div><div class=\"line\">  <span class=\"comment\">// base</span></div><div class=\"line\">  base = loop-&gt;time;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  count = <span class=\"number\">48</span>; <span class=\"comment\">/* Benchmarks suggest this gives the best throughput. */</span></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">for</span> (;; nevents = <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    <span class=\"comment\">// spec</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (timeout != <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      spec.tv_sec = timeout / <span class=\"number\">1000</span>;</div><div class=\"line\">      spec.tv_nsec = (timeout % <span class=\"number\">1000</span>) * <span class=\"number\">1000000</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (pset != <span class=\"literal\">NULL</span>)</div><div class=\"line\">      pthread_sigmask(SIG_BLOCK, pset, <span class=\"literal\">NULL</span>);</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"comment\">// timeout </span></div><div class=\"line\">    <span class=\"comment\">// timeouttimerstimeoutevent-loop</span></div><div class=\"line\">    nfds = kevent(loop-&gt;backend_fd,</div><div class=\"line\">                  events,</div><div class=\"line\">                  nevents,</div><div class=\"line\">                  events,</div><div class=\"line\">                  ARRAY_SIZE(events),</div><div class=\"line\">                  timeout == <span class=\"number\">-1</span> ? <span class=\"literal\">NULL</span> : &amp;spec);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (pset != <span class=\"literal\">NULL</span>)</div><div class=\"line\">      pthread_sigmask(SIG_UNBLOCK, pset, <span class=\"literal\">NULL</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/* Update loop-&gt;time unconditionally. It's tempting to skip the update when</span></div><div class=\"line\"><span class=\"comment\">     * timeout == 0 (i.e. non-blocking poll) but there is no guarantee that the</span></div><div class=\"line\"><span class=\"comment\">     * operating system didn't reschedule our process while in the syscall.</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    SAVE_ERRNO(uv__update_time(loop));</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (nfds == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      assert(timeout != <span class=\"number\">-1</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (nfds == <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (errno != EINTR)</div><div class=\"line\">        <span class=\"built_in\">abort</span>();</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (timeout == <span class=\"number\">0</span>)</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (timeout == <span class=\"number\">-1</span>)</div><div class=\"line\">        <span class=\"keyword\">continue</span>;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">/* Interrupted by a signal. Update timeout and poll again. */</span></div><div class=\"line\">      <span class=\"keyword\">goto</span> update_timeout;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    have_signals = <span class=\"number\">0</span>;</div><div class=\"line\">    nevents = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    assert(loop-&gt;watchers != <span class=\"literal\">NULL</span>);</div><div class=\"line\">    loop-&gt;watchers[loop-&gt;nwatchers] = (<span class=\"keyword\">void</span>*) events;</div><div class=\"line\">    loop-&gt;watchers[loop-&gt;nwatchers + <span class=\"number\">1</span>] = (<span class=\"keyword\">void</span>*) (<span class=\"keyword\">uintptr_t</span>) nfds;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; nfds; i++) &#123;</div><div class=\"line\">      <span class=\"comment\">// ...</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (have_signals != <span class=\"number\">0</span>)</div><div class=\"line\">      loop-&gt;signal_io_watcher.cb(loop, &amp;loop-&gt;signal_io_watcher, POLLIN);</div><div class=\"line\"></div><div class=\"line\">    loop-&gt;watchers[loop-&gt;nwatchers] = <span class=\"literal\">NULL</span>;</div><div class=\"line\">    loop-&gt;watchers[loop-&gt;nwatchers + <span class=\"number\">1</span>] = <span class=\"literal\">NULL</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (have_signals != <span class=\"number\">0</span>)</div><div class=\"line\">      <span class=\"keyword\">return</span>;  <span class=\"comment\">/* Event loop should cycle now so don't poll again. */</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (nevents != <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (nfds == ARRAY_SIZE(events) &amp;&amp; --count != <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">/* Poll for more events but don't block this time. */</span></div><div class=\"line\">        timeout = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">continue</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (timeout == <span class=\"number\">0</span>)</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (timeout == <span class=\"number\">-1</span>)</div><div class=\"line\">      <span class=\"keyword\">continue</span>;</div><div class=\"line\"></div><div class=\"line\">update_timeout:</div><div class=\"line\">    assert(timeout &gt; <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">    diff = loop-&gt;time - base;</div><div class=\"line\">    <span class=\"keyword\">if</span> (diff &gt;= (<span class=\"keyword\">uint64_t</span>) timeout)</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\"></div><div class=\"line\">    timeout -= diff;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>poll </p>\n<p>1<code>timers</code><br>2<code>poll</code></p>\n<p>event loop<code>poll</code><code>timers</code><br>  1<code>poll</code>event loop<br>  2<code>poll</code><br>    1<code>setImmediate()</code>, event loop<code>poll</code><code>check</code><code>check</code><br>    2<code>setImmediate()</code>event loop<code>poll</code></p>\n<p>event loop<code>poll</code>timers<code>poll</code>poll </p>\n<p>event loop<code>timers</code>,1<code>timers</code>event loop <strong>timers</strong>  <strong>timer</strong> </p>\n<h4 id=\"check\"><a href=\"#check\" class=\"headerlink\" title=\"check\"></a>check</h4><p><code>setImmediate()</code><code>check</code> event loop<code>check</code><code>poll</code><code>setImmediate()</code><code>poll</code><code>poll</code><code>check</code><code>poll</code></p>\n<h4 id=\"close-callbacks\"><a href=\"#close-callbacks\" class=\"headerlink\" title=\"close callbacks\"></a>close callbacks</h4><p>sockethandle socket.destroy()closeprocess.nextTick()</p>\n<p>node<strong>node</strong></p>\n<p></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/1.png\"></p>\n<p>node</p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/2.png\"></p>\n<p>nodenode</p>\n<blockquote>\n<p>timerstimer1timer1promise1.thenmicrotasktimer2timer2timerevent loopmicrotaskpromise1promise2</p>\n</blockquote>\n<h4 id=\"process-nextTick\"><a href=\"#process-nextTick\" class=\"headerlink\" title=\"process.nextTick()\"></a>process.nextTick()</h4><p><code>process.nextTick()</code>nextTicknode<code>nextTickQueue</code><code>nextTickQueue</code><code>setImmediate()</code><code>process.nextTick()</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> starttime = <span class=\"built_in\">Date</span>.now()</div><div class=\"line\"><span class=\"keyword\">let</span> endtime</div><div class=\"line\"></div><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  endtime = <span class=\"built_in\">Date</span>.now()</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'finish reading time: '</span>, endtime - starttime)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> index = <span class=\"number\">0</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handler</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (index++ &gt;= <span class=\"number\">1000</span>) <span class=\"keyword\">return</span></div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`nextTick <span class=\"subst\">$&#123;index&#125;</span>`</span>)</div><div class=\"line\">  process.nextTick(handler)</div><div class=\"line\">&#125;</div><div class=\"line\">handler()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// nextTick 1</span></div><div class=\"line\"><span class=\"comment\">// nextTick 2</span></div><div class=\"line\"><span class=\"comment\">// ......</span></div><div class=\"line\"><span class=\"comment\">// nextTick 999</span></div><div class=\"line\"><span class=\"comment\">// nextTick 1000</span></div><div class=\"line\"><span class=\"comment\">// finish reading time: 58</span></div></pre></td></tr></table></figure></p>\n<p><code>setImmediate()</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> starttime = <span class=\"built_in\">Date</span>.now()</div><div class=\"line\"><span class=\"keyword\">let</span> endtime</div><div class=\"line\"></div><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  endtime = <span class=\"built_in\">Date</span>.now()</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'finish reading time: '</span>, endtime - starttime)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> index = <span class=\"number\">0</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handler</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (index++ &gt;= <span class=\"number\">1000</span>) <span class=\"keyword\">return</span></div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`setImmediate <span class=\"subst\">$&#123;index&#125;</span>`</span>)</div><div class=\"line\">  setImmediate(handler)</div><div class=\"line\">&#125;</div><div class=\"line\">handler()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// setImmediate 1</span></div><div class=\"line\"><span class=\"comment\">// finish reading time:  4</span></div><div class=\"line\"><span class=\"comment\">// setImmediate 2</span></div><div class=\"line\"><span class=\"comment\">// ......</span></div><div class=\"line\"><span class=\"comment\">// nextTick 1000</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><strong></strong></p>\n<ul>\n<li><ol>\n<li>macrotask23</li>\n</ol>\n</li>\n<li><ol>\n<li>macrotask</li>\n</ol>\n</li>\n<li><ol>\n<li>microtask45</li>\n</ol>\n</li>\n<li><ol>\n<li>microtask3</li>\n</ol>\n</li>\n<li><ol>\n<li>1</li>\n</ol>\n</li>\n</ul>\n<p></p>\n<ul>\n<li>js</li>\n<li></li>\n<li>UIUI</li>\n<li>UI</li>\n<li>UI</li>\n</ul>\n<p><strong>node</strong></p>\n<p>1timer</p>\n<ul>\n<li> timer  timer  timer  timerId </li>\n<li> process.nextTick </li>\n<li>microtask</li>\n<li><blockquote>\n<p></p>\n</blockquote>\n</li>\n</ul>\n<p>2IO callbacks</p>\n<ul>\n<li> pending  I/O </li>\n<li> process.nextTick </li>\n<li>microtask</li>\n<li></li>\n</ul>\n<p>3idleprepare</p>\n<ul>\n<li></li>\n</ul>\n<p>4poll</p>\n<p><br>  <strong></strong></p>\n<ul>\n<li>IO</li>\n<li> process.nextTick </li>\n<li> microtaks</li>\n<li><br><strong></strong></li>\n<li></li>\n<li>immediatepoll<br>poll</li>\n</ul>\n<p>5check</p>\n<ul>\n<li>immediateimmediate</li>\n<li> process.nextTick </li>\n<li> microtaks</li>\n<li>check<blockquote>\n<p>immediate()</p>\n</blockquote>\n</li>\n</ul>\n<p>6closing</p>\n<ul>\n<li>sockethandleclose</li>\n<li> process.nextTick </li>\n<li> microtaks</li>\n<li> closing </li>\n</ul>\n<p>7handlesIO</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://lynnelv.github.io/js-event-loop-nodejs\" target=\"_blank\" rel=\"external\">http://lynnelv.github.io/js-event-loop-nodejs</a><br><a href=\"https://juejin.im/post/5b73d7a6518825610072b42b\" target=\"_blank\" rel=\"external\">https://juejin.im/post/5b73d7a6518825610072b42b</a><br><a href=\"http://javascript.ruanyifeng.com/dom/mutationobserver.html\" target=\"_blank\" rel=\"external\">http://javascript.ruanyifeng.com/dom/mutationobserver.html</a><br><a href=\"https://github.com/creeperyang/blog/issues/26\" target=\"_blank\" rel=\"external\">https://github.com/creeperyang/blog/issues/26</a><br><a href=\"https://juejin.im/post/5af1413ef265da0b851cce80\" target=\"_blank\" rel=\"external\">https://juejin.im/post/5af1413ef265da0b851cce80</a><br><a href=\"https://cnodejs.org/topic/57d68794cb6f605d360105bf\" target=\"_blank\" rel=\"external\">https://cnodejs.org/topic/57d68794cb6f605d360105bf</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>jsjsjsjs</p>\n<blockquote>\n<p>js</p>\n</blockquote>\n<p>jscall stack</p>","more":"<p>jsjsajaxajaxajax</p>\n<blockquote>\n<p>ajaxajax</p>\n</blockquote>\n<p>stackjs</p>\n<p>Philip Roberts<a href=\"https://vimeo.com/96425312\" target=\"_blank\" rel=\"external\">Help, Im stuck in an event-loop</a></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/11.png\"></p>\n<p>heapstackAPIclickloaddone</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ajax</p>\n<blockquote>\n<p>macrotaskmicrotask</p>\n</blockquote>\n<p><strong>macrotask</strong>  <strong>microtask</strong></p>\n<blockquote>\n<p>node</p>\n</blockquote>\n<p></p>\n<p><strong>macrotask</strong>jsXHRsetTimeoutsetIntervalrequestAnimationFrameI/OUI render</p>\n<p><strong>microtask</strong>promiseObject.observeasync awaitMutationObserver</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/24460769\" target=\"_blank\" rel=\"external\">HTMLmacrotaskmicrotask</a></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/22.jpg\"></p>\n<blockquote>\n<p>12</p>\n</blockquote>\n<p></p>\n<ol>\n<li>macrotask23</li>\n<li>macrotask</li>\n<li>microtask45</li>\n<li>microtask3</li>\n<li>1</li>\n</ol>\n<p>5</p>\n<p>1js<br>2<br>3UIUI<br>4UI</p>\n<p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</div><div class=\"line\"></div><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'setTimeout'</span>)</div><div class=\"line\">&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'end'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// start end promise1 promise2 setTimeout</span></div></pre></td></tr></table></figure></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/33.gif\"></p>\n<p><code>start</code><code>end</code>js<code>promise1</code><code>promise2</code>UI<code>setTimeout</code>UI</p>\n<p><code>promise</code><code>then</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>))</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</div><div class=\"line\">  resolve()</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">_</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 1 2 3 4</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"UI\"><a href=\"#UI\" class=\"headerlink\" title=\"UI\"></a>UI</h4><p>UI5UI</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>vue<code>nextTick</code>API<code>Promise.then</code><code>MessageChannel</code><code>setTimeout(fn, 0)</code>vue<a href=\"https://cn.vuejs.org/v2/guide/reactivity.html\" target=\"_blank\" rel=\"external\"></a></p>\n<blockquote>\n<p>nextTickAPI</p>\n</blockquote>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><code>requestAnimationFrame</code>API<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;<span class=\"built_in\">console</span>.log(<span class=\"string\">'setTimeout1'</span>)&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\">requestAnimationFrame(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'requestAnimationFrame'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;<span class=\"built_in\">console</span>.log(<span class=\"string\">'setTimeout2'</span>)&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 1'</span>)</div><div class=\"line\">  resolve()</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 2'</span>)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise then'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'end'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//  promise 1 promise 2 end promise then requestAnimationFrame setTimeout1 setTimeout2</span></div><div class=\"line\"><span class=\"comment\">// promise 1 promise 2 end promise then setTimeout1 setTimeout2 requestAnimationFrame</span></div></pre></td></tr></table></figure></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/huohu.jpg\"><br><img width=\"600\" src=\"/2018-11-20-EventLoop/guge.jpg\"><br><code>requestAnimationFrame</code></p>\n<h3 id=\"Node\"><a href=\"#Node\" class=\"headerlink\" title=\"Node\"></a>Node</h3><p><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer1'</span>)</div><div class=\"line\">  <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise1'</span>)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timer2'</span>)</div><div class=\"line\">  <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise2'</span>)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// timer1 promise1 timer2 promise2</span></div><div class=\"line\"><span class=\"comment\">// nodetimer1 timer2 promise1 promise2</span></div></pre></td></tr></table></figure></p>\n<p>node<a href=\"http://www.ruanyifeng.com/blog/2014/10/event-loop.html\" target=\"_blank\" rel=\"external\">JavaScript Event Loop</a></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/node1.png\"></p>\n<p>Node.js</p>\n<p>1V8JavaScript</p>\n<p>2Node API</p>\n<p>3libuvNode APIEvent LoopV8</p>\n<p>4V8</p>\n<p>node</p>\n<p><strong>macrotask</strong>jsXHRsetTimeoutsetIntervalI/O setImmediate</p>\n<p><strong>microtask</strong>promiseasync awaitprocess.nextTick</p>\n<p>libuv<a href=\"https://github.com/libuv/libuv/blob/v1.x/src/unix/core.c#L348-L397\" target=\"_blank\" rel=\"external\"></a><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">uv_run</span><span class=\"params\">(<span class=\"keyword\">uv_loop_t</span>* loop, uv_run_mode mode)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">int</span> timeout;</div><div class=\"line\">  <span class=\"keyword\">int</span> r;</div><div class=\"line\">  <span class=\"keyword\">int</span> ran_pending;</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  r = uv__loop_alive(loop);</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (!r)</div><div class=\"line\">    uv__update_time(loop);</div><div class=\"line\">  <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"keyword\">while</span> (r != <span class=\"number\">0</span> &amp;&amp; loop-&gt;stop_flag == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    uv__update_time(loop);</div><div class=\"line\">    <span class=\"comment\">// timers</span></div><div class=\"line\">    uv__run_timers(loop);</div><div class=\"line\">    <span class=\"comment\">// I/O </span></div><div class=\"line\">    ran_pending = uv__run_pending(loop);</div><div class=\"line\">    <span class=\"comment\">// idle </span></div><div class=\"line\">    uv__run_idle(loop);</div><div class=\"line\">    <span class=\"comment\">// prepare </span></div><div class=\"line\">    uv__run_prepare(loop);</div><div class=\"line\"></div><div class=\"line\">    timeout = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> ((mode == UV_RUN_ONCE &amp;&amp; !ran_pending) || mode == UV_RUN_DEFAULT)</div><div class=\"line\">      <span class=\"comment\">// timer</span></div><div class=\"line\">      timeout = uv_backend_timeout(loop);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// pollI/Otimeout</span></div><div class=\"line\">    uv__io_poll(loop, timeout);</div><div class=\"line\">    <span class=\"comment\">// check  setImmediate </span></div><div class=\"line\">    uv__run_check(loop);</div><div class=\"line\">    <span class=\"comment\">// close callbacks</span></div><div class=\"line\">    uv__run_closing_handles(loop);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (mode == UV_RUN_ONCE) &#123;</div><div class=\"line\">      <span class=\"comment\">//</span></div><div class=\"line\">      uv__update_time(loop);</div><div class=\"line\">      <span class=\"comment\">//timers</span></div><div class=\"line\">      uv__run_timers(loop);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    r = uv__loop_alive(loop);</div><div class=\"line\">    <span class=\"keyword\">if</span> (mode == UV_RUN_ONCE || mode == UV_RUN_NOWAIT)</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">/* The if statement lets gcc compile it to a conditional store. Avoids</span></div><div class=\"line\"><span class=\"comment\">   * dirtying a cache line.</span></div><div class=\"line\"><span class=\"comment\">   */</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (loop-&gt;stop_flag != <span class=\"number\">0</span>)</div><div class=\"line\">    loop-&gt;stop_flag = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> r;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>Node.js, </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">   </div><div class=\"line\">&gt;           timers           uv__run_timers(loop)</div><div class=\"line\">  </div><div class=\"line\">  </div><div class=\"line\">         I/O callbacks        uv__run_pending(loop)</div><div class=\"line\">  </div><div class=\"line\">  </div><div class=\"line\">         idle, prepare        uv__run_idle(loop)</div><div class=\"line\">        </div><div class=\"line\">           incoming:   </div><div class=\"line\">             poll            &lt;  connections,  uv__io_poll()</div><div class=\"line\">           data, etc.  </div><div class=\"line\">        </div><div class=\"line\">             check            uv__run_check(loop)</div><div class=\"line\">  </div><div class=\"line\">  </div><div class=\"line\">      close callbacks       uv__run_prepare(loop)</div><div class=\"line\">   </div></pre></td></tr></table></figure>\n<ul>\n<li>timers : setTimeout(callback) and setInterval(callback)callback;</li>\n<li>I/O callbacks : closecallbackstimers(setTimeoutsetInterval)callbackssetImmediate()callbackscallbacks; ()</li>\n<li>idle, prepare : node;</li>\n<li>poll : I/O, node;</li>\n<li>check : setImmediate() callbacks;</li>\n<li>close callbacks : socket.on(close, callback)callback</li>\n</ul>\n<p><code>check</code><code>setImmediate</code>callback<code>uv__run_prepare</code>callback<code>timers</code><code>setImmediate</code></p>\n<h4 id=\"timer\"><a href=\"#timer\" class=\"headerlink\" title=\"timer\"></a>timer</h4><p>timer<a href=\"https://github.com/libuv/libuv/blob/v1.x/src/timer.c#L159-L176\" target=\"_blank\" rel=\"external\"></a><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> struct heap *<span class=\"title\">timer_heap</span><span class=\"params\">(<span class=\"keyword\">const</span> <span class=\"keyword\">uv_loop_t</span>* loop)</span> </span>&#123;</div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifdef</span> _WIN32</span></div><div class=\"line\">  <span class=\"keyword\">return</span> (struct heap*) loop-&gt;timer_heap;</div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">else</span></span></div><div class=\"line\">  <span class=\"keyword\">return</span> (struct heap*) &amp;loop-&gt;timer_heap;</div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">uv_timer_again</span><span class=\"params\">(<span class=\"keyword\">uv_timer_t</span>* handle)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (handle-&gt;timer_cb == <span class=\"literal\">NULL</span>)</div><div class=\"line\">    <span class=\"keyword\">return</span> UV_EINVAL;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// repeat</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (handle-&gt;repeat) &#123;</div><div class=\"line\">    uv_timer_stop(handle);</div><div class=\"line\">    uv_timer_start(handle, handle-&gt;timer_cb, handle-&gt;repeat, handle-&gt;repeat);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">uv__run_timers</span><span class=\"params\">(<span class=\"keyword\">uv_loop_t</span>* loop)</span> </span>&#123;</div><div class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">heap_node</span>* <span class=\"title\">heap_node</span>;</span></div><div class=\"line\">  <span class=\"keyword\">uv_timer_t</span>* handle;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">for</span> (;;) &#123;</div><div class=\"line\">    <span class=\"comment\">// setTimeout/setInterval</span></div><div class=\"line\">    heap_node = heap_min(timer_heap(loop));</div><div class=\"line\">    <span class=\"keyword\">if</span> (heap_node == <span class=\"literal\">NULL</span>)</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\"></div><div class=\"line\">    handle = container_of(heap_node, <span class=\"keyword\">uv_timer_t</span>, heap_node);</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">if</span> (handle-&gt;timeout &gt; loop-&gt;time)</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    uv_timer_stop(handle);</div><div class=\"line\">    <span class=\"comment\">// repeat</span></div><div class=\"line\">    uv_timer_again(handle);</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    handle-&gt;timer_cb(handle);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>nodesetTimeoutsetImmediatesetTimeout<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timeout'</span>)</div><div class=\"line\">&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\">setImmediate(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'immediate'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// node  timeout immediate  immediate timeout</span></div></pre></td></tr></table></figure></p>\n<p><code>setTimeout</code><code>setTimeout</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'timeout'</span>)</div><div class=\"line\">&#125;, <span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\">setImmediate(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'immediate'</span>)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// node   timeout immediate</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"I-O-callbacks\"><a href=\"#I-O-callbacks\" class=\"headerlink\" title=\"I/O callbacks\"></a>I/O callbacks</h4><p>TCPTCP socketECONNREFUSED,<br>unix I/O callbacks </p>\n<blockquote>\n<p>idle, prepare</p>\n</blockquote>\n<h4 id=\"poll\"><a href=\"#poll\" class=\"headerlink\" title=\"poll\"></a>poll</h4><p><a href=\"https://github.com/libuv/libuv/blob/e4087dedf837f415056a45a838f639a3d9dc3ced/src/unix/kqueue.c#L112-L381\" target=\"_blank\" rel=\"external\"></a><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">uv__io_poll</span><span class=\"params\">(<span class=\"keyword\">uv_loop_t</span>* loop, <span class=\"keyword\">int</span> timeout)</span> </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">if</span> (loop-&gt;nfds == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    assert(QUEUE_EMPTY(&amp;loop-&gt;watcher_queue));</div><div class=\"line\">    <span class=\"keyword\">return</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  nevents = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">while</span> (!QUEUE_EMPTY(&amp;loop-&gt;watcher_queue)) &#123;</div><div class=\"line\">    <span class=\"comment\">/*</span></div><div class=\"line\"><span class=\"comment\">    </span></div><div class=\"line\"><span class=\"comment\">    </span></div><div class=\"line\"><span class=\"comment\">    */</span></div><div class=\"line\">    w-&gt;events = w-&gt;pevents;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  pset = <span class=\"literal\">NULL</span>;</div><div class=\"line\">  <span class=\"keyword\">if</span> (loop-&gt;flags &amp; UV_LOOP_BLOCK_SIGPROF) &#123;</div><div class=\"line\">    pset = &amp;<span class=\"built_in\">set</span>;</div><div class=\"line\">    sigemptyset(pset);</div><div class=\"line\">    sigaddset(pset, SIGPROF);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  assert(timeout &gt;= <span class=\"number\">-1</span>);</div><div class=\"line\">  <span class=\"comment\">// base</span></div><div class=\"line\">  base = loop-&gt;time;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  count = <span class=\"number\">48</span>; <span class=\"comment\">/* Benchmarks suggest this gives the best throughput. */</span></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">for</span> (;; nevents = <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    <span class=\"comment\">// spec</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (timeout != <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      spec.tv_sec = timeout / <span class=\"number\">1000</span>;</div><div class=\"line\">      spec.tv_nsec = (timeout % <span class=\"number\">1000</span>) * <span class=\"number\">1000000</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (pset != <span class=\"literal\">NULL</span>)</div><div class=\"line\">      pthread_sigmask(SIG_BLOCK, pset, <span class=\"literal\">NULL</span>);</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"comment\">// timeout </span></div><div class=\"line\">    <span class=\"comment\">// timeouttimerstimeoutevent-loop</span></div><div class=\"line\">    nfds = kevent(loop-&gt;backend_fd,</div><div class=\"line\">                  events,</div><div class=\"line\">                  nevents,</div><div class=\"line\">                  events,</div><div class=\"line\">                  ARRAY_SIZE(events),</div><div class=\"line\">                  timeout == <span class=\"number\">-1</span> ? <span class=\"literal\">NULL</span> : &amp;spec);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (pset != <span class=\"literal\">NULL</span>)</div><div class=\"line\">      pthread_sigmask(SIG_UNBLOCK, pset, <span class=\"literal\">NULL</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/* Update loop-&gt;time unconditionally. It's tempting to skip the update when</span></div><div class=\"line\"><span class=\"comment\">     * timeout == 0 (i.e. non-blocking poll) but there is no guarantee that the</span></div><div class=\"line\"><span class=\"comment\">     * operating system didn't reschedule our process while in the syscall.</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    SAVE_ERRNO(uv__update_time(loop));</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (nfds == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      assert(timeout != <span class=\"number\">-1</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (nfds == <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (errno != EINTR)</div><div class=\"line\">        <span class=\"built_in\">abort</span>();</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (timeout == <span class=\"number\">0</span>)</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (timeout == <span class=\"number\">-1</span>)</div><div class=\"line\">        <span class=\"keyword\">continue</span>;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">/* Interrupted by a signal. Update timeout and poll again. */</span></div><div class=\"line\">      <span class=\"keyword\">goto</span> update_timeout;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    have_signals = <span class=\"number\">0</span>;</div><div class=\"line\">    nevents = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    assert(loop-&gt;watchers != <span class=\"literal\">NULL</span>);</div><div class=\"line\">    loop-&gt;watchers[loop-&gt;nwatchers] = (<span class=\"keyword\">void</span>*) events;</div><div class=\"line\">    loop-&gt;watchers[loop-&gt;nwatchers + <span class=\"number\">1</span>] = (<span class=\"keyword\">void</span>*) (<span class=\"keyword\">uintptr_t</span>) nfds;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; nfds; i++) &#123;</div><div class=\"line\">      <span class=\"comment\">// ...</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (have_signals != <span class=\"number\">0</span>)</div><div class=\"line\">      loop-&gt;signal_io_watcher.cb(loop, &amp;loop-&gt;signal_io_watcher, POLLIN);</div><div class=\"line\"></div><div class=\"line\">    loop-&gt;watchers[loop-&gt;nwatchers] = <span class=\"literal\">NULL</span>;</div><div class=\"line\">    loop-&gt;watchers[loop-&gt;nwatchers + <span class=\"number\">1</span>] = <span class=\"literal\">NULL</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (have_signals != <span class=\"number\">0</span>)</div><div class=\"line\">      <span class=\"keyword\">return</span>;  <span class=\"comment\">/* Event loop should cycle now so don't poll again. */</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (nevents != <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (nfds == ARRAY_SIZE(events) &amp;&amp; --count != <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">/* Poll for more events but don't block this time. */</span></div><div class=\"line\">        timeout = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">continue</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (timeout == <span class=\"number\">0</span>)</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (timeout == <span class=\"number\">-1</span>)</div><div class=\"line\">      <span class=\"keyword\">continue</span>;</div><div class=\"line\"></div><div class=\"line\">update_timeout:</div><div class=\"line\">    assert(timeout &gt; <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">    diff = loop-&gt;time - base;</div><div class=\"line\">    <span class=\"keyword\">if</span> (diff &gt;= (<span class=\"keyword\">uint64_t</span>) timeout)</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\"></div><div class=\"line\">    timeout -= diff;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>poll </p>\n<p>1<code>timers</code><br>2<code>poll</code></p>\n<p>event loop<code>poll</code><code>timers</code><br>  1<code>poll</code>event loop<br>  2<code>poll</code><br>    1<code>setImmediate()</code>, event loop<code>poll</code><code>check</code><code>check</code><br>    2<code>setImmediate()</code>event loop<code>poll</code></p>\n<p>event loop<code>poll</code>timers<code>poll</code>poll </p>\n<p>event loop<code>timers</code>,1<code>timers</code>event loop <strong>timers</strong>  <strong>timer</strong> </p>\n<h4 id=\"check\"><a href=\"#check\" class=\"headerlink\" title=\"check\"></a>check</h4><p><code>setImmediate()</code><code>check</code> event loop<code>check</code><code>poll</code><code>setImmediate()</code><code>poll</code><code>poll</code><code>check</code><code>poll</code></p>\n<h4 id=\"close-callbacks\"><a href=\"#close-callbacks\" class=\"headerlink\" title=\"close callbacks\"></a>close callbacks</h4><p>sockethandle socket.destroy()closeprocess.nextTick()</p>\n<p>node<strong>node</strong></p>\n<p></p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/1.png\"></p>\n<p>node</p>\n<p><img width=\"600\" src=\"/2018-11-20-EventLoop/2.png\"></p>\n<p>nodenode</p>\n<blockquote>\n<p>timerstimer1timer1promise1.thenmicrotasktimer2timer2timerevent loopmicrotaskpromise1promise2</p>\n</blockquote>\n<h4 id=\"process-nextTick\"><a href=\"#process-nextTick\" class=\"headerlink\" title=\"process.nextTick()\"></a>process.nextTick()</h4><p><code>process.nextTick()</code>nextTicknode<code>nextTickQueue</code><code>nextTickQueue</code><code>setImmediate()</code><code>process.nextTick()</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> starttime = <span class=\"built_in\">Date</span>.now()</div><div class=\"line\"><span class=\"keyword\">let</span> endtime</div><div class=\"line\"></div><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  endtime = <span class=\"built_in\">Date</span>.now()</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'finish reading time: '</span>, endtime - starttime)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> index = <span class=\"number\">0</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handler</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (index++ &gt;= <span class=\"number\">1000</span>) <span class=\"keyword\">return</span></div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`nextTick <span class=\"subst\">$&#123;index&#125;</span>`</span>)</div><div class=\"line\">  process.nextTick(handler)</div><div class=\"line\">&#125;</div><div class=\"line\">handler()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// nextTick 1</span></div><div class=\"line\"><span class=\"comment\">// nextTick 2</span></div><div class=\"line\"><span class=\"comment\">// ......</span></div><div class=\"line\"><span class=\"comment\">// nextTick 999</span></div><div class=\"line\"><span class=\"comment\">// nextTick 1000</span></div><div class=\"line\"><span class=\"comment\">// finish reading time: 58</span></div></pre></td></tr></table></figure></p>\n<p><code>setImmediate()</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> starttime = <span class=\"built_in\">Date</span>.now()</div><div class=\"line\"><span class=\"keyword\">let</span> endtime</div><div class=\"line\"></div><div class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  endtime = <span class=\"built_in\">Date</span>.now()</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'finish reading time: '</span>, endtime - starttime)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> index = <span class=\"number\">0</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handler</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (index++ &gt;= <span class=\"number\">1000</span>) <span class=\"keyword\">return</span></div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`setImmediate <span class=\"subst\">$&#123;index&#125;</span>`</span>)</div><div class=\"line\">  setImmediate(handler)</div><div class=\"line\">&#125;</div><div class=\"line\">handler()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// setImmediate 1</span></div><div class=\"line\"><span class=\"comment\">// finish reading time:  4</span></div><div class=\"line\"><span class=\"comment\">// setImmediate 2</span></div><div class=\"line\"><span class=\"comment\">// ......</span></div><div class=\"line\"><span class=\"comment\">// nextTick 1000</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><strong></strong></p>\n<ul>\n<li><ol>\n<li>macrotask23</li>\n</ol>\n</li>\n<li><ol>\n<li>macrotask</li>\n</ol>\n</li>\n<li><ol>\n<li>microtask45</li>\n</ol>\n</li>\n<li><ol>\n<li>microtask3</li>\n</ol>\n</li>\n<li><ol>\n<li>1</li>\n</ol>\n</li>\n</ul>\n<p></p>\n<ul>\n<li>js</li>\n<li></li>\n<li>UIUI</li>\n<li>UI</li>\n<li>UI</li>\n</ul>\n<p><strong>node</strong></p>\n<p>1timer</p>\n<ul>\n<li> timer  timer  timer  timerId </li>\n<li> process.nextTick </li>\n<li>microtask</li>\n<li><blockquote>\n<p></p>\n</blockquote>\n</li>\n</ul>\n<p>2IO callbacks</p>\n<ul>\n<li> pending  I/O </li>\n<li> process.nextTick </li>\n<li>microtask</li>\n<li></li>\n</ul>\n<p>3idleprepare</p>\n<ul>\n<li></li>\n</ul>\n<p>4poll</p>\n<p><br>  <strong></strong></p>\n<ul>\n<li>IO</li>\n<li> process.nextTick </li>\n<li> microtaks</li>\n<li><br><strong></strong></li>\n<li></li>\n<li>immediatepoll<br>poll</li>\n</ul>\n<p>5check</p>\n<ul>\n<li>immediateimmediate</li>\n<li> process.nextTick </li>\n<li> microtaks</li>\n<li>check<blockquote>\n<p>immediate()</p>\n</blockquote>\n</li>\n</ul>\n<p>6closing</p>\n<ul>\n<li>sockethandleclose</li>\n<li> process.nextTick </li>\n<li> microtaks</li>\n<li> closing </li>\n</ul>\n<p>7handlesIO</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://lynnelv.github.io/js-event-loop-nodejs\" target=\"_blank\" rel=\"external\">http://lynnelv.github.io/js-event-loop-nodejs</a><br><a href=\"https://juejin.im/post/5b73d7a6518825610072b42b\" target=\"_blank\" rel=\"external\">https://juejin.im/post/5b73d7a6518825610072b42b</a><br><a href=\"http://javascript.ruanyifeng.com/dom/mutationobserver.html\" target=\"_blank\" rel=\"external\">http://javascript.ruanyifeng.com/dom/mutationobserver.html</a><br><a href=\"https://github.com/creeperyang/blog/issues/26\" target=\"_blank\" rel=\"external\">https://github.com/creeperyang/blog/issues/26</a><br><a href=\"https://juejin.im/post/5af1413ef265da0b851cce80\" target=\"_blank\" rel=\"external\">https://juejin.im/post/5af1413ef265da0b851cce80</a><br><a href=\"https://cnodejs.org/topic/57d68794cb6f605d360105bf\" target=\"_blank\" rel=\"external\">https://cnodejs.org/topic/57d68794cb6f605d360105bf</a></p>"},{"title":"javascript--BST","comments":1,"toc":true,"date":"2018-03-11T01:50:45.000Z","_content":"\n### \n\n2\n\n \n\n<img width=\"600\" src=\"2018-3-11-BST/bst1.jpeg\"/>\n\n<!-- more -->\n\n### \n\n#### \n\n3 16 22 23 37 45 99\n\n<img width=\"600\" src=\"2018-3-11-BST/bst2.jpeg\"/>\n\n#### \n\n23 16 3 22 45 37 99\n\n<img width=\"600\" src=\"2018-3-11-BST/bst3.jpeg\"/>\n\n#### \n\n 3 22 16 37 99 45 23\n\n<img width=\"600\" src=\"2018-3-11-BST/bst4.jpeg\"/>\n\n### \n\n`inOrder``preOrder``postOrder`\n\nNode\n``` javascript\nclass Node {\n  constructor(data, left, right) {\n    this.data = data\n    this.left = left\n    this.right = right\n  }\n\n  show() {\n    return this.data\n  }\n}\n```\n\nBST\n``` javascript\nclass BST {\n  constructor() {\n    this.root = null\n  }\n\n  // \n  inOrder(node) {\n    if (!(node === null)) {\n      this.inOrder(node.left)\n      console.log(node.show() + '')\n      this.inOrder(node.right)\n    }\n  }\n\n  // \n  // \n  preOrder(node) {\n    if (!(node === null)) {\n      console.log(node.show() + '')\n      this.preOrder(node.left)\n      this.preOrder(node.right)\n    }\n  }\n\n  // \n  postOrder(node) {\n    if (!(node === null)) {\n      this.postOrder(node.left)\n      this.postOrder(node.right)\n      console.log(node.show() + '')\n    }\n  }\n}  \n```\n\n#### insert\n\n\n\n1\n2;4\n3null;\n4\n5null;\n\n<img width=\"600\" src=\"2018-3-11-BST/bst5.jpeg\"/>\n\n\n``` javascript\n// \n  insert(data) {\n    let n = new Node(data, null, null)\n    if (this.root === null) {\n      this.root = n\n    } else {\n      let current = this.root\n      let parent\n      while (true) {\n        parent = current\n        if (data < current.data) {\n          current = current.left\n          if (current === null) {\n            parent.left = n\n            break\n          }\n        } else {\n          current = current.right\n          if (current === null) {\n            parent.right = n\n            break\n          }\n        }\n      }\n    }\n  }\n```\n\n#### \n\nBST`getMin`,`getMax`,`find`\n\n> \n> \n> \n\n``` javascript\n// \n  getMin() {\n    let current = this.root\n    while (!(current.left === null)) {\n      current = current.left\n    }\n    return current.data\n  }\n\n  // \n  getMax() {\n    let current = this.root\n    while (!(current.right === null)) {\n      current = current.right\n    }\n    return current.data\n  }\n\n  // \n  find(data) {\n    let current = this.root\n    while (current !== null) {\n      if (current.data === data) {\n        return current\n      } else if (data < current.data) {\n        current = current.left\n      } else {\n        current = current.right\n      }\n    }\n    return null\n  }\n```\n\n#### \n\n\n\n1\n2;\n3\n4()  null\n5\n6:\n\n<img width=\"600\" src=\"2018-3-11-BST/bst6.jpeg\"/>\n\n\n``` javascript\n// \n  remove(data) {\n    let root = this.removeNode(this.root, data)\n    return root\n  }\n\n  removeNode(node, data) {\n    if (node === null) {\n      return null\n    }\n    if (data === node.data) {\n      // \n      if (node.left === null && node.right === null) {\n        return null\n      }\n      // \n      if (node.left === null) {\n        return node.right\n      }\n      // \n      if (node.right === null) {\n        return node.left\n      }\n      let tempNode = this.getSmallest(node.right);\n      node.data = tempNode.data;\n      node.right = this.removeNode(node.right, tempNode.data);\n      return node;\n    } else if (data < node.data) {\n      node.left = this.removeNode(node.left, data);\n      return node;\n    } else {\n      node.right = this.removeNode(node.right, data);\n      return node;\n    }\n  }\n```\n\n\n``` javascript\nclass Node {\n  constructor(data, left, right) {\n    this.data = data\n    this.left = left\n    this.right = right\n  }\n\n  show() {\n    return this.data\n  }\n}\n\nclass BST {\n  constructor() {\n    this.root = null\n  }\n\n  // \n  insert(data) {\n    let n = new Node(data, null, null)\n    if (this.root === null) {\n      this.root = n\n    } else {\n      let current = this.root\n      let parent\n      while (true) {\n        parent = current\n        if (data < current.data) {\n          current = current.left\n          if (current === null) {\n            parent.left = n\n            break\n          }\n        } else {\n          current = current.right\n          if (current === null) {\n            parent.right = n\n            break\n          }\n        }\n      }\n    }\n  }\n\n  // \n  inOrder(node) {\n    if (!(node === null)) {\n      this.inOrder(node.left)\n      console.log(node.show() + '')\n      this.inOrder(node.right)\n    }\n  }\n\n  // \n  // \n  preOrder(node) {\n    if (!(node === null)) {\n      console.log(node.show() + '')\n      this.preOrder(node.left)\n      this.preOrder(node.right)\n    }\n  }\n\n  // \n  postOrder(node) {\n    if (!(node === null)) {\n      this.postOrder(node.left)\n      this.postOrder(node.right)\n      console.log(node.show() + '')\n    }\n  }\n\n  // \n  getMin() {\n    let current = this.root\n    while (!(current.left === null)) {\n      current = current.left\n    }\n    return current.data\n  }\n\n  // \n  getMax() {\n    let current = this.root\n    while (!(current.right === null)) {\n      current = current.right\n    }\n    return current.data\n  }\n\n  // \n  find(data) {\n    let current = this.root\n    while (current !== null) {\n      if (current.data === data) {\n        return current\n      } else if (data < current.data) {\n        current = current.left\n      } else {\n        current = current.right\n      }\n    }\n    return null\n  }\n\n  // \n  remove(data) {\n    let root = this.removeNode(this.root, data)\n    return root\n  }\n\n  removeNode(node, data) {\n    if (node === null) {\n      return null\n    }\n    if (data === node.data) {\n      // \n      if (node.left === null && node.right === null) {\n        return null\n      }\n      // \n      if (node.left === null) {\n        return node.right\n      }\n      // \n      if (node.right === null) {\n        return node.left\n      }\n      let tempNode = this.getSmallest(node.right);\n      node.data = tempNode.data;\n      node.right = this.removeNode(node.right, tempNode.data);\n      return node;\n    } else if (data < node.data) {\n      node.left = this.removeNode(node.left, data);\n      return node;\n    } else {\n      node.right = this.removeNode(node.right, data);\n      return node;\n    }\n  }\n}\nvar nums = new BST();\nnums.insert(23);\nnums.insert(45);\nnums.insert(16);\nnums.insert(37);\nnums.insert(3);\nnums.insert(99);\nnums.insert(22);\n```\n\n\n","source":"_posts/2018-3-11-BST.md","raw":"---\ntitle: javascript--BST\ncomments: true\ntoc: true\ndate: 2018-03-11 09:50:45\ntags:\n    - 'javascript'\n    - 'ECMAScript 6'\n    - 'algorithm'\n---\n\n### \n\n2\n\n \n\n<img width=\"600\" src=\"2018-3-11-BST/bst1.jpeg\"/>\n\n<!-- more -->\n\n### \n\n#### \n\n3 16 22 23 37 45 99\n\n<img width=\"600\" src=\"2018-3-11-BST/bst2.jpeg\"/>\n\n#### \n\n23 16 3 22 45 37 99\n\n<img width=\"600\" src=\"2018-3-11-BST/bst3.jpeg\"/>\n\n#### \n\n 3 22 16 37 99 45 23\n\n<img width=\"600\" src=\"2018-3-11-BST/bst4.jpeg\"/>\n\n### \n\n`inOrder``preOrder``postOrder`\n\nNode\n``` javascript\nclass Node {\n  constructor(data, left, right) {\n    this.data = data\n    this.left = left\n    this.right = right\n  }\n\n  show() {\n    return this.data\n  }\n}\n```\n\nBST\n``` javascript\nclass BST {\n  constructor() {\n    this.root = null\n  }\n\n  // \n  inOrder(node) {\n    if (!(node === null)) {\n      this.inOrder(node.left)\n      console.log(node.show() + '')\n      this.inOrder(node.right)\n    }\n  }\n\n  // \n  // \n  preOrder(node) {\n    if (!(node === null)) {\n      console.log(node.show() + '')\n      this.preOrder(node.left)\n      this.preOrder(node.right)\n    }\n  }\n\n  // \n  postOrder(node) {\n    if (!(node === null)) {\n      this.postOrder(node.left)\n      this.postOrder(node.right)\n      console.log(node.show() + '')\n    }\n  }\n}  \n```\n\n#### insert\n\n\n\n1\n2;4\n3null;\n4\n5null;\n\n<img width=\"600\" src=\"2018-3-11-BST/bst5.jpeg\"/>\n\n\n``` javascript\n// \n  insert(data) {\n    let n = new Node(data, null, null)\n    if (this.root === null) {\n      this.root = n\n    } else {\n      let current = this.root\n      let parent\n      while (true) {\n        parent = current\n        if (data < current.data) {\n          current = current.left\n          if (current === null) {\n            parent.left = n\n            break\n          }\n        } else {\n          current = current.right\n          if (current === null) {\n            parent.right = n\n            break\n          }\n        }\n      }\n    }\n  }\n```\n\n#### \n\nBST`getMin`,`getMax`,`find`\n\n> \n> \n> \n\n``` javascript\n// \n  getMin() {\n    let current = this.root\n    while (!(current.left === null)) {\n      current = current.left\n    }\n    return current.data\n  }\n\n  // \n  getMax() {\n    let current = this.root\n    while (!(current.right === null)) {\n      current = current.right\n    }\n    return current.data\n  }\n\n  // \n  find(data) {\n    let current = this.root\n    while (current !== null) {\n      if (current.data === data) {\n        return current\n      } else if (data < current.data) {\n        current = current.left\n      } else {\n        current = current.right\n      }\n    }\n    return null\n  }\n```\n\n#### \n\n\n\n1\n2;\n3\n4()  null\n5\n6:\n\n<img width=\"600\" src=\"2018-3-11-BST/bst6.jpeg\"/>\n\n\n``` javascript\n// \n  remove(data) {\n    let root = this.removeNode(this.root, data)\n    return root\n  }\n\n  removeNode(node, data) {\n    if (node === null) {\n      return null\n    }\n    if (data === node.data) {\n      // \n      if (node.left === null && node.right === null) {\n        return null\n      }\n      // \n      if (node.left === null) {\n        return node.right\n      }\n      // \n      if (node.right === null) {\n        return node.left\n      }\n      let tempNode = this.getSmallest(node.right);\n      node.data = tempNode.data;\n      node.right = this.removeNode(node.right, tempNode.data);\n      return node;\n    } else if (data < node.data) {\n      node.left = this.removeNode(node.left, data);\n      return node;\n    } else {\n      node.right = this.removeNode(node.right, data);\n      return node;\n    }\n  }\n```\n\n\n``` javascript\nclass Node {\n  constructor(data, left, right) {\n    this.data = data\n    this.left = left\n    this.right = right\n  }\n\n  show() {\n    return this.data\n  }\n}\n\nclass BST {\n  constructor() {\n    this.root = null\n  }\n\n  // \n  insert(data) {\n    let n = new Node(data, null, null)\n    if (this.root === null) {\n      this.root = n\n    } else {\n      let current = this.root\n      let parent\n      while (true) {\n        parent = current\n        if (data < current.data) {\n          current = current.left\n          if (current === null) {\n            parent.left = n\n            break\n          }\n        } else {\n          current = current.right\n          if (current === null) {\n            parent.right = n\n            break\n          }\n        }\n      }\n    }\n  }\n\n  // \n  inOrder(node) {\n    if (!(node === null)) {\n      this.inOrder(node.left)\n      console.log(node.show() + '')\n      this.inOrder(node.right)\n    }\n  }\n\n  // \n  // \n  preOrder(node) {\n    if (!(node === null)) {\n      console.log(node.show() + '')\n      this.preOrder(node.left)\n      this.preOrder(node.right)\n    }\n  }\n\n  // \n  postOrder(node) {\n    if (!(node === null)) {\n      this.postOrder(node.left)\n      this.postOrder(node.right)\n      console.log(node.show() + '')\n    }\n  }\n\n  // \n  getMin() {\n    let current = this.root\n    while (!(current.left === null)) {\n      current = current.left\n    }\n    return current.data\n  }\n\n  // \n  getMax() {\n    let current = this.root\n    while (!(current.right === null)) {\n      current = current.right\n    }\n    return current.data\n  }\n\n  // \n  find(data) {\n    let current = this.root\n    while (current !== null) {\n      if (current.data === data) {\n        return current\n      } else if (data < current.data) {\n        current = current.left\n      } else {\n        current = current.right\n      }\n    }\n    return null\n  }\n\n  // \n  remove(data) {\n    let root = this.removeNode(this.root, data)\n    return root\n  }\n\n  removeNode(node, data) {\n    if (node === null) {\n      return null\n    }\n    if (data === node.data) {\n      // \n      if (node.left === null && node.right === null) {\n        return null\n      }\n      // \n      if (node.left === null) {\n        return node.right\n      }\n      // \n      if (node.right === null) {\n        return node.left\n      }\n      let tempNode = this.getSmallest(node.right);\n      node.data = tempNode.data;\n      node.right = this.removeNode(node.right, tempNode.data);\n      return node;\n    } else if (data < node.data) {\n      node.left = this.removeNode(node.left, data);\n      return node;\n    } else {\n      node.right = this.removeNode(node.right, data);\n      return node;\n    }\n  }\n}\nvar nums = new BST();\nnums.insert(23);\nnums.insert(45);\nnums.insert(16);\nnums.insert(37);\nnums.insert(3);\nnums.insert(99);\nnums.insert(22);\n```\n\n\n","slug":"2018-3-11-BST","published":1,"updated":"2018-03-11T12:16:44.826Z","layout":"post","photos":[],"link":"","_id":"cjosd1vax000ofdldyitkfuh6","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>2</p>\n<p> </p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst1.jpeg\"></p>\n<a id=\"more\"></a>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>3 16 22 23 37 45 99</p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst2.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>23 16 3 22 45 37 99</p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst3.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> 3 22 16 37 99 45 23</p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst4.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>inOrder</code><code>preOrder</code><code>postOrder</code></p>\n<p>Node<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(data, left, right) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.data = data</div><div class=\"line\">    <span class=\"keyword\">this</span>.left = left</div><div class=\"line\">    <span class=\"keyword\">this</span>.right = right</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  show() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.data</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>BST<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BST</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.root = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  inOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.inOrder(node.left)</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">      <span class=\"keyword\">this</span>.inOrder(node.right)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  preOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">      <span class=\"keyword\">this</span>.preOrder(node.left)</div><div class=\"line\">      <span class=\"keyword\">this</span>.preOrder(node.right)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  postOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.postOrder(node.left)</div><div class=\"line\">      <span class=\"keyword\">this</span>.postOrder(node.right)</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"insert\"><a href=\"#insert\" class=\"headerlink\" title=\"insert\"></a>insert</h4><p></p>\n<p>1<br>2;4<br>3null;<br>4<br>5null;</p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst5.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  insert(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> n = <span class=\"keyword\">new</span> Node(data, <span class=\"literal\">null</span>, <span class=\"literal\">null</span>)</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.root === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.root = n</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">      <span class=\"keyword\">let</span> parent</div><div class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</div><div class=\"line\">        parent = current</div><div class=\"line\">        <span class=\"keyword\">if</span> (data &lt; current.data) &#123;</div><div class=\"line\">          current = current.left</div><div class=\"line\">          <span class=\"keyword\">if</span> (current === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">            parent.left = n</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          current = current.right</div><div class=\"line\">          <span class=\"keyword\">if</span> (current === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">            parent.right = n</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>BST<code>getMin</code>,<code>getMax</code>,<code>find</code></p>\n<blockquote>\n<p><br><br></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  getMin() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(current.left === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      current = current.left</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> current.data</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  getMax() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(current.right === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      current = current.right</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> current.data</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  find(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (current !== <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (current.data === data) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> current</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data &lt; current.data) &#123;</div><div class=\"line\">        current = current.left</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        current = current.right</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>1<br>2;<br>3<br>4()  null<br>5<br>6:</p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst6.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  remove(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> root = <span class=\"keyword\">this</span>.removeNode(<span class=\"keyword\">this</span>.root, data)</div><div class=\"line\">    <span class=\"keyword\">return</span> root</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  removeNode(node, data) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (node === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (data === node.data) &#123;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.left === <span class=\"literal\">null</span> &amp;&amp; node.right === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.left === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> node.right</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.right === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> node.left</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">let</span> tempNode = <span class=\"keyword\">this</span>.getSmallest(node.right);</div><div class=\"line\">      node.data = tempNode.data;</div><div class=\"line\">      node.right = <span class=\"keyword\">this</span>.removeNode(node.right, tempNode.data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data &lt; node.data) &#123;</div><div class=\"line\">      node.left = <span class=\"keyword\">this</span>.removeNode(node.left, data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      node.right = <span class=\"keyword\">this</span>.removeNode(node.right, data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(data, left, right) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.data = data</div><div class=\"line\">    <span class=\"keyword\">this</span>.left = left</div><div class=\"line\">    <span class=\"keyword\">this</span>.right = right</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  show() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.data</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BST</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.root = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  insert(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> n = <span class=\"keyword\">new</span> Node(data, <span class=\"literal\">null</span>, <span class=\"literal\">null</span>)</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.root === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.root = n</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">      <span class=\"keyword\">let</span> parent</div><div class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</div><div class=\"line\">        parent = current</div><div class=\"line\">        <span class=\"keyword\">if</span> (data &lt; current.data) &#123;</div><div class=\"line\">          current = current.left</div><div class=\"line\">          <span class=\"keyword\">if</span> (current === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">            parent.left = n</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          current = current.right</div><div class=\"line\">          <span class=\"keyword\">if</span> (current === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">            parent.right = n</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  inOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.inOrder(node.left)</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">      <span class=\"keyword\">this</span>.inOrder(node.right)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  preOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">      <span class=\"keyword\">this</span>.preOrder(node.left)</div><div class=\"line\">      <span class=\"keyword\">this</span>.preOrder(node.right)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  postOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.postOrder(node.left)</div><div class=\"line\">      <span class=\"keyword\">this</span>.postOrder(node.right)</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  getMin() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(current.left === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      current = current.left</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> current.data</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  getMax() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(current.right === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      current = current.right</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> current.data</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  find(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (current !== <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (current.data === data) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> current</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data &lt; current.data) &#123;</div><div class=\"line\">        current = current.left</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        current = current.right</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  remove(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> root = <span class=\"keyword\">this</span>.removeNode(<span class=\"keyword\">this</span>.root, data)</div><div class=\"line\">    <span class=\"keyword\">return</span> root</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  removeNode(node, data) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (node === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (data === node.data) &#123;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.left === <span class=\"literal\">null</span> &amp;&amp; node.right === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.left === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> node.right</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.right === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> node.left</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">let</span> tempNode = <span class=\"keyword\">this</span>.getSmallest(node.right);</div><div class=\"line\">      node.data = tempNode.data;</div><div class=\"line\">      node.right = <span class=\"keyword\">this</span>.removeNode(node.right, tempNode.data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data &lt; node.data) &#123;</div><div class=\"line\">      node.left = <span class=\"keyword\">this</span>.removeNode(node.left, data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      node.right = <span class=\"keyword\">this</span>.removeNode(node.right, data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> nums = <span class=\"keyword\">new</span> BST();</div><div class=\"line\">nums.insert(<span class=\"number\">23</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">45</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">16</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">37</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">3</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">99</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">22</span>);</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>2</p>\n<p> </p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst1.jpeg\"></p>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>3 16 22 23 37 45 99</p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst2.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>23 16 3 22 45 37 99</p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst3.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> 3 22 16 37 99 45 23</p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst4.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>inOrder</code><code>preOrder</code><code>postOrder</code></p>\n<p>Node<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(data, left, right) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.data = data</div><div class=\"line\">    <span class=\"keyword\">this</span>.left = left</div><div class=\"line\">    <span class=\"keyword\">this</span>.right = right</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  show() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.data</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>BST<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BST</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.root = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  inOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.inOrder(node.left)</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">      <span class=\"keyword\">this</span>.inOrder(node.right)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  preOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">      <span class=\"keyword\">this</span>.preOrder(node.left)</div><div class=\"line\">      <span class=\"keyword\">this</span>.preOrder(node.right)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  postOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.postOrder(node.left)</div><div class=\"line\">      <span class=\"keyword\">this</span>.postOrder(node.right)</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"insert\"><a href=\"#insert\" class=\"headerlink\" title=\"insert\"></a>insert</h4><p></p>\n<p>1<br>2;4<br>3null;<br>4<br>5null;</p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst5.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  insert(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> n = <span class=\"keyword\">new</span> Node(data, <span class=\"literal\">null</span>, <span class=\"literal\">null</span>)</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.root === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.root = n</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">      <span class=\"keyword\">let</span> parent</div><div class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</div><div class=\"line\">        parent = current</div><div class=\"line\">        <span class=\"keyword\">if</span> (data &lt; current.data) &#123;</div><div class=\"line\">          current = current.left</div><div class=\"line\">          <span class=\"keyword\">if</span> (current === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">            parent.left = n</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          current = current.right</div><div class=\"line\">          <span class=\"keyword\">if</span> (current === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">            parent.right = n</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>BST<code>getMin</code>,<code>getMax</code>,<code>find</code></p>\n<blockquote>\n<p><br><br></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  getMin() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(current.left === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      current = current.left</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> current.data</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  getMax() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(current.right === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      current = current.right</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> current.data</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  find(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (current !== <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (current.data === data) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> current</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data &lt; current.data) &#123;</div><div class=\"line\">        current = current.left</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        current = current.right</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>1<br>2;<br>3<br>4()  null<br>5<br>6:</p>\n<p><img width=\"600\" src=\"/2018-3-11-BST/bst6.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  remove(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> root = <span class=\"keyword\">this</span>.removeNode(<span class=\"keyword\">this</span>.root, data)</div><div class=\"line\">    <span class=\"keyword\">return</span> root</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  removeNode(node, data) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (node === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (data === node.data) &#123;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.left === <span class=\"literal\">null</span> &amp;&amp; node.right === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.left === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> node.right</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.right === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> node.left</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">let</span> tempNode = <span class=\"keyword\">this</span>.getSmallest(node.right);</div><div class=\"line\">      node.data = tempNode.data;</div><div class=\"line\">      node.right = <span class=\"keyword\">this</span>.removeNode(node.right, tempNode.data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data &lt; node.data) &#123;</div><div class=\"line\">      node.left = <span class=\"keyword\">this</span>.removeNode(node.left, data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      node.right = <span class=\"keyword\">this</span>.removeNode(node.right, data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(data, left, right) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.data = data</div><div class=\"line\">    <span class=\"keyword\">this</span>.left = left</div><div class=\"line\">    <span class=\"keyword\">this</span>.right = right</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  show() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.data</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BST</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.root = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  insert(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> n = <span class=\"keyword\">new</span> Node(data, <span class=\"literal\">null</span>, <span class=\"literal\">null</span>)</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.root === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.root = n</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">      <span class=\"keyword\">let</span> parent</div><div class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</div><div class=\"line\">        parent = current</div><div class=\"line\">        <span class=\"keyword\">if</span> (data &lt; current.data) &#123;</div><div class=\"line\">          current = current.left</div><div class=\"line\">          <span class=\"keyword\">if</span> (current === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">            parent.left = n</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          current = current.right</div><div class=\"line\">          <span class=\"keyword\">if</span> (current === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">            parent.right = n</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  inOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.inOrder(node.left)</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">      <span class=\"keyword\">this</span>.inOrder(node.right)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  preOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">      <span class=\"keyword\">this</span>.preOrder(node.left)</div><div class=\"line\">      <span class=\"keyword\">this</span>.preOrder(node.right)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  postOrder(node) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(node === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.postOrder(node.left)</div><div class=\"line\">      <span class=\"keyword\">this</span>.postOrder(node.right)</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(node.show() + <span class=\"string\">''</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  getMin() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(current.left === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      current = current.left</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> current.data</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  getMax() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(current.right === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      current = current.right</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> current.data</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  find(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.root</div><div class=\"line\">    <span class=\"keyword\">while</span> (current !== <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (current.data === data) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> current</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data &lt; current.data) &#123;</div><div class=\"line\">        current = current.left</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        current = current.right</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  remove(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> root = <span class=\"keyword\">this</span>.removeNode(<span class=\"keyword\">this</span>.root, data)</div><div class=\"line\">    <span class=\"keyword\">return</span> root</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  removeNode(node, data) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (node === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (data === node.data) &#123;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.left === <span class=\"literal\">null</span> &amp;&amp; node.right === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span></div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.left === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> node.right</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">if</span> (node.right === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> node.left</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">let</span> tempNode = <span class=\"keyword\">this</span>.getSmallest(node.right);</div><div class=\"line\">      node.data = tempNode.data;</div><div class=\"line\">      node.right = <span class=\"keyword\">this</span>.removeNode(node.right, tempNode.data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data &lt; node.data) &#123;</div><div class=\"line\">      node.left = <span class=\"keyword\">this</span>.removeNode(node.left, data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      node.right = <span class=\"keyword\">this</span>.removeNode(node.right, data);</div><div class=\"line\">      <span class=\"keyword\">return</span> node;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> nums = <span class=\"keyword\">new</span> BST();</div><div class=\"line\">nums.insert(<span class=\"number\">23</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">45</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">16</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">37</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">3</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">99</span>);</div><div class=\"line\">nums.insert(<span class=\"number\">22</span>);</div></pre></td></tr></table></figure></p>"},{"title":"javascirpt--Graph","comments":1,"toc":true,"date":"2018-03-18T12:46:23.000Z","_content":"\n### \n\n4\n\n* \n* \n* \n* \n\n\n\n> \n<!-- more -->\n\n\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph1.jpeg\"/>\n\n\n\n> \n\n<img width=\"600\" src=\"2018-3-18-Graph/graph2.jpeg\"/>\n\n### \n\n4\n``` javascript\n// \nclass Graph {\n  constructor(v) {\n    this.vertices = v\n    this.vertexList = []\n    this.edges = 0\n    this.adj = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.adj[i] = []\n    }\n  }\n\n  // \n  addEdge(v, w) {\n    this.adj[v].push(w)\n    this.adj[w].push(v)\n    this.edges++\n  }\n\n  // \n  showGraph() {\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      console.log(i + \" -> \")\n      for (let j = 0, k = this.vertices; j < k; j++) {\n        if (this.adj[i][j] != undefined) {\n          console.log(this.adj[i][j] + ' ')\n        }\n      }\n    }\n  }\n}\n\n// \nlet g = new Graph(5);\n    g.addEdge(0,1);\n    g.addEdge(0,2);\n    g.addEdge(1,3);\n    g.addEdge(2,4);\n    g.showGraph();\n\n// \n// 0 -> 1 2\n// 1 -> 0 3\n// 2 -> 0 4\n// 3 -> 1\n// 4 -> 2    \n```\n\n#### \n\n \n\n<img width=\"600\" src=\"2018-3-18-Graph/graph3.jpeg\"/>\n\n\n``` javascript\n// \nclass Graph {\n  constructor(v) {\n    this.vertices = v\n    this.vertexList = []\n    this.edges = 0\n    this.adj = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.adj[i] = []\n    }\n    // \n    this.marked = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.marked[i] = false;\n    }\n  }\n\n  // \n  addEdge(v, w) {\n    this.adj[v].push(w)\n    this.adj[w].push(v)\n    this.edges++\n  }\n\n  // \n  showGraph() {\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      console.log(i + \" -> \")\n      for (let j = 0, k = this.vertices; j < k; j++) {\n        if (this.adj[i][j] != undefined) {\n          console.log(this.adj[i][j] + ' ')\n        }\n      }\n    }\n  }\n\n  dfs(v) {\n    this.marked[v] = true\n    if (this.adj[v] != undefined) {\n      console.log(\": \" + v)\n    }\n    for (let w of this.adj[v]) {\n      if (!this.marked[w]) {\n        this.dfs(w)\n      }\n    }\n  }\n}\n\nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.dfs(0)\n```\n\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph4.jpeg\"/>\n\n#### \n\n\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph5.jpeg\"/>\n\n\n\n* (1) ; \n* (2)  v;\n* (3)  v \n\n\n``` javascript\n// \nclass Graph {\n  constructor(v) {\n    this.vertices = v\n    this.vertexList = []\n    this.edges = 0\n    this.adj = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.adj[i] = []\n    }\n    // \n    this.marked = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.marked[i] = false;\n    }\n  }\n\n  // \n  addEdge(v, w) {\n    this.adj[v].push(w)\n    this.adj[w].push(v)\n    this.edges++\n  }\n\n  // \n  showGraph() {\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      console.log(i + \" -> \")\n      for (let j = 0, k = this.vertices; j < k; j++) {\n        if (this.adj[i][j] != undefined) {\n          console.log(this.adj[i][j] + ' ')\n        }\n      }\n    }\n  }\n\n  // \n  bfs(s) {\n    let queue = []\n    this.marked[s] = true\n    queue.unshift(s)\n    while (queue.length > 0) {\n      let v = queue.shift()\n      if (v !== undefined) {\n        console.log(\":  \" + v)\n      }\n      // \n      let adjacentDot = this.adj[v]\n      for (let w of adjacentDot) {\n        if (!this.marked[w]) {\n          this.marked[w] = true\n          queue.push(w)\n        }\n      }\n    }\n  }\n}\n\nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.bfs(0)\n```\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph6.jpeg\"/>\n\n### \n\n\n\n#### \n\n\n``` javascript\n// \nclass Graph {\n  constructor(v) {\n    this.vertices = v\n    this.vertexList = []\n    this.edges = 0\n    this.adj = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.adj[i] = []\n      // this.adj[i].push('')\n    }\n    // \n    this.marked = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.marked[i] = false;\n    }\n\n    // \n    this.edgeTo = []\n  }\n\n  // \n  addEdge(v, w) {\n    this.adj[v].push(w)\n    this.adj[w].push(v)\n    this.edges++\n  }\n\n  // \n  showGraph() {\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      console.log(i + \" -> \")\n      for (let j = 0, k = this.vertices; j < k; j++) {\n        if (this.adj[i][j] != undefined) {\n          console.log(this.adj[i][j] + ' ')\n        }\n      }\n    }\n  }\n\n  dfs(v) {\n    this.marked[v] = true\n    if (this.adj[v] != undefined) {\n      console.log(\": \" + v)\n    }\n    for (let w of this.adj[v]) {\n      if (!this.marked[w]) {\n        this.edgeToDfs[w] = v\n        this.dfs(w)\n      }\n    }\n  }\n\n  pathToDfs(s, v) {\n    if (!this.hashPathTo(v)) {\n      return undefined;\n    }\n    let path = [];\n    // \n    while(v !== s) {\n      path.push(v)\n      v = this.edgeToDfs[v]\n    }\n    path.push(s); //   \n    return path;\n  }\n\n  hashPathTo(v) {\n    return this.marked[v]\n  }\n}\n\n// \nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.dfs(0)\n// \nvar paths = g.pathToDfs(0, 4);\nwhile (paths.length > 0) {\n  if (paths.length > 1) {\n    console.log(paths.pop() + '-');\n  } else {\n    console.log(paths.pop());\n  }\n}\n\n//  0-2-4\n```\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph7.jpeg\"/>\n<img width=\"600\" src=\"2018-3-18-Graph/graph8.jpeg\"/>\n\n\n``` javascript\nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.addEdge(6, 4);\ng.dfs(0)\n// \nvar paths = g.pathToDfs(0, 4);\nwhile (paths.length > 0) {\n  if (paths.length > 1) {\n    console.log(paths.pop() + '-');\n  } else {\n    console.log(paths.pop());\n  }\n}\n// 0-1-3-6-4\n```\n`0-1-3-6-4``0-2-4``0-1-3-6-4-2-5`\n\n#### \n\n\n``` javascript\n// \nclass Graph {\n  constructor(v) {\n    this.vertices = v\n    this.vertexList = []\n    this.edges = 0\n    this.adj = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.adj[i] = []\n      // this.adj[i].push('')\n    }\n    // \n    this.marked = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.marked[i] = false;\n    }\n\n    // \n    this.edgeTo = []\n  }\n\n  // \n  addEdge(v, w) {\n    this.adj[v].push(w)\n    this.adj[w].push(v)\n    this.edges++\n  }\n\n  // \n  showGraph() {\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      console.log(i + \" -> \")\n      for (let j = 0, k = this.vertices; j < k; j++) {\n        if (this.adj[i][j] != undefined) {\n          console.log(this.adj[i][j] + ' ')\n        }\n      }\n    }\n  }\n\n  // \n  bfs(s) {\n    let queue = []\n    this.marked[s] = true\n    queue.unshift(s)\n    while (queue.length > 0) {\n      let v = queue.shift()\n      if (v !== undefined) {\n        console.log(\":  \" + v)\n      }\n      // \n      let adjacentDot = this.adj[v]\n      for (let w of adjacentDot) {\n        if (!this.marked[w]) {\n          this.edgeTo[w] = v\n          this.marked[w] = true\n          queue.push(w)\n        }\n      }\n    }\n  }\n\n  // \n  pathTo(s, v) {\n    if (!this.hashPathTo(v)) {\n      return undefined;\n    }\n    let path = [];\n    // \n    while (v !== s) {\n      path.push(v)\n      v = this.edgeTo[v]\n    }\n    path.push(s); //   \n    return path;\n  }\n\n  hashPathTo(v) {\n    return this.marked[v]\n  }\n}\n\n// \nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.bfs(0)\n// \nvar paths = g.pathTo(0, 4);\nwhile (paths.length > 0) {\n  if (paths.length > 1) {\n    console.log(paths.pop() + '-');\n  } else {\n    console.log(paths.pop());\n  }\n}\n\n//  0-2-4\n```\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph9.jpeg\"/>\n<img width=\"600\" src=\"2018-3-18-Graph/graph10.jpeg\"/>\n\n\n``` javascript\nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.addEdge(6, 4);\ng.bfs(0)\n// \nvar paths = g.pathToDfs(0, 4);\nwhile (paths.length > 0) {\n  if (paths.length > 1) {\n    console.log(paths.pop() + '-');\n  } else {\n    console.log(paths.pop());\n  }\n}\n// 0-2-4\n```\n`0-2-4`","source":"_posts/2018-3-18-Graph.md","raw":"---\ntitle: javascirpt--Graph\ncomments: true\ntoc: true\ndate: 2018-03-18 20:46:23\ntags:\n    - 'javascript'\n    - 'ECMAScript 6'\n    - 'algorithm'\n---\n\n### \n\n4\n\n* \n* \n* \n* \n\n\n\n> \n<!-- more -->\n\n\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph1.jpeg\"/>\n\n\n\n> \n\n<img width=\"600\" src=\"2018-3-18-Graph/graph2.jpeg\"/>\n\n### \n\n4\n``` javascript\n// \nclass Graph {\n  constructor(v) {\n    this.vertices = v\n    this.vertexList = []\n    this.edges = 0\n    this.adj = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.adj[i] = []\n    }\n  }\n\n  // \n  addEdge(v, w) {\n    this.adj[v].push(w)\n    this.adj[w].push(v)\n    this.edges++\n  }\n\n  // \n  showGraph() {\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      console.log(i + \" -> \")\n      for (let j = 0, k = this.vertices; j < k; j++) {\n        if (this.adj[i][j] != undefined) {\n          console.log(this.adj[i][j] + ' ')\n        }\n      }\n    }\n  }\n}\n\n// \nlet g = new Graph(5);\n    g.addEdge(0,1);\n    g.addEdge(0,2);\n    g.addEdge(1,3);\n    g.addEdge(2,4);\n    g.showGraph();\n\n// \n// 0 -> 1 2\n// 1 -> 0 3\n// 2 -> 0 4\n// 3 -> 1\n// 4 -> 2    \n```\n\n#### \n\n \n\n<img width=\"600\" src=\"2018-3-18-Graph/graph3.jpeg\"/>\n\n\n``` javascript\n// \nclass Graph {\n  constructor(v) {\n    this.vertices = v\n    this.vertexList = []\n    this.edges = 0\n    this.adj = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.adj[i] = []\n    }\n    // \n    this.marked = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.marked[i] = false;\n    }\n  }\n\n  // \n  addEdge(v, w) {\n    this.adj[v].push(w)\n    this.adj[w].push(v)\n    this.edges++\n  }\n\n  // \n  showGraph() {\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      console.log(i + \" -> \")\n      for (let j = 0, k = this.vertices; j < k; j++) {\n        if (this.adj[i][j] != undefined) {\n          console.log(this.adj[i][j] + ' ')\n        }\n      }\n    }\n  }\n\n  dfs(v) {\n    this.marked[v] = true\n    if (this.adj[v] != undefined) {\n      console.log(\": \" + v)\n    }\n    for (let w of this.adj[v]) {\n      if (!this.marked[w]) {\n        this.dfs(w)\n      }\n    }\n  }\n}\n\nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.dfs(0)\n```\n\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph4.jpeg\"/>\n\n#### \n\n\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph5.jpeg\"/>\n\n\n\n* (1) ; \n* (2)  v;\n* (3)  v \n\n\n``` javascript\n// \nclass Graph {\n  constructor(v) {\n    this.vertices = v\n    this.vertexList = []\n    this.edges = 0\n    this.adj = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.adj[i] = []\n    }\n    // \n    this.marked = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.marked[i] = false;\n    }\n  }\n\n  // \n  addEdge(v, w) {\n    this.adj[v].push(w)\n    this.adj[w].push(v)\n    this.edges++\n  }\n\n  // \n  showGraph() {\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      console.log(i + \" -> \")\n      for (let j = 0, k = this.vertices; j < k; j++) {\n        if (this.adj[i][j] != undefined) {\n          console.log(this.adj[i][j] + ' ')\n        }\n      }\n    }\n  }\n\n  // \n  bfs(s) {\n    let queue = []\n    this.marked[s] = true\n    queue.unshift(s)\n    while (queue.length > 0) {\n      let v = queue.shift()\n      if (v !== undefined) {\n        console.log(\":  \" + v)\n      }\n      // \n      let adjacentDot = this.adj[v]\n      for (let w of adjacentDot) {\n        if (!this.marked[w]) {\n          this.marked[w] = true\n          queue.push(w)\n        }\n      }\n    }\n  }\n}\n\nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.bfs(0)\n```\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph6.jpeg\"/>\n\n### \n\n\n\n#### \n\n\n``` javascript\n// \nclass Graph {\n  constructor(v) {\n    this.vertices = v\n    this.vertexList = []\n    this.edges = 0\n    this.adj = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.adj[i] = []\n      // this.adj[i].push('')\n    }\n    // \n    this.marked = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.marked[i] = false;\n    }\n\n    // \n    this.edgeTo = []\n  }\n\n  // \n  addEdge(v, w) {\n    this.adj[v].push(w)\n    this.adj[w].push(v)\n    this.edges++\n  }\n\n  // \n  showGraph() {\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      console.log(i + \" -> \")\n      for (let j = 0, k = this.vertices; j < k; j++) {\n        if (this.adj[i][j] != undefined) {\n          console.log(this.adj[i][j] + ' ')\n        }\n      }\n    }\n  }\n\n  dfs(v) {\n    this.marked[v] = true\n    if (this.adj[v] != undefined) {\n      console.log(\": \" + v)\n    }\n    for (let w of this.adj[v]) {\n      if (!this.marked[w]) {\n        this.edgeToDfs[w] = v\n        this.dfs(w)\n      }\n    }\n  }\n\n  pathToDfs(s, v) {\n    if (!this.hashPathTo(v)) {\n      return undefined;\n    }\n    let path = [];\n    // \n    while(v !== s) {\n      path.push(v)\n      v = this.edgeToDfs[v]\n    }\n    path.push(s); //   \n    return path;\n  }\n\n  hashPathTo(v) {\n    return this.marked[v]\n  }\n}\n\n// \nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.dfs(0)\n// \nvar paths = g.pathToDfs(0, 4);\nwhile (paths.length > 0) {\n  if (paths.length > 1) {\n    console.log(paths.pop() + '-');\n  } else {\n    console.log(paths.pop());\n  }\n}\n\n//  0-2-4\n```\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph7.jpeg\"/>\n<img width=\"600\" src=\"2018-3-18-Graph/graph8.jpeg\"/>\n\n\n``` javascript\nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.addEdge(6, 4);\ng.dfs(0)\n// \nvar paths = g.pathToDfs(0, 4);\nwhile (paths.length > 0) {\n  if (paths.length > 1) {\n    console.log(paths.pop() + '-');\n  } else {\n    console.log(paths.pop());\n  }\n}\n// 0-1-3-6-4\n```\n`0-1-3-6-4``0-2-4``0-1-3-6-4-2-5`\n\n#### \n\n\n``` javascript\n// \nclass Graph {\n  constructor(v) {\n    this.vertices = v\n    this.vertexList = []\n    this.edges = 0\n    this.adj = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.adj[i] = []\n      // this.adj[i].push('')\n    }\n    // \n    this.marked = []\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      this.marked[i] = false;\n    }\n\n    // \n    this.edgeTo = []\n  }\n\n  // \n  addEdge(v, w) {\n    this.adj[v].push(w)\n    this.adj[w].push(v)\n    this.edges++\n  }\n\n  // \n  showGraph() {\n    for (let i = 0, l = this.vertices; i < l; i++) {\n      console.log(i + \" -> \")\n      for (let j = 0, k = this.vertices; j < k; j++) {\n        if (this.adj[i][j] != undefined) {\n          console.log(this.adj[i][j] + ' ')\n        }\n      }\n    }\n  }\n\n  // \n  bfs(s) {\n    let queue = []\n    this.marked[s] = true\n    queue.unshift(s)\n    while (queue.length > 0) {\n      let v = queue.shift()\n      if (v !== undefined) {\n        console.log(\":  \" + v)\n      }\n      // \n      let adjacentDot = this.adj[v]\n      for (let w of adjacentDot) {\n        if (!this.marked[w]) {\n          this.edgeTo[w] = v\n          this.marked[w] = true\n          queue.push(w)\n        }\n      }\n    }\n  }\n\n  // \n  pathTo(s, v) {\n    if (!this.hashPathTo(v)) {\n      return undefined;\n    }\n    let path = [];\n    // \n    while (v !== s) {\n      path.push(v)\n      v = this.edgeTo[v]\n    }\n    path.push(s); //   \n    return path;\n  }\n\n  hashPathTo(v) {\n    return this.marked[v]\n  }\n}\n\n// \nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.bfs(0)\n// \nvar paths = g.pathTo(0, 4);\nwhile (paths.length > 0) {\n  if (paths.length > 1) {\n    console.log(paths.pop() + '-');\n  } else {\n    console.log(paths.pop());\n  }\n}\n\n//  0-2-4\n```\n\n<img width=\"600\" src=\"2018-3-18-Graph/graph9.jpeg\"/>\n<img width=\"600\" src=\"2018-3-18-Graph/graph10.jpeg\"/>\n\n\n``` javascript\nlet g = new Graph(7);\ng.addEdge(0, 1);\ng.addEdge(0, 2);\ng.addEdge(1, 3);\ng.addEdge(2, 4);\ng.addEdge(0, 5);\ng.addEdge(3, 6);\ng.addEdge(6, 4);\ng.bfs(0)\n// \nvar paths = g.pathToDfs(0, 4);\nwhile (paths.length > 0) {\n  if (paths.length > 1) {\n    console.log(paths.pop() + '-');\n  } else {\n    console.log(paths.pop());\n  }\n}\n// 0-2-4\n```\n`0-2-4`","slug":"2018-3-18-Graph","published":1,"updated":"2018-03-18T14:18:55.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vay000qfdldjyyohq9a","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>4</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<blockquote>\n<p><br><a id=\"more\"></a></p>\n</blockquote>\n<p></p>\n<p><img width=\"600\" src=\"/2018-3-18-Graph/graph1.jpeg\"></p>\n<p></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p><img width=\"600\" src=\"/2018-3-18-Graph/graph2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>4<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Graph</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertices = v</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertexList = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.adj = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.adj[i] = []</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  addEdge(v, w) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[v].push(w)</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[w].push(v)</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges++</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showGraph() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\" -&gt; \"</span>)</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>, k = <span class=\"keyword\">this</span>.vertices; j &lt; k; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[i][j] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.adj[i][j] + <span class=\"string\">' '</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">5</span>);</div><div class=\"line\">    g.addEdge(<span class=\"number\">0</span>,<span class=\"number\">1</span>);</div><div class=\"line\">    g.addEdge(<span class=\"number\">0</span>,<span class=\"number\">2</span>);</div><div class=\"line\">    g.addEdge(<span class=\"number\">1</span>,<span class=\"number\">3</span>);</div><div class=\"line\">    g.addEdge(<span class=\"number\">2</span>,<span class=\"number\">4</span>);</div><div class=\"line\">    g.showGraph();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// 0 -&gt; 1 2</span></div><div class=\"line\"><span class=\"comment\">// 1 -&gt; 0 3</span></div><div class=\"line\"><span class=\"comment\">// 2 -&gt; 0 4</span></div><div class=\"line\"><span class=\"comment\">// 3 -&gt; 1</span></div><div class=\"line\"><span class=\"comment\">// 4 -&gt; 2</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> </p>\n<p><img width=\"600\" src=\"/2018-3-18-Graph/graph3.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Graph</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertices = v</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertexList = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.adj = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.adj[i] = []</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.marked = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.marked[i] = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  addEdge(v, w) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[v].push(w)</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[w].push(v)</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges++</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showGraph() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\" -&gt; \"</span>)</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>, k = <span class=\"keyword\">this</span>.vertices; j &lt; k; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[i][j] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.adj[i][j] + <span class=\"string\">' '</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  dfs(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.marked[v] = <span class=\"literal\">true</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[v] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\": \"</span> + v)</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> w <span class=\"keyword\">of</span> <span class=\"keyword\">this</span>.adj[v]) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.marked[w]) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.dfs(w)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.dfs(<span class=\"number\">0</span>)</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-3-18-Graph/graph4.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p><img width=\"600\" src=\"/2018-3-18-Graph/graph5.jpeg\"></p>\n<p></p>\n<ul>\n<li>(1) ; </li>\n<li>(2)  v;</li>\n<li>(3)  v </li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Graph</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertices = v</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertexList = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.adj = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.adj[i] = []</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.marked = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.marked[i] = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  addEdge(v, w) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[v].push(w)</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[w].push(v)</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges++</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showGraph() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\" -&gt; \"</span>)</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>, k = <span class=\"keyword\">this</span>.vertices; j &lt; k; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[i][j] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.adj[i][j] + <span class=\"string\">' '</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  bfs(s) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> queue = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.marked[s] = <span class=\"literal\">true</span></div><div class=\"line\">    queue.unshift(s)</div><div class=\"line\">    <span class=\"keyword\">while</span> (queue.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> v = queue.shift()</div><div class=\"line\">      <span class=\"keyword\">if</span> (v !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\":  \"</span> + v)</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">let</span> adjacentDot = <span class=\"keyword\">this</span>.adj[v]</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> w <span class=\"keyword\">of</span> adjacentDot) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.marked[w]) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.marked[w] = <span class=\"literal\">true</span></div><div class=\"line\">          queue.push(w)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.bfs(<span class=\"number\">0</span>)</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-3-18-Graph/graph6.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Graph</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertices = v</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertexList = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.adj = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.adj[i] = []</div><div class=\"line\">      <span class=\"comment\">// this.adj[i].push('')</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.marked = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.marked[i] = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.edgeTo = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  addEdge(v, w) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[v].push(w)</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[w].push(v)</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges++</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showGraph() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\" -&gt; \"</span>)</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>, k = <span class=\"keyword\">this</span>.vertices; j &lt; k; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[i][j] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.adj[i][j] + <span class=\"string\">' '</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  dfs(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.marked[v] = <span class=\"literal\">true</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[v] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\": \"</span> + v)</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> w <span class=\"keyword\">of</span> <span class=\"keyword\">this</span>.adj[v]) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.marked[w]) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.edgeToDfs[w] = v</div><div class=\"line\">        <span class=\"keyword\">this</span>.dfs(w)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  pathToDfs(s, v) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.hashPathTo(v)) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">let</span> path = [];</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">while</span>(v !== s) &#123;</div><div class=\"line\">      path.push(v)</div><div class=\"line\">      v = <span class=\"keyword\">this</span>.edgeToDfs[v]</div><div class=\"line\">    &#125;</div><div class=\"line\">    path.push(s); <span class=\"comment\">//   </span></div><div class=\"line\">    <span class=\"keyword\">return</span> path;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  hashPathTo(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.marked[v]</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.dfs(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> paths = g.pathToDfs(<span class=\"number\">0</span>, <span class=\"number\">4</span>);</div><div class=\"line\"><span class=\"keyword\">while</span> (paths.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (paths.length &gt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop() + <span class=\"string\">'-'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop());</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//  0-2-4</span></div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-3-18-Graph/graph7.jpeg\"><br><img width=\"600\" src=\"/2018-3-18-Graph/graph8.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">6</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.dfs(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> paths = g.pathToDfs(<span class=\"number\">0</span>, <span class=\"number\">4</span>);</div><div class=\"line\"><span class=\"keyword\">while</span> (paths.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (paths.length &gt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop() + <span class=\"string\">'-'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop());</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// 0-1-3-6-4</span></div></pre></td></tr></table></figure></p>\n<p><code>0-1-3-6-4</code><code>0-2-4</code><code>0-1-3-6-4-2-5</code></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Graph</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertices = v</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertexList = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.adj = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.adj[i] = []</div><div class=\"line\">      <span class=\"comment\">// this.adj[i].push('')</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.marked = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.marked[i] = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.edgeTo = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  addEdge(v, w) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[v].push(w)</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[w].push(v)</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges++</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showGraph() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\" -&gt; \"</span>)</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>, k = <span class=\"keyword\">this</span>.vertices; j &lt; k; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[i][j] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.adj[i][j] + <span class=\"string\">' '</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  bfs(s) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> queue = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.marked[s] = <span class=\"literal\">true</span></div><div class=\"line\">    queue.unshift(s)</div><div class=\"line\">    <span class=\"keyword\">while</span> (queue.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> v = queue.shift()</div><div class=\"line\">      <span class=\"keyword\">if</span> (v !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\":  \"</span> + v)</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">let</span> adjacentDot = <span class=\"keyword\">this</span>.adj[v]</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> w <span class=\"keyword\">of</span> adjacentDot) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.marked[w]) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.edgeTo[w] = v</div><div class=\"line\">          <span class=\"keyword\">this</span>.marked[w] = <span class=\"literal\">true</span></div><div class=\"line\">          queue.push(w)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  pathTo(s, v) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.hashPathTo(v)) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">let</span> path = [];</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">while</span> (v !== s) &#123;</div><div class=\"line\">      path.push(v)</div><div class=\"line\">      v = <span class=\"keyword\">this</span>.edgeTo[v]</div><div class=\"line\">    &#125;</div><div class=\"line\">    path.push(s); <span class=\"comment\">//   </span></div><div class=\"line\">    <span class=\"keyword\">return</span> path;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  hashPathTo(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.marked[v]</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.bfs(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> paths = g.pathTo(<span class=\"number\">0</span>, <span class=\"number\">4</span>);</div><div class=\"line\"><span class=\"keyword\">while</span> (paths.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (paths.length &gt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop() + <span class=\"string\">'-'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop());</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//  0-2-4</span></div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-3-18-Graph/graph9.jpeg\"><br><img width=\"600\" src=\"/2018-3-18-Graph/graph10.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">6</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.bfs(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> paths = g.pathToDfs(<span class=\"number\">0</span>, <span class=\"number\">4</span>);</div><div class=\"line\"><span class=\"keyword\">while</span> (paths.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (paths.length &gt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop() + <span class=\"string\">'-'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop());</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// 0-2-4</span></div></pre></td></tr></table></figure></p>\n<p><code>0-2-4</code></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>4</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<blockquote>\n<p><br></p></blockquote>","more":"<p></p>\n\n<p></p>\n<p><img width=\"600\" src=\"/2018-3-18-Graph/graph1.jpeg\"></p>\n<p></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p><img width=\"600\" src=\"/2018-3-18-Graph/graph2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>4<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Graph</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertices = v</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertexList = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.adj = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.adj[i] = []</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  addEdge(v, w) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[v].push(w)</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[w].push(v)</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges++</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showGraph() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\" -&gt; \"</span>)</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>, k = <span class=\"keyword\">this</span>.vertices; j &lt; k; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[i][j] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.adj[i][j] + <span class=\"string\">' '</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">5</span>);</div><div class=\"line\">    g.addEdge(<span class=\"number\">0</span>,<span class=\"number\">1</span>);</div><div class=\"line\">    g.addEdge(<span class=\"number\">0</span>,<span class=\"number\">2</span>);</div><div class=\"line\">    g.addEdge(<span class=\"number\">1</span>,<span class=\"number\">3</span>);</div><div class=\"line\">    g.addEdge(<span class=\"number\">2</span>,<span class=\"number\">4</span>);</div><div class=\"line\">    g.showGraph();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// 0 -&gt; 1 2</span></div><div class=\"line\"><span class=\"comment\">// 1 -&gt; 0 3</span></div><div class=\"line\"><span class=\"comment\">// 2 -&gt; 0 4</span></div><div class=\"line\"><span class=\"comment\">// 3 -&gt; 1</span></div><div class=\"line\"><span class=\"comment\">// 4 -&gt; 2</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> </p>\n<p><img width=\"600\" src=\"/2018-3-18-Graph/graph3.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Graph</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertices = v</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertexList = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.adj = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.adj[i] = []</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.marked = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.marked[i] = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  addEdge(v, w) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[v].push(w)</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[w].push(v)</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges++</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showGraph() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\" -&gt; \"</span>)</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>, k = <span class=\"keyword\">this</span>.vertices; j &lt; k; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[i][j] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.adj[i][j] + <span class=\"string\">' '</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  dfs(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.marked[v] = <span class=\"literal\">true</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[v] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\": \"</span> + v)</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> w <span class=\"keyword\">of</span> <span class=\"keyword\">this</span>.adj[v]) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.marked[w]) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.dfs(w)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.dfs(<span class=\"number\">0</span>)</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-3-18-Graph/graph4.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p><img width=\"600\" src=\"/2018-3-18-Graph/graph5.jpeg\"></p>\n<p></p>\n<ul>\n<li>(1) ; </li>\n<li>(2)  v;</li>\n<li>(3)  v </li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Graph</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertices = v</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertexList = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.adj = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.adj[i] = []</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.marked = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.marked[i] = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  addEdge(v, w) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[v].push(w)</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[w].push(v)</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges++</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showGraph() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\" -&gt; \"</span>)</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>, k = <span class=\"keyword\">this</span>.vertices; j &lt; k; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[i][j] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.adj[i][j] + <span class=\"string\">' '</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  bfs(s) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> queue = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.marked[s] = <span class=\"literal\">true</span></div><div class=\"line\">    queue.unshift(s)</div><div class=\"line\">    <span class=\"keyword\">while</span> (queue.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> v = queue.shift()</div><div class=\"line\">      <span class=\"keyword\">if</span> (v !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\":  \"</span> + v)</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">let</span> adjacentDot = <span class=\"keyword\">this</span>.adj[v]</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> w <span class=\"keyword\">of</span> adjacentDot) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.marked[w]) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.marked[w] = <span class=\"literal\">true</span></div><div class=\"line\">          queue.push(w)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.bfs(<span class=\"number\">0</span>)</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-3-18-Graph/graph6.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Graph</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertices = v</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertexList = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.adj = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.adj[i] = []</div><div class=\"line\">      <span class=\"comment\">// this.adj[i].push('')</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.marked = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.marked[i] = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.edgeTo = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  addEdge(v, w) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[v].push(w)</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[w].push(v)</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges++</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showGraph() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\" -&gt; \"</span>)</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>, k = <span class=\"keyword\">this</span>.vertices; j &lt; k; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[i][j] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.adj[i][j] + <span class=\"string\">' '</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  dfs(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.marked[v] = <span class=\"literal\">true</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[v] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\": \"</span> + v)</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> w <span class=\"keyword\">of</span> <span class=\"keyword\">this</span>.adj[v]) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.marked[w]) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.edgeToDfs[w] = v</div><div class=\"line\">        <span class=\"keyword\">this</span>.dfs(w)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  pathToDfs(s, v) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.hashPathTo(v)) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">let</span> path = [];</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">while</span>(v !== s) &#123;</div><div class=\"line\">      path.push(v)</div><div class=\"line\">      v = <span class=\"keyword\">this</span>.edgeToDfs[v]</div><div class=\"line\">    &#125;</div><div class=\"line\">    path.push(s); <span class=\"comment\">//   </span></div><div class=\"line\">    <span class=\"keyword\">return</span> path;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  hashPathTo(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.marked[v]</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.dfs(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> paths = g.pathToDfs(<span class=\"number\">0</span>, <span class=\"number\">4</span>);</div><div class=\"line\"><span class=\"keyword\">while</span> (paths.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (paths.length &gt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop() + <span class=\"string\">'-'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop());</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//  0-2-4</span></div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-3-18-Graph/graph7.jpeg\"><br><img width=\"600\" src=\"/2018-3-18-Graph/graph8.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">6</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.dfs(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> paths = g.pathToDfs(<span class=\"number\">0</span>, <span class=\"number\">4</span>);</div><div class=\"line\"><span class=\"keyword\">while</span> (paths.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (paths.length &gt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop() + <span class=\"string\">'-'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop());</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// 0-1-3-6-4</span></div></pre></td></tr></table></figure></p>\n<p><code>0-1-3-6-4</code><code>0-2-4</code><code>0-1-3-6-4-2-5</code></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Graph</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertices = v</div><div class=\"line\">    <span class=\"keyword\">this</span>.vertexList = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.adj = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.adj[i] = []</div><div class=\"line\">      <span class=\"comment\">// this.adj[i].push('')</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.marked = []</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.marked[i] = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.edgeTo = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  addEdge(v, w) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[v].push(w)</div><div class=\"line\">    <span class=\"keyword\">this</span>.adj[w].push(v)</div><div class=\"line\">    <span class=\"keyword\">this</span>.edges++</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showGraph() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.vertices; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\" -&gt; \"</span>)</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>, k = <span class=\"keyword\">this</span>.vertices; j &lt; k; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.adj[i][j] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.adj[i][j] + <span class=\"string\">' '</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  bfs(s) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> queue = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.marked[s] = <span class=\"literal\">true</span></div><div class=\"line\">    queue.unshift(s)</div><div class=\"line\">    <span class=\"keyword\">while</span> (queue.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> v = queue.shift()</div><div class=\"line\">      <span class=\"keyword\">if</span> (v !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\":  \"</span> + v)</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">let</span> adjacentDot = <span class=\"keyword\">this</span>.adj[v]</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> w <span class=\"keyword\">of</span> adjacentDot) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.marked[w]) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.edgeTo[w] = v</div><div class=\"line\">          <span class=\"keyword\">this</span>.marked[w] = <span class=\"literal\">true</span></div><div class=\"line\">          queue.push(w)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  pathTo(s, v) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.hashPathTo(v)) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">let</span> path = [];</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">while</span> (v !== s) &#123;</div><div class=\"line\">      path.push(v)</div><div class=\"line\">      v = <span class=\"keyword\">this</span>.edgeTo[v]</div><div class=\"line\">    &#125;</div><div class=\"line\">    path.push(s); <span class=\"comment\">//   </span></div><div class=\"line\">    <span class=\"keyword\">return</span> path;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  hashPathTo(v) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.marked[v]</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.bfs(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> paths = g.pathTo(<span class=\"number\">0</span>, <span class=\"number\">4</span>);</div><div class=\"line\"><span class=\"keyword\">while</span> (paths.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (paths.length &gt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop() + <span class=\"string\">'-'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop());</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//  0-2-4</span></div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-3-18-Graph/graph9.jpeg\"><br><img width=\"600\" src=\"/2018-3-18-Graph/graph10.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> g = <span class=\"keyword\">new</span> Graph(<span class=\"number\">7</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">2</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">0</span>, <span class=\"number\">5</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">3</span>, <span class=\"number\">6</span>);</div><div class=\"line\">g.addEdge(<span class=\"number\">6</span>, <span class=\"number\">4</span>);</div><div class=\"line\">g.bfs(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> paths = g.pathToDfs(<span class=\"number\">0</span>, <span class=\"number\">4</span>);</div><div class=\"line\"><span class=\"keyword\">while</span> (paths.length &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (paths.length &gt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop() + <span class=\"string\">'-'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(paths.pop());</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// 0-2-4</span></div></pre></td></tr></table></figure></p>\n<p><code>0-2-4</code></p>"},{"title":"javascirpt--CArray","comments":1,"toc":true,"date":"2018-04-08T06:02:36.000Z","_content":"\n### \n\n#### \n\n\n   \n<!-- more -->\n\n\n``` javascript\n// \nbubbleSort() {\n  let numElements = this.dataStore.length\n  for (let outer = numElements; outer >= 2; --outer) {\n    for (let inner = 0; inner <= outer - 1; inner++) {\n      if (this.dataStore[inner] > this.dataStore[inner + 1]) {\n        this.swap(this.dataStore, inner, inner + 1)\n      }\n    }\n  }\n}\n```\n\n\n<img width=\"600\" src=\"2018-4-8-CArray/01.jpeg\"/>\n\n`flag`\n``` javascript\n// \nbubbleSort2() {\n  let flag\n  let numElements = this.dataStore.length\n  for (let outer = numElements; outer >= 2; --outer) {\n    flag = true\n    for (let inner = 0; inner <= outer - 1; inner++) {\n      if (this.dataStore[inner] > this.dataStore[inner + 1]) {\n        flag = false\n        this.swap(this.dataStore, inner, inner + 1)\n      }\n    }\n    if(flag) break\n  }\n}\n```\n\n#### \n\n \n\n\n``` javascript\n// \nselectionSort() {\n  let min, l = this.dataStore.length\n  for (let outer = 0; outer <= l - 1; outer++) {\n    min = outer\n    for (let inner = outer + 1; inner <= l; inner++) {\n      if (this.dataStore[inner] < this.dataStore[min]) {\n        min = inner\n      }\n    }\n    this.swap(this.dataStore, outer, min)\n  }\n}\n```\n\n\n<img width=\"600\" src=\"2018-4-8-CArray/02.jpeg\"/>\n\n#### \n\n\n\n\n``` javascript\n// \ninsertionSort() {\n  let temp, inner, l = this.dataStore.length\n  for (let outer = 1; outer <= l - 1; outer++) {\n    temp = this.dataStore[outer];\n    inner = outer;\n    while (inner > 0 && (this.dataStore[inner - 1] >= temp)) {\n      this.dataStore[inner] = this.dataStore[inner - 1];\n      --inner;\n    }\n    this.dataStore[inner] = temp;\n  }\n}\n```\n\n\n<img width=\"600\" src=\"2018-4-8-CArray/03.jpeg\"/>\n\n#### \n\n\n``` javascript\nvar start = new Date().getTime();\nmynums.bubbleSort2();\nvar stop = new Date().getTime();\nconsole.log('',stop - start)\nvar start = new Date().getTime();\nmynums.selectionSort();\nvar stop = new Date().getTime();\nconsole.log('',stop - start)\nvar start = new Date().getTime();\nmynums.insertionSort();\nvar stop = new Date().getTime();\nconsole.log('',stop - start)\n```\n\n1000 \n\n### \n\n#### \n\n    \n\n \n\n\n``` javascript\n// \nshellsort() {\n  let j\n  for (let g = 0; g < this.gaps.length; g++) {\n    for (let i = this.gaps[g]; i < this.dataStore.length; i++) {\n      let temp = this.dataStore[i];\n      for (j = i; j >= this.gaps[g] &&\n        this.dataStore[j - this.gaps[g]] > temp; j -= this.gaps[g]) {\n        this.dataStore[j] = this.dataStore[j - this.gaps[g]];\n      }\n      if(JSON.stringify(this.dataStore[j]) !== JSON.stringify(temp)) this.dataStore[j] = temp;\n    }\n  }\n}\n// \nsetGaps(arr) {\n  this.gaps = arr;\n}\n```\n\n\n<img width=\"600\" src=\"2018-4-8-CArray/04.jpeg\"/>\n\n`setGaps`\n``` javascript\n// \nshellsort1() {\n  let N = this.dataStore.length;\n  let h = 1;\n  while (h < N / 3) {\n    h = 3 * h + 1;\n  }\n  while (h >= 1) {\n    for (let i = h; i < N; i++) {\n      for (let j = i; j >= h && this.dataStore[j] < this.dataStore[j - h]; j -= h) {\n        this.swap(this.dataStore, j, j - h);\n      }\n    }\n    h = (h - 1) / 3;\n  }\n}\n```\n\n#### \n\n \n\n\n``` javascript\n//   \nmergeSort(arr) {\n  if (arr.length < 2) {\n    return;\n  }\n  let step = 1;\n  let left, right;\n  while (step < arr.length) {\n    left = 0;\n    right = step;\n    while (right + step <= arr.length) {\n      this.mergeArrays(arr, left, left + step, right, right + step);\n      left = right + step;\n      right = left + step;\n    }\n    if (right < arr.length) {\n      this.mergeArrays(arr, left, left + step, right, arr.length);\n    }\n    step *= 2;\n  }\n}\n\nmergeArrays(arr, startLeft, stopLeft, startRight, stopRight) {\n  let rightArr = new Array(stopRight - startRight + 1);\n  let leftArr = new Array(stopLeft - startLeft + 1);\n  let k = startRight;\n  for (let i = 0; i < (rightArr.length - 1); ++i) {\n    rightArr[i] = arr[k];\n    ++k;\n  }\n  k = startLeft;\n  for (let i = 0; i < (leftArr.length - 1); ++i) {\n    leftArr[i] = arr[k];\n    ++k;\n  }\n  rightArr[rightArr.length - 1] = Infinity; //  \n  leftArr[leftArr.length - 1] = Infinity; //  \n  let m = 0;\n  let n = 0;\n  for (let k = startLeft; k < stopRight; ++k) {\n    if (leftArr[m] <= rightArr[n]) {\n      arr[k] = leftArr[m];\n      m++;\n    } else {\n      arr[k] = rightArr[n];\n      n++;\n    }\n  }\n  console.log(\"left array - \", leftArr);\n  console.log(\"right array - \", rightArr);\n  console.log(\"array - \", arr);\n}\n```\n\n\n<img width=\"600\" src=\"2018-4-8-CArray/05.jpeg\"/>\n\n#### \n\n\n\n(pivot) \n\n>\n* (1) ;\n* (2) ;\n* (3)  1  2\n\n\n``` javascript\n// \nqSort(arr) {\n  if (arr.length == 0) {\n    return [];\n  }\n  let left = [];\n  let right = [];\n  let pivot = arr[0];\n  for (let i = 1; i < arr.length; i++) {\n    if (arr[i] < pivot) {\n      left.push(arr[i]);\n    } else {\n      right.push(arr[i]);\n    }\n  }\n  return this.qSort(left).concat(pivot, this.qSort(right));\n}\n```\n\n``` javascript\nclass CArray {\n  constructor(numElements) {\n    this.dataStore = []\n    this.pos = 0\n    this.numElements = numElements\n\n    for (let i = 0; i < numElements; i++) {\n      this.dataStore[i] = i;\n    }\n\n    this.gaps = []\n  }\n\n  setData() {\n    for (let i = 0; i < this.numElements; i++) {\n      this.dataStore[i] = Math.floor(Math.random() * (this.numElements + 1));\n    }\n  }\n\n  clear() {\n    for (let i = 0; i < this.dataStore.length; i++) {\n      this.dataStore[i] = 0;\n    }\n  }\n\n  insert(element) {\n    this.dataStore[this.pos++] = element;\n  }\n\n  toString() {\n    let retstr = \"\";\n    for (let i = 0; i < this.dataStore.length; i++) {\n      retstr += this.dataStore[i] + \" \";\n      if (i > 0 & i % 10 == 0) {\n        retstr += \"\\n\";\n      }\n    }\n    return retstr;\n  }\n\n  swap(arr, index1, index2) {\n    let temp = arr[index1];\n    arr[index1] = arr[index2];\n    arr[index2] = temp;\n  }\n\n  // \n  bubbleSort() {\n    let numElements = this.dataStore.length\n    for (let outer = numElements; outer >= 2; --outer) {\n      for (let inner = 0; inner <= outer - 1; inner++) {\n        if (this.dataStore[inner] > this.dataStore[inner + 1]) {\n          this.swap(this.dataStore, inner, inner + 1)\n        }\n      }\n    }\n  }\n\n  // \n  bubbleSort2() {\n    let flag\n    let numElements = this.dataStore.length\n    for (let outer = numElements; outer >= 2; --outer) {\n      flag = true\n      for (let inner = 0; inner <= outer - 1; inner++) {\n        if (this.dataStore[inner] > this.dataStore[inner + 1]) {\n          flag = false\n          this.swap(this.dataStore, inner, inner + 1)\n        }\n      }\n      if(flag) break\n    }\n  }\n\n  // \n  selectionSort() {\n    let min, l = this.dataStore.length\n    for (let outer = 0; outer <= l - 1; outer++) {\n      min = outer\n      for (let inner = outer + 1; inner <= l; inner++) {\n        if (this.dataStore[inner] < this.dataStore[min]) {\n          min = inner\n        }\n      }\n      this.swap(this.dataStore, outer, min)\n    }\n  }\n\n  // \n  insertionSort() {\n    let temp, inner, l = this.dataStore.length\n    for (let outer = 1; outer <= l - 1; outer++) {\n      temp = this.dataStore[outer];\n      inner = outer;\n      while (inner > 0 && (this.dataStore[inner - 1] >= temp)) {\n        this.dataStore[inner] = this.dataStore[inner - 1];\n        --inner;\n      }\n      this.dataStore[inner] = temp;\n    }\n  }\n\n  // \n  shellsort() {\n    let j\n    for (let g = 0; g < this.gaps.length; g++) {\n      for (let i = this.gaps[g]; i < this.dataStore.length; i++) {\n        let temp = this.dataStore[i];\n        for (j = i; j >= this.gaps[g] &&\n          this.dataStore[j - this.gaps[g]] > temp; j -= this.gaps[g]) {\n          this.dataStore[j] = this.dataStore[j - this.gaps[g]];\n        }\n        if(JSON.stringify(this.dataStore[j]) !== JSON.stringify(temp)) this.dataStore[j] = temp;\n      }\n    }\n  }\n  // \n  setGaps(arr) {\n    this.gaps = arr;\n  }\n\n  // \n  shellsort1() {\n    let N = this.dataStore.length;\n    let h = 1;\n    while (h < N / 3) {\n      h = 3 * h + 1;\n    }\n    while (h >= 1) {\n      for (let i = h; i < N; i++) {\n        for (let j = i; j >= h && this.dataStore[j] < this.dataStore[j - h]; j -= h) {\n          this.swap(this.dataStore, j, j - h);\n        }\n      }\n      h = (h - 1) / 3;\n    }\n  }\n\n  //   \n  mergeSort(arr) {\n    if (arr.length < 2) {\n      return;\n    }\n    let step = 1;\n    let left, right;\n    while (step < arr.length) {\n      left = 0;\n      right = step;\n      while (right + step <= arr.length) {\n        this.mergeArrays(arr, left, left + step, right, right + step);\n        left = right + step;\n        right = left + step;\n      }\n      if (right < arr.length) {\n        this.mergeArrays(arr, left, left + step, right, arr.length);\n      }\n      step *= 2;\n    }\n  }\n\n  mergeArrays(arr, startLeft, stopLeft, startRight, stopRight) {\n    let rightArr = new Array(stopRight - startRight + 1);\n    let leftArr = new Array(stopLeft - startLeft + 1);\n    let k = startRight;\n    for (let i = 0; i < (rightArr.length - 1); ++i) {\n      rightArr[i] = arr[k];\n      ++k;\n    }\n    k = startLeft;\n    for (let i = 0; i < (leftArr.length - 1); ++i) {\n      leftArr[i] = arr[k];\n      ++k;\n    }\n    rightArr[rightArr.length - 1] = Infinity; //  \n    leftArr[leftArr.length - 1] = Infinity; //  \n    let m = 0;\n    let n = 0;\n    for (let k = startLeft; k < stopRight; ++k) {\n      if (leftArr[m] <= rightArr[n]) {\n        arr[k] = leftArr[m];\n        m++;\n      } else {\n        arr[k] = rightArr[n];\n        n++;\n      }\n    }\n  }\n\n  // \n  qSort(arr) {\n    if (arr.length == 0) {\n      return [];\n    }\n    let left = [];\n    let right = [];\n    let pivot = arr[0];\n    for (let i = 1; i < arr.length; i++) {\n      if (arr[i] < pivot) {\n        left.push(arr[i]);\n      } else {\n        right.push(arr[i]);\n      }\n    }\n    return this.qSort(left).concat(pivot, this.qSort(right));\n  }\n}\n```","source":"_posts/2018-4-8-CArray.md","raw":"---\ntitle: javascirpt--CArray\ncomments: true\ntoc: true\ndate: 2018-04-08 14:02:36\ntags:\n    - 'javascript'\n    - 'ECMAScript 6'\n    - 'algorithm'\n---\n\n### \n\n#### \n\n\n   \n<!-- more -->\n\n\n``` javascript\n// \nbubbleSort() {\n  let numElements = this.dataStore.length\n  for (let outer = numElements; outer >= 2; --outer) {\n    for (let inner = 0; inner <= outer - 1; inner++) {\n      if (this.dataStore[inner] > this.dataStore[inner + 1]) {\n        this.swap(this.dataStore, inner, inner + 1)\n      }\n    }\n  }\n}\n```\n\n\n<img width=\"600\" src=\"2018-4-8-CArray/01.jpeg\"/>\n\n`flag`\n``` javascript\n// \nbubbleSort2() {\n  let flag\n  let numElements = this.dataStore.length\n  for (let outer = numElements; outer >= 2; --outer) {\n    flag = true\n    for (let inner = 0; inner <= outer - 1; inner++) {\n      if (this.dataStore[inner] > this.dataStore[inner + 1]) {\n        flag = false\n        this.swap(this.dataStore, inner, inner + 1)\n      }\n    }\n    if(flag) break\n  }\n}\n```\n\n#### \n\n \n\n\n``` javascript\n// \nselectionSort() {\n  let min, l = this.dataStore.length\n  for (let outer = 0; outer <= l - 1; outer++) {\n    min = outer\n    for (let inner = outer + 1; inner <= l; inner++) {\n      if (this.dataStore[inner] < this.dataStore[min]) {\n        min = inner\n      }\n    }\n    this.swap(this.dataStore, outer, min)\n  }\n}\n```\n\n\n<img width=\"600\" src=\"2018-4-8-CArray/02.jpeg\"/>\n\n#### \n\n\n\n\n``` javascript\n// \ninsertionSort() {\n  let temp, inner, l = this.dataStore.length\n  for (let outer = 1; outer <= l - 1; outer++) {\n    temp = this.dataStore[outer];\n    inner = outer;\n    while (inner > 0 && (this.dataStore[inner - 1] >= temp)) {\n      this.dataStore[inner] = this.dataStore[inner - 1];\n      --inner;\n    }\n    this.dataStore[inner] = temp;\n  }\n}\n```\n\n\n<img width=\"600\" src=\"2018-4-8-CArray/03.jpeg\"/>\n\n#### \n\n\n``` javascript\nvar start = new Date().getTime();\nmynums.bubbleSort2();\nvar stop = new Date().getTime();\nconsole.log('',stop - start)\nvar start = new Date().getTime();\nmynums.selectionSort();\nvar stop = new Date().getTime();\nconsole.log('',stop - start)\nvar start = new Date().getTime();\nmynums.insertionSort();\nvar stop = new Date().getTime();\nconsole.log('',stop - start)\n```\n\n1000 \n\n### \n\n#### \n\n    \n\n \n\n\n``` javascript\n// \nshellsort() {\n  let j\n  for (let g = 0; g < this.gaps.length; g++) {\n    for (let i = this.gaps[g]; i < this.dataStore.length; i++) {\n      let temp = this.dataStore[i];\n      for (j = i; j >= this.gaps[g] &&\n        this.dataStore[j - this.gaps[g]] > temp; j -= this.gaps[g]) {\n        this.dataStore[j] = this.dataStore[j - this.gaps[g]];\n      }\n      if(JSON.stringify(this.dataStore[j]) !== JSON.stringify(temp)) this.dataStore[j] = temp;\n    }\n  }\n}\n// \nsetGaps(arr) {\n  this.gaps = arr;\n}\n```\n\n\n<img width=\"600\" src=\"2018-4-8-CArray/04.jpeg\"/>\n\n`setGaps`\n``` javascript\n// \nshellsort1() {\n  let N = this.dataStore.length;\n  let h = 1;\n  while (h < N / 3) {\n    h = 3 * h + 1;\n  }\n  while (h >= 1) {\n    for (let i = h; i < N; i++) {\n      for (let j = i; j >= h && this.dataStore[j] < this.dataStore[j - h]; j -= h) {\n        this.swap(this.dataStore, j, j - h);\n      }\n    }\n    h = (h - 1) / 3;\n  }\n}\n```\n\n#### \n\n \n\n\n``` javascript\n//   \nmergeSort(arr) {\n  if (arr.length < 2) {\n    return;\n  }\n  let step = 1;\n  let left, right;\n  while (step < arr.length) {\n    left = 0;\n    right = step;\n    while (right + step <= arr.length) {\n      this.mergeArrays(arr, left, left + step, right, right + step);\n      left = right + step;\n      right = left + step;\n    }\n    if (right < arr.length) {\n      this.mergeArrays(arr, left, left + step, right, arr.length);\n    }\n    step *= 2;\n  }\n}\n\nmergeArrays(arr, startLeft, stopLeft, startRight, stopRight) {\n  let rightArr = new Array(stopRight - startRight + 1);\n  let leftArr = new Array(stopLeft - startLeft + 1);\n  let k = startRight;\n  for (let i = 0; i < (rightArr.length - 1); ++i) {\n    rightArr[i] = arr[k];\n    ++k;\n  }\n  k = startLeft;\n  for (let i = 0; i < (leftArr.length - 1); ++i) {\n    leftArr[i] = arr[k];\n    ++k;\n  }\n  rightArr[rightArr.length - 1] = Infinity; //  \n  leftArr[leftArr.length - 1] = Infinity; //  \n  let m = 0;\n  let n = 0;\n  for (let k = startLeft; k < stopRight; ++k) {\n    if (leftArr[m] <= rightArr[n]) {\n      arr[k] = leftArr[m];\n      m++;\n    } else {\n      arr[k] = rightArr[n];\n      n++;\n    }\n  }\n  console.log(\"left array - \", leftArr);\n  console.log(\"right array - \", rightArr);\n  console.log(\"array - \", arr);\n}\n```\n\n\n<img width=\"600\" src=\"2018-4-8-CArray/05.jpeg\"/>\n\n#### \n\n\n\n(pivot) \n\n>\n* (1) ;\n* (2) ;\n* (3)  1  2\n\n\n``` javascript\n// \nqSort(arr) {\n  if (arr.length == 0) {\n    return [];\n  }\n  let left = [];\n  let right = [];\n  let pivot = arr[0];\n  for (let i = 1; i < arr.length; i++) {\n    if (arr[i] < pivot) {\n      left.push(arr[i]);\n    } else {\n      right.push(arr[i]);\n    }\n  }\n  return this.qSort(left).concat(pivot, this.qSort(right));\n}\n```\n\n``` javascript\nclass CArray {\n  constructor(numElements) {\n    this.dataStore = []\n    this.pos = 0\n    this.numElements = numElements\n\n    for (let i = 0; i < numElements; i++) {\n      this.dataStore[i] = i;\n    }\n\n    this.gaps = []\n  }\n\n  setData() {\n    for (let i = 0; i < this.numElements; i++) {\n      this.dataStore[i] = Math.floor(Math.random() * (this.numElements + 1));\n    }\n  }\n\n  clear() {\n    for (let i = 0; i < this.dataStore.length; i++) {\n      this.dataStore[i] = 0;\n    }\n  }\n\n  insert(element) {\n    this.dataStore[this.pos++] = element;\n  }\n\n  toString() {\n    let retstr = \"\";\n    for (let i = 0; i < this.dataStore.length; i++) {\n      retstr += this.dataStore[i] + \" \";\n      if (i > 0 & i % 10 == 0) {\n        retstr += \"\\n\";\n      }\n    }\n    return retstr;\n  }\n\n  swap(arr, index1, index2) {\n    let temp = arr[index1];\n    arr[index1] = arr[index2];\n    arr[index2] = temp;\n  }\n\n  // \n  bubbleSort() {\n    let numElements = this.dataStore.length\n    for (let outer = numElements; outer >= 2; --outer) {\n      for (let inner = 0; inner <= outer - 1; inner++) {\n        if (this.dataStore[inner] > this.dataStore[inner + 1]) {\n          this.swap(this.dataStore, inner, inner + 1)\n        }\n      }\n    }\n  }\n\n  // \n  bubbleSort2() {\n    let flag\n    let numElements = this.dataStore.length\n    for (let outer = numElements; outer >= 2; --outer) {\n      flag = true\n      for (let inner = 0; inner <= outer - 1; inner++) {\n        if (this.dataStore[inner] > this.dataStore[inner + 1]) {\n          flag = false\n          this.swap(this.dataStore, inner, inner + 1)\n        }\n      }\n      if(flag) break\n    }\n  }\n\n  // \n  selectionSort() {\n    let min, l = this.dataStore.length\n    for (let outer = 0; outer <= l - 1; outer++) {\n      min = outer\n      for (let inner = outer + 1; inner <= l; inner++) {\n        if (this.dataStore[inner] < this.dataStore[min]) {\n          min = inner\n        }\n      }\n      this.swap(this.dataStore, outer, min)\n    }\n  }\n\n  // \n  insertionSort() {\n    let temp, inner, l = this.dataStore.length\n    for (let outer = 1; outer <= l - 1; outer++) {\n      temp = this.dataStore[outer];\n      inner = outer;\n      while (inner > 0 && (this.dataStore[inner - 1] >= temp)) {\n        this.dataStore[inner] = this.dataStore[inner - 1];\n        --inner;\n      }\n      this.dataStore[inner] = temp;\n    }\n  }\n\n  // \n  shellsort() {\n    let j\n    for (let g = 0; g < this.gaps.length; g++) {\n      for (let i = this.gaps[g]; i < this.dataStore.length; i++) {\n        let temp = this.dataStore[i];\n        for (j = i; j >= this.gaps[g] &&\n          this.dataStore[j - this.gaps[g]] > temp; j -= this.gaps[g]) {\n          this.dataStore[j] = this.dataStore[j - this.gaps[g]];\n        }\n        if(JSON.stringify(this.dataStore[j]) !== JSON.stringify(temp)) this.dataStore[j] = temp;\n      }\n    }\n  }\n  // \n  setGaps(arr) {\n    this.gaps = arr;\n  }\n\n  // \n  shellsort1() {\n    let N = this.dataStore.length;\n    let h = 1;\n    while (h < N / 3) {\n      h = 3 * h + 1;\n    }\n    while (h >= 1) {\n      for (let i = h; i < N; i++) {\n        for (let j = i; j >= h && this.dataStore[j] < this.dataStore[j - h]; j -= h) {\n          this.swap(this.dataStore, j, j - h);\n        }\n      }\n      h = (h - 1) / 3;\n    }\n  }\n\n  //   \n  mergeSort(arr) {\n    if (arr.length < 2) {\n      return;\n    }\n    let step = 1;\n    let left, right;\n    while (step < arr.length) {\n      left = 0;\n      right = step;\n      while (right + step <= arr.length) {\n        this.mergeArrays(arr, left, left + step, right, right + step);\n        left = right + step;\n        right = left + step;\n      }\n      if (right < arr.length) {\n        this.mergeArrays(arr, left, left + step, right, arr.length);\n      }\n      step *= 2;\n    }\n  }\n\n  mergeArrays(arr, startLeft, stopLeft, startRight, stopRight) {\n    let rightArr = new Array(stopRight - startRight + 1);\n    let leftArr = new Array(stopLeft - startLeft + 1);\n    let k = startRight;\n    for (let i = 0; i < (rightArr.length - 1); ++i) {\n      rightArr[i] = arr[k];\n      ++k;\n    }\n    k = startLeft;\n    for (let i = 0; i < (leftArr.length - 1); ++i) {\n      leftArr[i] = arr[k];\n      ++k;\n    }\n    rightArr[rightArr.length - 1] = Infinity; //  \n    leftArr[leftArr.length - 1] = Infinity; //  \n    let m = 0;\n    let n = 0;\n    for (let k = startLeft; k < stopRight; ++k) {\n      if (leftArr[m] <= rightArr[n]) {\n        arr[k] = leftArr[m];\n        m++;\n      } else {\n        arr[k] = rightArr[n];\n        n++;\n      }\n    }\n  }\n\n  // \n  qSort(arr) {\n    if (arr.length == 0) {\n      return [];\n    }\n    let left = [];\n    let right = [];\n    let pivot = arr[0];\n    for (let i = 1; i < arr.length; i++) {\n      if (arr[i] < pivot) {\n        left.push(arr[i]);\n      } else {\n        right.push(arr[i]);\n      }\n    }\n    return this.qSort(left).concat(pivot, this.qSort(right));\n  }\n}\n```","slug":"2018-4-8-CArray","published":1,"updated":"2018-04-14T06:28:33.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vaz000tfdldom6klk3j","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>   <br><a id=\"more\"></a></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">bubbleSort() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> numElements = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = numElements; outer &gt;= <span class=\"number\">2</span>; --outer) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = <span class=\"number\">0</span>; inner &lt;= outer - <span class=\"number\">1</span>; inner++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &gt; <span class=\"keyword\">this</span>.dataStore[inner + <span class=\"number\">1</span>]) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, inner, inner + <span class=\"number\">1</span>)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-4-8-CArray/01.jpeg\"></p>\n<p><code>flag</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">bubbleSort2() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> flag</div><div class=\"line\">  <span class=\"keyword\">let</span> numElements = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = numElements; outer &gt;= <span class=\"number\">2</span>; --outer) &#123;</div><div class=\"line\">    flag = <span class=\"literal\">true</span></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = <span class=\"number\">0</span>; inner &lt;= outer - <span class=\"number\">1</span>; inner++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &gt; <span class=\"keyword\">this</span>.dataStore[inner + <span class=\"number\">1</span>]) &#123;</div><div class=\"line\">        flag = <span class=\"literal\">false</span></div><div class=\"line\">        <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, inner, inner + <span class=\"number\">1</span>)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(flag) <span class=\"keyword\">break</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> </p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">selectionSort() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> min, l = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = <span class=\"number\">0</span>; outer &lt;= l - <span class=\"number\">1</span>; outer++) &#123;</div><div class=\"line\">    min = outer</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = outer + <span class=\"number\">1</span>; inner &lt;= l; inner++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &lt; <span class=\"keyword\">this</span>.dataStore[min]) &#123;</div><div class=\"line\">        min = inner</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, outer, min)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-4-8-CArray/02.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">insertionSort() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> temp, inner, l = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = <span class=\"number\">1</span>; outer &lt;= l - <span class=\"number\">1</span>; outer++) &#123;</div><div class=\"line\">    temp = <span class=\"keyword\">this</span>.dataStore[outer];</div><div class=\"line\">    inner = outer;</div><div class=\"line\">    <span class=\"keyword\">while</span> (inner &gt; <span class=\"number\">0</span> &amp;&amp; (<span class=\"keyword\">this</span>.dataStore[inner - <span class=\"number\">1</span>] &gt;= temp)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore[inner] = <span class=\"keyword\">this</span>.dataStore[inner - <span class=\"number\">1</span>];</div><div class=\"line\">      --inner;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore[inner] = temp;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-4-8-CArray/03.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">mynums.bubbleSort2();</div><div class=\"line\"><span class=\"keyword\">var</span> stop = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>,stop - start)</div><div class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">mynums.selectionSort();</div><div class=\"line\"><span class=\"keyword\">var</span> stop = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>,stop - start)</div><div class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">mynums.insertionSort();</div><div class=\"line\"><span class=\"keyword\">var</span> stop = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>,stop - start)</div></pre></td></tr></table></figure></p>\n<p>1000 </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>    </p>\n<p> </p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">shellsort() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> j</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> g = <span class=\"number\">0</span>; g &lt; <span class=\"keyword\">this</span>.gaps.length; g++) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"keyword\">this</span>.gaps[g]; i &lt; <span class=\"keyword\">this</span>.dataStore.length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> temp = <span class=\"keyword\">this</span>.dataStore[i];</div><div class=\"line\">      <span class=\"keyword\">for</span> (j = i; j &gt;= <span class=\"keyword\">this</span>.gaps[g] &amp;&amp;</div><div class=\"line\">        <span class=\"keyword\">this</span>.dataStore[j - <span class=\"keyword\">this</span>.gaps[g]] &gt; temp; j -= <span class=\"keyword\">this</span>.gaps[g]) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.dataStore[j] = <span class=\"keyword\">this</span>.dataStore[j - <span class=\"keyword\">this</span>.gaps[g]];</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span>(<span class=\"built_in\">JSON</span>.stringify(<span class=\"keyword\">this</span>.dataStore[j]) !== <span class=\"built_in\">JSON</span>.stringify(temp)) <span class=\"keyword\">this</span>.dataStore[j] = temp;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">setGaps(arr) &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.gaps = arr;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-4-8-CArray/04.jpeg\"></p>\n<p><code>setGaps</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">shellsort1() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> N = <span class=\"keyword\">this</span>.dataStore.length;</div><div class=\"line\">  <span class=\"keyword\">let</span> h = <span class=\"number\">1</span>;</div><div class=\"line\">  <span class=\"keyword\">while</span> (h &lt; N / <span class=\"number\">3</span>) &#123;</div><div class=\"line\">    h = <span class=\"number\">3</span> * h + <span class=\"number\">1</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">while</span> (h &gt;= <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = h; i &lt; N; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = i; j &gt;= h &amp;&amp; <span class=\"keyword\">this</span>.dataStore[j] &lt; <span class=\"keyword\">this</span>.dataStore[j - h]; j -= h) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, j, j - h);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    h = (h - <span class=\"number\">1</span>) / <span class=\"number\">3</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> </p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//   </span></div><div class=\"line\">mergeSort(arr) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (arr.length &lt; <span class=\"number\">2</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">let</span> step = <span class=\"number\">1</span>;</div><div class=\"line\">  <span class=\"keyword\">let</span> left, right;</div><div class=\"line\">  <span class=\"keyword\">while</span> (step &lt; arr.length) &#123;</div><div class=\"line\">    left = <span class=\"number\">0</span>;</div><div class=\"line\">    right = step;</div><div class=\"line\">    <span class=\"keyword\">while</span> (right + step &lt;= arr.length) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.mergeArrays(arr, left, left + step, right, right + step);</div><div class=\"line\">      left = right + step;</div><div class=\"line\">      right = left + step;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (right &lt; arr.length) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.mergeArrays(arr, left, left + step, right, arr.length);</div><div class=\"line\">    &#125;</div><div class=\"line\">    step *= <span class=\"number\">2</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">mergeArrays(arr, startLeft, stopLeft, startRight, stopRight) &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> rightArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(stopRight - startRight + <span class=\"number\">1</span>);</div><div class=\"line\">  <span class=\"keyword\">let</span> leftArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(stopLeft - startLeft + <span class=\"number\">1</span>);</div><div class=\"line\">  <span class=\"keyword\">let</span> k = startRight;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; (rightArr.length - <span class=\"number\">1</span>); ++i) &#123;</div><div class=\"line\">    rightArr[i] = arr[k];</div><div class=\"line\">    ++k;</div><div class=\"line\">  &#125;</div><div class=\"line\">  k = startLeft;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; (leftArr.length - <span class=\"number\">1</span>); ++i) &#123;</div><div class=\"line\">    leftArr[i] = arr[k];</div><div class=\"line\">    ++k;</div><div class=\"line\">  &#125;</div><div class=\"line\">  rightArr[rightArr.length - <span class=\"number\">1</span>] = <span class=\"literal\">Infinity</span>; <span class=\"comment\">//  </span></div><div class=\"line\">  leftArr[leftArr.length - <span class=\"number\">1</span>] = <span class=\"literal\">Infinity</span>; <span class=\"comment\">//  </span></div><div class=\"line\">  <span class=\"keyword\">let</span> m = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">let</span> n = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k = startLeft; k &lt; stopRight; ++k) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (leftArr[m] &lt;= rightArr[n]) &#123;</div><div class=\"line\">      arr[k] = leftArr[m];</div><div class=\"line\">      m++;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      arr[k] = rightArr[n];</div><div class=\"line\">      n++;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"left array - \"</span>, leftArr);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"right array - \"</span>, rightArr);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"array - \"</span>, arr);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-4-8-CArray/05.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>(pivot) </p>\n<blockquote>\n<p></p>\n<ul>\n<li>(1) ;</li>\n<li>(2) ;</li>\n<li>(3)  1  2</li>\n</ul>\n</blockquote>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">qSort(arr) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (arr.length == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> [];</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">let</span> left = [];</div><div class=\"line\">  <span class=\"keyword\">let</span> right = [];</div><div class=\"line\">  <span class=\"keyword\">let</span> pivot = arr[<span class=\"number\">0</span>];</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (arr[i] &lt; pivot) &#123;</div><div class=\"line\">      left.push(arr[i]);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      right.push(arr[i]);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.qSort(left).concat(pivot, <span class=\"keyword\">this</span>.qSort(right));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CArray</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(numElements) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.numElements = numElements</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; numElements; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore[i] = i;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">this</span>.gaps = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  setData() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.numElements; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore[i] = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (<span class=\"keyword\">this</span>.numElements + <span class=\"number\">1</span>));</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  clear() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.dataStore.length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore[i] = <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  insert(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.pos++] = element;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  toString() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> retstr = <span class=\"string\">\"\"</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.dataStore.length; i++) &#123;</div><div class=\"line\">      retstr += <span class=\"keyword\">this</span>.dataStore[i] + <span class=\"string\">\" \"</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span> &amp; i % <span class=\"number\">10</span> == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        retstr += <span class=\"string\">\"\\n\"</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> retstr;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  swap(arr, index1, index2) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> temp = arr[index1];</div><div class=\"line\">    arr[index1] = arr[index2];</div><div class=\"line\">    arr[index2] = temp;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  bubbleSort() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> numElements = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = numElements; outer &gt;= <span class=\"number\">2</span>; --outer) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = <span class=\"number\">0</span>; inner &lt;= outer - <span class=\"number\">1</span>; inner++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &gt; <span class=\"keyword\">this</span>.dataStore[inner + <span class=\"number\">1</span>]) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, inner, inner + <span class=\"number\">1</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  bubbleSort2() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> flag</div><div class=\"line\">    <span class=\"keyword\">let</span> numElements = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = numElements; outer &gt;= <span class=\"number\">2</span>; --outer) &#123;</div><div class=\"line\">      flag = <span class=\"literal\">true</span></div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = <span class=\"number\">0</span>; inner &lt;= outer - <span class=\"number\">1</span>; inner++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &gt; <span class=\"keyword\">this</span>.dataStore[inner + <span class=\"number\">1</span>]) &#123;</div><div class=\"line\">          flag = <span class=\"literal\">false</span></div><div class=\"line\">          <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, inner, inner + <span class=\"number\">1</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span>(flag) <span class=\"keyword\">break</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  selectionSort() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> min, l = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = <span class=\"number\">0</span>; outer &lt;= l - <span class=\"number\">1</span>; outer++) &#123;</div><div class=\"line\">      min = outer</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = outer + <span class=\"number\">1</span>; inner &lt;= l; inner++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &lt; <span class=\"keyword\">this</span>.dataStore[min]) &#123;</div><div class=\"line\">          min = inner</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, outer, min)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  insertionSort() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> temp, inner, l = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = <span class=\"number\">1</span>; outer &lt;= l - <span class=\"number\">1</span>; outer++) &#123;</div><div class=\"line\">      temp = <span class=\"keyword\">this</span>.dataStore[outer];</div><div class=\"line\">      inner = outer;</div><div class=\"line\">      <span class=\"keyword\">while</span> (inner &gt; <span class=\"number\">0</span> &amp;&amp; (<span class=\"keyword\">this</span>.dataStore[inner - <span class=\"number\">1</span>] &gt;= temp)) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.dataStore[inner] = <span class=\"keyword\">this</span>.dataStore[inner - <span class=\"number\">1</span>];</div><div class=\"line\">        --inner;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore[inner] = temp;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  shellsort() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> j</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> g = <span class=\"number\">0</span>; g &lt; <span class=\"keyword\">this</span>.gaps.length; g++) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"keyword\">this</span>.gaps[g]; i &lt; <span class=\"keyword\">this</span>.dataStore.length; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">let</span> temp = <span class=\"keyword\">this</span>.dataStore[i];</div><div class=\"line\">        <span class=\"keyword\">for</span> (j = i; j &gt;= <span class=\"keyword\">this</span>.gaps[g] &amp;&amp;</div><div class=\"line\">          <span class=\"keyword\">this</span>.dataStore[j - <span class=\"keyword\">this</span>.gaps[g]] &gt; temp; j -= <span class=\"keyword\">this</span>.gaps[g]) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.dataStore[j] = <span class=\"keyword\">this</span>.dataStore[j - <span class=\"keyword\">this</span>.gaps[g]];</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">JSON</span>.stringify(<span class=\"keyword\">this</span>.dataStore[j]) !== <span class=\"built_in\">JSON</span>.stringify(temp)) <span class=\"keyword\">this</span>.dataStore[j] = temp;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  setGaps(arr) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.gaps = arr;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  shellsort1() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> N = <span class=\"keyword\">this</span>.dataStore.length;</div><div class=\"line\">    <span class=\"keyword\">let</span> h = <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">while</span> (h &lt; N / <span class=\"number\">3</span>) &#123;</div><div class=\"line\">      h = <span class=\"number\">3</span> * h + <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">while</span> (h &gt;= <span class=\"number\">1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = h; i &lt; N; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = i; j &gt;= h &amp;&amp; <span class=\"keyword\">this</span>.dataStore[j] &lt; <span class=\"keyword\">this</span>.dataStore[j - h]; j -= h) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, j, j - h);</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      h = (h - <span class=\"number\">1</span>) / <span class=\"number\">3</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">//   </span></div><div class=\"line\">  mergeSort(arr) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (arr.length &lt; <span class=\"number\">2</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">let</span> step = <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">let</span> left, right;</div><div class=\"line\">    <span class=\"keyword\">while</span> (step &lt; arr.length) &#123;</div><div class=\"line\">      left = <span class=\"number\">0</span>;</div><div class=\"line\">      right = step;</div><div class=\"line\">      <span class=\"keyword\">while</span> (right + step &lt;= arr.length) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.mergeArrays(arr, left, left + step, right, right + step);</div><div class=\"line\">        left = right + step;</div><div class=\"line\">        right = left + step;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span> (right &lt; arr.length) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.mergeArrays(arr, left, left + step, right, arr.length);</div><div class=\"line\">      &#125;</div><div class=\"line\">      step *= <span class=\"number\">2</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  mergeArrays(arr, startLeft, stopLeft, startRight, stopRight) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> rightArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(stopRight - startRight + <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">let</span> leftArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(stopLeft - startLeft + <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">let</span> k = startRight;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; (rightArr.length - <span class=\"number\">1</span>); ++i) &#123;</div><div class=\"line\">      rightArr[i] = arr[k];</div><div class=\"line\">      ++k;</div><div class=\"line\">    &#125;</div><div class=\"line\">    k = startLeft;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; (leftArr.length - <span class=\"number\">1</span>); ++i) &#123;</div><div class=\"line\">      leftArr[i] = arr[k];</div><div class=\"line\">      ++k;</div><div class=\"line\">    &#125;</div><div class=\"line\">    rightArr[rightArr.length - <span class=\"number\">1</span>] = <span class=\"literal\">Infinity</span>; <span class=\"comment\">//  </span></div><div class=\"line\">    leftArr[leftArr.length - <span class=\"number\">1</span>] = <span class=\"literal\">Infinity</span>; <span class=\"comment\">//  </span></div><div class=\"line\">    <span class=\"keyword\">let</span> m = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">let</span> n = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k = startLeft; k &lt; stopRight; ++k) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (leftArr[m] &lt;= rightArr[n]) &#123;</div><div class=\"line\">        arr[k] = leftArr[m];</div><div class=\"line\">        m++;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        arr[k] = rightArr[n];</div><div class=\"line\">        n++;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  qSort(arr) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (arr.length == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> [];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">let</span> left = [];</div><div class=\"line\">    <span class=\"keyword\">let</span> right = [];</div><div class=\"line\">    <span class=\"keyword\">let</span> pivot = arr[<span class=\"number\">0</span>];</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (arr[i] &lt; pivot) &#123;</div><div class=\"line\">        left.push(arr[i]);</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        right.push(arr[i]);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.qSort(left).concat(pivot, <span class=\"keyword\">this</span>.qSort(right));</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>   <br></p>","more":"<p></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">bubbleSort() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> numElements = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = numElements; outer &gt;= <span class=\"number\">2</span>; --outer) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = <span class=\"number\">0</span>; inner &lt;= outer - <span class=\"number\">1</span>; inner++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &gt; <span class=\"keyword\">this</span>.dataStore[inner + <span class=\"number\">1</span>]) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, inner, inner + <span class=\"number\">1</span>)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-4-8-CArray/01.jpeg\"></p>\n<p><code>flag</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">bubbleSort2() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> flag</div><div class=\"line\">  <span class=\"keyword\">let</span> numElements = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = numElements; outer &gt;= <span class=\"number\">2</span>; --outer) &#123;</div><div class=\"line\">    flag = <span class=\"literal\">true</span></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = <span class=\"number\">0</span>; inner &lt;= outer - <span class=\"number\">1</span>; inner++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &gt; <span class=\"keyword\">this</span>.dataStore[inner + <span class=\"number\">1</span>]) &#123;</div><div class=\"line\">        flag = <span class=\"literal\">false</span></div><div class=\"line\">        <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, inner, inner + <span class=\"number\">1</span>)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(flag) <span class=\"keyword\">break</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> </p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">selectionSort() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> min, l = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = <span class=\"number\">0</span>; outer &lt;= l - <span class=\"number\">1</span>; outer++) &#123;</div><div class=\"line\">    min = outer</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = outer + <span class=\"number\">1</span>; inner &lt;= l; inner++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &lt; <span class=\"keyword\">this</span>.dataStore[min]) &#123;</div><div class=\"line\">        min = inner</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, outer, min)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-4-8-CArray/02.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">insertionSort() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> temp, inner, l = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = <span class=\"number\">1</span>; outer &lt;= l - <span class=\"number\">1</span>; outer++) &#123;</div><div class=\"line\">    temp = <span class=\"keyword\">this</span>.dataStore[outer];</div><div class=\"line\">    inner = outer;</div><div class=\"line\">    <span class=\"keyword\">while</span> (inner &gt; <span class=\"number\">0</span> &amp;&amp; (<span class=\"keyword\">this</span>.dataStore[inner - <span class=\"number\">1</span>] &gt;= temp)) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore[inner] = <span class=\"keyword\">this</span>.dataStore[inner - <span class=\"number\">1</span>];</div><div class=\"line\">      --inner;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore[inner] = temp;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-4-8-CArray/03.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">mynums.bubbleSort2();</div><div class=\"line\"><span class=\"keyword\">var</span> stop = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>,stop - start)</div><div class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">mynums.selectionSort();</div><div class=\"line\"><span class=\"keyword\">var</span> stop = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>,stop - start)</div><div class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">mynums.insertionSort();</div><div class=\"line\"><span class=\"keyword\">var</span> stop = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>,stop - start)</div></pre></td></tr></table></figure></p>\n<p>1000 </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>    </p>\n<p> </p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">shellsort() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> j</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> g = <span class=\"number\">0</span>; g &lt; <span class=\"keyword\">this</span>.gaps.length; g++) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"keyword\">this</span>.gaps[g]; i &lt; <span class=\"keyword\">this</span>.dataStore.length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">let</span> temp = <span class=\"keyword\">this</span>.dataStore[i];</div><div class=\"line\">      <span class=\"keyword\">for</span> (j = i; j &gt;= <span class=\"keyword\">this</span>.gaps[g] &amp;&amp;</div><div class=\"line\">        <span class=\"keyword\">this</span>.dataStore[j - <span class=\"keyword\">this</span>.gaps[g]] &gt; temp; j -= <span class=\"keyword\">this</span>.gaps[g]) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.dataStore[j] = <span class=\"keyword\">this</span>.dataStore[j - <span class=\"keyword\">this</span>.gaps[g]];</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span>(<span class=\"built_in\">JSON</span>.stringify(<span class=\"keyword\">this</span>.dataStore[j]) !== <span class=\"built_in\">JSON</span>.stringify(temp)) <span class=\"keyword\">this</span>.dataStore[j] = temp;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">setGaps(arr) &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.gaps = arr;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-4-8-CArray/04.jpeg\"></p>\n<p><code>setGaps</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">shellsort1() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> N = <span class=\"keyword\">this</span>.dataStore.length;</div><div class=\"line\">  <span class=\"keyword\">let</span> h = <span class=\"number\">1</span>;</div><div class=\"line\">  <span class=\"keyword\">while</span> (h &lt; N / <span class=\"number\">3</span>) &#123;</div><div class=\"line\">    h = <span class=\"number\">3</span> * h + <span class=\"number\">1</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">while</span> (h &gt;= <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = h; i &lt; N; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = i; j &gt;= h &amp;&amp; <span class=\"keyword\">this</span>.dataStore[j] &lt; <span class=\"keyword\">this</span>.dataStore[j - h]; j -= h) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, j, j - h);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    h = (h - <span class=\"number\">1</span>) / <span class=\"number\">3</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> </p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//   </span></div><div class=\"line\">mergeSort(arr) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (arr.length &lt; <span class=\"number\">2</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">let</span> step = <span class=\"number\">1</span>;</div><div class=\"line\">  <span class=\"keyword\">let</span> left, right;</div><div class=\"line\">  <span class=\"keyword\">while</span> (step &lt; arr.length) &#123;</div><div class=\"line\">    left = <span class=\"number\">0</span>;</div><div class=\"line\">    right = step;</div><div class=\"line\">    <span class=\"keyword\">while</span> (right + step &lt;= arr.length) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.mergeArrays(arr, left, left + step, right, right + step);</div><div class=\"line\">      left = right + step;</div><div class=\"line\">      right = left + step;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (right &lt; arr.length) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.mergeArrays(arr, left, left + step, right, arr.length);</div><div class=\"line\">    &#125;</div><div class=\"line\">    step *= <span class=\"number\">2</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">mergeArrays(arr, startLeft, stopLeft, startRight, stopRight) &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> rightArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(stopRight - startRight + <span class=\"number\">1</span>);</div><div class=\"line\">  <span class=\"keyword\">let</span> leftArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(stopLeft - startLeft + <span class=\"number\">1</span>);</div><div class=\"line\">  <span class=\"keyword\">let</span> k = startRight;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; (rightArr.length - <span class=\"number\">1</span>); ++i) &#123;</div><div class=\"line\">    rightArr[i] = arr[k];</div><div class=\"line\">    ++k;</div><div class=\"line\">  &#125;</div><div class=\"line\">  k = startLeft;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; (leftArr.length - <span class=\"number\">1</span>); ++i) &#123;</div><div class=\"line\">    leftArr[i] = arr[k];</div><div class=\"line\">    ++k;</div><div class=\"line\">  &#125;</div><div class=\"line\">  rightArr[rightArr.length - <span class=\"number\">1</span>] = <span class=\"literal\">Infinity</span>; <span class=\"comment\">//  </span></div><div class=\"line\">  leftArr[leftArr.length - <span class=\"number\">1</span>] = <span class=\"literal\">Infinity</span>; <span class=\"comment\">//  </span></div><div class=\"line\">  <span class=\"keyword\">let</span> m = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">let</span> n = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k = startLeft; k &lt; stopRight; ++k) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (leftArr[m] &lt;= rightArr[n]) &#123;</div><div class=\"line\">      arr[k] = leftArr[m];</div><div class=\"line\">      m++;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      arr[k] = rightArr[n];</div><div class=\"line\">      n++;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"left array - \"</span>, leftArr);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"right array - \"</span>, rightArr);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"array - \"</span>, arr);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/2018-4-8-CArray/05.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>(pivot) </p>\n<blockquote>\n<p></p>\n<ul>\n<li>(1) ;</li>\n<li>(2) ;</li>\n<li>(3)  1  2</li>\n</ul>\n</blockquote>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">qSort(arr) &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (arr.length == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> [];</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">let</span> left = [];</div><div class=\"line\">  <span class=\"keyword\">let</span> right = [];</div><div class=\"line\">  <span class=\"keyword\">let</span> pivot = arr[<span class=\"number\">0</span>];</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (arr[i] &lt; pivot) &#123;</div><div class=\"line\">      left.push(arr[i]);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      right.push(arr[i]);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.qSort(left).concat(pivot, <span class=\"keyword\">this</span>.qSort(right));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CArray</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(numElements) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.numElements = numElements</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; numElements; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore[i] = i;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">this</span>.gaps = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  setData() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.numElements; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore[i] = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (<span class=\"keyword\">this</span>.numElements + <span class=\"number\">1</span>));</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  clear() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.dataStore.length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore[i] = <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  insert(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.pos++] = element;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  toString() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> retstr = <span class=\"string\">\"\"</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.dataStore.length; i++) &#123;</div><div class=\"line\">      retstr += <span class=\"keyword\">this</span>.dataStore[i] + <span class=\"string\">\" \"</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span> &amp; i % <span class=\"number\">10</span> == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        retstr += <span class=\"string\">\"\\n\"</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> retstr;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  swap(arr, index1, index2) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> temp = arr[index1];</div><div class=\"line\">    arr[index1] = arr[index2];</div><div class=\"line\">    arr[index2] = temp;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  bubbleSort() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> numElements = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = numElements; outer &gt;= <span class=\"number\">2</span>; --outer) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = <span class=\"number\">0</span>; inner &lt;= outer - <span class=\"number\">1</span>; inner++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &gt; <span class=\"keyword\">this</span>.dataStore[inner + <span class=\"number\">1</span>]) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, inner, inner + <span class=\"number\">1</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  bubbleSort2() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> flag</div><div class=\"line\">    <span class=\"keyword\">let</span> numElements = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = numElements; outer &gt;= <span class=\"number\">2</span>; --outer) &#123;</div><div class=\"line\">      flag = <span class=\"literal\">true</span></div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = <span class=\"number\">0</span>; inner &lt;= outer - <span class=\"number\">1</span>; inner++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &gt; <span class=\"keyword\">this</span>.dataStore[inner + <span class=\"number\">1</span>]) &#123;</div><div class=\"line\">          flag = <span class=\"literal\">false</span></div><div class=\"line\">          <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, inner, inner + <span class=\"number\">1</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span>(flag) <span class=\"keyword\">break</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  selectionSort() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> min, l = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = <span class=\"number\">0</span>; outer &lt;= l - <span class=\"number\">1</span>; outer++) &#123;</div><div class=\"line\">      min = outer</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> inner = outer + <span class=\"number\">1</span>; inner &lt;= l; inner++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore[inner] &lt; <span class=\"keyword\">this</span>.dataStore[min]) &#123;</div><div class=\"line\">          min = inner</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, outer, min)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  insertionSort() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> temp, inner, l = <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> outer = <span class=\"number\">1</span>; outer &lt;= l - <span class=\"number\">1</span>; outer++) &#123;</div><div class=\"line\">      temp = <span class=\"keyword\">this</span>.dataStore[outer];</div><div class=\"line\">      inner = outer;</div><div class=\"line\">      <span class=\"keyword\">while</span> (inner &gt; <span class=\"number\">0</span> &amp;&amp; (<span class=\"keyword\">this</span>.dataStore[inner - <span class=\"number\">1</span>] &gt;= temp)) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.dataStore[inner] = <span class=\"keyword\">this</span>.dataStore[inner - <span class=\"number\">1</span>];</div><div class=\"line\">        --inner;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore[inner] = temp;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  shellsort() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> j</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> g = <span class=\"number\">0</span>; g &lt; <span class=\"keyword\">this</span>.gaps.length; g++) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"keyword\">this</span>.gaps[g]; i &lt; <span class=\"keyword\">this</span>.dataStore.length; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">let</span> temp = <span class=\"keyword\">this</span>.dataStore[i];</div><div class=\"line\">        <span class=\"keyword\">for</span> (j = i; j &gt;= <span class=\"keyword\">this</span>.gaps[g] &amp;&amp;</div><div class=\"line\">          <span class=\"keyword\">this</span>.dataStore[j - <span class=\"keyword\">this</span>.gaps[g]] &gt; temp; j -= <span class=\"keyword\">this</span>.gaps[g]) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.dataStore[j] = <span class=\"keyword\">this</span>.dataStore[j - <span class=\"keyword\">this</span>.gaps[g]];</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">JSON</span>.stringify(<span class=\"keyword\">this</span>.dataStore[j]) !== <span class=\"built_in\">JSON</span>.stringify(temp)) <span class=\"keyword\">this</span>.dataStore[j] = temp;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  setGaps(arr) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.gaps = arr;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  shellsort1() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> N = <span class=\"keyword\">this</span>.dataStore.length;</div><div class=\"line\">    <span class=\"keyword\">let</span> h = <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">while</span> (h &lt; N / <span class=\"number\">3</span>) &#123;</div><div class=\"line\">      h = <span class=\"number\">3</span> * h + <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">while</span> (h &gt;= <span class=\"number\">1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = h; i &lt; N; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = i; j &gt;= h &amp;&amp; <span class=\"keyword\">this</span>.dataStore[j] &lt; <span class=\"keyword\">this</span>.dataStore[j - h]; j -= h) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.swap(<span class=\"keyword\">this</span>.dataStore, j, j - h);</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      h = (h - <span class=\"number\">1</span>) / <span class=\"number\">3</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">//   </span></div><div class=\"line\">  mergeSort(arr) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (arr.length &lt; <span class=\"number\">2</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">let</span> step = <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">let</span> left, right;</div><div class=\"line\">    <span class=\"keyword\">while</span> (step &lt; arr.length) &#123;</div><div class=\"line\">      left = <span class=\"number\">0</span>;</div><div class=\"line\">      right = step;</div><div class=\"line\">      <span class=\"keyword\">while</span> (right + step &lt;= arr.length) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.mergeArrays(arr, left, left + step, right, right + step);</div><div class=\"line\">        left = right + step;</div><div class=\"line\">        right = left + step;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span> (right &lt; arr.length) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.mergeArrays(arr, left, left + step, right, arr.length);</div><div class=\"line\">      &#125;</div><div class=\"line\">      step *= <span class=\"number\">2</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  mergeArrays(arr, startLeft, stopLeft, startRight, stopRight) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> rightArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(stopRight - startRight + <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">let</span> leftArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(stopLeft - startLeft + <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">let</span> k = startRight;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; (rightArr.length - <span class=\"number\">1</span>); ++i) &#123;</div><div class=\"line\">      rightArr[i] = arr[k];</div><div class=\"line\">      ++k;</div><div class=\"line\">    &#125;</div><div class=\"line\">    k = startLeft;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; (leftArr.length - <span class=\"number\">1</span>); ++i) &#123;</div><div class=\"line\">      leftArr[i] = arr[k];</div><div class=\"line\">      ++k;</div><div class=\"line\">    &#125;</div><div class=\"line\">    rightArr[rightArr.length - <span class=\"number\">1</span>] = <span class=\"literal\">Infinity</span>; <span class=\"comment\">//  </span></div><div class=\"line\">    leftArr[leftArr.length - <span class=\"number\">1</span>] = <span class=\"literal\">Infinity</span>; <span class=\"comment\">//  </span></div><div class=\"line\">    <span class=\"keyword\">let</span> m = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">let</span> n = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k = startLeft; k &lt; stopRight; ++k) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (leftArr[m] &lt;= rightArr[n]) &#123;</div><div class=\"line\">        arr[k] = leftArr[m];</div><div class=\"line\">        m++;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        arr[k] = rightArr[n];</div><div class=\"line\">        n++;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  qSort(arr) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (arr.length == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> [];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">let</span> left = [];</div><div class=\"line\">    <span class=\"keyword\">let</span> right = [];</div><div class=\"line\">    <span class=\"keyword\">let</span> pivot = arr[<span class=\"number\">0</span>];</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (arr[i] &lt; pivot) &#123;</div><div class=\"line\">        left.push(arr[i]);</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        right.push(arr[i]);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.qSort(left).concat(pivot, <span class=\"keyword\">this</span>.qSort(right));</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>"},{"title":"javascript--HashTable","comments":1,"toc":true,"date":"2018-02-25T12:00:30.000Z","_content":"\n### \n\n \n\n  0  (collision)\n\n<!-- more -->\n\n### \n\n/ |  \n- | :-: \ntable() | \nsimpleHash() | \nshowDistro() | \nput() | \n\n\n``` javascript\nclass HashTable {\n  constructor() {\n    this.table = new Array(137)\n  }\n\n  // \n  simpleHash(data) {\n    let total = 0;\n    for (let i = 0; i < data.length; ++i) {\n      total += data.charCodeAt(i)\n    }\n    console.log(\"Hash value: \" + data + \" -> \" + total)\n    return total % this.table.length\n  }\n\n  // \n  showDistro() {\n    for (let i = 0; i < this.table.length; ++i) {\n      if (this.table[i] != undefined) {\n        console.log(i + \": \" + this.table[i])\n      }\n    }\n  }\n\n  // \n  put(data) {\n    let pos = this.simpleHash(data)\n    this.table[pos] = data\n  }\n}\n\n// \nlet someNames = [\"David\", \"Jennifer\", \"Donnie\", \"Raymond\", \"Cynthia\", \"Mike\", \"Clayton\", \"Danny\", \"Jonathan\"]\nlet hTable = new HashTable();\nfor (let i = 0; i < someNames.length; ++i) {\n  hTable.put(someNames[i]);\n}\nhTable.showDistro()\n\n// Hash value: David -> 488\n// Hash value: Jennifer -> 817\n// Hash value: Donnie -> 605\n// Hash value: Raymond -> 730\n// Hash value: Cynthia -> 720\n// Hash value: Mike -> 390\n// Hash value: Clayton -> 730\n// Hash value: Danny -> 506\n// Hash value: Jonathan -> 819\n```\n\n`simpleHash`\n``` javascript\n// \n  betterHash(string) {\n    const H = 37;\n    let total = 0;\n    for (let i = 0; i < string.length; ++i) {\n      total += H * total + string.charCodeAt(i);\n    }\n    total = total % this.table.length;\n    if (total < 0) {\n      total += this.table.length - 1;\n    }\n    return parseInt(total);\n  }\n```\n\n#### \n\n\n``` javascript\n  get(key) {\n    return this.table[this.betterHash(key)];\n  }\n```\n\n### \n\n\n\n#### \n\n \n``` javascript\nclass HashTable {\n  constructor() {\n    this.table = new Array(137)\n  }\n\n  // \n  buildChains() {\n    for (let i = 0; i < this.table.length; ++i) {\n      this.table[i] = new Array();\n    }\n  }\n\n  // \n  showDistro() {\n    for (let i = 0; i < this.table.length; ++i) {\n      if (this.table[i][0] !== undefined) {\n        console.log(i + \": \" + this.table[i]);\n      }\n    }\n  }\n  // \n  betterHash(string) {\n    const H = 37;\n    let total = 0;\n    for (let i = 0; i < string.length; ++i) {\n      total += H * total + string.charCodeAt(i);\n    }\n    total = total % this.table.length;\n    if (total < 0) {\n      total += this.table.length - 1;\n    }\n    return parseInt(total);\n  }\n\n  // \n  put(data) {\n    let index = 0\n    let pos = this.betterHash(data);\n    if (this.table[pos][index] === undefined) {\n      this.table[pos][index] = data;\n    } else {\n      while (this.table[pos][index] !== undefined) {\n        ++index;\n      }\n      this.table[pos][index] = data;\n    }\n  }\n\n  get(key) {\n    let index = 0\n    let pos = this.betterHash(key);\n    if (this.table[pos][index] === key) {\n      return {\n        elm: this.table[pos][index],\n        key: pos\n      };\n    } else {\n      while (this.table[pos][index] !== key) {\n        index += 1;\n      }\n      return {\n        elm: this.table[pos][index],\n        key: pos\n      };\n    }\n    return undefined;\n  }\n\n}\n\n// \nlet hTable = new HashTable();\nhTable.buildChains();\nlet someNames = [\"David\", \"Jennifer\", \"Donnie\", \"Raymond\",\n  \"Cynthia\", \"Mike\", \"Clayton\", \"Danny\", \"Jonathan\"\n];\nfor (let i = 0; i < someNames.length; ++i) {\n  hTable.put(someNames[i]);\n}\nhTable.showDistro();\n// 12: Jennifer\n// 22: Raymond\n// 55: Donnie\n// 58: Clayton\n// 80: David,Jonathan\n// 82: Mike\n// 103: Cynthia\n// 110: Danny\n\nhTable.get('David')\n\n// {elm: \"David\", key: 80}\n```\n\n#### \n\n ; : \n\n>  1.5  ; \n\n```put``get`\n``` javascript\nclass HashTable {\n  constructor() {\n    this.table = new Array(137)\n    this.values = []\n  }\n\n  // \n  showDistro() {\n    for (let i = 0; i < this.table.length; ++i) {\n      if (this.table[i] !== undefined) {\n        console.log(i + \": \" + this.table[i]);\n      }\n    }\n  }\n  // \n  betterHash(string) {\n    const H = 37;\n    let total = 0;\n    for (let i = 0; i < string.length; ++i) {\n      total += H * total + string.charCodeAt(i);\n    }\n    total = total % this.table.length;\n    if (total < 0) {\n      total += this.table.length - 1;\n    }\n    return parseInt(total);\n  }\n\n  // \n  put(data) {\n    let pos = this.betterHash(data);\n    if (this.table[pos] === undefined) {\n      this.table[pos] = data;\n      this.values[pos] = data\n    } else {\n      while (this.table[pos] !== undefined) {\n        pos++\n      }\n      this.table[pos] = data;\n      this.values[pos] = data\n    }\n  }\n\n  get(key) {\n    let hash = -1;\n    hash = this.betterHash(key);\n    if (hash > -1) {\n      for (let i = hash; this.table[hash] !== undefined; i++) {\n        if (this.table[hash] == key) {\n          return {\n            elm: this.values[hash],\n            key: hash\n          };\n        }\n      }\n    }\n    return undefined;\n  }\n\n}\n\n// \nlet hTable = new HashTable();\nlet someNames = [\"David\", \"Jennifer\", \"Donnie\", \"Raymond\",\n  \"Cynthia\", \"Mike\", \"Clayton\", \"Danny\", \"Jonathan\"\n];\nfor (let i = 0; i < someNames.length; ++i) {\n  hTable.put(someNames[i]);\n}\nhTable.showDistro();\n// 12: Jennifer\n// 22: Raymond\n// 55: Donnie\n// 58: Clayton\n// 80: David,Jonathan\n// 82: Mike\n// 103: Cynthia\n// 110: Danny\n\nhTable.get('David')\n\n// {elm: \"David\", key: 80}\n```\n","source":"_posts/HashTable-2018-2-25.md","raw":"---\ntitle: javascript--HashTable\ncomments: true\ntoc: true\ndate: 2018-02-25 20:00:30\ntags:\n    - 'javascript'\n    - 'ECMAScript 6'\n    - 'algorithm'\n---\n\n### \n\n \n\n  0  (collision)\n\n<!-- more -->\n\n### \n\n/ |  \n- | :-: \ntable() | \nsimpleHash() | \nshowDistro() | \nput() | \n\n\n``` javascript\nclass HashTable {\n  constructor() {\n    this.table = new Array(137)\n  }\n\n  // \n  simpleHash(data) {\n    let total = 0;\n    for (let i = 0; i < data.length; ++i) {\n      total += data.charCodeAt(i)\n    }\n    console.log(\"Hash value: \" + data + \" -> \" + total)\n    return total % this.table.length\n  }\n\n  // \n  showDistro() {\n    for (let i = 0; i < this.table.length; ++i) {\n      if (this.table[i] != undefined) {\n        console.log(i + \": \" + this.table[i])\n      }\n    }\n  }\n\n  // \n  put(data) {\n    let pos = this.simpleHash(data)\n    this.table[pos] = data\n  }\n}\n\n// \nlet someNames = [\"David\", \"Jennifer\", \"Donnie\", \"Raymond\", \"Cynthia\", \"Mike\", \"Clayton\", \"Danny\", \"Jonathan\"]\nlet hTable = new HashTable();\nfor (let i = 0; i < someNames.length; ++i) {\n  hTable.put(someNames[i]);\n}\nhTable.showDistro()\n\n// Hash value: David -> 488\n// Hash value: Jennifer -> 817\n// Hash value: Donnie -> 605\n// Hash value: Raymond -> 730\n// Hash value: Cynthia -> 720\n// Hash value: Mike -> 390\n// Hash value: Clayton -> 730\n// Hash value: Danny -> 506\n// Hash value: Jonathan -> 819\n```\n\n`simpleHash`\n``` javascript\n// \n  betterHash(string) {\n    const H = 37;\n    let total = 0;\n    for (let i = 0; i < string.length; ++i) {\n      total += H * total + string.charCodeAt(i);\n    }\n    total = total % this.table.length;\n    if (total < 0) {\n      total += this.table.length - 1;\n    }\n    return parseInt(total);\n  }\n```\n\n#### \n\n\n``` javascript\n  get(key) {\n    return this.table[this.betterHash(key)];\n  }\n```\n\n### \n\n\n\n#### \n\n \n``` javascript\nclass HashTable {\n  constructor() {\n    this.table = new Array(137)\n  }\n\n  // \n  buildChains() {\n    for (let i = 0; i < this.table.length; ++i) {\n      this.table[i] = new Array();\n    }\n  }\n\n  // \n  showDistro() {\n    for (let i = 0; i < this.table.length; ++i) {\n      if (this.table[i][0] !== undefined) {\n        console.log(i + \": \" + this.table[i]);\n      }\n    }\n  }\n  // \n  betterHash(string) {\n    const H = 37;\n    let total = 0;\n    for (let i = 0; i < string.length; ++i) {\n      total += H * total + string.charCodeAt(i);\n    }\n    total = total % this.table.length;\n    if (total < 0) {\n      total += this.table.length - 1;\n    }\n    return parseInt(total);\n  }\n\n  // \n  put(data) {\n    let index = 0\n    let pos = this.betterHash(data);\n    if (this.table[pos][index] === undefined) {\n      this.table[pos][index] = data;\n    } else {\n      while (this.table[pos][index] !== undefined) {\n        ++index;\n      }\n      this.table[pos][index] = data;\n    }\n  }\n\n  get(key) {\n    let index = 0\n    let pos = this.betterHash(key);\n    if (this.table[pos][index] === key) {\n      return {\n        elm: this.table[pos][index],\n        key: pos\n      };\n    } else {\n      while (this.table[pos][index] !== key) {\n        index += 1;\n      }\n      return {\n        elm: this.table[pos][index],\n        key: pos\n      };\n    }\n    return undefined;\n  }\n\n}\n\n// \nlet hTable = new HashTable();\nhTable.buildChains();\nlet someNames = [\"David\", \"Jennifer\", \"Donnie\", \"Raymond\",\n  \"Cynthia\", \"Mike\", \"Clayton\", \"Danny\", \"Jonathan\"\n];\nfor (let i = 0; i < someNames.length; ++i) {\n  hTable.put(someNames[i]);\n}\nhTable.showDistro();\n// 12: Jennifer\n// 22: Raymond\n// 55: Donnie\n// 58: Clayton\n// 80: David,Jonathan\n// 82: Mike\n// 103: Cynthia\n// 110: Danny\n\nhTable.get('David')\n\n// {elm: \"David\", key: 80}\n```\n\n#### \n\n ; : \n\n>  1.5  ; \n\n```put``get`\n``` javascript\nclass HashTable {\n  constructor() {\n    this.table = new Array(137)\n    this.values = []\n  }\n\n  // \n  showDistro() {\n    for (let i = 0; i < this.table.length; ++i) {\n      if (this.table[i] !== undefined) {\n        console.log(i + \": \" + this.table[i]);\n      }\n    }\n  }\n  // \n  betterHash(string) {\n    const H = 37;\n    let total = 0;\n    for (let i = 0; i < string.length; ++i) {\n      total += H * total + string.charCodeAt(i);\n    }\n    total = total % this.table.length;\n    if (total < 0) {\n      total += this.table.length - 1;\n    }\n    return parseInt(total);\n  }\n\n  // \n  put(data) {\n    let pos = this.betterHash(data);\n    if (this.table[pos] === undefined) {\n      this.table[pos] = data;\n      this.values[pos] = data\n    } else {\n      while (this.table[pos] !== undefined) {\n        pos++\n      }\n      this.table[pos] = data;\n      this.values[pos] = data\n    }\n  }\n\n  get(key) {\n    let hash = -1;\n    hash = this.betterHash(key);\n    if (hash > -1) {\n      for (let i = hash; this.table[hash] !== undefined; i++) {\n        if (this.table[hash] == key) {\n          return {\n            elm: this.values[hash],\n            key: hash\n          };\n        }\n      }\n    }\n    return undefined;\n  }\n\n}\n\n// \nlet hTable = new HashTable();\nlet someNames = [\"David\", \"Jennifer\", \"Donnie\", \"Raymond\",\n  \"Cynthia\", \"Mike\", \"Clayton\", \"Danny\", \"Jonathan\"\n];\nfor (let i = 0; i < someNames.length; ++i) {\n  hTable.put(someNames[i]);\n}\nhTable.showDistro();\n// 12: Jennifer\n// 22: Raymond\n// 55: Donnie\n// 58: Clayton\n// 80: David,Jonathan\n// 82: Mike\n// 103: Cynthia\n// 110: Danny\n\nhTable.get('David')\n\n// {elm: \"David\", key: 80}\n```\n","slug":"HashTable-2018-2-25","published":1,"updated":"2018-03-02T00:59:23.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vb0000vfdldviqayrg2","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> </p>\n<p>  0  (collision)</p>\n<a id=\"more\"></a>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>table()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>simpleHash()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>showDistro()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>put()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HashTable</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.table = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(<span class=\"number\">137</span>)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  simpleHash(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> total = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; data.length; ++i) &#123;</div><div class=\"line\">      total += data.charCodeAt(i)</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Hash value: \"</span> + data + <span class=\"string\">\" -&gt; \"</span> + total)</div><div class=\"line\">    <span class=\"keyword\">return</span> total % <span class=\"keyword\">this</span>.table.length</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showDistro() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.table.length; ++i) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[i] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\": \"</span> + <span class=\"keyword\">this</span>.table[i])</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  put(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> pos = <span class=\"keyword\">this</span>.simpleHash(data)</div><div class=\"line\">    <span class=\"keyword\">this</span>.table[pos] = data</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> someNames = [<span class=\"string\">\"David\"</span>, <span class=\"string\">\"Jennifer\"</span>, <span class=\"string\">\"Donnie\"</span>, <span class=\"string\">\"Raymond\"</span>, <span class=\"string\">\"Cynthia\"</span>, <span class=\"string\">\"Mike\"</span>, <span class=\"string\">\"Clayton\"</span>, <span class=\"string\">\"Danny\"</span>, <span class=\"string\">\"Jonathan\"</span>]</div><div class=\"line\"><span class=\"keyword\">let</span> hTable = <span class=\"keyword\">new</span> HashTable();</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; someNames.length; ++i) &#123;</div><div class=\"line\">  hTable.put(someNames[i]);</div><div class=\"line\">&#125;</div><div class=\"line\">hTable.showDistro()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Hash value: David -&gt; 488</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Jennifer -&gt; 817</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Donnie -&gt; 605</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Raymond -&gt; 730</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Cynthia -&gt; 720</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Mike -&gt; 390</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Clayton -&gt; 730</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Danny -&gt; 506</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Jonathan -&gt; 819</span></div></pre></td></tr></table></figure></p>\n<p><code>simpleHash</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  betterHash(string) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> H = <span class=\"number\">37</span>;</div><div class=\"line\">    <span class=\"keyword\">let</span> total = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; string.length; ++i) &#123;</div><div class=\"line\">      total += H * total + string.charCodeAt(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    total = total % <span class=\"keyword\">this</span>.table.length;</div><div class=\"line\">    <span class=\"keyword\">if</span> (total &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      total += <span class=\"keyword\">this</span>.table.length - <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">parseInt</span>(total);</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">get(key) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.table[<span class=\"keyword\">this</span>.betterHash(key)];</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HashTable</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.table = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(<span class=\"number\">137</span>)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  buildChains() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.table.length; ++i) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.table[i] = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showDistro() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.table.length; ++i) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[i][<span class=\"number\">0</span>] !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\": \"</span> + <span class=\"keyword\">this</span>.table[i]);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  betterHash(string) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> H = <span class=\"number\">37</span>;</div><div class=\"line\">    <span class=\"keyword\">let</span> total = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; string.length; ++i) &#123;</div><div class=\"line\">      total += H * total + string.charCodeAt(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    total = total % <span class=\"keyword\">this</span>.table.length;</div><div class=\"line\">    <span class=\"keyword\">if</span> (total &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      total += <span class=\"keyword\">this</span>.table.length - <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">parseInt</span>(total);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  put(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> index = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">let</span> pos = <span class=\"keyword\">this</span>.betterHash(data);</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[pos][index] === <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.table[pos][index] = data;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"keyword\">this</span>.table[pos][index] !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        ++index;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">this</span>.table[pos][index] = data;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  get(key) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> index = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">let</span> pos = <span class=\"keyword\">this</span>.betterHash(key);</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[pos][index] === key) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        elm: <span class=\"keyword\">this</span>.table[pos][index],</div><div class=\"line\">        key: pos</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"keyword\">this</span>.table[pos][index] !== key) &#123;</div><div class=\"line\">        index += <span class=\"number\">1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        elm: <span class=\"keyword\">this</span>.table[pos][index],</div><div class=\"line\">        key: pos</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> hTable = <span class=\"keyword\">new</span> HashTable();</div><div class=\"line\">hTable.buildChains();</div><div class=\"line\"><span class=\"keyword\">let</span> someNames = [<span class=\"string\">\"David\"</span>, <span class=\"string\">\"Jennifer\"</span>, <span class=\"string\">\"Donnie\"</span>, <span class=\"string\">\"Raymond\"</span>,</div><div class=\"line\">  <span class=\"string\">\"Cynthia\"</span>, <span class=\"string\">\"Mike\"</span>, <span class=\"string\">\"Clayton\"</span>, <span class=\"string\">\"Danny\"</span>, <span class=\"string\">\"Jonathan\"</span></div><div class=\"line\">];</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; someNames.length; ++i) &#123;</div><div class=\"line\">  hTable.put(someNames[i]);</div><div class=\"line\">&#125;</div><div class=\"line\">hTable.showDistro();</div><div class=\"line\"><span class=\"comment\">// 12: Jennifer</span></div><div class=\"line\"><span class=\"comment\">// 22: Raymond</span></div><div class=\"line\"><span class=\"comment\">// 55: Donnie</span></div><div class=\"line\"><span class=\"comment\">// 58: Clayton</span></div><div class=\"line\"><span class=\"comment\">// 80: David,Jonathan</span></div><div class=\"line\"><span class=\"comment\">// 82: Mike</span></div><div class=\"line\"><span class=\"comment\">// 103: Cynthia</span></div><div class=\"line\"><span class=\"comment\">// 110: Danny</span></div><div class=\"line\"></div><div class=\"line\">hTable.get(<span class=\"string\">'David'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#123;elm: \"David\", key: 80&#125;</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> ; : </p>\n<blockquote>\n<p> 1.5  ; </p>\n</blockquote>\n<p><code></code><code>put</code><code>get</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HashTable</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.table = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(<span class=\"number\">137</span>)</div><div class=\"line\">    <span class=\"keyword\">this</span>.values = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showDistro() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.table.length; ++i) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[i] !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\": \"</span> + <span class=\"keyword\">this</span>.table[i]);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  betterHash(string) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> H = <span class=\"number\">37</span>;</div><div class=\"line\">    <span class=\"keyword\">let</span> total = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; string.length; ++i) &#123;</div><div class=\"line\">      total += H * total + string.charCodeAt(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    total = total % <span class=\"keyword\">this</span>.table.length;</div><div class=\"line\">    <span class=\"keyword\">if</span> (total &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      total += <span class=\"keyword\">this</span>.table.length - <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">parseInt</span>(total);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  put(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> pos = <span class=\"keyword\">this</span>.betterHash(data);</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[pos] === <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.table[pos] = data;</div><div class=\"line\">      <span class=\"keyword\">this</span>.values[pos] = data</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"keyword\">this</span>.table[pos] !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        pos++</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">this</span>.table[pos] = data;</div><div class=\"line\">      <span class=\"keyword\">this</span>.values[pos] = data</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  get(key) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> hash = <span class=\"number\">-1</span>;</div><div class=\"line\">    hash = <span class=\"keyword\">this</span>.betterHash(key);</div><div class=\"line\">    <span class=\"keyword\">if</span> (hash &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = hash; <span class=\"keyword\">this</span>.table[hash] !== <span class=\"literal\">undefined</span>; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[hash] == key) &#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">            elm: <span class=\"keyword\">this</span>.values[hash],</div><div class=\"line\">            key: hash</div><div class=\"line\">          &#125;;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> hTable = <span class=\"keyword\">new</span> HashTable();</div><div class=\"line\"><span class=\"keyword\">let</span> someNames = [<span class=\"string\">\"David\"</span>, <span class=\"string\">\"Jennifer\"</span>, <span class=\"string\">\"Donnie\"</span>, <span class=\"string\">\"Raymond\"</span>,</div><div class=\"line\">  <span class=\"string\">\"Cynthia\"</span>, <span class=\"string\">\"Mike\"</span>, <span class=\"string\">\"Clayton\"</span>, <span class=\"string\">\"Danny\"</span>, <span class=\"string\">\"Jonathan\"</span></div><div class=\"line\">];</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; someNames.length; ++i) &#123;</div><div class=\"line\">  hTable.put(someNames[i]);</div><div class=\"line\">&#125;</div><div class=\"line\">hTable.showDistro();</div><div class=\"line\"><span class=\"comment\">// 12: Jennifer</span></div><div class=\"line\"><span class=\"comment\">// 22: Raymond</span></div><div class=\"line\"><span class=\"comment\">// 55: Donnie</span></div><div class=\"line\"><span class=\"comment\">// 58: Clayton</span></div><div class=\"line\"><span class=\"comment\">// 80: David,Jonathan</span></div><div class=\"line\"><span class=\"comment\">// 82: Mike</span></div><div class=\"line\"><span class=\"comment\">// 103: Cynthia</span></div><div class=\"line\"><span class=\"comment\">// 110: Danny</span></div><div class=\"line\"></div><div class=\"line\">hTable.get(<span class=\"string\">'David'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#123;elm: \"David\", key: 80&#125;</span></div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> </p>\n<p>  0  (collision)</p>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>table()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>simpleHash()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>showDistro()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>put()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HashTable</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.table = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(<span class=\"number\">137</span>)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  simpleHash(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> total = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; data.length; ++i) &#123;</div><div class=\"line\">      total += data.charCodeAt(i)</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Hash value: \"</span> + data + <span class=\"string\">\" -&gt; \"</span> + total)</div><div class=\"line\">    <span class=\"keyword\">return</span> total % <span class=\"keyword\">this</span>.table.length</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showDistro() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.table.length; ++i) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[i] != <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\": \"</span> + <span class=\"keyword\">this</span>.table[i])</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  put(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> pos = <span class=\"keyword\">this</span>.simpleHash(data)</div><div class=\"line\">    <span class=\"keyword\">this</span>.table[pos] = data</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> someNames = [<span class=\"string\">\"David\"</span>, <span class=\"string\">\"Jennifer\"</span>, <span class=\"string\">\"Donnie\"</span>, <span class=\"string\">\"Raymond\"</span>, <span class=\"string\">\"Cynthia\"</span>, <span class=\"string\">\"Mike\"</span>, <span class=\"string\">\"Clayton\"</span>, <span class=\"string\">\"Danny\"</span>, <span class=\"string\">\"Jonathan\"</span>]</div><div class=\"line\"><span class=\"keyword\">let</span> hTable = <span class=\"keyword\">new</span> HashTable();</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; someNames.length; ++i) &#123;</div><div class=\"line\">  hTable.put(someNames[i]);</div><div class=\"line\">&#125;</div><div class=\"line\">hTable.showDistro()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Hash value: David -&gt; 488</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Jennifer -&gt; 817</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Donnie -&gt; 605</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Raymond -&gt; 730</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Cynthia -&gt; 720</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Mike -&gt; 390</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Clayton -&gt; 730</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Danny -&gt; 506</span></div><div class=\"line\"><span class=\"comment\">// Hash value: Jonathan -&gt; 819</span></div></pre></td></tr></table></figure></p>\n<p><code>simpleHash</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  betterHash(string) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> H = <span class=\"number\">37</span>;</div><div class=\"line\">    <span class=\"keyword\">let</span> total = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; string.length; ++i) &#123;</div><div class=\"line\">      total += H * total + string.charCodeAt(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    total = total % <span class=\"keyword\">this</span>.table.length;</div><div class=\"line\">    <span class=\"keyword\">if</span> (total &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      total += <span class=\"keyword\">this</span>.table.length - <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">parseInt</span>(total);</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">get(key) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.table[<span class=\"keyword\">this</span>.betterHash(key)];</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HashTable</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.table = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(<span class=\"number\">137</span>)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  buildChains() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.table.length; ++i) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.table[i] = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showDistro() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.table.length; ++i) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[i][<span class=\"number\">0</span>] !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\": \"</span> + <span class=\"keyword\">this</span>.table[i]);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  betterHash(string) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> H = <span class=\"number\">37</span>;</div><div class=\"line\">    <span class=\"keyword\">let</span> total = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; string.length; ++i) &#123;</div><div class=\"line\">      total += H * total + string.charCodeAt(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    total = total % <span class=\"keyword\">this</span>.table.length;</div><div class=\"line\">    <span class=\"keyword\">if</span> (total &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      total += <span class=\"keyword\">this</span>.table.length - <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">parseInt</span>(total);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  put(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> index = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">let</span> pos = <span class=\"keyword\">this</span>.betterHash(data);</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[pos][index] === <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.table[pos][index] = data;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"keyword\">this</span>.table[pos][index] !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        ++index;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">this</span>.table[pos][index] = data;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  get(key) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> index = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">let</span> pos = <span class=\"keyword\">this</span>.betterHash(key);</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[pos][index] === key) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        elm: <span class=\"keyword\">this</span>.table[pos][index],</div><div class=\"line\">        key: pos</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"keyword\">this</span>.table[pos][index] !== key) &#123;</div><div class=\"line\">        index += <span class=\"number\">1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        elm: <span class=\"keyword\">this</span>.table[pos][index],</div><div class=\"line\">        key: pos</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> hTable = <span class=\"keyword\">new</span> HashTable();</div><div class=\"line\">hTable.buildChains();</div><div class=\"line\"><span class=\"keyword\">let</span> someNames = [<span class=\"string\">\"David\"</span>, <span class=\"string\">\"Jennifer\"</span>, <span class=\"string\">\"Donnie\"</span>, <span class=\"string\">\"Raymond\"</span>,</div><div class=\"line\">  <span class=\"string\">\"Cynthia\"</span>, <span class=\"string\">\"Mike\"</span>, <span class=\"string\">\"Clayton\"</span>, <span class=\"string\">\"Danny\"</span>, <span class=\"string\">\"Jonathan\"</span></div><div class=\"line\">];</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; someNames.length; ++i) &#123;</div><div class=\"line\">  hTable.put(someNames[i]);</div><div class=\"line\">&#125;</div><div class=\"line\">hTable.showDistro();</div><div class=\"line\"><span class=\"comment\">// 12: Jennifer</span></div><div class=\"line\"><span class=\"comment\">// 22: Raymond</span></div><div class=\"line\"><span class=\"comment\">// 55: Donnie</span></div><div class=\"line\"><span class=\"comment\">// 58: Clayton</span></div><div class=\"line\"><span class=\"comment\">// 80: David,Jonathan</span></div><div class=\"line\"><span class=\"comment\">// 82: Mike</span></div><div class=\"line\"><span class=\"comment\">// 103: Cynthia</span></div><div class=\"line\"><span class=\"comment\">// 110: Danny</span></div><div class=\"line\"></div><div class=\"line\">hTable.get(<span class=\"string\">'David'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#123;elm: \"David\", key: 80&#125;</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> ; : </p>\n<blockquote>\n<p> 1.5  ; </p>\n</blockquote>\n<p><code></code><code>put</code><code>get</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HashTable</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.table = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(<span class=\"number\">137</span>)</div><div class=\"line\">    <span class=\"keyword\">this</span>.values = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  showDistro() &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.table.length; ++i) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[i] !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(i + <span class=\"string\">\": \"</span> + <span class=\"keyword\">this</span>.table[i]);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  betterHash(string) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> H = <span class=\"number\">37</span>;</div><div class=\"line\">    <span class=\"keyword\">let</span> total = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; string.length; ++i) &#123;</div><div class=\"line\">      total += H * total + string.charCodeAt(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    total = total % <span class=\"keyword\">this</span>.table.length;</div><div class=\"line\">    <span class=\"keyword\">if</span> (total &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      total += <span class=\"keyword\">this</span>.table.length - <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">parseInt</span>(total);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  put(data) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> pos = <span class=\"keyword\">this</span>.betterHash(data);</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[pos] === <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.table[pos] = data;</div><div class=\"line\">      <span class=\"keyword\">this</span>.values[pos] = data</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"keyword\">this</span>.table[pos] !== <span class=\"literal\">undefined</span>) &#123;</div><div class=\"line\">        pos++</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">this</span>.table[pos] = data;</div><div class=\"line\">      <span class=\"keyword\">this</span>.values[pos] = data</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  get(key) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> hash = <span class=\"number\">-1</span>;</div><div class=\"line\">    hash = <span class=\"keyword\">this</span>.betterHash(key);</div><div class=\"line\">    <span class=\"keyword\">if</span> (hash &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = hash; <span class=\"keyword\">this</span>.table[hash] !== <span class=\"literal\">undefined</span>; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.table[hash] == key) &#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">            elm: <span class=\"keyword\">this</span>.values[hash],</div><div class=\"line\">            key: hash</div><div class=\"line\">          &#125;;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> hTable = <span class=\"keyword\">new</span> HashTable();</div><div class=\"line\"><span class=\"keyword\">let</span> someNames = [<span class=\"string\">\"David\"</span>, <span class=\"string\">\"Jennifer\"</span>, <span class=\"string\">\"Donnie\"</span>, <span class=\"string\">\"Raymond\"</span>,</div><div class=\"line\">  <span class=\"string\">\"Cynthia\"</span>, <span class=\"string\">\"Mike\"</span>, <span class=\"string\">\"Clayton\"</span>, <span class=\"string\">\"Danny\"</span>, <span class=\"string\">\"Jonathan\"</span></div><div class=\"line\">];</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; someNames.length; ++i) &#123;</div><div class=\"line\">  hTable.put(someNames[i]);</div><div class=\"line\">&#125;</div><div class=\"line\">hTable.showDistro();</div><div class=\"line\"><span class=\"comment\">// 12: Jennifer</span></div><div class=\"line\"><span class=\"comment\">// 22: Raymond</span></div><div class=\"line\"><span class=\"comment\">// 55: Donnie</span></div><div class=\"line\"><span class=\"comment\">// 58: Clayton</span></div><div class=\"line\"><span class=\"comment\">// 80: David,Jonathan</span></div><div class=\"line\"><span class=\"comment\">// 82: Mike</span></div><div class=\"line\"><span class=\"comment\">// 103: Cynthia</span></div><div class=\"line\"><span class=\"comment\">// 110: Danny</span></div><div class=\"line\"></div><div class=\"line\">hTable.get(<span class=\"string\">'David'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#123;elm: \"David\", key: 80&#125;</span></div></pre></td></tr></table></figure></p>"},{"title":"javascript--LList","comments":1,"toc":true,"date":"2018-02-24T12:00:30.000Z","_content":"\n### \n\n\n\n  ( ) null \n\n<!-- more -->\n\n### \n\n``\n<img width=\"600\" src=\"llist-2018-2-24/llist1.jpeg\"/>\n\n#### \n\n\n\n>Node\n\n/ |  \n- | :-: \nelement() | \nnext() | \n\n>Llist\n\n/ |  \n- | :-: \nhead() | \nfind() | \ninsert() | \nremove() | \nfindPrevious() | \ndisplay() | \n\n`next``next`\n``` javascript\ninsert(newElement, item) {\n    let newNode = new Node(newElement)\n    let current = this.find(item)\n    newNode.next = current.next\n    current.next = newNode\n}\n```\n\n\n``` javascript\n// \n  findPrevious(item) {\n    let currNode = this.head;\n    while (!(currNode.next === null) &&\n      (currNode.next.element !== item)) {\n      currNode = currNode.next;\n    }\n    return currNode;\n  }\n\n  // \n  remove(item) {\n    let prevNode = this.findPrevious(item);\n    if (!(prevNode.next === null)) {\n      prevNode.next = prevNode.next.next;\n    }\n  }\n```\n\n\n``` javascript\n// node\nclass Node {\n  constructor(element) {\n    this.element = element\n    this.next = null\n  }\n}\n\n// LList\nclass LList {\n  constructor() {\n    this.head = new Node(\"head\")\n  }\n\n  // \n  find(item) {\n    let currNode = this.head\n    while (currNode.element !== item) {\n      currNode = currNode.next\n    }\n    return currNode\n  }\n\n  // \n  insert(newElement, item) {\n    let newNode = new Node(newElement)\n    let current = this.find(item)\n    newNode.next = current.next\n    current.next = newNode\n  }\n\n  // \n  display() {\n    let currNode = this.head\n    while (!(currNode.next === null)) {\n      console.log(currNode.next.element)\n      currNode = currNode.next\n    }\n  }\n\n  // \n  findPrevious(item) {\n    let currNode = this.head;\n    while (!(currNode.next === null) &&\n      (currNode.next.element !== item)) {\n      currNode = currNode.next;\n    }\n    return currNode;\n  }\n\n  // \n  remove(item) {\n    let prevNode = this.findPrevious(item);\n    if (!(prevNode.next === null)) {\n      prevNode.next = prevNode.next.next;\n    }\n  }\n}\n```\n\n### \n\n  Node ```` \n\n<img width=\"600\" src=\"llist-2018-2-24/llist2.jpeg\"/>\n\n#### \n\n`Node``previous`\n``` javascript\nclass Node {\n  constructor(element) {\n    this.element = element\n    this.next = null\n    this.previous = null\n  }\n}\n\n// Llist\n// \ninsert(newElement, item) {\n    let newNode = new Node(newElement)\n    let current = this.find(item)\n    newNode.next = current.next\n    newNode.previous = current\n    current.next = newNode\n}\n\n// \n  remove(item) {\n    let currNode = this.find(item)\n    if (!(currNode.next === null)) {\n      currNode.next = currNode.next.next\n      currNode.next.previous = currNode.previous\n      currNode.next = null\n      currNode.previous = null\n    }\n  }\n```\n\n#### \n\n`findLast`\n`dispReverse`\n`show`\nn`advance`\nn`back`\n\n\n``` javascript\n// node\nclass Node {\n  constructor(element) {\n    this.element = element\n    this.next = null\n    this.previous = null\n  }\n}\n\n// LList\nclass LList {\n  constructor() {\n    this.head = new Node(\"head\")\n    this.currNode = null\n  }\n\n  // \n  find(item) {\n    let currNode = this.head\n    while (currNode.element !== item) {\n      currNode = currNode.next\n    }\n    return currNode\n  }\n\n  // \n  insert(newElement, item) {\n    let newNode = new Node(newElement)\n    let current = this.find(item)\n    newNode.next = current.next\n    newNode.previous = current\n    current.next = newNode\n  }\n\n  // \n  display() {\n    let currNode = this.head\n    while (!(currNode.next === null)) {\n      console.log(currNode.next.element)\n      currNode = currNode.next\n    }\n  }\n\n  // \n  findLast() {\n    let currNode = this.head;\n    while (!(currNode.next == null)) {\n      currNode = currNode.next;\n    }\n    return currNode;\n  }\n\n  // \n  dispReverse() {\n    let currNode = this.head;\n    currNode = this.findLast();\n    while (!(currNode.previous == null)) {\n      print(currNode.element);\n      currNode = currNode.previous;\n    }\n  }\n\n  // \n  remove(item) {\n    let currNode = this.find(item)\n    if (!(currNode.next === null)) {\n      currNode.next = currNode.next.next\n      currNode.next.previous = currNode.previous\n      currNode.next = null\n      currNode.previous = null\n    }\n  }\n\n  // \n  show() {\n    return this.currNode\n  }\n\n  // n\n  advance(n) {\n    let currNode = this.head\n    let idx = 0\n    while (!(currNode.next === null) && idx < n) {\n      ++idx\n      currNode = currNode.next\n    }\n    this.currNode = currNode\n    return currNode\n  }\n\n  // n\n  back(n) {\n    let currNode = this.findLast()\n    let idx = 0\n    while (!(currNode.next === null) && idx < n) {\n      ++idx\n      currNode = currNode.next\n    }\n    this.currNode = currNode\n    return currNode\n  }\n}\n```\n\n### \n\n next \n``` javascript\nhead.next = head\n```\n\n\n<img width=\"600\" src=\"llist-2018-2-24/llist3.jpeg\"/>\n\n\n``` javascript\nclass LList {\n  constructor() {\n    this.head = new Node(\"head\")\n    this.head.next = this.head\n  }\n\n  // \n  display() {\n    let currNode = this.head\n    while (!(currNode.next == null) &&\n        !(currNode.next.element == \"head\")) {\n      console.log(currNode.next.element)\n      currNode = currNode.next\n    }\n  }\n}  \n```","source":"_posts/LList-2018-2-24.md","raw":"---\ntitle: javascript--LList\ncomments: true\ntoc: true\ndate: 2018-02-24 20:00:30\ntags:\n    - 'javascript'\n    - 'ECMAScript 6'\n    - 'algorithm'\n---\n\n### \n\n\n\n  ( ) null \n\n<!-- more -->\n\n### \n\n``\n<img width=\"600\" src=\"llist-2018-2-24/llist1.jpeg\"/>\n\n#### \n\n\n\n>Node\n\n/ |  \n- | :-: \nelement() | \nnext() | \n\n>Llist\n\n/ |  \n- | :-: \nhead() | \nfind() | \ninsert() | \nremove() | \nfindPrevious() | \ndisplay() | \n\n`next``next`\n``` javascript\ninsert(newElement, item) {\n    let newNode = new Node(newElement)\n    let current = this.find(item)\n    newNode.next = current.next\n    current.next = newNode\n}\n```\n\n\n``` javascript\n// \n  findPrevious(item) {\n    let currNode = this.head;\n    while (!(currNode.next === null) &&\n      (currNode.next.element !== item)) {\n      currNode = currNode.next;\n    }\n    return currNode;\n  }\n\n  // \n  remove(item) {\n    let prevNode = this.findPrevious(item);\n    if (!(prevNode.next === null)) {\n      prevNode.next = prevNode.next.next;\n    }\n  }\n```\n\n\n``` javascript\n// node\nclass Node {\n  constructor(element) {\n    this.element = element\n    this.next = null\n  }\n}\n\n// LList\nclass LList {\n  constructor() {\n    this.head = new Node(\"head\")\n  }\n\n  // \n  find(item) {\n    let currNode = this.head\n    while (currNode.element !== item) {\n      currNode = currNode.next\n    }\n    return currNode\n  }\n\n  // \n  insert(newElement, item) {\n    let newNode = new Node(newElement)\n    let current = this.find(item)\n    newNode.next = current.next\n    current.next = newNode\n  }\n\n  // \n  display() {\n    let currNode = this.head\n    while (!(currNode.next === null)) {\n      console.log(currNode.next.element)\n      currNode = currNode.next\n    }\n  }\n\n  // \n  findPrevious(item) {\n    let currNode = this.head;\n    while (!(currNode.next === null) &&\n      (currNode.next.element !== item)) {\n      currNode = currNode.next;\n    }\n    return currNode;\n  }\n\n  // \n  remove(item) {\n    let prevNode = this.findPrevious(item);\n    if (!(prevNode.next === null)) {\n      prevNode.next = prevNode.next.next;\n    }\n  }\n}\n```\n\n### \n\n  Node ```` \n\n<img width=\"600\" src=\"llist-2018-2-24/llist2.jpeg\"/>\n\n#### \n\n`Node``previous`\n``` javascript\nclass Node {\n  constructor(element) {\n    this.element = element\n    this.next = null\n    this.previous = null\n  }\n}\n\n// Llist\n// \ninsert(newElement, item) {\n    let newNode = new Node(newElement)\n    let current = this.find(item)\n    newNode.next = current.next\n    newNode.previous = current\n    current.next = newNode\n}\n\n// \n  remove(item) {\n    let currNode = this.find(item)\n    if (!(currNode.next === null)) {\n      currNode.next = currNode.next.next\n      currNode.next.previous = currNode.previous\n      currNode.next = null\n      currNode.previous = null\n    }\n  }\n```\n\n#### \n\n`findLast`\n`dispReverse`\n`show`\nn`advance`\nn`back`\n\n\n``` javascript\n// node\nclass Node {\n  constructor(element) {\n    this.element = element\n    this.next = null\n    this.previous = null\n  }\n}\n\n// LList\nclass LList {\n  constructor() {\n    this.head = new Node(\"head\")\n    this.currNode = null\n  }\n\n  // \n  find(item) {\n    let currNode = this.head\n    while (currNode.element !== item) {\n      currNode = currNode.next\n    }\n    return currNode\n  }\n\n  // \n  insert(newElement, item) {\n    let newNode = new Node(newElement)\n    let current = this.find(item)\n    newNode.next = current.next\n    newNode.previous = current\n    current.next = newNode\n  }\n\n  // \n  display() {\n    let currNode = this.head\n    while (!(currNode.next === null)) {\n      console.log(currNode.next.element)\n      currNode = currNode.next\n    }\n  }\n\n  // \n  findLast() {\n    let currNode = this.head;\n    while (!(currNode.next == null)) {\n      currNode = currNode.next;\n    }\n    return currNode;\n  }\n\n  // \n  dispReverse() {\n    let currNode = this.head;\n    currNode = this.findLast();\n    while (!(currNode.previous == null)) {\n      print(currNode.element);\n      currNode = currNode.previous;\n    }\n  }\n\n  // \n  remove(item) {\n    let currNode = this.find(item)\n    if (!(currNode.next === null)) {\n      currNode.next = currNode.next.next\n      currNode.next.previous = currNode.previous\n      currNode.next = null\n      currNode.previous = null\n    }\n  }\n\n  // \n  show() {\n    return this.currNode\n  }\n\n  // n\n  advance(n) {\n    let currNode = this.head\n    let idx = 0\n    while (!(currNode.next === null) && idx < n) {\n      ++idx\n      currNode = currNode.next\n    }\n    this.currNode = currNode\n    return currNode\n  }\n\n  // n\n  back(n) {\n    let currNode = this.findLast()\n    let idx = 0\n    while (!(currNode.next === null) && idx < n) {\n      ++idx\n      currNode = currNode.next\n    }\n    this.currNode = currNode\n    return currNode\n  }\n}\n```\n\n### \n\n next \n``` javascript\nhead.next = head\n```\n\n\n<img width=\"600\" src=\"llist-2018-2-24/llist3.jpeg\"/>\n\n\n``` javascript\nclass LList {\n  constructor() {\n    this.head = new Node(\"head\")\n    this.head.next = this.head\n  }\n\n  // \n  display() {\n    let currNode = this.head\n    while (!(currNode.next == null) &&\n        !(currNode.next.element == \"head\")) {\n      console.log(currNode.next.element)\n      currNode = currNode.next\n    }\n  }\n}  \n```","slug":"LList-2018-2-24","published":1,"updated":"2018-03-11T08:44:32.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vb1000xfdldfzmgsz0w","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>  ( ) null </p>\n<a id=\"more\"></a>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code></code><br><img width=\"600\" src=\"/LList-2018-2-24/llist1.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<blockquote>\n<p>Node</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>element()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>next()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>Llist</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>head()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>find()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>insert()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>remove()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>findPrevious()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>display()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<p><code>next</code><code>next</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">insert(newElement, item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> newNode = <span class=\"keyword\">new</span> Node(newElement)</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    newNode.next = current.next</div><div class=\"line\">    current.next = newNode</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  findPrevious(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head;</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>) &amp;&amp;</div><div class=\"line\">      (currNode.next.element !== item)) &#123;</div><div class=\"line\">      currNode = currNode.next;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  remove(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> prevNode = <span class=\"keyword\">this</span>.findPrevious(item);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(prevNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      prevNode.next = prevNode.next.next;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// node</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.element = element</div><div class=\"line\">    <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// LList</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LList</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.head = <span class=\"keyword\">new</span> Node(<span class=\"string\">\"head\"</span>)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  find(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">while</span> (currNode.element !== item) &#123;</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  insert(newElement, item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> newNode = <span class=\"keyword\">new</span> Node(newElement)</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    newNode.next = current.next</div><div class=\"line\">    current.next = newNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  display() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(currNode.next.element)</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  findPrevious(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head;</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>) &amp;&amp;</div><div class=\"line\">      (currNode.next.element !== item)) &#123;</div><div class=\"line\">      currNode = currNode.next;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  remove(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> prevNode = <span class=\"keyword\">this</span>.findPrevious(item);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(prevNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      prevNode.next = prevNode.next.next;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  Node <code></code><code></code> </p>\n<p><img width=\"600\" src=\"/LList-2018-2-24/llist2.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><code>Node</code><code>previous</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.element = element</div><div class=\"line\">    <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.previous = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Llist</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">insert(newElement, item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> newNode = <span class=\"keyword\">new</span> Node(newElement)</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    newNode.next = current.next</div><div class=\"line\">    newNode.previous = current</div><div class=\"line\">    current.next = newNode</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  remove(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(currNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      currNode.next = currNode.next.next</div><div class=\"line\">      currNode.next.previous = currNode.previous</div><div class=\"line\">      currNode.next = <span class=\"literal\">null</span></div><div class=\"line\">      currNode.previous = <span class=\"literal\">null</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><code>findLast</code><br><code>dispReverse</code><br><code>show</code><br>n<code>advance</code><br>n<code>back</code></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// node</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.element = element</div><div class=\"line\">    <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.previous = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// LList</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LList</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.head = <span class=\"keyword\">new</span> Node(<span class=\"string\">\"head\"</span>)</div><div class=\"line\">    <span class=\"keyword\">this</span>.currNode = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  find(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">while</span> (currNode.element !== item) &#123;</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  insert(newElement, item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> newNode = <span class=\"keyword\">new</span> Node(newElement)</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    newNode.next = current.next</div><div class=\"line\">    newNode.previous = current</div><div class=\"line\">    current.next = newNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  display() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(currNode.next.element)</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  findLast() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head;</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next == <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      currNode = currNode.next;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  dispReverse() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head;</div><div class=\"line\">    currNode = <span class=\"keyword\">this</span>.findLast();</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.previous == <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      print(currNode.element);</div><div class=\"line\">      currNode = currNode.previous;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  remove(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(currNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      currNode.next = currNode.next.next</div><div class=\"line\">      currNode.next.previous = currNode.previous</div><div class=\"line\">      currNode.next = <span class=\"literal\">null</span></div><div class=\"line\">      currNode.previous = <span class=\"literal\">null</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  show() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.currNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// n</span></div><div class=\"line\">  advance(n) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">let</span> idx = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>) &amp;&amp; idx &lt; n) &#123;</div><div class=\"line\">      ++idx</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.currNode = currNode</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// n</span></div><div class=\"line\">  back(n) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.findLast()</div><div class=\"line\">    <span class=\"keyword\">let</span> idx = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>) &amp;&amp; idx &lt; n) &#123;</div><div class=\"line\">      ++idx</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.currNode = currNode</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> next <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">head.next = head</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/LList-2018-2-24/llist3.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LList</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.head = <span class=\"keyword\">new</span> Node(<span class=\"string\">\"head\"</span>)</div><div class=\"line\">    <span class=\"keyword\">this</span>.head.next = <span class=\"keyword\">this</span>.head</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  display() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next == <span class=\"literal\">null</span>) &amp;&amp;</div><div class=\"line\">        !(currNode.next.element == <span class=\"string\">\"head\"</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(currNode.next.element)</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>  ( ) null </p>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code></code><br><img width=\"600\" src=\"/LList-2018-2-24/llist1.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<blockquote>\n<p>Node</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>element()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>next()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>Llist</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>head()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>find()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>insert()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>remove()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>findPrevious()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>display()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<p><code>next</code><code>next</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">insert(newElement, item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> newNode = <span class=\"keyword\">new</span> Node(newElement)</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    newNode.next = current.next</div><div class=\"line\">    current.next = newNode</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  findPrevious(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head;</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>) &amp;&amp;</div><div class=\"line\">      (currNode.next.element !== item)) &#123;</div><div class=\"line\">      currNode = currNode.next;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  remove(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> prevNode = <span class=\"keyword\">this</span>.findPrevious(item);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(prevNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      prevNode.next = prevNode.next.next;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// node</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.element = element</div><div class=\"line\">    <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// LList</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LList</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.head = <span class=\"keyword\">new</span> Node(<span class=\"string\">\"head\"</span>)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  find(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">while</span> (currNode.element !== item) &#123;</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  insert(newElement, item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> newNode = <span class=\"keyword\">new</span> Node(newElement)</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    newNode.next = current.next</div><div class=\"line\">    current.next = newNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  display() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(currNode.next.element)</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  findPrevious(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head;</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>) &amp;&amp;</div><div class=\"line\">      (currNode.next.element !== item)) &#123;</div><div class=\"line\">      currNode = currNode.next;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  remove(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> prevNode = <span class=\"keyword\">this</span>.findPrevious(item);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(prevNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      prevNode.next = prevNode.next.next;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  Node <code></code><code></code> </p>\n<p><img width=\"600\" src=\"/LList-2018-2-24/llist2.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><code>Node</code><code>previous</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.element = element</div><div class=\"line\">    <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.previous = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Llist</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">insert(newElement, item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> newNode = <span class=\"keyword\">new</span> Node(newElement)</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    newNode.next = current.next</div><div class=\"line\">    newNode.previous = current</div><div class=\"line\">    current.next = newNode</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">  remove(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(currNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      currNode.next = currNode.next.next</div><div class=\"line\">      currNode.next.previous = currNode.previous</div><div class=\"line\">      currNode.next = <span class=\"literal\">null</span></div><div class=\"line\">      currNode.previous = <span class=\"literal\">null</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><code>findLast</code><br><code>dispReverse</code><br><code>show</code><br>n<code>advance</code><br>n<code>back</code></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// node</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.element = element</div><div class=\"line\">    <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.previous = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// LList</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LList</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.head = <span class=\"keyword\">new</span> Node(<span class=\"string\">\"head\"</span>)</div><div class=\"line\">    <span class=\"keyword\">this</span>.currNode = <span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  find(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">while</span> (currNode.element !== item) &#123;</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  insert(newElement, item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> newNode = <span class=\"keyword\">new</span> Node(newElement)</div><div class=\"line\">    <span class=\"keyword\">let</span> current = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    newNode.next = current.next</div><div class=\"line\">    newNode.previous = current</div><div class=\"line\">    current.next = newNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  display() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(currNode.next.element)</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  findLast() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head;</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next == <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      currNode = currNode.next;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  dispReverse() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head;</div><div class=\"line\">    currNode = <span class=\"keyword\">this</span>.findLast();</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.previous == <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      print(currNode.element);</div><div class=\"line\">      currNode = currNode.previous;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  remove(item) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.find(item)</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(currNode.next === <span class=\"literal\">null</span>)) &#123;</div><div class=\"line\">      currNode.next = currNode.next.next</div><div class=\"line\">      currNode.next.previous = currNode.previous</div><div class=\"line\">      currNode.next = <span class=\"literal\">null</span></div><div class=\"line\">      currNode.previous = <span class=\"literal\">null</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  show() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.currNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// n</span></div><div class=\"line\">  advance(n) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">let</span> idx = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>) &amp;&amp; idx &lt; n) &#123;</div><div class=\"line\">      ++idx</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.currNode = currNode</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// n</span></div><div class=\"line\">  back(n) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.findLast()</div><div class=\"line\">    <span class=\"keyword\">let</span> idx = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next === <span class=\"literal\">null</span>) &amp;&amp; idx &lt; n) &#123;</div><div class=\"line\">      ++idx</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.currNode = currNode</div><div class=\"line\">    <span class=\"keyword\">return</span> currNode</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> next <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">head.next = head</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/LList-2018-2-24/llist3.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LList</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.head = <span class=\"keyword\">new</span> Node(<span class=\"string\">\"head\"</span>)</div><div class=\"line\">    <span class=\"keyword\">this</span>.head.next = <span class=\"keyword\">this</span>.head</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  display() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> currNode = <span class=\"keyword\">this</span>.head</div><div class=\"line\">    <span class=\"keyword\">while</span> (!(currNode.next == <span class=\"literal\">null</span>) &amp;&amp;</div><div class=\"line\">        !(currNode.next.element == <span class=\"string\">\"head\"</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(currNode.next.element)</div><div class=\"line\">      currNode = currNode.next</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>"},{"title":"ajax302","comments":1,"date":"2017-04-02T12:09:11.000Z","_content":"ajax302 FoundajaxResponse HeadersLocation\n\n##### jQuery$.ajax()ajaxJavaScript\n\n``` javascript\n$.ajax({\nurl: '/oauth/respond',\ntype: 'post',\ndata: data,\ncomplete: function(jqXHR){\n    console.log(jqXHR.status);\n},\nerror: function (xhr) {\n    console.log(xhr.status);\n}\n});\n```\n<!-- more -->\n\n##### 302 Found\n![111](ajax/111.png)\n\najaxcomplete()error()404302 \nstackoverflow\n\n302ajax302Response HeadersLocationLocationUrlajax\n\najax -> browser -> server -> 302 -> browser(redirect) -> server -> browser -> ajax callback\n\n302URLajax404URL200\n\najax302location.href\n\n#### \n\n#### \n\najax302jsonASP.NET MVC\n\n``` javascript\nreturn Json(new { status = 302, location = \"/oauth/respond\" });\n\najax\n\n$.ajax({\n    url: '/oauth/respond',\n    type: 'post',\n    data: data,\n    dataType: 'json',\n    success: function (data) {\n        if (data.status == 302) {\n            location.href = data.location;\n        }\n    }\n}); \n```\n#### \n\najaxform\n\n``` javascript\n\n<form method=\"post\" action=\"/oauth/respond\"></form>\n\n```\n","source":"_posts/ajax.md","raw":"---\ntitle: ajax302\ncomments: true\ndate: 2017-04-02 20:09:11\ncategories: \"javascript\"\ntags: \n    - 'javascript'\n    - 'ajax'\n    - '302'\n---\najax302 FoundajaxResponse HeadersLocation\n\n##### jQuery$.ajax()ajaxJavaScript\n\n``` javascript\n$.ajax({\nurl: '/oauth/respond',\ntype: 'post',\ndata: data,\ncomplete: function(jqXHR){\n    console.log(jqXHR.status);\n},\nerror: function (xhr) {\n    console.log(xhr.status);\n}\n});\n```\n<!-- more -->\n\n##### 302 Found\n![111](ajax/111.png)\n\najaxcomplete()error()404302 \nstackoverflow\n\n302ajax302Response HeadersLocationLocationUrlajax\n\najax -> browser -> server -> 302 -> browser(redirect) -> server -> browser -> ajax callback\n\n302URLajax404URL200\n\najax302location.href\n\n#### \n\n#### \n\najax302jsonASP.NET MVC\n\n``` javascript\nreturn Json(new { status = 302, location = \"/oauth/respond\" });\n\najax\n\n$.ajax({\n    url: '/oauth/respond',\n    type: 'post',\n    data: data,\n    dataType: 'json',\n    success: function (data) {\n        if (data.status == 302) {\n            location.href = data.location;\n        }\n    }\n}); \n```\n#### \n\najaxform\n\n``` javascript\n\n<form method=\"post\" action=\"/oauth/respond\"></form>\n\n```\n","slug":"ajax","published":1,"updated":"2017-08-26T12:58:33.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vb30010fdldj9onsup6","content":"<p>ajax302 FoundajaxResponse HeadersLocation</p>\n<h5 id=\"jQuery-ajax-ajaxJavaScript\"><a href=\"#jQuery-ajax-ajaxJavaScript\" class=\"headerlink\" title=\"jQuery$.ajax()ajaxJavaScript\"></a>jQuery$.ajax()ajaxJavaScript</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">$.ajax(&#123;</div><div class=\"line\">url: <span class=\"string\">'/oauth/respond'</span>,</div><div class=\"line\">type: <span class=\"string\">'post'</span>,</div><div class=\"line\">data: data,</div><div class=\"line\">complete: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">jqXHR</span>)</span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(jqXHR.status);</div><div class=\"line\">&#125;,</div><div class=\"line\">error: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">xhr</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(xhr.status);</div><div class=\"line\">&#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h5 id=\"302-Found\"><a href=\"#302-Found\" class=\"headerlink\" title=\"302 Found\"></a>302 Found</h5><p><img src=\"/ajax/111.png\" alt=\"111\"></p>\n<p>ajaxcomplete()error()404302<br>stackoverflow</p>\n<p>302ajax302Response HeadersLocationLocationUrlajax</p>\n<p>ajax -&gt; browser -&gt; server -&gt; 302 -&gt; browser(redirect) -&gt; server -&gt; browser -&gt; ajax callback</p>\n<p>302URLajax404URL200</p>\n<p>ajax302location.href</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ajax302jsonASP.NET MVC</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">return</span> Json(<span class=\"keyword\">new</span> &#123; status = <span class=\"number\">302</span>, location = <span class=\"string\">\"/oauth/respond\"</span> &#125;);</div><div class=\"line\"></div><div class=\"line\">ajax</div><div class=\"line\"></div><div class=\"line\">$.ajax(&#123;</div><div class=\"line\">    url: <span class=\"string\">'/oauth/respond'</span>,</div><div class=\"line\">    type: <span class=\"string\">'post'</span>,</div><div class=\"line\">    data: data,</div><div class=\"line\">    dataType: <span class=\"string\">'json'</span>,</div><div class=\"line\">    success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (data.status == <span class=\"number\">302</span>) &#123;</div><div class=\"line\">            location.href = data.location;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ajaxform</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">&lt;form method=<span class=\"string\">\"post\"</span> action=<span class=\"string\">\"/oauth/respond\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span></div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>ajax302 FoundajaxResponse HeadersLocation</p>\n<h5 id=\"jQuery-ajax-ajaxJavaScript\"><a href=\"#jQuery-ajax-ajaxJavaScript\" class=\"headerlink\" title=\"jQuery$.ajax()ajaxJavaScript\"></a>jQuery$.ajax()ajaxJavaScript</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">$.ajax(&#123;</div><div class=\"line\">url: <span class=\"string\">'/oauth/respond'</span>,</div><div class=\"line\">type: <span class=\"string\">'post'</span>,</div><div class=\"line\">data: data,</div><div class=\"line\">complete: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">jqXHR</span>)</span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(jqXHR.status);</div><div class=\"line\">&#125;,</div><div class=\"line\">error: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">xhr</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(xhr.status);</div><div class=\"line\">&#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>","more":"<h5 id=\"302-Found\"><a href=\"#302-Found\" class=\"headerlink\" title=\"302 Found\"></a>302 Found</h5><p><img src=\"/ajax/111.png\" alt=\"111\"></p>\n<p>ajaxcomplete()error()404302<br>stackoverflow</p>\n<p>302ajax302Response HeadersLocationLocationUrlajax</p>\n<p>ajax -&gt; browser -&gt; server -&gt; 302 -&gt; browser(redirect) -&gt; server -&gt; browser -&gt; ajax callback</p>\n<p>302URLajax404URL200</p>\n<p>ajax302location.href</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ajax302jsonASP.NET MVC</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">return</span> Json(<span class=\"keyword\">new</span> &#123; status = <span class=\"number\">302</span>, location = <span class=\"string\">\"/oauth/respond\"</span> &#125;);</div><div class=\"line\"></div><div class=\"line\">ajax</div><div class=\"line\"></div><div class=\"line\">$.ajax(&#123;</div><div class=\"line\">    url: <span class=\"string\">'/oauth/respond'</span>,</div><div class=\"line\">    type: <span class=\"string\">'post'</span>,</div><div class=\"line\">    data: data,</div><div class=\"line\">    dataType: <span class=\"string\">'json'</span>,</div><div class=\"line\">    success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (data.status == <span class=\"number\">302</span>) &#123;</div><div class=\"line\">            location.href = data.location;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ajaxform</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">&lt;form method=<span class=\"string\">\"post\"</span> action=<span class=\"string\">\"/oauth/respond\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span></div></pre></td></tr></table></figure>"},{"title":"babel.babelrc","comments":1,"toc":true,"date":"2017-12-23T09:06:58.000Z","_content":"\n## Babel\n\n,JavaScript \n\nJavascriptJavaScriptasync,await\n\nBabelJavaScript.babelrcwebpack\n\n> webpack3+\n\n<!-- more -->\n\n### Babel\n\n.babelrcpresetsplugins\n\n> 1.javascriptjavascriptapilet/constincludes/Object.assignbabel-preset-envbabel-preset-es2015babel-preset-es2016babel-preset-es2017babel-preset-latest<font color=\"red\">babel-preset-envjavascirpt</font>\n\n``` javascript\n{\n  \"presets\": [\"env\", {\n      \"modules\": false\n    }],\n    \"stage-2\"\n}\n```\n\n> 2.javascriptapibabel-plugin-transform-runtimeObject.assign,babel-polyfillincludesObject.assign \n\n``` javascript\n__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()\n```\n\n> 3.jsxflowJSXRectbabel-preset-react\n\n### (presets)\n\nnpmbabel-preset-xx npm install babel-preset-stage-2 babel-preset-env --save-dev \n\n``` javascript\n{\n  \"presets\": [\n    [\"env\", options],\n    \"stage-2\"\n  ]\n}\n```\n\n##### stage-2\nbabel,\n    babel-preset-stage-0(stage-0) \n    babel-preset-stage-1(stage-1) \n    babel-preset-stage-2(stage-2) \n    babel-preset-stage-3(stage-3)\npreset-stage-0preset-stage-1transform-do-expressionstransform-function-bindpreset-stage-1preset-stage-2\n\n##### options\nbabel-preset-enves2015-arrow-functionses2015-block-scoped-functions,https://babeljs.io/docs/plugins/preset-env/\n``` javascript\n{\n    \"targets\": {\n        \"chrome\": 52,\n        \"browsers\": [\"last 2 versions\", \"safari 7\"],\n        \"node\":\"6.10\"\n    }\n    \"modules\": false\n}\n```\n\ntargetsbrowserstargets\n\ntargets.nodenode\n\nmodulesfalseCommonJS\"amd\" | \"umd\" | \"systemjs\" | \"commonjs\"systemjsamdumdcommonjs\n\n> amdng1\n``` javascript\ndefine(['jquery'], function ($) {\n    //    \n    function myFunc(){};\n \n    //    \n    return myFunc;\n})\n```\n> commonjsnode\n``` javascript\nvar $ = require('jquery');\n//    \nfunction myFunc(){};\n \n//    \nmodule.exports = myFunc;\n```\n>umdamdcommonjs\n``` javascript\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        // Node, CommonJS\n        module.exports = factory(require('jquery'));\n    } else {\n        // (root  window)\n        root.returnExports = factory(root.jQuery);\n    }\n}(this, function ($) {\n    //    \n    function myFunc(){};\n \n    //    \n    return myFunc;\n}));\n```\n\n### plugins\n\nbabel\n``` javascript\n{\n  \"plugins\": [\n    \"check-es2015-constants\",\n    \"es2015-arrow-functions\",\n    \"es2015-block-scoped-functions\",\n    // ...\n  ]\n}\n```\n\nenvbabel-preset-env\n``` javascript\n{\n  \"presets\": [\n    \"es2015\"\n  ]\n}\n```\n\nbabel-plugin-transform-runtimebabel-plugin-syntax-dynamic-import\n\n\n``` javascript\n{\n  \"plugins\": [\n    \"syntax-dynamic-import\",[\"transform-runtime\"]\n  ]\n}\n```\n\n##### transform-runtime\n\ntransform-runtimees6apiapibabel-polyfill\n\nObject.assignwebpack\n\n``` javascript\n// \n__webpack_require__(\"ez/6\");\nvar aaa = 1;\n\nfunction fna() {\n  var dd = 33333;\n  var cc = Object.assign({ key: 2 });\n  var xx = String.prototype.repeat.call('b', 3);\n  if (\"foobar\".String.prototype.includes(\"foo\")) {\n    var vv = 1;\n  }\n\n  return dd;\n}\n```\n\n``` javascript\n// \n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n\n__webpack_require__(\"ez/6\");\nvar aaa = 1;\n\nfunction fna() {\n  var dd = 33333;\n  var cc = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()({ key: 2 });\n  var xx = String.prototype.repeat.call('b', 3);\n  if (\"foobar\".String.prototype.includes(\"foo\")) {\n    var vv = 1;\n  }\n\n  return dd;\n}\n```\n\nclasswebpack\n\n``` javascript\n// \nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Canvas = function Canvas(height, width) {\n  _classCallCheck(this, Canvas);\n\n  this.height = height;\n  this.width = width;\n};\n\nvar Canvas2 = function Canvas2(height, width) {\n  _classCallCheck(this, Canvas2);\n\n  this.height = height;\n  this.width = width;\n};\n```\n\n``` javascript\n// \n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n\nvar Canvas = function Canvas(height, width) {\n  __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Canvas);\n\n  this.height = height;\n  this.width = width;\n};\n\nvar Canvas2 = function Canvas2(height, width) {\n  __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Canvas2);\n\n  this.height = height;\n  this.width = width;\n};\n```\n\nGeneratorpromiseasync await\n\n> promise\n\nwebpacktransform-runtimejs\n\n\n\n<img width=\"500\" src=\"babelrc-2017-12-23/2.jpeg\"/>\n\n\n\n<img width=\"500\" src=\"babelrc-2017-12-23/1.jpeg\"/>\n\ntransform-runtimewebpack\n\n##### syntax-dynamic-import\n\n\n``` javascript\nfunction nDate() {\n  import('moment').then(function(moment) {\n    console.log(moment().format());\n  }).catch(function(err) {\n    console.log('Failed to load moment', err);\n  });\n}\n\nnDate();\n```\n\n> .babelrc\"stage-2\"\n\n\n\n* Module build failed: SyntaxError: 'import' and 'export' may only appear at the top level, or (import  export)\n\n* Module build failed: SyntaxError: Unexpected token, expected {\n\n### \n\n##### ignore\n\n\n``` javascript\n{\n  \"ignore\":[\"./module/a.js\"]\n}\n```\n\nlet,Object.assign,class\n``` javascript\n__webpack_require__(\"ez/6\");\nconst aaa = 1;\n\nfunction fna () {\n  let dd = 33333\n  let cc = Object.assign({key:2})\n  let xx = String.prototype.repeat.call('b', 3)\n  if (\"foobar\".String.prototype.includes(\"foo\")) {\n    let vv = 1\n  }\n\n  return dd\n}\n\nfunction fna2 () {\n  return fna() + aaa + __WEBPACK_IMPORTED_MODULE_0__b__[\"a\" /* default */]\n}\n\nclass Canvas {\n  constructor(height, width) {\n    this.height = height;\n    this.width = width;\n  }\n}\n\nclass Canvas2 {\n  constructor(height, width) {\n    this.height = height;\n    this.width = width;\n  }\n}\n```\n\n##### minified\n\nbooleanbabel-cliwebpackwebpackUglifyJsPlugin\n\n##### comments\n\nbooleanwebpackUglifyJsPlugin\n\n##### env\n\n\n\n``` javascript\n{\n  \"env\": {\n    // test BABEL_ENVNODE_ENVdevelopment\n    \"test\": {\n      \"presets\": [\"env\", \"stage-2\"],\n      // instanbul\n      \"plugins\": [\"istanbul\"]\n    }\n  }\n}\n```\n\n### \n\nBabelJavaScriptAPIIteratorGeneratorSetMapsPromiseObject.assignbabel-plugin-transform-runtime<a href=\"https://github.com/babel/babel/blob/master/packages/babel-plugin-transform-runtime/src/definitions.js\" target=\"_blank\">definitions.js</a>\n\nbabeltransform-runtimebabel-polyfillrequire\n\nObject.assignlodashpromiseQ.js\n\n### \n\n.babelrcpresetspluginswebpack\n\nvue\n``` javascript\n{\n  \"presets\": [\n    [\"env\", {\n      \"modules\": false\n    }],\n    \"stage-2\"\n  ],\n  // \n  \"comments\": false,\n  \"plugins\": [\"transform-runtime\",\"syntax-dynamic-import\"],\n  \"env\": {\n    // test BABEL_ENVNODE_ENVdevelopment\n    \"test\": {\n      \"presets\": [\"env\", \"stage-2\"],\n      // instanbul\n      \"plugins\": [\"istanbul\"]\n    }\n  }\n}\n```\n\nreact\n``` javascript\n{\n  \"presets\": [\n    [\"env\", { \"modules\": false }],\n    \"stage-2\",\n    \"react\"\n  ],\n  \"plugins\": [\"transform-runtime\"],\n  \"comments\": false,\n  \"env\": {\n    \"test\": {\n      \"presets\": [\"env\", \"stage-2\"],\n      \"plugins\": [ \"istanbul\" ]\n    }\n  }\n}\n```\n\n### 2018-11-18 stage-x\nstage-3\ntransform-async-to-generator  async/await\ntransform-exponentiation-operator \n\n\nstage-2stage-3\nsyntax-trailing-function-commas ...\ntransform-object-reset-spread \n\n\nstage-1stage-2\ntransform-class-constructor-call class\ntransform-class-properties classstatic\ntransform-decorators  es7@HOC\ntransform-export-extensions export\n\n\nstage-0stage-1\ntransform-do-expressions jsxif/else\ntransform-function-bind ::es5bind\n\n\n\n\n\n\n","source":"_posts/babelrc-2017-12-23.md","raw":"---\ntitle: babel.babelrc\ncomments: true\ntoc: true\ndate: 2017-12-23 17:06:58\ntags:\n    - 'javascript'\n    - 'webpack'\n    - 'babel'\n---\n\n## Babel\n\n,JavaScript \n\nJavascriptJavaScriptasync,await\n\nBabelJavaScript.babelrcwebpack\n\n> webpack3+\n\n<!-- more -->\n\n### Babel\n\n.babelrcpresetsplugins\n\n> 1.javascriptjavascriptapilet/constincludes/Object.assignbabel-preset-envbabel-preset-es2015babel-preset-es2016babel-preset-es2017babel-preset-latest<font color=\"red\">babel-preset-envjavascirpt</font>\n\n``` javascript\n{\n  \"presets\": [\"env\", {\n      \"modules\": false\n    }],\n    \"stage-2\"\n}\n```\n\n> 2.javascriptapibabel-plugin-transform-runtimeObject.assign,babel-polyfillincludesObject.assign \n\n``` javascript\n__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()\n```\n\n> 3.jsxflowJSXRectbabel-preset-react\n\n### (presets)\n\nnpmbabel-preset-xx npm install babel-preset-stage-2 babel-preset-env --save-dev \n\n``` javascript\n{\n  \"presets\": [\n    [\"env\", options],\n    \"stage-2\"\n  ]\n}\n```\n\n##### stage-2\nbabel,\n    babel-preset-stage-0(stage-0) \n    babel-preset-stage-1(stage-1) \n    babel-preset-stage-2(stage-2) \n    babel-preset-stage-3(stage-3)\npreset-stage-0preset-stage-1transform-do-expressionstransform-function-bindpreset-stage-1preset-stage-2\n\n##### options\nbabel-preset-enves2015-arrow-functionses2015-block-scoped-functions,https://babeljs.io/docs/plugins/preset-env/\n``` javascript\n{\n    \"targets\": {\n        \"chrome\": 52,\n        \"browsers\": [\"last 2 versions\", \"safari 7\"],\n        \"node\":\"6.10\"\n    }\n    \"modules\": false\n}\n```\n\ntargetsbrowserstargets\n\ntargets.nodenode\n\nmodulesfalseCommonJS\"amd\" | \"umd\" | \"systemjs\" | \"commonjs\"systemjsamdumdcommonjs\n\n> amdng1\n``` javascript\ndefine(['jquery'], function ($) {\n    //    \n    function myFunc(){};\n \n    //    \n    return myFunc;\n})\n```\n> commonjsnode\n``` javascript\nvar $ = require('jquery');\n//    \nfunction myFunc(){};\n \n//    \nmodule.exports = myFunc;\n```\n>umdamdcommonjs\n``` javascript\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        // Node, CommonJS\n        module.exports = factory(require('jquery'));\n    } else {\n        // (root  window)\n        root.returnExports = factory(root.jQuery);\n    }\n}(this, function ($) {\n    //    \n    function myFunc(){};\n \n    //    \n    return myFunc;\n}));\n```\n\n### plugins\n\nbabel\n``` javascript\n{\n  \"plugins\": [\n    \"check-es2015-constants\",\n    \"es2015-arrow-functions\",\n    \"es2015-block-scoped-functions\",\n    // ...\n  ]\n}\n```\n\nenvbabel-preset-env\n``` javascript\n{\n  \"presets\": [\n    \"es2015\"\n  ]\n}\n```\n\nbabel-plugin-transform-runtimebabel-plugin-syntax-dynamic-import\n\n\n``` javascript\n{\n  \"plugins\": [\n    \"syntax-dynamic-import\",[\"transform-runtime\"]\n  ]\n}\n```\n\n##### transform-runtime\n\ntransform-runtimees6apiapibabel-polyfill\n\nObject.assignwebpack\n\n``` javascript\n// \n__webpack_require__(\"ez/6\");\nvar aaa = 1;\n\nfunction fna() {\n  var dd = 33333;\n  var cc = Object.assign({ key: 2 });\n  var xx = String.prototype.repeat.call('b', 3);\n  if (\"foobar\".String.prototype.includes(\"foo\")) {\n    var vv = 1;\n  }\n\n  return dd;\n}\n```\n\n``` javascript\n// \n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n\n__webpack_require__(\"ez/6\");\nvar aaa = 1;\n\nfunction fna() {\n  var dd = 33333;\n  var cc = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()({ key: 2 });\n  var xx = String.prototype.repeat.call('b', 3);\n  if (\"foobar\".String.prototype.includes(\"foo\")) {\n    var vv = 1;\n  }\n\n  return dd;\n}\n```\n\nclasswebpack\n\n``` javascript\n// \nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Canvas = function Canvas(height, width) {\n  _classCallCheck(this, Canvas);\n\n  this.height = height;\n  this.width = width;\n};\n\nvar Canvas2 = function Canvas2(height, width) {\n  _classCallCheck(this, Canvas2);\n\n  this.height = height;\n  this.width = width;\n};\n```\n\n``` javascript\n// \n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n\nvar Canvas = function Canvas(height, width) {\n  __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Canvas);\n\n  this.height = height;\n  this.width = width;\n};\n\nvar Canvas2 = function Canvas2(height, width) {\n  __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Canvas2);\n\n  this.height = height;\n  this.width = width;\n};\n```\n\nGeneratorpromiseasync await\n\n> promise\n\nwebpacktransform-runtimejs\n\n\n\n<img width=\"500\" src=\"babelrc-2017-12-23/2.jpeg\"/>\n\n\n\n<img width=\"500\" src=\"babelrc-2017-12-23/1.jpeg\"/>\n\ntransform-runtimewebpack\n\n##### syntax-dynamic-import\n\n\n``` javascript\nfunction nDate() {\n  import('moment').then(function(moment) {\n    console.log(moment().format());\n  }).catch(function(err) {\n    console.log('Failed to load moment', err);\n  });\n}\n\nnDate();\n```\n\n> .babelrc\"stage-2\"\n\n\n\n* Module build failed: SyntaxError: 'import' and 'export' may only appear at the top level, or (import  export)\n\n* Module build failed: SyntaxError: Unexpected token, expected {\n\n### \n\n##### ignore\n\n\n``` javascript\n{\n  \"ignore\":[\"./module/a.js\"]\n}\n```\n\nlet,Object.assign,class\n``` javascript\n__webpack_require__(\"ez/6\");\nconst aaa = 1;\n\nfunction fna () {\n  let dd = 33333\n  let cc = Object.assign({key:2})\n  let xx = String.prototype.repeat.call('b', 3)\n  if (\"foobar\".String.prototype.includes(\"foo\")) {\n    let vv = 1\n  }\n\n  return dd\n}\n\nfunction fna2 () {\n  return fna() + aaa + __WEBPACK_IMPORTED_MODULE_0__b__[\"a\" /* default */]\n}\n\nclass Canvas {\n  constructor(height, width) {\n    this.height = height;\n    this.width = width;\n  }\n}\n\nclass Canvas2 {\n  constructor(height, width) {\n    this.height = height;\n    this.width = width;\n  }\n}\n```\n\n##### minified\n\nbooleanbabel-cliwebpackwebpackUglifyJsPlugin\n\n##### comments\n\nbooleanwebpackUglifyJsPlugin\n\n##### env\n\n\n\n``` javascript\n{\n  \"env\": {\n    // test BABEL_ENVNODE_ENVdevelopment\n    \"test\": {\n      \"presets\": [\"env\", \"stage-2\"],\n      // instanbul\n      \"plugins\": [\"istanbul\"]\n    }\n  }\n}\n```\n\n### \n\nBabelJavaScriptAPIIteratorGeneratorSetMapsPromiseObject.assignbabel-plugin-transform-runtime<a href=\"https://github.com/babel/babel/blob/master/packages/babel-plugin-transform-runtime/src/definitions.js\" target=\"_blank\">definitions.js</a>\n\nbabeltransform-runtimebabel-polyfillrequire\n\nObject.assignlodashpromiseQ.js\n\n### \n\n.babelrcpresetspluginswebpack\n\nvue\n``` javascript\n{\n  \"presets\": [\n    [\"env\", {\n      \"modules\": false\n    }],\n    \"stage-2\"\n  ],\n  // \n  \"comments\": false,\n  \"plugins\": [\"transform-runtime\",\"syntax-dynamic-import\"],\n  \"env\": {\n    // test BABEL_ENVNODE_ENVdevelopment\n    \"test\": {\n      \"presets\": [\"env\", \"stage-2\"],\n      // instanbul\n      \"plugins\": [\"istanbul\"]\n    }\n  }\n}\n```\n\nreact\n``` javascript\n{\n  \"presets\": [\n    [\"env\", { \"modules\": false }],\n    \"stage-2\",\n    \"react\"\n  ],\n  \"plugins\": [\"transform-runtime\"],\n  \"comments\": false,\n  \"env\": {\n    \"test\": {\n      \"presets\": [\"env\", \"stage-2\"],\n      \"plugins\": [ \"istanbul\" ]\n    }\n  }\n}\n```\n\n### 2018-11-18 stage-x\nstage-3\ntransform-async-to-generator  async/await\ntransform-exponentiation-operator \n\n\nstage-2stage-3\nsyntax-trailing-function-commas ...\ntransform-object-reset-spread \n\n\nstage-1stage-2\ntransform-class-constructor-call class\ntransform-class-properties classstatic\ntransform-decorators  es7@HOC\ntransform-export-extensions export\n\n\nstage-0stage-1\ntransform-do-expressions jsxif/else\ntransform-function-bind ::es5bind\n\n\n\n\n\n\n","slug":"babelrc-2017-12-23","published":1,"updated":"2018-11-18T14:51:59.543Z","layout":"post","photos":[],"link":"","_id":"cjosd1vb40012fdldyyyeko90","content":"<h2 id=\"Babel\"><a href=\"#Babel\" class=\"headerlink\" title=\"Babel\"></a>Babel</h2><p>,JavaScript </p>\n<p>JavascriptJavaScriptasync,await</p>\n<p>BabelJavaScript.babelrcwebpack</p>\n<blockquote>\n<p>webpack3+</p>\n</blockquote>\n<a id=\"more\"></a>\n<h3 id=\"Babel\"><a href=\"#Babel\" class=\"headerlink\" title=\"Babel\"></a>Babel</h3><p>.babelrcpresetsplugins</p>\n<blockquote>\n<p>1.javascriptjavascriptapilet/constincludes/Object.assignbabel-preset-envbabel-preset-es2015babel-preset-es2016babel-preset-es2017babel-preset-latest<font color=\"red\">babel-preset-envjavascirpt</font></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"presets\"</span>: [<span class=\"string\">\"env\"</span>, &#123;</div><div class=\"line\">      <span class=\"string\">\"modules\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">    &#125;],</div><div class=\"line\">    <span class=\"string\">\"stage-2\"</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>2.javascriptapibabel-plugin-transform-runtimeObject.assign,babel-polyfillincludesObject.assign </p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()</div></pre></td></tr></table></figure>\n<blockquote>\n<p>3.jsxflowJSXRectbabel-preset-react</p>\n</blockquote>\n<h3 id=\"-presets\"><a href=\"#-presets\" class=\"headerlink\" title=\"(presets)\"></a>(presets)</h3><p>npmbabel-preset-xx npm install babel-preset-stage-2 babel-preset-env save-dev </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"presets\"</span>: [</div><div class=\"line\">    [<span class=\"string\">\"env\"</span>, options],</div><div class=\"line\">    <span class=\"string\">\"stage-2\"</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h5 id=\"stage-2\"><a href=\"#stage-2\" class=\"headerlink\" title=\"stage-2\"></a>stage-2</h5><p>babel,<br>    babel-preset-stage-0(stage-0)<br>    babel-preset-stage-1(stage-1)<br>    babel-preset-stage-2(stage-2)<br>    babel-preset-stage-3(stage-3)<br>preset-stage-0preset-stage-1transform-do-expressionstransform-function-bindpreset-stage-1preset-stage-2</p>\n<h5 id=\"options\"><a href=\"#options\" class=\"headerlink\" title=\"options\"></a>options</h5><p>babel-preset-enves2015-arrow-functionses2015-block-scoped-functions,<a href=\"https://babeljs.io/docs/plugins/preset-env/\" target=\"_blank\" rel=\"external\">https://babeljs.io/docs/plugins/preset-env/</a><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"targets\"</span>: &#123;</div><div class=\"line\">        <span class=\"string\">\"chrome\"</span>: <span class=\"number\">52</span>,</div><div class=\"line\">        <span class=\"string\">\"browsers\"</span>: [<span class=\"string\">\"last 2 versions\"</span>, <span class=\"string\">\"safari 7\"</span>],</div><div class=\"line\">        <span class=\"string\">\"node\"</span>:<span class=\"string\">\"6.10\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"string\">\"modules\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>targetsbrowserstargets</p>\n<p>targets.nodenode</p>\n<p>modulesfalseCommonJSamd | umd | systemjs | commonjssystemjsamdumdcommonjs</p>\n<blockquote>\n<p>amdng1<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">define([<span class=\"string\">'jquery'</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//    </span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myFunc</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">//    </span></div><div class=\"line\">    <span class=\"keyword\">return</span> myFunc;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p>commonjsnode<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> $ = <span class=\"built_in\">require</span>(<span class=\"string\">'jquery'</span>);</div><div class=\"line\"><span class=\"comment\">//    </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myFunc</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"> </div><div class=\"line\"><span class=\"comment\">//    </span></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = myFunc;</div></pre></td></tr></table></figure></p>\n<p>umdamdcommonjs<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">root, factory</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">        <span class=\"comment\">// AMD</span></div><div class=\"line\">        define([<span class=\"string\">'jquery'</span>], factory);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports === <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">// Node, CommonJS</span></div><div class=\"line\">        <span class=\"built_in\">module</span>.exports = factory(<span class=\"built_in\">require</span>(<span class=\"string\">'jquery'</span>));</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// (root  window)</span></div><div class=\"line\">        root.returnExports = factory(root.jQuery);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;(<span class=\"keyword\">this</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//    </span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myFunc</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">//    </span></div><div class=\"line\">    <span class=\"keyword\">return</span> myFunc;</div><div class=\"line\">&#125;));</div></pre></td></tr></table></figure></p>\n</blockquote>\n<h3 id=\"plugins\"><a href=\"#plugins\" class=\"headerlink\" title=\"plugins\"></a>plugins</h3><p>babel<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"plugins\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"check-es2015-constants\"</span>,</div><div class=\"line\">    <span class=\"string\">\"es2015-arrow-functions\"</span>,</div><div class=\"line\">    <span class=\"string\">\"es2015-block-scoped-functions\"</span>,</div><div class=\"line\">    <span class=\"comment\">// ...</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>envbabel-preset-env<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"presets\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"es2015\"</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>babel-plugin-transform-runtimebabel-plugin-syntax-dynamic-import</p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"plugins\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"syntax-dynamic-import\"</span>,[<span class=\"string\">\"transform-runtime\"</span>]</div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h5 id=\"transform-runtime\"><a href=\"#transform-runtime\" class=\"headerlink\" title=\"transform-runtime\"></a>transform-runtime</h5><p>transform-runtimees6apiapibabel-polyfill</p>\n<p>Object.assignwebpack</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">__webpack_require__(<span class=\"string\">\"ez/6\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> aaa = <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fna</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> dd = <span class=\"number\">33333</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> cc = <span class=\"built_in\">Object</span>.assign(&#123; <span class=\"attr\">key</span>: <span class=\"number\">2</span> &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> xx = <span class=\"built_in\">String</span>.prototype.repeat.call(<span class=\"string\">'b'</span>, <span class=\"number\">3</span>);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">\"foobar\"</span>.String.prototype.includes(<span class=\"string\">\"foo\"</span>)) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> vv = <span class=\"number\">1</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> dd;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);</div><div class=\"line\"></div><div class=\"line\">__webpack_require__(<span class=\"string\">\"ez/6\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> aaa = <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fna</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> dd = <span class=\"number\">33333</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> cc = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()(&#123; <span class=\"attr\">key</span>: <span class=\"number\">2</span> &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> xx = <span class=\"built_in\">String</span>.prototype.repeat.call(<span class=\"string\">'b'</span>, <span class=\"number\">3</span>);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">\"foobar\"</span>.String.prototype.includes(<span class=\"string\">\"foo\"</span>)) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> vv = <span class=\"number\">1</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> dd;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>classwebpack</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_classCallCheck</span>(<span class=\"params\">instance, Constructor</span>) </span>&#123; <span class=\"keyword\">if</span> (!(instance <span class=\"keyword\">instanceof</span> Constructor)) &#123; <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">\"Cannot call a class as a function\"</span>); &#125; &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Canvas = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Canvas</span>(<span class=\"params\">height, width</span>) </span>&#123;</div><div class=\"line\">  _classCallCheck(<span class=\"keyword\">this</span>, Canvas);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">  <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Canvas2 = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Canvas2</span>(<span class=\"params\">height, width</span>) </span>&#123;</div><div class=\"line\">  _classCallCheck(<span class=\"keyword\">this</span>, Canvas2);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">  <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Canvas = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Canvas</span>(<span class=\"params\">height, width</span>) </span>&#123;</div><div class=\"line\">  __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(<span class=\"keyword\">this</span>, Canvas);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">  <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Canvas2 = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Canvas2</span>(<span class=\"params\">height, width</span>) </span>&#123;</div><div class=\"line\">  __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(<span class=\"keyword\">this</span>, Canvas2);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">  <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p>Generatorpromiseasync await</p>\n<blockquote>\n<p>promise</p>\n</blockquote>\n<p>webpacktransform-runtimejs</p>\n<p></p>\n<p><img width=\"500\" src=\"/babelrc-2017-12-23/2.jpeg\"></p>\n<p></p>\n<p><img width=\"500\" src=\"/babelrc-2017-12-23/1.jpeg\"></p>\n<p>transform-runtimewebpack</p>\n<h5 id=\"syntax-dynamic-import\"><a href=\"#syntax-dynamic-import\" class=\"headerlink\" title=\"syntax-dynamic-import\"></a>syntax-dynamic-import</h5><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">nDate</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">import</span>(<span class=\"string\">'moment'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">moment</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(moment().format());</div><div class=\"line\">  &#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Failed to load moment'</span>, err);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">nDate();</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>.babelrcstage-2</p>\n</blockquote>\n<p></p>\n<ul>\n<li><p>Module build failed: SyntaxError: import and export may only appear at the top level, or (import  export)</p>\n</li>\n<li><p>Module build failed: SyntaxError: Unexpected token, expected {</p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h5 id=\"ignore\"><a href=\"#ignore\" class=\"headerlink\" title=\"ignore\"></a>ignore</h5><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"ignore\"</span>:[<span class=\"string\">\"./module/a.js\"</span>]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>let,Object.assign,class<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">__webpack_require__(<span class=\"string\">\"ez/6\"</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> aaa = <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fna</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> dd = <span class=\"number\">33333</span></div><div class=\"line\">  <span class=\"keyword\">let</span> cc = <span class=\"built_in\">Object</span>.assign(&#123;<span class=\"attr\">key</span>:<span class=\"number\">2</span>&#125;)</div><div class=\"line\">  <span class=\"keyword\">let</span> xx = <span class=\"built_in\">String</span>.prototype.repeat.call(<span class=\"string\">'b'</span>, <span class=\"number\">3</span>)</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">\"foobar\"</span>.String.prototype.includes(<span class=\"string\">\"foo\"</span>)) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> vv = <span class=\"number\">1</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> dd</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fna2</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> fna() + aaa + __WEBPACK_IMPORTED_MODULE_0__b__[<span class=\"string\">\"a\"</span> <span class=\"comment\">/* default */</span>]</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Canvas</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(height, width) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">    <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Canvas2</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(height, width) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">    <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h5 id=\"minified\"><a href=\"#minified\" class=\"headerlink\" title=\"minified\"></a>minified</h5><p>booleanbabel-cliwebpackwebpackUglifyJsPlugin</p>\n<h5 id=\"comments\"><a href=\"#comments\" class=\"headerlink\" title=\"comments\"></a>comments</h5><p>booleanwebpackUglifyJsPlugin</p>\n<h5 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\"env\"></a>env</h5><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"env\"</span>: &#123;</div><div class=\"line\">    <span class=\"comment\">// test BABEL_ENVNODE_ENVdevelopment</span></div><div class=\"line\">    <span class=\"string\">\"test\"</span>: &#123;</div><div class=\"line\">      <span class=\"string\">\"presets\"</span>: [<span class=\"string\">\"env\"</span>, <span class=\"string\">\"stage-2\"</span>],</div><div class=\"line\">      <span class=\"comment\">// instanbul</span></div><div class=\"line\">      <span class=\"string\">\"plugins\"</span>: [<span class=\"string\">\"istanbul\"</span>]</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>BabelJavaScriptAPIIteratorGeneratorSetMapsPromiseObject.assignbabel-plugin-transform-runtime<a href=\"https://github.com/babel/babel/blob/master/packages/babel-plugin-transform-runtime/src/definitions.js\" target=\"_blank\">definitions.js</a></p>\n<p>babeltransform-runtimebabel-polyfillrequire</p>\n<p>Object.assignlodashpromiseQ.js</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>.babelrcpresetspluginswebpack</p>\n<p>vue<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"presets\"</span>: [</div><div class=\"line\">    [<span class=\"string\">\"env\"</span>, &#123;</div><div class=\"line\">      <span class=\"string\">\"modules\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">    &#125;],</div><div class=\"line\">    <span class=\"string\">\"stage-2\"</span></div><div class=\"line\">  ],</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"string\">\"comments\"</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">  <span class=\"string\">\"plugins\"</span>: [<span class=\"string\">\"transform-runtime\"</span>,<span class=\"string\">\"syntax-dynamic-import\"</span>],</div><div class=\"line\">  <span class=\"string\">\"env\"</span>: &#123;</div><div class=\"line\">    <span class=\"comment\">// test BABEL_ENVNODE_ENVdevelopment</span></div><div class=\"line\">    <span class=\"string\">\"test\"</span>: &#123;</div><div class=\"line\">      <span class=\"string\">\"presets\"</span>: [<span class=\"string\">\"env\"</span>, <span class=\"string\">\"stage-2\"</span>],</div><div class=\"line\">      <span class=\"comment\">// instanbul</span></div><div class=\"line\">      <span class=\"string\">\"plugins\"</span>: [<span class=\"string\">\"istanbul\"</span>]</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>react<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"presets\"</span>: [</div><div class=\"line\">    [<span class=\"string\">\"env\"</span>, &#123; <span class=\"string\">\"modules\"</span>: <span class=\"literal\">false</span> &#125;],</div><div class=\"line\">    <span class=\"string\">\"stage-2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"react\"</span></div><div class=\"line\">  ],</div><div class=\"line\">  <span class=\"string\">\"plugins\"</span>: [<span class=\"string\">\"transform-runtime\"</span>],</div><div class=\"line\">  <span class=\"string\">\"comments\"</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">  <span class=\"string\">\"env\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"test\"</span>: &#123;</div><div class=\"line\">      <span class=\"string\">\"presets\"</span>: [<span class=\"string\">\"env\"</span>, <span class=\"string\">\"stage-2\"</span>],</div><div class=\"line\">      <span class=\"string\">\"plugins\"</span>: [ <span class=\"string\">\"istanbul\"</span> ]</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"2018-11-18-stage-x\"><a href=\"#2018-11-18-stage-x\" class=\"headerlink\" title=\"2018-11-18 stage-x\"></a>2018-11-18 stage-x</h3><p>stage-3<br>transform-async-to-generator  async/await<br>transform-exponentiation-operator </p>\n<p>stage-2stage-3<br>syntax-trailing-function-commas <br>transform-object-reset-spread </p>\n<p>stage-1stage-2<br>transform-class-constructor-call class<br>transform-class-properties classstatic<br>transform-decorators  es7@HOC<br>transform-export-extensions export</p>\n<p>stage-0stage-1<br>transform-do-expressions jsxif/else<br>transform-function-bind ::es5bind</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"Babel\"><a href=\"#Babel\" class=\"headerlink\" title=\"Babel\"></a>Babel</h2><p>,JavaScript </p>\n<p>JavascriptJavaScriptasync,await</p>\n<p>BabelJavaScript.babelrcwebpack</p>\n<blockquote>\n<p>webpack3+</p>\n</blockquote>","more":"<h3 id=\"Babel\"><a href=\"#Babel\" class=\"headerlink\" title=\"Babel\"></a>Babel</h3><p>.babelrcpresetsplugins</p>\n<blockquote>\n<p>1.javascriptjavascriptapilet/constincludes/Object.assignbabel-preset-envbabel-preset-es2015babel-preset-es2016babel-preset-es2017babel-preset-latest<font color=\"red\">babel-preset-envjavascirpt</font></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"presets\"</span>: [<span class=\"string\">\"env\"</span>, &#123;</div><div class=\"line\">      <span class=\"string\">\"modules\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">    &#125;],</div><div class=\"line\">    <span class=\"string\">\"stage-2\"</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>2.javascriptapibabel-plugin-transform-runtimeObject.assign,babel-polyfillincludesObject.assign </p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()</div></pre></td></tr></table></figure>\n<blockquote>\n<p>3.jsxflowJSXRectbabel-preset-react</p>\n</blockquote>\n<h3 id=\"-presets\"><a href=\"#-presets\" class=\"headerlink\" title=\"(presets)\"></a>(presets)</h3><p>npmbabel-preset-xx npm install babel-preset-stage-2 babel-preset-env save-dev </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"presets\"</span>: [</div><div class=\"line\">    [<span class=\"string\">\"env\"</span>, options],</div><div class=\"line\">    <span class=\"string\">\"stage-2\"</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h5 id=\"stage-2\"><a href=\"#stage-2\" class=\"headerlink\" title=\"stage-2\"></a>stage-2</h5><p>babel,<br>    babel-preset-stage-0(stage-0)<br>    babel-preset-stage-1(stage-1)<br>    babel-preset-stage-2(stage-2)<br>    babel-preset-stage-3(stage-3)<br>preset-stage-0preset-stage-1transform-do-expressionstransform-function-bindpreset-stage-1preset-stage-2</p>\n<h5 id=\"options\"><a href=\"#options\" class=\"headerlink\" title=\"options\"></a>options</h5><p>babel-preset-enves2015-arrow-functionses2015-block-scoped-functions,<a href=\"https://babeljs.io/docs/plugins/preset-env/\" target=\"_blank\" rel=\"external\">https://babeljs.io/docs/plugins/preset-env/</a><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"targets\"</span>: &#123;</div><div class=\"line\">        <span class=\"string\">\"chrome\"</span>: <span class=\"number\">52</span>,</div><div class=\"line\">        <span class=\"string\">\"browsers\"</span>: [<span class=\"string\">\"last 2 versions\"</span>, <span class=\"string\">\"safari 7\"</span>],</div><div class=\"line\">        <span class=\"string\">\"node\"</span>:<span class=\"string\">\"6.10\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"string\">\"modules\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>targetsbrowserstargets</p>\n<p>targets.nodenode</p>\n<p>modulesfalseCommonJSamd | umd | systemjs | commonjssystemjsamdumdcommonjs</p>\n<blockquote>\n<p>amdng1<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">define([<span class=\"string\">'jquery'</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//    </span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myFunc</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">//    </span></div><div class=\"line\">    <span class=\"keyword\">return</span> myFunc;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p>commonjsnode<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> $ = <span class=\"built_in\">require</span>(<span class=\"string\">'jquery'</span>);</div><div class=\"line\"><span class=\"comment\">//    </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myFunc</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"> </div><div class=\"line\"><span class=\"comment\">//    </span></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = myFunc;</div></pre></td></tr></table></figure></p>\n<p>umdamdcommonjs<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">root, factory</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">        <span class=\"comment\">// AMD</span></div><div class=\"line\">        define([<span class=\"string\">'jquery'</span>], factory);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports === <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">// Node, CommonJS</span></div><div class=\"line\">        <span class=\"built_in\">module</span>.exports = factory(<span class=\"built_in\">require</span>(<span class=\"string\">'jquery'</span>));</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// (root  window)</span></div><div class=\"line\">        root.returnExports = factory(root.jQuery);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;(<span class=\"keyword\">this</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//    </span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myFunc</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">//    </span></div><div class=\"line\">    <span class=\"keyword\">return</span> myFunc;</div><div class=\"line\">&#125;));</div></pre></td></tr></table></figure></p>\n</blockquote>\n<h3 id=\"plugins\"><a href=\"#plugins\" class=\"headerlink\" title=\"plugins\"></a>plugins</h3><p>babel<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"plugins\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"check-es2015-constants\"</span>,</div><div class=\"line\">    <span class=\"string\">\"es2015-arrow-functions\"</span>,</div><div class=\"line\">    <span class=\"string\">\"es2015-block-scoped-functions\"</span>,</div><div class=\"line\">    <span class=\"comment\">// ...</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>envbabel-preset-env<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"presets\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"es2015\"</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>babel-plugin-transform-runtimebabel-plugin-syntax-dynamic-import</p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"plugins\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"syntax-dynamic-import\"</span>,[<span class=\"string\">\"transform-runtime\"</span>]</div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h5 id=\"transform-runtime\"><a href=\"#transform-runtime\" class=\"headerlink\" title=\"transform-runtime\"></a>transform-runtime</h5><p>transform-runtimees6apiapibabel-polyfill</p>\n<p>Object.assignwebpack</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">__webpack_require__(<span class=\"string\">\"ez/6\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> aaa = <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fna</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> dd = <span class=\"number\">33333</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> cc = <span class=\"built_in\">Object</span>.assign(&#123; <span class=\"attr\">key</span>: <span class=\"number\">2</span> &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> xx = <span class=\"built_in\">String</span>.prototype.repeat.call(<span class=\"string\">'b'</span>, <span class=\"number\">3</span>);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">\"foobar\"</span>.String.prototype.includes(<span class=\"string\">\"foo\"</span>)) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> vv = <span class=\"number\">1</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> dd;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);</div><div class=\"line\"></div><div class=\"line\">__webpack_require__(<span class=\"string\">\"ez/6\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> aaa = <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fna</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> dd = <span class=\"number\">33333</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> cc = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()(&#123; <span class=\"attr\">key</span>: <span class=\"number\">2</span> &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> xx = <span class=\"built_in\">String</span>.prototype.repeat.call(<span class=\"string\">'b'</span>, <span class=\"number\">3</span>);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">\"foobar\"</span>.String.prototype.includes(<span class=\"string\">\"foo\"</span>)) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> vv = <span class=\"number\">1</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> dd;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>classwebpack</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_classCallCheck</span>(<span class=\"params\">instance, Constructor</span>) </span>&#123; <span class=\"keyword\">if</span> (!(instance <span class=\"keyword\">instanceof</span> Constructor)) &#123; <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">\"Cannot call a class as a function\"</span>); &#125; &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Canvas = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Canvas</span>(<span class=\"params\">height, width</span>) </span>&#123;</div><div class=\"line\">  _classCallCheck(<span class=\"keyword\">this</span>, Canvas);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">  <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Canvas2 = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Canvas2</span>(<span class=\"params\">height, width</span>) </span>&#123;</div><div class=\"line\">  _classCallCheck(<span class=\"keyword\">this</span>, Canvas2);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">  <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Canvas = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Canvas</span>(<span class=\"params\">height, width</span>) </span>&#123;</div><div class=\"line\">  __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(<span class=\"keyword\">this</span>, Canvas);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">  <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Canvas2 = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Canvas2</span>(<span class=\"params\">height, width</span>) </span>&#123;</div><div class=\"line\">  __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(<span class=\"keyword\">this</span>, Canvas2);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">  <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p>Generatorpromiseasync await</p>\n<blockquote>\n<p>promise</p>\n</blockquote>\n<p>webpacktransform-runtimejs</p>\n<p></p>\n<p><img width=\"500\" src=\"/babelrc-2017-12-23/2.jpeg\"></p>\n<p></p>\n<p><img width=\"500\" src=\"/babelrc-2017-12-23/1.jpeg\"></p>\n<p>transform-runtimewebpack</p>\n<h5 id=\"syntax-dynamic-import\"><a href=\"#syntax-dynamic-import\" class=\"headerlink\" title=\"syntax-dynamic-import\"></a>syntax-dynamic-import</h5><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">nDate</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">import</span>(<span class=\"string\">'moment'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">moment</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(moment().format());</div><div class=\"line\">  &#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Failed to load moment'</span>, err);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">nDate();</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>.babelrcstage-2</p>\n</blockquote>\n<p></p>\n<ul>\n<li><p>Module build failed: SyntaxError: import and export may only appear at the top level, or (import  export)</p>\n</li>\n<li><p>Module build failed: SyntaxError: Unexpected token, expected {</p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h5 id=\"ignore\"><a href=\"#ignore\" class=\"headerlink\" title=\"ignore\"></a>ignore</h5><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"ignore\"</span>:[<span class=\"string\">\"./module/a.js\"</span>]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>let,Object.assign,class<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">__webpack_require__(<span class=\"string\">\"ez/6\"</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> aaa = <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fna</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> dd = <span class=\"number\">33333</span></div><div class=\"line\">  <span class=\"keyword\">let</span> cc = <span class=\"built_in\">Object</span>.assign(&#123;<span class=\"attr\">key</span>:<span class=\"number\">2</span>&#125;)</div><div class=\"line\">  <span class=\"keyword\">let</span> xx = <span class=\"built_in\">String</span>.prototype.repeat.call(<span class=\"string\">'b'</span>, <span class=\"number\">3</span>)</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">\"foobar\"</span>.String.prototype.includes(<span class=\"string\">\"foo\"</span>)) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> vv = <span class=\"number\">1</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> dd</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fna2</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> fna() + aaa + __WEBPACK_IMPORTED_MODULE_0__b__[<span class=\"string\">\"a\"</span> <span class=\"comment\">/* default */</span>]</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Canvas</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(height, width) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">    <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Canvas2</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(height, width) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.height = height;</div><div class=\"line\">    <span class=\"keyword\">this</span>.width = width;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h5 id=\"minified\"><a href=\"#minified\" class=\"headerlink\" title=\"minified\"></a>minified</h5><p>booleanbabel-cliwebpackwebpackUglifyJsPlugin</p>\n<h5 id=\"comments\"><a href=\"#comments\" class=\"headerlink\" title=\"comments\"></a>comments</h5><p>booleanwebpackUglifyJsPlugin</p>\n<h5 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\"env\"></a>env</h5><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"env\"</span>: &#123;</div><div class=\"line\">    <span class=\"comment\">// test BABEL_ENVNODE_ENVdevelopment</span></div><div class=\"line\">    <span class=\"string\">\"test\"</span>: &#123;</div><div class=\"line\">      <span class=\"string\">\"presets\"</span>: [<span class=\"string\">\"env\"</span>, <span class=\"string\">\"stage-2\"</span>],</div><div class=\"line\">      <span class=\"comment\">// instanbul</span></div><div class=\"line\">      <span class=\"string\">\"plugins\"</span>: [<span class=\"string\">\"istanbul\"</span>]</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>BabelJavaScriptAPIIteratorGeneratorSetMapsPromiseObject.assignbabel-plugin-transform-runtime<a href=\"https://github.com/babel/babel/blob/master/packages/babel-plugin-transform-runtime/src/definitions.js\" target=\"_blank\">definitions.js</a></p>\n<p>babeltransform-runtimebabel-polyfillrequire</p>\n<p>Object.assignlodashpromiseQ.js</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>.babelrcpresetspluginswebpack</p>\n<p>vue<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"presets\"</span>: [</div><div class=\"line\">    [<span class=\"string\">\"env\"</span>, &#123;</div><div class=\"line\">      <span class=\"string\">\"modules\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">    &#125;],</div><div class=\"line\">    <span class=\"string\">\"stage-2\"</span></div><div class=\"line\">  ],</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"string\">\"comments\"</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">  <span class=\"string\">\"plugins\"</span>: [<span class=\"string\">\"transform-runtime\"</span>,<span class=\"string\">\"syntax-dynamic-import\"</span>],</div><div class=\"line\">  <span class=\"string\">\"env\"</span>: &#123;</div><div class=\"line\">    <span class=\"comment\">// test BABEL_ENVNODE_ENVdevelopment</span></div><div class=\"line\">    <span class=\"string\">\"test\"</span>: &#123;</div><div class=\"line\">      <span class=\"string\">\"presets\"</span>: [<span class=\"string\">\"env\"</span>, <span class=\"string\">\"stage-2\"</span>],</div><div class=\"line\">      <span class=\"comment\">// instanbul</span></div><div class=\"line\">      <span class=\"string\">\"plugins\"</span>: [<span class=\"string\">\"istanbul\"</span>]</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>react<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"presets\"</span>: [</div><div class=\"line\">    [<span class=\"string\">\"env\"</span>, &#123; <span class=\"string\">\"modules\"</span>: <span class=\"literal\">false</span> &#125;],</div><div class=\"line\">    <span class=\"string\">\"stage-2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"react\"</span></div><div class=\"line\">  ],</div><div class=\"line\">  <span class=\"string\">\"plugins\"</span>: [<span class=\"string\">\"transform-runtime\"</span>],</div><div class=\"line\">  <span class=\"string\">\"comments\"</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">  <span class=\"string\">\"env\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"test\"</span>: &#123;</div><div class=\"line\">      <span class=\"string\">\"presets\"</span>: [<span class=\"string\">\"env\"</span>, <span class=\"string\">\"stage-2\"</span>],</div><div class=\"line\">      <span class=\"string\">\"plugins\"</span>: [ <span class=\"string\">\"istanbul\"</span> ]</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"2018-11-18-stage-x\"><a href=\"#2018-11-18-stage-x\" class=\"headerlink\" title=\"2018-11-18 stage-x\"></a>2018-11-18 stage-x</h3><p>stage-3<br>transform-async-to-generator  async/await<br>transform-exponentiation-operator </p>\n<p>stage-2stage-3<br>syntax-trailing-function-commas <br>transform-object-reset-spread </p>\n<p>stage-1stage-2<br>transform-class-constructor-call class<br>transform-class-properties classstatic<br>transform-decorators  es7@HOC<br>transform-export-extensions export</p>\n<p>stage-0stage-1<br>transform-do-expressions jsxif/else<br>transform-function-bind ::es5bind</p>"},{"title":"javascript--List","comments":1,"toc":true,"date":"2018-02-21T12:00:30.000Z","_content":"\n## \n\n JavaScript   \n\n>   \n\n<!-- more -->\n\n### \n\n/ |  \n- | :-: \nlistSize() | \npos() | \nlength() | \nclear() | \ntoString() | \ngetElement() | \ninsert() | \nappend() | \nremove() | \nfront() | \nend() | \nprev() | \nnext() | \ncurrPos() | \nmoveTo() | \n\n## List\n\nList\n``` javascript\nclass List {\n  constructor() {\n    this.listSize = 0\n    this.pos = 0\n    this.dataStore = []\n  }\n}  \n```\n\n`append`  listSize \n``` javascript\n  // \n  append(elm) {\n    this.dataStore[this.listSize++] = elm\n  }  \n```\n\n`find`-1\n``` javascript\n  // \n  find(elm) {\n    for (let v of Object.keys(this.dataStore)) {\n      if (elm === this.dataStore[v]) {\n        return Number(v)\n      }\n    }\n    return -1\n  } \n```\n\n`remove``find`splice\n``` javascript\n  // \n  remove(elm) {\n    let foundAt = this.find(elm)\n    if (foundAt > -1) {\n      this.dataStore.splice(foundAt, 1)\n        --this.listSize\n      return true\n    }\n    return false\n  }\n```\n\n`length``toString`\n``` javascript\n  // \n  length() {\n    return this.listSize\n  }\n\n  // \n  toString() {\n    return this.dataStore\n  }\n```\n\n`insert``find`splice\n``` javascript\n  // \n  insert(elm, after) {\n    var insertPos = this.find(after)\n    if (insertPos > -1) {\n      this.dataStore.splice(insertPos + 1, 0, elm)\n        ++this.listSize\n      return true\n    }\n    return false\n  }\n```\n\n`clear`\n``` javascript\n  // \n  clear() {\n    this.dataStore = []\n    this.listSize = this.pos = 0\n  }\n```\n\n`contains`\n``` javascript\n  // \n  contains(elm) {\n    for (let v of Object.keys(this.dataStore)) {\n      if (elm === this.dataStore[v]) {\n        return true\n      }\n    }\n    return false\n  }\n```\n\n\n``` javascript\n  // \n  front() {\n    this.pos = 0\n  }\n\n  // \n  end() {\n    this.pos = this.listSize - 1\n  }\n\n  // \n  prev() {\n    if (this.pos > 0) {\n      --this.pos\n    }\n  }\n\n  // \n  next() {\n    if (this.pos < this.listSize - 1) {\n      ++this.pos\n    }\n  }\n\n  // \n  currPos() {\n    return this.pos\n  }\n\n  // \n  moveTo(position) {\n    this.pos = position\n  }\n\n  // \n  getElement() {\n    return this.dataStore[this.pos]\n  }\n```\n\n\n``` javascript\n  // \n  let names = new List()\n  names.append(\"Clayton\")\n  names.append(\"Raymond\")\n  names.append(\"Cynthia\")\n  names.append(\"Jennifer\")\n  names.append(\"Bryan\")\n  names.append(\"Danny\")\n\n  names.length() // 6\n  names.toString() // [\"Clayton\", \"Raymond\", \"Cynthia\", \"Jennifer\", \"Bryan\", \"Danny\"]\n  names.contains('wq') // false\n  names.getElement() // Clayton\n\n  names.next()\n  names.getElement() // Raymond\n```\n\n``` javascript\nclass List {\n  constructor() {\n    this.listSize = 0\n    this.pos = 0\n    this.dataStore = []\n  }\n\n  // \n  append(elm) {\n    this.dataStore[this.listSize++] = elm\n  }\n\n  // \n  find(elm) {\n    for (let v of Object.keys(this.dataStore)) {\n      if (elm === this.dataStore[v]) {\n        return Number(v)\n      }\n    }\n    return -1\n  }\n\n  // \n  remove(elm) {\n    let foundAt = this.find(elm)\n    if (foundAt > -1) {\n      this.dataStore.splice(foundAt, 1)\n        --this.listSize\n      return true\n    }\n    return false\n  }\n\n  // \n  length() {\n    return this.listSize\n  }\n\n  // \n  toString() {\n    return this.dataStore\n  }\n\n  // \n  insert(elm, after) {\n    var insertPos = this.find(after)\n    if (insertPos > -1) {\n      this.dataStore.splice(insertPos + 1, 0, elm)\n        ++this.listSize\n      return true\n    }\n    return false\n  }\n\n  // \n  clear() {\n    this.dataStore = []\n    this.listSize = this.pos = 0\n  }\n\n  // \n  contains(elm) {\n    for (let v of Object.keys(this.dataStore)) {\n      if (elm === this.dataStore[v]) {\n        return true\n      }\n    }\n    return false\n  }\n\n  // \n  front() {\n    this.pos = 0\n  }\n\n  // \n  end() {\n    this.pos = this.listSize - 1\n  }\n\n  // \n  prev() {\n    if (this.pos > 0) {\n      --this.pos\n    }\n  }\n\n  // \n  next() {\n    if (this.pos < this.listSize - 1) {\n      ++this.pos\n    }\n  }\n\n  // \n  currPos() {\n    return this.pos\n  }\n\n  // \n  moveTo(position) {\n    this.pos = position\n  }\n\n  // \n  getElement() {\n    return this.dataStore[this.pos]\n  }\n}\n```","source":"_posts/list-2018-2-21.md","raw":"---\ntitle: javascript--List\ncomments: true\ntoc: true\ndate: 2018-02-21 20:00:30\ntags:\n    - 'javascript'\n    - 'ECMAScript 6'\n    - 'algorithm'\n---\n\n## \n\n JavaScript   \n\n>   \n\n<!-- more -->\n\n### \n\n/ |  \n- | :-: \nlistSize() | \npos() | \nlength() | \nclear() | \ntoString() | \ngetElement() | \ninsert() | \nappend() | \nremove() | \nfront() | \nend() | \nprev() | \nnext() | \ncurrPos() | \nmoveTo() | \n\n## List\n\nList\n``` javascript\nclass List {\n  constructor() {\n    this.listSize = 0\n    this.pos = 0\n    this.dataStore = []\n  }\n}  \n```\n\n`append`  listSize \n``` javascript\n  // \n  append(elm) {\n    this.dataStore[this.listSize++] = elm\n  }  \n```\n\n`find`-1\n``` javascript\n  // \n  find(elm) {\n    for (let v of Object.keys(this.dataStore)) {\n      if (elm === this.dataStore[v]) {\n        return Number(v)\n      }\n    }\n    return -1\n  } \n```\n\n`remove``find`splice\n``` javascript\n  // \n  remove(elm) {\n    let foundAt = this.find(elm)\n    if (foundAt > -1) {\n      this.dataStore.splice(foundAt, 1)\n        --this.listSize\n      return true\n    }\n    return false\n  }\n```\n\n`length``toString`\n``` javascript\n  // \n  length() {\n    return this.listSize\n  }\n\n  // \n  toString() {\n    return this.dataStore\n  }\n```\n\n`insert``find`splice\n``` javascript\n  // \n  insert(elm, after) {\n    var insertPos = this.find(after)\n    if (insertPos > -1) {\n      this.dataStore.splice(insertPos + 1, 0, elm)\n        ++this.listSize\n      return true\n    }\n    return false\n  }\n```\n\n`clear`\n``` javascript\n  // \n  clear() {\n    this.dataStore = []\n    this.listSize = this.pos = 0\n  }\n```\n\n`contains`\n``` javascript\n  // \n  contains(elm) {\n    for (let v of Object.keys(this.dataStore)) {\n      if (elm === this.dataStore[v]) {\n        return true\n      }\n    }\n    return false\n  }\n```\n\n\n``` javascript\n  // \n  front() {\n    this.pos = 0\n  }\n\n  // \n  end() {\n    this.pos = this.listSize - 1\n  }\n\n  // \n  prev() {\n    if (this.pos > 0) {\n      --this.pos\n    }\n  }\n\n  // \n  next() {\n    if (this.pos < this.listSize - 1) {\n      ++this.pos\n    }\n  }\n\n  // \n  currPos() {\n    return this.pos\n  }\n\n  // \n  moveTo(position) {\n    this.pos = position\n  }\n\n  // \n  getElement() {\n    return this.dataStore[this.pos]\n  }\n```\n\n\n``` javascript\n  // \n  let names = new List()\n  names.append(\"Clayton\")\n  names.append(\"Raymond\")\n  names.append(\"Cynthia\")\n  names.append(\"Jennifer\")\n  names.append(\"Bryan\")\n  names.append(\"Danny\")\n\n  names.length() // 6\n  names.toString() // [\"Clayton\", \"Raymond\", \"Cynthia\", \"Jennifer\", \"Bryan\", \"Danny\"]\n  names.contains('wq') // false\n  names.getElement() // Clayton\n\n  names.next()\n  names.getElement() // Raymond\n```\n\n``` javascript\nclass List {\n  constructor() {\n    this.listSize = 0\n    this.pos = 0\n    this.dataStore = []\n  }\n\n  // \n  append(elm) {\n    this.dataStore[this.listSize++] = elm\n  }\n\n  // \n  find(elm) {\n    for (let v of Object.keys(this.dataStore)) {\n      if (elm === this.dataStore[v]) {\n        return Number(v)\n      }\n    }\n    return -1\n  }\n\n  // \n  remove(elm) {\n    let foundAt = this.find(elm)\n    if (foundAt > -1) {\n      this.dataStore.splice(foundAt, 1)\n        --this.listSize\n      return true\n    }\n    return false\n  }\n\n  // \n  length() {\n    return this.listSize\n  }\n\n  // \n  toString() {\n    return this.dataStore\n  }\n\n  // \n  insert(elm, after) {\n    var insertPos = this.find(after)\n    if (insertPos > -1) {\n      this.dataStore.splice(insertPos + 1, 0, elm)\n        ++this.listSize\n      return true\n    }\n    return false\n  }\n\n  // \n  clear() {\n    this.dataStore = []\n    this.listSize = this.pos = 0\n  }\n\n  // \n  contains(elm) {\n    for (let v of Object.keys(this.dataStore)) {\n      if (elm === this.dataStore[v]) {\n        return true\n      }\n    }\n    return false\n  }\n\n  // \n  front() {\n    this.pos = 0\n  }\n\n  // \n  end() {\n    this.pos = this.listSize - 1\n  }\n\n  // \n  prev() {\n    if (this.pos > 0) {\n      --this.pos\n    }\n  }\n\n  // \n  next() {\n    if (this.pos < this.listSize - 1) {\n      ++this.pos\n    }\n  }\n\n  // \n  currPos() {\n    return this.pos\n  }\n\n  // \n  moveTo(position) {\n    this.pos = position\n  }\n\n  // \n  getElement() {\n    return this.dataStore[this.pos]\n  }\n}\n```","slug":"list-2018-2-21","published":1,"updated":"2018-02-22T03:30:17.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vb50016fdldwi4norye","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> JavaScript   </p>\n<blockquote>\n<p>  </p>\n</blockquote>\n<a id=\"more\"></a>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>listSize()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>pos()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>length()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>clear()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>toString()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>getElement()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>insert()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>append()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>remove()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>front()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>end()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>prev()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>next()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>currPos()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>moveTo()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h2><p>List<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">List</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.listSize = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>append</code>  listSize <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">append(elm) &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.listSize++] = elm</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>find</code>-1<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">find(elm) &#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.dataStore)) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (elm === <span class=\"keyword\">this</span>.dataStore[v]) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Number</span>(v)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">-1</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>remove</code><code>find</code>splice<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">remove(elm) &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> foundAt = <span class=\"keyword\">this</span>.find(elm)</div><div class=\"line\">  <span class=\"keyword\">if</span> (foundAt &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore.splice(foundAt, <span class=\"number\">1</span>)</div><div class=\"line\">      --<span class=\"keyword\">this</span>.listSize</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>length</code><code>toString</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">length() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.listSize</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">toString() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>insert</code><code>find</code>splice<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">insert(elm, after) &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> insertPos = <span class=\"keyword\">this</span>.find(after)</div><div class=\"line\">  <span class=\"keyword\">if</span> (insertPos &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore.splice(insertPos + <span class=\"number\">1</span>, <span class=\"number\">0</span>, elm)</div><div class=\"line\">      ++<span class=\"keyword\">this</span>.listSize</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>clear</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">clear() &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  <span class=\"keyword\">this</span>.listSize = <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>contains</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">contains(elm) &#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.dataStore)) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (elm === <span class=\"keyword\">this</span>.dataStore[v]) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">front() &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">end() &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.pos = <span class=\"keyword\">this</span>.listSize - <span class=\"number\">1</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">prev() &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.pos &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    --<span class=\"keyword\">this</span>.pos</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">next() &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.pos &lt; <span class=\"keyword\">this</span>.listSize - <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    ++<span class=\"keyword\">this</span>.pos</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">currPos() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.pos</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">moveTo(position) &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.pos = position</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">getElement() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.pos]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> names = <span class=\"keyword\">new</span> List()</div><div class=\"line\">names.append(<span class=\"string\">\"Clayton\"</span>)</div><div class=\"line\">names.append(<span class=\"string\">\"Raymond\"</span>)</div><div class=\"line\">names.append(<span class=\"string\">\"Cynthia\"</span>)</div><div class=\"line\">names.append(<span class=\"string\">\"Jennifer\"</span>)</div><div class=\"line\">names.append(<span class=\"string\">\"Bryan\"</span>)</div><div class=\"line\">names.append(<span class=\"string\">\"Danny\"</span>)</div><div class=\"line\"></div><div class=\"line\">names.length() <span class=\"comment\">// 6</span></div><div class=\"line\">names.toString() <span class=\"comment\">// [\"Clayton\", \"Raymond\", \"Cynthia\", \"Jennifer\", \"Bryan\", \"Danny\"]</span></div><div class=\"line\">names.contains(<span class=\"string\">'wq'</span>) <span class=\"comment\">// false</span></div><div class=\"line\">names.getElement() <span class=\"comment\">// Clayton</span></div><div class=\"line\"></div><div class=\"line\">names.next()</div><div class=\"line\">names.getElement() <span class=\"comment\">// Raymond</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">List</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.listSize = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  append(elm) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.listSize++] = elm</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  find(elm) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.dataStore)) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (elm === <span class=\"keyword\">this</span>.dataStore[v]) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">Number</span>(v)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  remove(elm) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> foundAt = <span class=\"keyword\">this</span>.find(elm)</div><div class=\"line\">    <span class=\"keyword\">if</span> (foundAt &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore.splice(foundAt, <span class=\"number\">1</span>)</div><div class=\"line\">        --<span class=\"keyword\">this</span>.listSize</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  length() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.listSize</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  toString() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  insert(elm, after) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> insertPos = <span class=\"keyword\">this</span>.find(after)</div><div class=\"line\">    <span class=\"keyword\">if</span> (insertPos &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore.splice(insertPos + <span class=\"number\">1</span>, <span class=\"number\">0</span>, elm)</div><div class=\"line\">        ++<span class=\"keyword\">this</span>.listSize</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  clear() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.listSize = <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  contains(elm) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.dataStore)) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (elm === <span class=\"keyword\">this</span>.dataStore[v]) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  front() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  end() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = <span class=\"keyword\">this</span>.listSize - <span class=\"number\">1</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  prev() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.pos &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      --<span class=\"keyword\">this</span>.pos</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  next() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.pos &lt; <span class=\"keyword\">this</span>.listSize - <span class=\"number\">1</span>) &#123;</div><div class=\"line\">      ++<span class=\"keyword\">this</span>.pos</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  currPos() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.pos</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  moveTo(position) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = position</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  getElement() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.pos]</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> JavaScript   </p>\n<blockquote>\n<p>  </p>\n</blockquote>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>listSize()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>pos()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>length()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>clear()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>toString()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>getElement()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>insert()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>append()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>remove()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>front()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>end()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>prev()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>next()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>currPos()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>moveTo()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h2><p>List<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">List</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.listSize = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>append</code>  listSize <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">append(elm) &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.listSize++] = elm</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>find</code>-1<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">find(elm) &#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.dataStore)) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (elm === <span class=\"keyword\">this</span>.dataStore[v]) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Number</span>(v)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">-1</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>remove</code><code>find</code>splice<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">remove(elm) &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> foundAt = <span class=\"keyword\">this</span>.find(elm)</div><div class=\"line\">  <span class=\"keyword\">if</span> (foundAt &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore.splice(foundAt, <span class=\"number\">1</span>)</div><div class=\"line\">      --<span class=\"keyword\">this</span>.listSize</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>length</code><code>toString</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">length() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.listSize</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">toString() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>insert</code><code>find</code>splice<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">insert(elm, after) &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> insertPos = <span class=\"keyword\">this</span>.find(after)</div><div class=\"line\">  <span class=\"keyword\">if</span> (insertPos &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore.splice(insertPos + <span class=\"number\">1</span>, <span class=\"number\">0</span>, elm)</div><div class=\"line\">      ++<span class=\"keyword\">this</span>.listSize</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>clear</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">clear() &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  <span class=\"keyword\">this</span>.listSize = <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><code>contains</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">contains(elm) &#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.dataStore)) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (elm === <span class=\"keyword\">this</span>.dataStore[v]) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">front() &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">end() &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.pos = <span class=\"keyword\">this</span>.listSize - <span class=\"number\">1</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">prev() &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.pos &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    --<span class=\"keyword\">this</span>.pos</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">next() &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.pos &lt; <span class=\"keyword\">this</span>.listSize - <span class=\"number\">1</span>) &#123;</div><div class=\"line\">    ++<span class=\"keyword\">this</span>.pos</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">currPos() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.pos</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">moveTo(position) &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.pos = position</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">getElement() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.pos]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> names = <span class=\"keyword\">new</span> List()</div><div class=\"line\">names.append(<span class=\"string\">\"Clayton\"</span>)</div><div class=\"line\">names.append(<span class=\"string\">\"Raymond\"</span>)</div><div class=\"line\">names.append(<span class=\"string\">\"Cynthia\"</span>)</div><div class=\"line\">names.append(<span class=\"string\">\"Jennifer\"</span>)</div><div class=\"line\">names.append(<span class=\"string\">\"Bryan\"</span>)</div><div class=\"line\">names.append(<span class=\"string\">\"Danny\"</span>)</div><div class=\"line\"></div><div class=\"line\">names.length() <span class=\"comment\">// 6</span></div><div class=\"line\">names.toString() <span class=\"comment\">// [\"Clayton\", \"Raymond\", \"Cynthia\", \"Jennifer\", \"Bryan\", \"Danny\"]</span></div><div class=\"line\">names.contains(<span class=\"string\">'wq'</span>) <span class=\"comment\">// false</span></div><div class=\"line\">names.getElement() <span class=\"comment\">// Clayton</span></div><div class=\"line\"></div><div class=\"line\">names.next()</div><div class=\"line\">names.getElement() <span class=\"comment\">// Raymond</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">List</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.listSize = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  append(elm) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.listSize++] = elm</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  find(elm) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.dataStore)) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (elm === <span class=\"keyword\">this</span>.dataStore[v]) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">Number</span>(v)</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  remove(elm) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> foundAt = <span class=\"keyword\">this</span>.find(elm)</div><div class=\"line\">    <span class=\"keyword\">if</span> (foundAt &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore.splice(foundAt, <span class=\"number\">1</span>)</div><div class=\"line\">        --<span class=\"keyword\">this</span>.listSize</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  length() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.listSize</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  toString() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  insert(elm, after) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> insertPos = <span class=\"keyword\">this</span>.find(after)</div><div class=\"line\">    <span class=\"keyword\">if</span> (insertPos &gt; <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.dataStore.splice(insertPos + <span class=\"number\">1</span>, <span class=\"number\">0</span>, elm)</div><div class=\"line\">        ++<span class=\"keyword\">this</span>.listSize</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  clear() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.listSize = <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  contains(elm) &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.dataStore)) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (elm === <span class=\"keyword\">this</span>.dataStore[v]) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  front() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = <span class=\"number\">0</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  end() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = <span class=\"keyword\">this</span>.listSize - <span class=\"number\">1</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  prev() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.pos &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      --<span class=\"keyword\">this</span>.pos</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  next() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.pos &lt; <span class=\"keyword\">this</span>.listSize - <span class=\"number\">1</span>) &#123;</div><div class=\"line\">      ++<span class=\"keyword\">this</span>.pos</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  currPos() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.pos</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  moveTo(position) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.pos = position</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  getElement() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.pos]</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>"},{"title":"javascript--Queue","comments":1,"toc":true,"date":"2018-02-23T12:00:30.000Z","_content":"\n### \n\n \n\n### \n\n* \n* \n\n<!-- more -->\n\n/ |  \n- | :-: \ndataStore() | \ncount() | \nenqueue() | \nfront() | \nback() | \ntoString() | \nempty() | \n\n\n<img width=\"600\" src=\"queue-2018-2-23/queue.jpeg\"/>\n\n### Queue\n`push()``shift()`\n``` javascript\nclass Queue {\n  constructor() {\n    this.dataStore = []\n  }\n\n  // \n  enqueue(element) {\n    this.dataStore.push(element)\n  }\n\n  // \n  dequeue() {\n    return this.dataStore.shift()\n  }\n\n  // \n  front() {\n    return this.dataStore[0]\n  }\n\n  back() {\n    return this.dataStore[this.dataStore.length - 1]\n  }\n\n  // \n  toString() {\n    let retStr = \"\";\n    for (let i = 0; i < this.dataStore.length; ++i) {\n      retStr += this.dataStore[i] + \"\\n\"\n    }\n    return retStr;\n  }\n\n  // \n  empty() {\n    if (this.dataStore.length == 0) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  // \n  count() {\n    return this.dataStore.length\n  }\n}\n```\n\n### \n\n#### \n\n   \n\n\n``` javascript\nlet dancerArray = [\n  'F Allison',\n  'M Frank',\n  'M Mason',\n  'M Clayton',\n  'F Cheryl',\n  'M Raymond',\n  'F Jennifer',\n  'M Bryan',\n  'M David',\n  'M Danny',\n  'F Aurora'\n]\n\nclass Dancer {\n  constructor(name, sex) {\n    this.name = name\n    this.sex = sex\n  }\n}\n```\n\n\n``` javascript\n// \nfunction getDancers(m, f) {\n  for (let v of dancerArray) {\n    let dancer = v.split(' ')\n    let sex = dancer[0]\n    let name = `${dancer[1]} ${dance[2]}`\n    if (sex === 'F') {\n      f.enqueue(new Dancer(name, sex))\n    } else {\n      m.enqueue(new Dancer(name, sex))\n    }\n  }\n}\n// \nfunction dance(m, f) {\n  let person\n  while (!f.empty() && !m.empty()) {\n    person = f.dequeue();\n    console.log(\"Female dancer is: \" + person.name);\n    person = m.dequeue();\n    console.log(\" and the male dancer is: \" + person.name);\n  }\n}\n```\n\n\n``` javascript\n// \nlet maleDancers = new Queue();\nlet femaleDancers = new Queue();\ngetDancers(maleDancers, femaleDancers);\ndance(maleDancers, femaleDancers);\n```\n\n#### \n\n(Emergency Department)code\n\n`dequeue()`z`toString()`\n``` javascript\n// \ndequeue() {\n  let priority = this.dataStore[0].code\n  for(let i = 0, l = this.dataStore.length; i < l; i++) {\n    if(this.dataStore[i].code <= priority) {\n      priority = i\n    }\n  }\n  return this.dataStore.splice(priority,1)\n}\n// \ntoString() {\n  let retStr = \"\";\n  for (let i = 0; i < this.dataStore.length; ++i) {\n    retStr += this.dataStore[i].name + \" code: \"\n              + this.dataStore[i].code + \"\\n\"\n  }\n  return retStr\n}\n```\n\n\n``` javascript\nclass Patient {\n  constructor(name, code) {\n    this.name = name\n    this.code = code\n  }\n}\n```\n\n\n``` javascript\nclass Queue {\n  constructor() {\n    this.dataStore = []\n  }\n\n  // \n  enqueue(element) {\n    this.dataStore.push(element)\n  }\n\n  // \n  dequeue() {\n    let priority = this.dataStore[0].code\n    for(let i = 0, l = this.dataStore.length; i < l; i++) {\n      if(this.dataStore[i].code <= priority) {\n        priority = i\n      }\n    }\n    return this.dataStore.splice(priority,1)\n  }\n  // \n  toString() {\n    let retStr = \"\";\n    for (let i = 0; i < this.dataStore.length; ++i) {\n      retStr += this.dataStore[i].name + \" code: \"\n                + this.dataStore[i].code + \"\\n\"\n    }\n    return retStr\n  }\n\n  // \n  front() {\n    return this.dataStore[0]\n  }\n\n  back() {\n    return this.dataStore[this.dataStore.length - 1]\n  }\n\n  // \n  empty() {\n    if (this.dataStore.length == 0) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  // \n  count() {\n    return this.dataStore.length\n  }\n}\n\nclass Patient {\n  constructor(name, code) {\n    this.name = name\n    this.code = code\n  }\n}\n\nlet p = new Patient(\"Smith\",5)\nlet ed = new Queue()\ned.enqueue(p)\np = new Patient(\"Jones\", 4)\ned.enqueue(p)\np = new Patient(\"Fehrenbach\", 6)\ned.enqueue(p)\ned.dequeue() // [{\"name\":\"Jones\",\"code\":4}]\n```\n\n\n``` javascript\nclass Queue {\n  constructor() {\n    this.person = [] // \n    this.seePerson = null // \n  }\n  // \n  enterWaitingRoom() {\n    let per = this.dequeue()[0]\n    this.person.unshift({\n      name: per.name,\n      code: per.code\n    })\n    return this.person\n  }\n  // \n  seeDoctor() {\n    if(this.person.length) {\n      this.seePerson = this.person.shift()\n      return this.seePerson\n    } else {\n      return ''\n    } \n  }\n  // \n  waitingPerson() {\n    if(!this.person.length) return ''\n    for(let v of this.person) {\n      if(this.seePerson && (this.seePerson.name === v.name)) {\n        return this.seePerson.name\n      } else {\n        return this.person[0]\n      }\n    }\n  }\n}\n```","source":"_posts/queue-2018-2-23.md","raw":"---\ntitle: javascript--Queue\ncomments: true\ntoc: true\ndate: 2018-02-23 20:00:30\ntags:\n    - 'javascript'\n    - 'ECMAScript 6'\n    - 'algorithm'\n---\n\n### \n\n \n\n### \n\n* \n* \n\n<!-- more -->\n\n/ |  \n- | :-: \ndataStore() | \ncount() | \nenqueue() | \nfront() | \nback() | \ntoString() | \nempty() | \n\n\n<img width=\"600\" src=\"queue-2018-2-23/queue.jpeg\"/>\n\n### Queue\n`push()``shift()`\n``` javascript\nclass Queue {\n  constructor() {\n    this.dataStore = []\n  }\n\n  // \n  enqueue(element) {\n    this.dataStore.push(element)\n  }\n\n  // \n  dequeue() {\n    return this.dataStore.shift()\n  }\n\n  // \n  front() {\n    return this.dataStore[0]\n  }\n\n  back() {\n    return this.dataStore[this.dataStore.length - 1]\n  }\n\n  // \n  toString() {\n    let retStr = \"\";\n    for (let i = 0; i < this.dataStore.length; ++i) {\n      retStr += this.dataStore[i] + \"\\n\"\n    }\n    return retStr;\n  }\n\n  // \n  empty() {\n    if (this.dataStore.length == 0) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  // \n  count() {\n    return this.dataStore.length\n  }\n}\n```\n\n### \n\n#### \n\n   \n\n\n``` javascript\nlet dancerArray = [\n  'F Allison',\n  'M Frank',\n  'M Mason',\n  'M Clayton',\n  'F Cheryl',\n  'M Raymond',\n  'F Jennifer',\n  'M Bryan',\n  'M David',\n  'M Danny',\n  'F Aurora'\n]\n\nclass Dancer {\n  constructor(name, sex) {\n    this.name = name\n    this.sex = sex\n  }\n}\n```\n\n\n``` javascript\n// \nfunction getDancers(m, f) {\n  for (let v of dancerArray) {\n    let dancer = v.split(' ')\n    let sex = dancer[0]\n    let name = `${dancer[1]} ${dance[2]}`\n    if (sex === 'F') {\n      f.enqueue(new Dancer(name, sex))\n    } else {\n      m.enqueue(new Dancer(name, sex))\n    }\n  }\n}\n// \nfunction dance(m, f) {\n  let person\n  while (!f.empty() && !m.empty()) {\n    person = f.dequeue();\n    console.log(\"Female dancer is: \" + person.name);\n    person = m.dequeue();\n    console.log(\" and the male dancer is: \" + person.name);\n  }\n}\n```\n\n\n``` javascript\n// \nlet maleDancers = new Queue();\nlet femaleDancers = new Queue();\ngetDancers(maleDancers, femaleDancers);\ndance(maleDancers, femaleDancers);\n```\n\n#### \n\n(Emergency Department)code\n\n`dequeue()`z`toString()`\n``` javascript\n// \ndequeue() {\n  let priority = this.dataStore[0].code\n  for(let i = 0, l = this.dataStore.length; i < l; i++) {\n    if(this.dataStore[i].code <= priority) {\n      priority = i\n    }\n  }\n  return this.dataStore.splice(priority,1)\n}\n// \ntoString() {\n  let retStr = \"\";\n  for (let i = 0; i < this.dataStore.length; ++i) {\n    retStr += this.dataStore[i].name + \" code: \"\n              + this.dataStore[i].code + \"\\n\"\n  }\n  return retStr\n}\n```\n\n\n``` javascript\nclass Patient {\n  constructor(name, code) {\n    this.name = name\n    this.code = code\n  }\n}\n```\n\n\n``` javascript\nclass Queue {\n  constructor() {\n    this.dataStore = []\n  }\n\n  // \n  enqueue(element) {\n    this.dataStore.push(element)\n  }\n\n  // \n  dequeue() {\n    let priority = this.dataStore[0].code\n    for(let i = 0, l = this.dataStore.length; i < l; i++) {\n      if(this.dataStore[i].code <= priority) {\n        priority = i\n      }\n    }\n    return this.dataStore.splice(priority,1)\n  }\n  // \n  toString() {\n    let retStr = \"\";\n    for (let i = 0; i < this.dataStore.length; ++i) {\n      retStr += this.dataStore[i].name + \" code: \"\n                + this.dataStore[i].code + \"\\n\"\n    }\n    return retStr\n  }\n\n  // \n  front() {\n    return this.dataStore[0]\n  }\n\n  back() {\n    return this.dataStore[this.dataStore.length - 1]\n  }\n\n  // \n  empty() {\n    if (this.dataStore.length == 0) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  // \n  count() {\n    return this.dataStore.length\n  }\n}\n\nclass Patient {\n  constructor(name, code) {\n    this.name = name\n    this.code = code\n  }\n}\n\nlet p = new Patient(\"Smith\",5)\nlet ed = new Queue()\ned.enqueue(p)\np = new Patient(\"Jones\", 4)\ned.enqueue(p)\np = new Patient(\"Fehrenbach\", 6)\ned.enqueue(p)\ned.dequeue() // [{\"name\":\"Jones\",\"code\":4}]\n```\n\n\n``` javascript\nclass Queue {\n  constructor() {\n    this.person = [] // \n    this.seePerson = null // \n  }\n  // \n  enterWaitingRoom() {\n    let per = this.dequeue()[0]\n    this.person.unshift({\n      name: per.name,\n      code: per.code\n    })\n    return this.person\n  }\n  // \n  seeDoctor() {\n    if(this.person.length) {\n      this.seePerson = this.person.shift()\n      return this.seePerson\n    } else {\n      return ''\n    } \n  }\n  // \n  waitingPerson() {\n    if(!this.person.length) return ''\n    for(let v of this.person) {\n      if(this.seePerson && (this.seePerson.name === v.name)) {\n        return this.seePerson.name\n      } else {\n        return this.person[0]\n      }\n    }\n  }\n}\n```","slug":"queue-2018-2-23","published":1,"updated":"2018-03-06T15:45:43.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vb70018fdldp41yrciq","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n</ul>\n<a id=\"more\"></a>\n<table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>dataStore()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>count()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>enqueue()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>front()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>back()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>toString()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>empty()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<p><br><img width=\"600\" src=\"/queue-2018-2-23/queue.jpeg\"></p>\n<h3 id=\"Queue\"><a href=\"#Queue\" class=\"headerlink\" title=\"Queue\"></a>Queue</h3><p><code>push()</code><code>shift()</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Queue</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  enqueue(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore.push(element)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  dequeue() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore.shift()</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  front() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"number\">0</span>]</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  back() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.dataStore.length - <span class=\"number\">1</span>]</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  toString() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> retStr = <span class=\"string\">\"\"</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.dataStore.length; ++i) &#123;</div><div class=\"line\">      retStr += <span class=\"keyword\">this</span>.dataStore[i] + <span class=\"string\">\"\\n\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> retStr;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  empty() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore.length == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  count() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>   </p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> dancerArray = [</div><div class=\"line\">  <span class=\"string\">'F Allison'</span>,</div><div class=\"line\">  <span class=\"string\">'M Frank'</span>,</div><div class=\"line\">  <span class=\"string\">'M Mason'</span>,</div><div class=\"line\">  <span class=\"string\">'M Clayton'</span>,</div><div class=\"line\">  <span class=\"string\">'F Cheryl'</span>,</div><div class=\"line\">  <span class=\"string\">'M Raymond'</span>,</div><div class=\"line\">  <span class=\"string\">'F Jennifer'</span>,</div><div class=\"line\">  <span class=\"string\">'M Bryan'</span>,</div><div class=\"line\">  <span class=\"string\">'M David'</span>,</div><div class=\"line\">  <span class=\"string\">'M Danny'</span>,</div><div class=\"line\">  <span class=\"string\">'F Aurora'</span></div><div class=\"line\">]</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dancer</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(name, sex) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name</div><div class=\"line\">    <span class=\"keyword\">this</span>.sex = sex</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDancers</span>(<span class=\"params\">m, f</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> dancerArray) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> dancer = v.split(<span class=\"string\">' '</span>)</div><div class=\"line\">    <span class=\"keyword\">let</span> sex = dancer[<span class=\"number\">0</span>]</div><div class=\"line\">    <span class=\"keyword\">let</span> name = <span class=\"string\">`<span class=\"subst\">$&#123;dancer[<span class=\"number\">1</span>]&#125;</span> <span class=\"subst\">$&#123;dance[<span class=\"number\">2</span>]&#125;</span>`</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (sex === <span class=\"string\">'F'</span>) &#123;</div><div class=\"line\">      f.enqueue(<span class=\"keyword\">new</span> Dancer(name, sex))</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      m.enqueue(<span class=\"keyword\">new</span> Dancer(name, sex))</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dance</span>(<span class=\"params\">m, f</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> person</div><div class=\"line\">  <span class=\"keyword\">while</span> (!f.empty() &amp;&amp; !m.empty()) &#123;</div><div class=\"line\">    person = f.dequeue();</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Female dancer is: \"</span> + person.name);</div><div class=\"line\">    person = m.dequeue();</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\" and the male dancer is: \"</span> + person.name);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> maleDancers = <span class=\"keyword\">new</span> Queue();</div><div class=\"line\"><span class=\"keyword\">let</span> femaleDancers = <span class=\"keyword\">new</span> Queue();</div><div class=\"line\">getDancers(maleDancers, femaleDancers);</div><div class=\"line\">dance(maleDancers, femaleDancers);</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>(Emergency Department)code</p>\n<p><code>dequeue()</code>z<code>toString()</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">dequeue() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> priority = <span class=\"keyword\">this</span>.dataStore[<span class=\"number\">0</span>].code</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.dataStore.length; i &lt; l; i++) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.dataStore[i].code &lt;= priority) &#123;</div><div class=\"line\">      priority = i</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore.splice(priority,<span class=\"number\">1</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">toString() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> retStr = <span class=\"string\">\"\"</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.dataStore.length; ++i) &#123;</div><div class=\"line\">    retStr += <span class=\"keyword\">this</span>.dataStore[i].name + <span class=\"string\">\" code: \"</span></div><div class=\"line\">              + <span class=\"keyword\">this</span>.dataStore[i].code + <span class=\"string\">\"\\n\"</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> retStr</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Patient</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(name, code) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name</div><div class=\"line\">    <span class=\"keyword\">this</span>.code = code</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Queue</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  enqueue(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore.push(element)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  dequeue() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> priority = <span class=\"keyword\">this</span>.dataStore[<span class=\"number\">0</span>].code</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.dataStore.length; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.dataStore[i].code &lt;= priority) &#123;</div><div class=\"line\">        priority = i</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore.splice(priority,<span class=\"number\">1</span>)</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  toString() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> retStr = <span class=\"string\">\"\"</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.dataStore.length; ++i) &#123;</div><div class=\"line\">      retStr += <span class=\"keyword\">this</span>.dataStore[i].name + <span class=\"string\">\" code: \"</span></div><div class=\"line\">                + <span class=\"keyword\">this</span>.dataStore[i].code + <span class=\"string\">\"\\n\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> retStr</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  front() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"number\">0</span>]</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  back() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.dataStore.length - <span class=\"number\">1</span>]</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  empty() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore.length == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  count() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Patient</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(name, code) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name</div><div class=\"line\">    <span class=\"keyword\">this</span>.code = code</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> p = <span class=\"keyword\">new</span> Patient(<span class=\"string\">\"Smith\"</span>,<span class=\"number\">5</span>)</div><div class=\"line\"><span class=\"keyword\">let</span> ed = <span class=\"keyword\">new</span> Queue()</div><div class=\"line\">ed.enqueue(p)</div><div class=\"line\">p = <span class=\"keyword\">new</span> Patient(<span class=\"string\">\"Jones\"</span>, <span class=\"number\">4</span>)</div><div class=\"line\">ed.enqueue(p)</div><div class=\"line\">p = <span class=\"keyword\">new</span> Patient(<span class=\"string\">\"Fehrenbach\"</span>, <span class=\"number\">6</span>)</div><div class=\"line\">ed.enqueue(p)</div><div class=\"line\">ed.dequeue() <span class=\"comment\">// [&#123;\"name\":\"Jones\",\"code\":4&#125;]</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Queue</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.person = [] <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.seePerson = <span class=\"literal\">null</span> <span class=\"comment\">// </span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  enterWaitingRoom() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> per = <span class=\"keyword\">this</span>.dequeue()[<span class=\"number\">0</span>]</div><div class=\"line\">    <span class=\"keyword\">this</span>.person.unshift(&#123;</div><div class=\"line\">      name: per.name,</div><div class=\"line\">      code: per.code</div><div class=\"line\">    &#125;)</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.person</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  seeDoctor() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.person.length) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.seePerson = <span class=\"keyword\">this</span>.person.shift()</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.seePerson</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">''</span></div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  waitingPerson() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(!<span class=\"keyword\">this</span>.person.length) <span class=\"keyword\">return</span> <span class=\"string\">''</span></div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> <span class=\"keyword\">this</span>.person) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.seePerson &amp;&amp; (<span class=\"keyword\">this</span>.seePerson.name === v.name)) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.seePerson.name</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.person[<span class=\"number\">0</span>]</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n</ul>","more":"<table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>dataStore()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>count()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>enqueue()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>front()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>back()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>toString()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>empty()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<p><br><img width=\"600\" src=\"/queue-2018-2-23/queue.jpeg\"></p>\n<h3 id=\"Queue\"><a href=\"#Queue\" class=\"headerlink\" title=\"Queue\"></a>Queue</h3><p><code>push()</code><code>shift()</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Queue</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  enqueue(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore.push(element)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  dequeue() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore.shift()</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  front() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"number\">0</span>]</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  back() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.dataStore.length - <span class=\"number\">1</span>]</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  toString() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> retStr = <span class=\"string\">\"\"</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.dataStore.length; ++i) &#123;</div><div class=\"line\">      retStr += <span class=\"keyword\">this</span>.dataStore[i] + <span class=\"string\">\"\\n\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> retStr;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  empty() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore.length == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  count() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>   </p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> dancerArray = [</div><div class=\"line\">  <span class=\"string\">'F Allison'</span>,</div><div class=\"line\">  <span class=\"string\">'M Frank'</span>,</div><div class=\"line\">  <span class=\"string\">'M Mason'</span>,</div><div class=\"line\">  <span class=\"string\">'M Clayton'</span>,</div><div class=\"line\">  <span class=\"string\">'F Cheryl'</span>,</div><div class=\"line\">  <span class=\"string\">'M Raymond'</span>,</div><div class=\"line\">  <span class=\"string\">'F Jennifer'</span>,</div><div class=\"line\">  <span class=\"string\">'M Bryan'</span>,</div><div class=\"line\">  <span class=\"string\">'M David'</span>,</div><div class=\"line\">  <span class=\"string\">'M Danny'</span>,</div><div class=\"line\">  <span class=\"string\">'F Aurora'</span></div><div class=\"line\">]</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dancer</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(name, sex) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name</div><div class=\"line\">    <span class=\"keyword\">this</span>.sex = sex</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDancers</span>(<span class=\"params\">m, f</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> dancerArray) &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> dancer = v.split(<span class=\"string\">' '</span>)</div><div class=\"line\">    <span class=\"keyword\">let</span> sex = dancer[<span class=\"number\">0</span>]</div><div class=\"line\">    <span class=\"keyword\">let</span> name = <span class=\"string\">`<span class=\"subst\">$&#123;dancer[<span class=\"number\">1</span>]&#125;</span> <span class=\"subst\">$&#123;dance[<span class=\"number\">2</span>]&#125;</span>`</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (sex === <span class=\"string\">'F'</span>) &#123;</div><div class=\"line\">      f.enqueue(<span class=\"keyword\">new</span> Dancer(name, sex))</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      m.enqueue(<span class=\"keyword\">new</span> Dancer(name, sex))</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dance</span>(<span class=\"params\">m, f</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> person</div><div class=\"line\">  <span class=\"keyword\">while</span> (!f.empty() &amp;&amp; !m.empty()) &#123;</div><div class=\"line\">    person = f.dequeue();</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Female dancer is: \"</span> + person.name);</div><div class=\"line\">    person = m.dequeue();</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\" and the male dancer is: \"</span> + person.name);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">let</span> maleDancers = <span class=\"keyword\">new</span> Queue();</div><div class=\"line\"><span class=\"keyword\">let</span> femaleDancers = <span class=\"keyword\">new</span> Queue();</div><div class=\"line\">getDancers(maleDancers, femaleDancers);</div><div class=\"line\">dance(maleDancers, femaleDancers);</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>(Emergency Department)code</p>\n<p><code>dequeue()</code>z<code>toString()</code><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">dequeue() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> priority = <span class=\"keyword\">this</span>.dataStore[<span class=\"number\">0</span>].code</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.dataStore.length; i &lt; l; i++) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.dataStore[i].code &lt;= priority) &#123;</div><div class=\"line\">      priority = i</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore.splice(priority,<span class=\"number\">1</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">toString() &#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> retStr = <span class=\"string\">\"\"</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.dataStore.length; ++i) &#123;</div><div class=\"line\">    retStr += <span class=\"keyword\">this</span>.dataStore[i].name + <span class=\"string\">\" code: \"</span></div><div class=\"line\">              + <span class=\"keyword\">this</span>.dataStore[i].code + <span class=\"string\">\"\\n\"</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> retStr</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Patient</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(name, code) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name</div><div class=\"line\">    <span class=\"keyword\">this</span>.code = code</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Queue</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  enqueue(element) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore.push(element)</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  dequeue() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> priority = <span class=\"keyword\">this</span>.dataStore[<span class=\"number\">0</span>].code</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = <span class=\"keyword\">this</span>.dataStore.length; i &lt; l; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.dataStore[i].code &lt;= priority) &#123;</div><div class=\"line\">        priority = i</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore.splice(priority,<span class=\"number\">1</span>)</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  toString() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> retStr = <span class=\"string\">\"\"</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.dataStore.length; ++i) &#123;</div><div class=\"line\">      retStr += <span class=\"keyword\">this</span>.dataStore[i].name + <span class=\"string\">\" code: \"</span></div><div class=\"line\">                + <span class=\"keyword\">this</span>.dataStore[i].code + <span class=\"string\">\"\\n\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> retStr</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  front() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"number\">0</span>]</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  back() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.dataStore.length - <span class=\"number\">1</span>]</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  empty() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.dataStore.length == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  count() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore.length</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Patient</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(name, code) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name</div><div class=\"line\">    <span class=\"keyword\">this</span>.code = code</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> p = <span class=\"keyword\">new</span> Patient(<span class=\"string\">\"Smith\"</span>,<span class=\"number\">5</span>)</div><div class=\"line\"><span class=\"keyword\">let</span> ed = <span class=\"keyword\">new</span> Queue()</div><div class=\"line\">ed.enqueue(p)</div><div class=\"line\">p = <span class=\"keyword\">new</span> Patient(<span class=\"string\">\"Jones\"</span>, <span class=\"number\">4</span>)</div><div class=\"line\">ed.enqueue(p)</div><div class=\"line\">p = <span class=\"keyword\">new</span> Patient(<span class=\"string\">\"Fehrenbach\"</span>, <span class=\"number\">6</span>)</div><div class=\"line\">ed.enqueue(p)</div><div class=\"line\">ed.dequeue() <span class=\"comment\">// [&#123;\"name\":\"Jones\",\"code\":4&#125;]</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Queue</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.person = [] <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">this</span>.seePerson = <span class=\"literal\">null</span> <span class=\"comment\">// </span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  enterWaitingRoom() &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> per = <span class=\"keyword\">this</span>.dequeue()[<span class=\"number\">0</span>]</div><div class=\"line\">    <span class=\"keyword\">this</span>.person.unshift(&#123;</div><div class=\"line\">      name: per.name,</div><div class=\"line\">      code: per.code</div><div class=\"line\">    &#125;)</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.person</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  seeDoctor() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.person.length) &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.seePerson = <span class=\"keyword\">this</span>.person.shift()</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.seePerson</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">''</span></div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  waitingPerson() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(!<span class=\"keyword\">this</span>.person.length) <span class=\"keyword\">return</span> <span class=\"string\">''</span></div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> <span class=\"keyword\">this</span>.person) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.seePerson &amp;&amp; (<span class=\"keyword\">this</span>.seePerson.name === v.name)) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.seePerson.name</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.person[<span class=\"number\">0</span>]</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>"},{"title":"javascript--Stack","comments":1,"toc":true,"date":"2018-02-22T12:00:30.000Z","_content":"\n### \n\n  \n\n(LIFOlast-in-first-out)\n\n> (`push()`)(`pop()`)\n\n<!-- more -->\n\n### \n\n> \n> \n\n/ |  \n- | :-: \ndataStore() | \ntop() | \nlength() | \npush() | \npop() | \npeek() | \nclear() | \n\n\n<img width=\"600\" src=\"stack-2018-2-22/stack.jpeg\"/>\n\n### Stack\n\n``` javascript\nclass Stack {\n  constructor() {\n    this.dataStore = []\n    this.top = 0\n  }\n\n  // push\n  push(elm) {\n    this.dataStore[this.top++] = elm\n  }\n\n  // pop\n  pop() {\n    if (this.top === 0 ) return ''\n    let popv = this.dataStore[--this.top]\n    this.dataStore.pop()\n    return popv\n  }\n\n  // peek\n  peek() {\n    return this.dataStore[this.top - 1]\n  }\n\n  length() {\n    return this.top\n  }\n\n  clear() {\n    this.top = 0\n    this.dataStore = []\n  }\n}\n```\n\n### \n\n#### \n\n: dadracecar; A man, a plan, a canal: Panama; 1001 \n\nracecar\n<img width=\"600\" src=\"stack-2018-2-22/stack-hw.jpeg\"/>\n\ndemo\n``` javascript\nfunction isPalindrome(word) {\n    let rword = ''\n    let s = new Stack()\n    for(let i = 0, l = word.length; i < l; i++) {\n        s.push(word[i])\n    }\n    while(s.length() > 0) {\n        rword += s.pop()\n    }\n    if(rword === word) return true\n    return false\n}\nisPalindrome('racecar') // true\nisPalindrome('hello') // false\n```\n\n#### \n> \n\n``` javascript\nfunction fact(n) {\n    let s = new Stack();\n    while (n > 1) {\n        s.push(n--);\n    }\n    let product = 1;\n    while (s.length() > 0) {\n        product *= s.pop();\n    }\n    return product;\n}\nfact(5) // 120\n```\n#### \n\n () \n\n\n``` javascript\nlet candys = new Stack()\ncandys.push('red')\ncandys.push('yellow')\ncandys.push('white')\ncandys.push('yellow')\ncandys.push('white')\ncandys.push('red')\ncandys.push('white')\ncandys.push('red')\ncandys.push('yellow')\n\nfunction getColor(elm, stack) {\n  let filterCandys = new Stack()\n  let newCandys = new Stack()\n  for(let v of stack.dataStore) {\n    if(v === elm) {\n      newCandys.push(v)\n    } else {\n      filterCandys.push(v)\n    }\n  }\n  stack.clear()\n  \n  while(filterCandys.length() > 0) {\n    stack.push(filterCandys.pop())\n  }\n  return newCandys\n}\ngetColor('yellow', candys)\n```","source":"_posts/stack-2018-2-22.md","raw":"---\ntitle: javascript--Stack\ncomments: true\ntoc: true\ndate: 2018-02-22 20:00:30\ntags:\n    - 'javascript'\n    - 'ECMAScript 6'\n    - 'algorithm'\n---\n\n### \n\n  \n\n(LIFOlast-in-first-out)\n\n> (`push()`)(`pop()`)\n\n<!-- more -->\n\n### \n\n> \n> \n\n/ |  \n- | :-: \ndataStore() | \ntop() | \nlength() | \npush() | \npop() | \npeek() | \nclear() | \n\n\n<img width=\"600\" src=\"stack-2018-2-22/stack.jpeg\"/>\n\n### Stack\n\n``` javascript\nclass Stack {\n  constructor() {\n    this.dataStore = []\n    this.top = 0\n  }\n\n  // push\n  push(elm) {\n    this.dataStore[this.top++] = elm\n  }\n\n  // pop\n  pop() {\n    if (this.top === 0 ) return ''\n    let popv = this.dataStore[--this.top]\n    this.dataStore.pop()\n    return popv\n  }\n\n  // peek\n  peek() {\n    return this.dataStore[this.top - 1]\n  }\n\n  length() {\n    return this.top\n  }\n\n  clear() {\n    this.top = 0\n    this.dataStore = []\n  }\n}\n```\n\n### \n\n#### \n\n: dadracecar; A man, a plan, a canal: Panama; 1001 \n\nracecar\n<img width=\"600\" src=\"stack-2018-2-22/stack-hw.jpeg\"/>\n\ndemo\n``` javascript\nfunction isPalindrome(word) {\n    let rword = ''\n    let s = new Stack()\n    for(let i = 0, l = word.length; i < l; i++) {\n        s.push(word[i])\n    }\n    while(s.length() > 0) {\n        rword += s.pop()\n    }\n    if(rword === word) return true\n    return false\n}\nisPalindrome('racecar') // true\nisPalindrome('hello') // false\n```\n\n#### \n> \n\n``` javascript\nfunction fact(n) {\n    let s = new Stack();\n    while (n > 1) {\n        s.push(n--);\n    }\n    let product = 1;\n    while (s.length() > 0) {\n        product *= s.pop();\n    }\n    return product;\n}\nfact(5) // 120\n```\n#### \n\n () \n\n\n``` javascript\nlet candys = new Stack()\ncandys.push('red')\ncandys.push('yellow')\ncandys.push('white')\ncandys.push('yellow')\ncandys.push('white')\ncandys.push('red')\ncandys.push('white')\ncandys.push('red')\ncandys.push('yellow')\n\nfunction getColor(elm, stack) {\n  let filterCandys = new Stack()\n  let newCandys = new Stack()\n  for(let v of stack.dataStore) {\n    if(v === elm) {\n      newCandys.push(v)\n    } else {\n      filterCandys.push(v)\n    }\n  }\n  stack.clear()\n  \n  while(filterCandys.length() > 0) {\n    stack.push(filterCandys.pop())\n  }\n  return newCandys\n}\ngetColor('yellow', candys)\n```","slug":"stack-2018-2-22","published":1,"updated":"2018-02-22T07:39:18.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vb8001bfdldo3l5pinu","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<p>(LIFOlast-in-first-out)</p>\n<blockquote>\n<p>(<code>push()</code>)(<code>pop()</code>)</p>\n</blockquote>\n<a id=\"more\"></a>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote>\n<p><br></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>dataStore()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>top()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>length()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>push()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>pop()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>peek()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>clear()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<p><br><img width=\"600\" src=\"/stack-2018-2-22/stack.jpeg\"></p>\n<h3 id=\"Stack\"><a href=\"#Stack\" class=\"headerlink\" title=\"Stack\"></a>Stack</h3><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Stack</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.top = <span class=\"number\">0</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// push</span></div><div class=\"line\">  push(elm) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.top++] = elm</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// pop</span></div><div class=\"line\">  pop() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.top === <span class=\"number\">0</span> ) <span class=\"keyword\">return</span> <span class=\"string\">''</span></div><div class=\"line\">    <span class=\"keyword\">let</span> popv = <span class=\"keyword\">this</span>.dataStore[--<span class=\"keyword\">this</span>.top]</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore.pop()</div><div class=\"line\">    <span class=\"keyword\">return</span> popv</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// peek</span></div><div class=\"line\">  peek() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.top - <span class=\"number\">1</span>]</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  length() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.top</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  clear() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.top = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>: dadracecar; A man, a plan, a canal: Panama; 1001 </p>\n<p>racecar<br><img width=\"600\" src=\"/stack-2018-2-22/stack-hw.jpeg\"></p>\n<p>demo<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isPalindrome</span>(<span class=\"params\">word</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> rword = <span class=\"string\">''</span></div><div class=\"line\">    <span class=\"keyword\">let</span> s = <span class=\"keyword\">new</span> Stack()</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = word.length; i &lt; l; i++) &#123;</div><div class=\"line\">        s.push(word[i])</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">while</span>(s.length() &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        rword += s.pop()</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(rword === word) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div><div class=\"line\">isPalindrome(<span class=\"string\">'racecar'</span>) <span class=\"comment\">// true</span></div><div class=\"line\">isPalindrome(<span class=\"string\">'hello'</span>) <span class=\"comment\">// false</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote>\n<p></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fact</span>(<span class=\"params\">n</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> s = <span class=\"keyword\">new</span> Stack();</div><div class=\"line\">    <span class=\"keyword\">while</span> (n &gt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">        s.push(n--);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">let</span> product = <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">while</span> (s.length() &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        product *= s.pop();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> product;</div><div class=\"line\">&#125;</div><div class=\"line\">fact(<span class=\"number\">5</span>) <span class=\"comment\">// 120</span></div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> () </p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> candys = <span class=\"keyword\">new</span> Stack()</div><div class=\"line\">candys.push(<span class=\"string\">'red'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'yellow'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'white'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'yellow'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'white'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'red'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'white'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'red'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'yellow'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getColor</span>(<span class=\"params\">elm, stack</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> filterCandys = <span class=\"keyword\">new</span> Stack()</div><div class=\"line\">  <span class=\"keyword\">let</span> newCandys = <span class=\"keyword\">new</span> Stack()</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> stack.dataStore) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(v === elm) &#123;</div><div class=\"line\">      newCandys.push(v)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      filterCandys.push(v)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  stack.clear()</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"keyword\">while</span>(filterCandys.length() &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    stack.push(filterCandys.pop())</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> newCandys</div><div class=\"line\">&#125;</div><div class=\"line\">getColor(<span class=\"string\">'yellow'</span>, candys)</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  </p>\n<p>(LIFOlast-in-first-out)</p>\n<blockquote>\n<p>(<code>push()</code>)(<code>pop()</code>)</p>\n</blockquote>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote>\n<p><br></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>/</th>\n<th style=\"text-align:center\"> </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>dataStore()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>top()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>length()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>push()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>pop()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>peek()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td>clear()</td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<p><br><img width=\"600\" src=\"/stack-2018-2-22/stack.jpeg\"></p>\n<h3 id=\"Stack\"><a href=\"#Stack\" class=\"headerlink\" title=\"Stack\"></a>Stack</h3><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Stack</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">    <span class=\"keyword\">this</span>.top = <span class=\"number\">0</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// push</span></div><div class=\"line\">  push(elm) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.top++] = elm</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// pop</span></div><div class=\"line\">  pop() &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.top === <span class=\"number\">0</span> ) <span class=\"keyword\">return</span> <span class=\"string\">''</span></div><div class=\"line\">    <span class=\"keyword\">let</span> popv = <span class=\"keyword\">this</span>.dataStore[--<span class=\"keyword\">this</span>.top]</div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore.pop()</div><div class=\"line\">    <span class=\"keyword\">return</span> popv</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// peek</span></div><div class=\"line\">  peek() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataStore[<span class=\"keyword\">this</span>.top - <span class=\"number\">1</span>]</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  length() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.top</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  clear() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.top = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.dataStore = []</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>: dadracecar; A man, a plan, a canal: Panama; 1001 </p>\n<p>racecar<br><img width=\"600\" src=\"/stack-2018-2-22/stack-hw.jpeg\"></p>\n<p>demo<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isPalindrome</span>(<span class=\"params\">word</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> rword = <span class=\"string\">''</span></div><div class=\"line\">    <span class=\"keyword\">let</span> s = <span class=\"keyword\">new</span> Stack()</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, l = word.length; i &lt; l; i++) &#123;</div><div class=\"line\">        s.push(word[i])</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">while</span>(s.length() &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        rword += s.pop()</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>(rword === word) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div><div class=\"line\">isPalindrome(<span class=\"string\">'racecar'</span>) <span class=\"comment\">// true</span></div><div class=\"line\">isPalindrome(<span class=\"string\">'hello'</span>) <span class=\"comment\">// false</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote>\n<p></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fact</span>(<span class=\"params\">n</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> s = <span class=\"keyword\">new</span> Stack();</div><div class=\"line\">    <span class=\"keyword\">while</span> (n &gt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">        s.push(n--);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">let</span> product = <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">while</span> (s.length() &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        product *= s.pop();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> product;</div><div class=\"line\">&#125;</div><div class=\"line\">fact(<span class=\"number\">5</span>) <span class=\"comment\">// 120</span></div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> () </p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> candys = <span class=\"keyword\">new</span> Stack()</div><div class=\"line\">candys.push(<span class=\"string\">'red'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'yellow'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'white'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'yellow'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'white'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'red'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'white'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'red'</span>)</div><div class=\"line\">candys.push(<span class=\"string\">'yellow'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getColor</span>(<span class=\"params\">elm, stack</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> filterCandys = <span class=\"keyword\">new</span> Stack()</div><div class=\"line\">  <span class=\"keyword\">let</span> newCandys = <span class=\"keyword\">new</span> Stack()</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> v <span class=\"keyword\">of</span> stack.dataStore) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(v === elm) &#123;</div><div class=\"line\">      newCandys.push(v)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      filterCandys.push(v)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  stack.clear()</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"keyword\">while</span>(filterCandys.length() &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    stack.push(filterCandys.pop())</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> newCandys</div><div class=\"line\">&#125;</div><div class=\"line\">getColor(<span class=\"string\">'yellow'</span>, candys)</div></pre></td></tr></table></figure></p>"},{"title":"vue-ssr(-)","comments":1,"toc":true,"date":"2017-06-01T13:09:11.000Z","_content":"\n### 1\n\nhtmlhtml\n\n1javavmphpsmarty\n2html, AJAXjs\n\t\n<!-- more -->\t\n\t\n\n### 2\n\n\n\n1seo\n2SPA\n\t\n\n\n\n### 3SSR\n\n Promise (preFetch)\n\n``` html\n<script>window.__initial_state=data</script>\n```\n\n\n\nvuex __initial_state__ React shouldComponentUpdate Diff\n\nVue2 SSR  SSR\n\n### 4vuevue-server-renderer\n\nvirtual domvue vue-server-renderer:\n\n![](vue-ssr/11.png)\n\nvuesourcenode\n\nsourceentry point,client entry,Vueserver entry,PromiseVueVue;\n\nsource webpack bundleclient bundle,server bundle, vue2 vue-server-rendererrender: rendererer/bundleRenderer ,render\n\nrenderervue vue,requirevue,vue-server-renderer bundleRenderer\n\nbundleRendererwebpackserver entry server-bundle,app vue\nrendererrenderToStringrenderToStreamweb\n\n> vue","source":"_posts/vue-ssr.md","raw":"---\ntitle: vue-ssr(-)\ncomments: true\ntoc: true\ndate: 2017-06-01 21:09:11\ntags: \n    - 'javascript'\n    - 'vue'\n---\n\n### 1\n\nhtmlhtml\n\n1javavmphpsmarty\n2html, AJAXjs\n\t\n<!-- more -->\t\n\t\n\n### 2\n\n\n\n1seo\n2SPA\n\t\n\n\n\n### 3SSR\n\n Promise (preFetch)\n\n``` html\n<script>window.__initial_state=data</script>\n```\n\n\n\nvuex __initial_state__ React shouldComponentUpdate Diff\n\nVue2 SSR  SSR\n\n### 4vuevue-server-renderer\n\nvirtual domvue vue-server-renderer:\n\n![](vue-ssr/11.png)\n\nvuesourcenode\n\nsourceentry point,client entry,Vueserver entry,PromiseVueVue;\n\nsource webpack bundleclient bundle,server bundle, vue2 vue-server-rendererrender: rendererer/bundleRenderer ,render\n\nrenderervue vue,requirevue,vue-server-renderer bundleRenderer\n\nbundleRendererwebpackserver entry server-bundle,app vue\nrendererrenderToStringrenderToStreamweb\n\n> vue","slug":"vue-ssr","published":1,"updated":"2018-02-10T09:06:01.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vb9001dfdldp71axd1x","content":"<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p>htmlhtml</p>\n<p>1javavmphpsmarty<br>2html, AJAXjs</p>\n<a id=\"more\"></a>    \n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p></p>\n<p>1seo<br>2SPA</p>\n<p></p>\n<h3 id=\"3SSR\"><a href=\"#3SSR\" class=\"headerlink\" title=\"3SSR\"></a>3SSR</h3><p> Promise (preFetch)</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"><span class=\"built_in\">window</span>.__initial_state=data</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<p></p>\n<p>vuex <strong>initial_state</strong> React shouldComponentUpdate Diff</p>\n<p>Vue2 SSR  SSR</p>\n<h3 id=\"4vuevue-server-renderer\"><a href=\"#4vuevue-server-renderer\" class=\"headerlink\" title=\"4vuevue-server-renderer\"></a>4vuevue-server-renderer</h3><p>virtual domvue vue-server-renderer:</p>\n<p><img src=\"/vue-ssr/11.png\" alt=\"\"></p>\n<p>vuesourcenode</p>\n<p>sourceentry point,client entry,Vueserver entry,PromiseVueVue;</p>\n<p>source webpack bundleclient bundle,server bundle, vue2 vue-server-rendererrender: rendererer/bundleRenderer ,render</p>\n<p>renderervue vue,requirevue,vue-server-renderer bundleRenderer</p>\n<p>bundleRendererwebpackserver entry server-bundle,app vue<br>rendererrenderToStringrenderToStreamweb</p>\n<blockquote>\n<p>vue</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p>htmlhtml</p>\n<p>1javavmphpsmarty<br>2html, AJAXjs</p>","more":"<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p></p>\n<p>1seo<br>2SPA</p>\n<p></p>\n<h3 id=\"3SSR\"><a href=\"#3SSR\" class=\"headerlink\" title=\"3SSR\"></a>3SSR</h3><p> Promise (preFetch)</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"><span class=\"built_in\">window</span>.__initial_state=data</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<p></p>\n<p>vuex <strong>initial_state</strong> React shouldComponentUpdate Diff</p>\n<p>Vue2 SSR  SSR</p>\n<h3 id=\"4vuevue-server-renderer\"><a href=\"#4vuevue-server-renderer\" class=\"headerlink\" title=\"4vuevue-server-renderer\"></a>4vuevue-server-renderer</h3><p>virtual domvue vue-server-renderer:</p>\n<p><img src=\"/vue-ssr/11.png\" alt=\"\"></p>\n<p>vuesourcenode</p>\n<p>sourceentry point,client entry,Vueserver entry,PromiseVueVue;</p>\n<p>source webpack bundleclient bundle,server bundle, vue2 vue-server-rendererrender: rendererer/bundleRenderer ,render</p>\n<p>renderervue vue,requirevue,vue-server-renderer bundleRenderer</p>\n<p>bundleRendererwebpackserver entry server-bundle,app vue<br>rendererrenderToStringrenderToStreamweb</p>\n<blockquote>\n<p>vue</p>\n</blockquote>"},{"title":"vue-ssr()","comments":1,"toc":true,"date":"2017-06-02T12:09:11.000Z","_content":"\n### 1\n\nvuevuevue<font color=\"#0078d8\">vue-hackernews-2.0</font>,\n\n### 2\n\nnode6.10.1npm3.10.10\n\n\n\n<!-- more -->\n\n1vue 2.4.2\n2vuex 2.3.1\n3vue-router 2.7.0\n4vue-server-renderer 2.4.2\n5express 4.15.4\n6axios 0.16.2\n7qs 6.5.0\n8q https://github.com/kriskowal/q.git\n9webpack 3.5.0\n10mockjs 1.0.1-beta3\n11babel \n\nnpm initpackage.json\n\n``` javascript\n\"dependencies\": {\n    \"axios\": \"^0.16.2\",\n    \"es6-promise\": \"^4.1.1\",\n    \"express\": \"^4.15.4\",\n    \"lodash\": \"^4.17.4\",\n    \"q\": \"git+https://github.com/kriskowal/q.git\",\n    \"qs\": \"^6.5.0\",\n    \"vue\": \"^2.4.2\",\n    \"vue-router\": \"^2.7.0\",\n    \"vue-server-renderer\": \"^2.4.2\",\n    \"vuex\": \"^2.3.1\"\n  },\n  \"devDependencies\": {\n    \"autoprefixer\": \"^7.1.2\",\n    \"babel-core\": \"^6.25.0\",\n    \"babel-loader\": \"^7.1.1\",\n    \"babel-plugin-syntax-dynamic-import\": \"^6.18.0\",\n    \"babel-plugin-transform-runtime\": \"^6.22.0\",\n    \"babel-preset-env\": \"^1.6.0\",\n    \"babel-preset-stage-2\": \"^6.22.0\",\n    \"compression\": \"^1.7.1\",\n    \"cross-env\": \"^5.0.5\",\n    \"css-loader\": \"^0.28.4\",\n    \"extract-text-webpack-plugin\": \"^3.0.0\",\n    \"file-loader\": \"^0.11.2\",\n    \"friendly-errors-webpack-plugin\": \"^1.6.1\",\n    \"glob\": \"^7.1.2\",\n    \"less\": \"^2.7.2\",\n    \"less-loader\": \"^2.2.3\",\n    \"lru-cache\": \"^4.1.1\",\n    \"mockjs\": \"^1.0.1-beta3\",\n    \"style-loader\": \"^0.19.0\",\n    \"sw-precache-webpack-plugin\": \"^0.11.4\",\n    \"url-loader\": \"^0.5.9\",\n    \"vue-loader\": \"^13.0.4\",\n    \"vue-style-loader\": \"^3.0.3\",\n    \"vue-template-compiler\": \"^2.4.2\",\n    \"vuex-router-sync\": \"^4.2.0\",\n    \"webpack\": \"^3.5.0\",\n    \"webpack-dev-middleware\": \"^1.12.0\",\n    \"webpack-hot-middleware\": \"^2.18.2\",\n    \"webpack-merge\": \"^4.1.0\",\n    \"webpack-node-externals\": \"^1.6.0\"\n  }\t\n```\n\n### 3\n\n\n\n LICENSE\n README.md\n build\n  setup-dev-server.js\n  vue-loader.config.js\n  webpack.base.config.js\n  webpack.client.config.js\n  webpack.server.config.js\n log\n  err.log\n  out.log\n package.json\n pmlog.json\n server.js\n src\n     App.vue\n     app.js\n     assets\n      images\n      style\n       css.less\n      views\n          index.css\n     components\n      Banner.vue\n      BottomNav.vue\n      FloorOne.vue\n      Header.vue\n     entry-client.js\n     entry-server.js\n     index.template.html\n     public\n      conf.js\n      utils\n          api.js\n          confUtils.js\n     router\n      index.js\n     static\n      img\n       favicon.ico\n      js\n          flexible.js\n     store\n      actions.js\n      getters.js\n      index.js\n      modules\n       Home.js\n      mutationtypes.js\n      state.js\n     views\n         index\n             conf.js\n             index.vue\n             mock.js\n             service.js  \n\n> \n\t\n- views.vueindex.jsmock.jsmockconf.js\n- components \n- router vue-router\n- store action.js,getter.js,mutationtype.js\n- public axiosapi\n- staticwebpack\n- app.js \n- App.vue \n- entry-cliententry-server\n- index.template.html\n\n#### app.js\n\nvue\n``` javascript\nimport Vue from 'vue';\nimport App from './index.vue';\nimport router from './router'\nimport store from './store';\n\nnew Vue({\n\tel: '#app',\n\tstore,\n\trouter,\n\trender: (h) => h(App)\n});\n``` \n\nvue\n\n> ,routerstore\n\nwebpack\n\n``` javascript\nimport Home from '../views/index/index.vue'\n// \ncomponent: () => ('../views/index/index.vue')\n``` \n\n\nroutercreateRouter\n\n``` javascript\nimport Vue from 'vue'\nimport Router from 'vue-router';\nVue.use(Router)\nexport function createRouter() {\n    return new Router({\n        mode: 'history',\n        routes: [{\n            name:'Home',\n            path: '/',\n            component: () =>\n                import ('../views/index/index.vue')\n        }]\n    })\n}\n``` \n\nstorecreateStore\n\n``` javascript\n// store.js\nimport Vue from 'vue'\nimport Vuex from 'vuex'\nimport * as actions from './actions'\nimport getters from './getters'\nimport modules from './modules/index'\nVue.use(Vuex)\nexport function createStore() {\n  return new Vuex.Store({\n    actions,\n    getters,\n    modules,\n    strict: false\n  })\n}\n\n``` \n\n\n\nrouterstoreapp.jscreateAppapprouterstoreappvuevuex-router-sync(route state) storeapp.js\n\n``` javascript\nimport Vue from 'vue'\nimport App from './App.vue'\nimport { createRouter } from './router'\nimport { createStore } from './store'\nimport { sync } from 'vuex-router-sync'\nrequire('./assets/style/css.less');\nexport function createApp () {\n  //  router  store \n  const router = createRouter()\n  const store = createStore()\n  // (route state) store\n  sync(store, router)\n  //  router  store \n  const app = new Vue({\n    router,\n    store,\n    render: h => h(App)\n  })\n  //  app, router  store\n  return { app, router, store }\n}\n``` \n\n#### entry-client.js\n\nappcreateAppapprouterstore\n\n``` javascript\nimport { createApp } from './app'\nconst { app, router, store } = createApp()\n```\n\nonReady\n\n``` javascript\nimport { createApp } from './app'\nconst { app, router, store } = createApp()\nrouter.onReady(() => {\n  app.$mount('#app')\n})\n```\n\n\nbeforeResolverouter2.5.0router.beforeEach()\n\n``` javascript\nrouter.beforeResolve((to, from, next) => {\n\t// to  from  \n\t// /\n\tconst matched = router.getMatchedComponents(to)\n    const prevMatched = router.getMatchedComponents(from)\n})\n```\n\n state  window.__INITIAL_STATE__  HTML  store __INITIAL_STATE__ render  HTML \n``` javascript\n// vuex\nif (window.__INITIAL_STATE__) {\n  store.replaceState(window.__INITIAL_STATE__)\n}\n```\n\nQbabeles6Promise\n``` javascript\nimport { createApp } from './app'\nimport Q from 'q'\nimport Vue from 'vue'\n\nVue.mixin({\n  beforeRouteUpdate (to, from, next) {\n    const { asyncData } = this.$options\n    if (asyncData) {\n      asyncData({\n        store: this.$store,\n        route: to\n      }).then(next).catch(next)\n    } else {\n      next()\n    }\n  }\n})\n\nconst { app, router, store } = createApp()\n\n// vuex\nif (window.__INITIAL_STATE__) {\n  store.replaceState(window.__INITIAL_STATE__)\n}\n\nrouter.onReady(() => {\n  router.beforeResolve((to, from, next) => {\n      const matched = router.getMatchedComponents(to)\n      const prevMatched = router.getMatchedComponents(from)\n      // \n      // \n      let diffed = false\n      const activated = matched.filter((c, i) => {\n        return diffed || (diffed = (prevMatched[i] !== c))\n      })\n      if (!activated.length) {\n        return next()\n      }\n      // (loading indicator)\n      Q.all(activated.map(c => {\n        if (c.asyncData) {\n          return c.asyncData({ store, route: to })\n        }\n      })).then(() => {\n        // (loading indicator)\n        next()\n      }).catch(next)\n    })\n    app.$mount('#app')\n})\n\n```\n\n#### entry-server.js\n\najax\n``` javascript\n//asyncDataajax\nif (Component.asyncData) {\n  return Component.asyncData({\n    store,\n    route: router.currentRoute\n  })\n}\n```\n\n\n``` javascript\nimport { createApp } from './app'\nimport Q from 'q'\nexport default context => {\n  return new Q.Promise((resolve, reject) => {\n    const { app, router, store } = createApp()\n    router.push(context.url)\n    router.onReady(() => {\n      const matchedComponents = router.getMatchedComponents()\n      if (!matchedComponents.length) {\n        return reject({ code: 404 })\n      }\n      //  `asyncData()`\n      Q.all(matchedComponents.map(Component => {\n        if (Component.asyncData) {\n          return Component.asyncData({\n            store,\n            route: router.currentRoute\n          })\n        }\n      })).then(() => {\n        // (preFetch hook) resolve \n        //  store \n        // \n        //  `template`  renderer \n        //  `window.__INITIAL_STATE__` HTML\n        context.state = store.state\n        resolve(app)\n      }).catch(reject)\n    }, reject)\n  })\n}\n```\n\n### 4\n\nsrc\n\n![](vue-ssr2/3.jpeg)\n\n\n- build webpack\n- dist webpack\n- log pm2\n- server.js node\n- pmlog.json pm2\n\n#### server.js\n\nserver.jsnodeapi\n``` javascript\nconst Vue = require('vue')\nconst express = require('express')\nconst path = require('path')\nconst LRU = require('lru-cache')\nconst { createBundleRenderer } = require('vue-server-renderer')\nconst fs = require('fs')\nconst net = require('net')\n```\n\nindex.template.htmlexpresswebpackdist\n\nproduction\n``` javascript\nconst template = fs.readFileSync('./src/index.template.html', 'utf-8')\nconst isProd = process.env.NODE_ENV === 'production'\n```\n\nvue-server-rendererdistcreateBundleRendererLRU\n``` javascript\nconst resolve = file => path.resolve(__dirname, file)\nfunction createRenderer (bundle, options) {\n  return createBundleRenderer(bundle, Object.assign(options, {\n    template,\n    cache: LRU({\n      max: 1000,\n      maxAge: 1000 * 60 * 15\n    }),\n    basedir: resolve('./dist'),\n    runInNewContext: false\n  }))\n}\nlet renderer;\nlet readyPromise\nif (isProd) {\n  const bundle = require('./dist/vue-ssr-server-bundle.json')\n  const clientManifest = require('./dist/vue-ssr-client-manifest.json')\n  renderer = createRenderer(bundle, {\n    clientManifest\n  })\n} else {\n  readyPromise = require('./build/setup-dev-server')(server, (bundle, options) => {\n    renderer = createRenderer(bundle, options)\n  })\n}\n```\n\nexpress\n``` javascript\nconst server = express()\n\n//dist\nconst serve = (path, cache) => express.static(resolve(path), {\n  maxAge: cache && isProd ? 1000 * 60 * 60 * 24 * 30 : 0\n})\nserver.use('/dist', serve('./dist', true))\nserver.get('*', (req, res) => {\n  const context = {\n    title: 'hello',\n    url: req.url\n  }\n  renderer.renderToString(context, (err, html) => {\n    if (err) {\n      res.status(500).end('Internal Server Error')\n      return\n    }\n    res.end(html)\n  })\n})\n```\n\n\n``` javascript\nfunction probe(port, callback) {\n    let servers = net.createServer().listen(port)\n    let calledOnce = false\n    let timeoutRef = setTimeout(function() {\n        calledOnce = true\n        callback(false, port)\n    }, 2000)\n    timeoutRef.unref()\n    let connected = false\n    servers.on('listening', function() {\n        clearTimeout(timeoutRef)\n\n        if (servers)\n            servers.close()\n\n        if (!calledOnce) {\n            calledOnce = true\n            callback(true, port)\n        }\n    })\n    servers.on('error', function(err) {\n        clearTimeout(timeoutRef)\n\n        let result = true\n        if (err.code === 'EADDRINUSE')\n            result = false\n\n        if (!calledOnce) {\n            calledOnce = true\n            callback(result, port)\n        }\n    })\n}\nconst checkPortPromise = new Promise((resolve) => {\n    (function serverport(_port) {\n        let pt = _port || 8080;\n        probe(pt, function(bl, _pt) {\n            //  bl false\n            // _pt\n            if (bl === true) {\n                // console.log(\"\\n  Static file server running at\" + \"\\n\\n=> http://localhost:\" + _pt + '\\n');\n                resolve(_pt);\n            } else {\n                serverport(_pt + 1)\n            }\n        })\n    })()\n\n})\ncheckPortPromise.then(data => {\n    uri = 'http://localhost:' + data;\n    console.log(''+uri)\n    server.listen(data);\n});\n```\n\nwebpackdemo\n![demo](vue-ssr2/4.jpeg)\n\n>mockjsaxios\n\t\n","source":"_posts/vue-ssr2.md","raw":"---\ntitle: vue-ssr()\ncomments: true\ntoc: true\ndate: 2017-06-02 20:09:11\ntags: \n    - 'javascript'\n    - 'vue'\n---\n\n### 1\n\nvuevuevue<font color=\"#0078d8\">vue-hackernews-2.0</font>,\n\n### 2\n\nnode6.10.1npm3.10.10\n\n\n\n<!-- more -->\n\n1vue 2.4.2\n2vuex 2.3.1\n3vue-router 2.7.0\n4vue-server-renderer 2.4.2\n5express 4.15.4\n6axios 0.16.2\n7qs 6.5.0\n8q https://github.com/kriskowal/q.git\n9webpack 3.5.0\n10mockjs 1.0.1-beta3\n11babel \n\nnpm initpackage.json\n\n``` javascript\n\"dependencies\": {\n    \"axios\": \"^0.16.2\",\n    \"es6-promise\": \"^4.1.1\",\n    \"express\": \"^4.15.4\",\n    \"lodash\": \"^4.17.4\",\n    \"q\": \"git+https://github.com/kriskowal/q.git\",\n    \"qs\": \"^6.5.0\",\n    \"vue\": \"^2.4.2\",\n    \"vue-router\": \"^2.7.0\",\n    \"vue-server-renderer\": \"^2.4.2\",\n    \"vuex\": \"^2.3.1\"\n  },\n  \"devDependencies\": {\n    \"autoprefixer\": \"^7.1.2\",\n    \"babel-core\": \"^6.25.0\",\n    \"babel-loader\": \"^7.1.1\",\n    \"babel-plugin-syntax-dynamic-import\": \"^6.18.0\",\n    \"babel-plugin-transform-runtime\": \"^6.22.0\",\n    \"babel-preset-env\": \"^1.6.0\",\n    \"babel-preset-stage-2\": \"^6.22.0\",\n    \"compression\": \"^1.7.1\",\n    \"cross-env\": \"^5.0.5\",\n    \"css-loader\": \"^0.28.4\",\n    \"extract-text-webpack-plugin\": \"^3.0.0\",\n    \"file-loader\": \"^0.11.2\",\n    \"friendly-errors-webpack-plugin\": \"^1.6.1\",\n    \"glob\": \"^7.1.2\",\n    \"less\": \"^2.7.2\",\n    \"less-loader\": \"^2.2.3\",\n    \"lru-cache\": \"^4.1.1\",\n    \"mockjs\": \"^1.0.1-beta3\",\n    \"style-loader\": \"^0.19.0\",\n    \"sw-precache-webpack-plugin\": \"^0.11.4\",\n    \"url-loader\": \"^0.5.9\",\n    \"vue-loader\": \"^13.0.4\",\n    \"vue-style-loader\": \"^3.0.3\",\n    \"vue-template-compiler\": \"^2.4.2\",\n    \"vuex-router-sync\": \"^4.2.0\",\n    \"webpack\": \"^3.5.0\",\n    \"webpack-dev-middleware\": \"^1.12.0\",\n    \"webpack-hot-middleware\": \"^2.18.2\",\n    \"webpack-merge\": \"^4.1.0\",\n    \"webpack-node-externals\": \"^1.6.0\"\n  }\t\n```\n\n### 3\n\n\n\n LICENSE\n README.md\n build\n  setup-dev-server.js\n  vue-loader.config.js\n  webpack.base.config.js\n  webpack.client.config.js\n  webpack.server.config.js\n log\n  err.log\n  out.log\n package.json\n pmlog.json\n server.js\n src\n     App.vue\n     app.js\n     assets\n      images\n      style\n       css.less\n      views\n          index.css\n     components\n      Banner.vue\n      BottomNav.vue\n      FloorOne.vue\n      Header.vue\n     entry-client.js\n     entry-server.js\n     index.template.html\n     public\n      conf.js\n      utils\n          api.js\n          confUtils.js\n     router\n      index.js\n     static\n      img\n       favicon.ico\n      js\n          flexible.js\n     store\n      actions.js\n      getters.js\n      index.js\n      modules\n       Home.js\n      mutationtypes.js\n      state.js\n     views\n         index\n             conf.js\n             index.vue\n             mock.js\n             service.js  \n\n> \n\t\n- views.vueindex.jsmock.jsmockconf.js\n- components \n- router vue-router\n- store action.js,getter.js,mutationtype.js\n- public axiosapi\n- staticwebpack\n- app.js \n- App.vue \n- entry-cliententry-server\n- index.template.html\n\n#### app.js\n\nvue\n``` javascript\nimport Vue from 'vue';\nimport App from './index.vue';\nimport router from './router'\nimport store from './store';\n\nnew Vue({\n\tel: '#app',\n\tstore,\n\trouter,\n\trender: (h) => h(App)\n});\n``` \n\nvue\n\n> ,routerstore\n\nwebpack\n\n``` javascript\nimport Home from '../views/index/index.vue'\n// \ncomponent: () => ('../views/index/index.vue')\n``` \n\n\nroutercreateRouter\n\n``` javascript\nimport Vue from 'vue'\nimport Router from 'vue-router';\nVue.use(Router)\nexport function createRouter() {\n    return new Router({\n        mode: 'history',\n        routes: [{\n            name:'Home',\n            path: '/',\n            component: () =>\n                import ('../views/index/index.vue')\n        }]\n    })\n}\n``` \n\nstorecreateStore\n\n``` javascript\n// store.js\nimport Vue from 'vue'\nimport Vuex from 'vuex'\nimport * as actions from './actions'\nimport getters from './getters'\nimport modules from './modules/index'\nVue.use(Vuex)\nexport function createStore() {\n  return new Vuex.Store({\n    actions,\n    getters,\n    modules,\n    strict: false\n  })\n}\n\n``` \n\n\n\nrouterstoreapp.jscreateAppapprouterstoreappvuevuex-router-sync(route state) storeapp.js\n\n``` javascript\nimport Vue from 'vue'\nimport App from './App.vue'\nimport { createRouter } from './router'\nimport { createStore } from './store'\nimport { sync } from 'vuex-router-sync'\nrequire('./assets/style/css.less');\nexport function createApp () {\n  //  router  store \n  const router = createRouter()\n  const store = createStore()\n  // (route state) store\n  sync(store, router)\n  //  router  store \n  const app = new Vue({\n    router,\n    store,\n    render: h => h(App)\n  })\n  //  app, router  store\n  return { app, router, store }\n}\n``` \n\n#### entry-client.js\n\nappcreateAppapprouterstore\n\n``` javascript\nimport { createApp } from './app'\nconst { app, router, store } = createApp()\n```\n\nonReady\n\n``` javascript\nimport { createApp } from './app'\nconst { app, router, store } = createApp()\nrouter.onReady(() => {\n  app.$mount('#app')\n})\n```\n\n\nbeforeResolverouter2.5.0router.beforeEach()\n\n``` javascript\nrouter.beforeResolve((to, from, next) => {\n\t// to  from  \n\t// /\n\tconst matched = router.getMatchedComponents(to)\n    const prevMatched = router.getMatchedComponents(from)\n})\n```\n\n state  window.__INITIAL_STATE__  HTML  store __INITIAL_STATE__ render  HTML \n``` javascript\n// vuex\nif (window.__INITIAL_STATE__) {\n  store.replaceState(window.__INITIAL_STATE__)\n}\n```\n\nQbabeles6Promise\n``` javascript\nimport { createApp } from './app'\nimport Q from 'q'\nimport Vue from 'vue'\n\nVue.mixin({\n  beforeRouteUpdate (to, from, next) {\n    const { asyncData } = this.$options\n    if (asyncData) {\n      asyncData({\n        store: this.$store,\n        route: to\n      }).then(next).catch(next)\n    } else {\n      next()\n    }\n  }\n})\n\nconst { app, router, store } = createApp()\n\n// vuex\nif (window.__INITIAL_STATE__) {\n  store.replaceState(window.__INITIAL_STATE__)\n}\n\nrouter.onReady(() => {\n  router.beforeResolve((to, from, next) => {\n      const matched = router.getMatchedComponents(to)\n      const prevMatched = router.getMatchedComponents(from)\n      // \n      // \n      let diffed = false\n      const activated = matched.filter((c, i) => {\n        return diffed || (diffed = (prevMatched[i] !== c))\n      })\n      if (!activated.length) {\n        return next()\n      }\n      // (loading indicator)\n      Q.all(activated.map(c => {\n        if (c.asyncData) {\n          return c.asyncData({ store, route: to })\n        }\n      })).then(() => {\n        // (loading indicator)\n        next()\n      }).catch(next)\n    })\n    app.$mount('#app')\n})\n\n```\n\n#### entry-server.js\n\najax\n``` javascript\n//asyncDataajax\nif (Component.asyncData) {\n  return Component.asyncData({\n    store,\n    route: router.currentRoute\n  })\n}\n```\n\n\n``` javascript\nimport { createApp } from './app'\nimport Q from 'q'\nexport default context => {\n  return new Q.Promise((resolve, reject) => {\n    const { app, router, store } = createApp()\n    router.push(context.url)\n    router.onReady(() => {\n      const matchedComponents = router.getMatchedComponents()\n      if (!matchedComponents.length) {\n        return reject({ code: 404 })\n      }\n      //  `asyncData()`\n      Q.all(matchedComponents.map(Component => {\n        if (Component.asyncData) {\n          return Component.asyncData({\n            store,\n            route: router.currentRoute\n          })\n        }\n      })).then(() => {\n        // (preFetch hook) resolve \n        //  store \n        // \n        //  `template`  renderer \n        //  `window.__INITIAL_STATE__` HTML\n        context.state = store.state\n        resolve(app)\n      }).catch(reject)\n    }, reject)\n  })\n}\n```\n\n### 4\n\nsrc\n\n![](vue-ssr2/3.jpeg)\n\n\n- build webpack\n- dist webpack\n- log pm2\n- server.js node\n- pmlog.json pm2\n\n#### server.js\n\nserver.jsnodeapi\n``` javascript\nconst Vue = require('vue')\nconst express = require('express')\nconst path = require('path')\nconst LRU = require('lru-cache')\nconst { createBundleRenderer } = require('vue-server-renderer')\nconst fs = require('fs')\nconst net = require('net')\n```\n\nindex.template.htmlexpresswebpackdist\n\nproduction\n``` javascript\nconst template = fs.readFileSync('./src/index.template.html', 'utf-8')\nconst isProd = process.env.NODE_ENV === 'production'\n```\n\nvue-server-rendererdistcreateBundleRendererLRU\n``` javascript\nconst resolve = file => path.resolve(__dirname, file)\nfunction createRenderer (bundle, options) {\n  return createBundleRenderer(bundle, Object.assign(options, {\n    template,\n    cache: LRU({\n      max: 1000,\n      maxAge: 1000 * 60 * 15\n    }),\n    basedir: resolve('./dist'),\n    runInNewContext: false\n  }))\n}\nlet renderer;\nlet readyPromise\nif (isProd) {\n  const bundle = require('./dist/vue-ssr-server-bundle.json')\n  const clientManifest = require('./dist/vue-ssr-client-manifest.json')\n  renderer = createRenderer(bundle, {\n    clientManifest\n  })\n} else {\n  readyPromise = require('./build/setup-dev-server')(server, (bundle, options) => {\n    renderer = createRenderer(bundle, options)\n  })\n}\n```\n\nexpress\n``` javascript\nconst server = express()\n\n//dist\nconst serve = (path, cache) => express.static(resolve(path), {\n  maxAge: cache && isProd ? 1000 * 60 * 60 * 24 * 30 : 0\n})\nserver.use('/dist', serve('./dist', true))\nserver.get('*', (req, res) => {\n  const context = {\n    title: 'hello',\n    url: req.url\n  }\n  renderer.renderToString(context, (err, html) => {\n    if (err) {\n      res.status(500).end('Internal Server Error')\n      return\n    }\n    res.end(html)\n  })\n})\n```\n\n\n``` javascript\nfunction probe(port, callback) {\n    let servers = net.createServer().listen(port)\n    let calledOnce = false\n    let timeoutRef = setTimeout(function() {\n        calledOnce = true\n        callback(false, port)\n    }, 2000)\n    timeoutRef.unref()\n    let connected = false\n    servers.on('listening', function() {\n        clearTimeout(timeoutRef)\n\n        if (servers)\n            servers.close()\n\n        if (!calledOnce) {\n            calledOnce = true\n            callback(true, port)\n        }\n    })\n    servers.on('error', function(err) {\n        clearTimeout(timeoutRef)\n\n        let result = true\n        if (err.code === 'EADDRINUSE')\n            result = false\n\n        if (!calledOnce) {\n            calledOnce = true\n            callback(result, port)\n        }\n    })\n}\nconst checkPortPromise = new Promise((resolve) => {\n    (function serverport(_port) {\n        let pt = _port || 8080;\n        probe(pt, function(bl, _pt) {\n            //  bl false\n            // _pt\n            if (bl === true) {\n                // console.log(\"\\n  Static file server running at\" + \"\\n\\n=> http://localhost:\" + _pt + '\\n');\n                resolve(_pt);\n            } else {\n                serverport(_pt + 1)\n            }\n        })\n    })()\n\n})\ncheckPortPromise.then(data => {\n    uri = 'http://localhost:' + data;\n    console.log(''+uri)\n    server.listen(data);\n});\n```\n\nwebpackdemo\n![demo](vue-ssr2/4.jpeg)\n\n>mockjsaxios\n\t\n","slug":"vue-ssr2","published":1,"updated":"2018-02-10T09:06:23.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbb001hfdldvzzo4ybk","content":"<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p>vuevuevue<font color=\"#0078d8\">vue-hackernews-2.0</font>,</p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p>node6.10.1npm3.10.10</p>\n<p></p>\n<a id=\"more\"></a>\n<p>1vue 2.4.2<br>2vuex 2.3.1<br>3vue-router 2.7.0<br>4vue-server-renderer 2.4.2<br>5express 4.15.4<br>6axios 0.16.2<br>7qs 6.5.0<br>8q <a href=\"https://github.com/kriskowal/q.git\" target=\"_blank\" rel=\"external\">https://github.com/kriskowal/q.git</a><br>9webpack 3.5.0<br>10mockjs 1.0.1-beta3<br>11babel </p>\n<p>npm initpackage.json</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"dependencies\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"axios\"</span>: <span class=\"string\">\"^0.16.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"es6-promise\"</span>: <span class=\"string\">\"^4.1.1\"</span>,</div><div class=\"line\">    <span class=\"string\">\"express\"</span>: <span class=\"string\">\"^4.15.4\"</span>,</div><div class=\"line\">    <span class=\"string\">\"lodash\"</span>: <span class=\"string\">\"^4.17.4\"</span>,</div><div class=\"line\">    <span class=\"string\">\"q\"</span>: <span class=\"string\">\"git+https://github.com/kriskowal/q.git\"</span>,</div><div class=\"line\">    <span class=\"string\">\"qs\"</span>: <span class=\"string\">\"^6.5.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue\"</span>: <span class=\"string\">\"^2.4.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue-router\"</span>: <span class=\"string\">\"^2.7.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue-server-renderer\"</span>: <span class=\"string\">\"^2.4.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vuex\"</span>: <span class=\"string\">\"^2.3.1\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"string\">\"devDependencies\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"autoprefixer\"</span>: <span class=\"string\">\"^7.1.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-core\"</span>: <span class=\"string\">\"^6.25.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-loader\"</span>: <span class=\"string\">\"^7.1.1\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-plugin-syntax-dynamic-import\"</span>: <span class=\"string\">\"^6.18.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-plugin-transform-runtime\"</span>: <span class=\"string\">\"^6.22.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-preset-env\"</span>: <span class=\"string\">\"^1.6.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-preset-stage-2\"</span>: <span class=\"string\">\"^6.22.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"compression\"</span>: <span class=\"string\">\"^1.7.1\"</span>,</div><div class=\"line\">    <span class=\"string\">\"cross-env\"</span>: <span class=\"string\">\"^5.0.5\"</span>,</div><div class=\"line\">    <span class=\"string\">\"css-loader\"</span>: <span class=\"string\">\"^0.28.4\"</span>,</div><div class=\"line\">    <span class=\"string\">\"extract-text-webpack-plugin\"</span>: <span class=\"string\">\"^3.0.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"file-loader\"</span>: <span class=\"string\">\"^0.11.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"friendly-errors-webpack-plugin\"</span>: <span class=\"string\">\"^1.6.1\"</span>,</div><div class=\"line\">    <span class=\"string\">\"glob\"</span>: <span class=\"string\">\"^7.1.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"less\"</span>: <span class=\"string\">\"^2.7.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"less-loader\"</span>: <span class=\"string\">\"^2.2.3\"</span>,</div><div class=\"line\">    <span class=\"string\">\"lru-cache\"</span>: <span class=\"string\">\"^4.1.1\"</span>,</div><div class=\"line\">    <span class=\"string\">\"mockjs\"</span>: <span class=\"string\">\"^1.0.1-beta3\"</span>,</div><div class=\"line\">    <span class=\"string\">\"style-loader\"</span>: <span class=\"string\">\"^0.19.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"sw-precache-webpack-plugin\"</span>: <span class=\"string\">\"^0.11.4\"</span>,</div><div class=\"line\">    <span class=\"string\">\"url-loader\"</span>: <span class=\"string\">\"^0.5.9\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue-loader\"</span>: <span class=\"string\">\"^13.0.4\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue-style-loader\"</span>: <span class=\"string\">\"^3.0.3\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue-template-compiler\"</span>: <span class=\"string\">\"^2.4.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vuex-router-sync\"</span>: <span class=\"string\">\"^4.2.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"webpack\"</span>: <span class=\"string\">\"^3.5.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"webpack-dev-middleware\"</span>: <span class=\"string\">\"^1.12.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"webpack-hot-middleware\"</span>: <span class=\"string\">\"^2.18.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"webpack-merge\"</span>: <span class=\"string\">\"^4.1.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"webpack-node-externals\"</span>: <span class=\"string\">\"^1.6.0\"</span></div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h3><p></p>\n<p> LICENSE<br> README.md<br> build<br>    setup-dev-server.js<br>    vue-loader.config.js<br>    webpack.base.config.js<br>    webpack.client.config.js<br>    webpack.server.config.js<br> log<br>    err.log<br>    out.log<br> package.json<br> pmlog.json<br> server.js<br> src<br>     App.vue<br>     app.js<br>     assets<br>        images<br>        style<br>           css.less<br>        views<br>            index.css<br>     components<br>        Banner.vue<br>        BottomNav.vue<br>        FloorOne.vue<br>        Header.vue<br>     entry-client.js<br>     entry-server.js<br>     index.template.html<br>     public<br>        conf.js<br>        utils<br>            api.js<br>            confUtils.js<br>     router<br>        index.js<br>     static<br>        img<br>           favicon.ico<br>        js<br>            flexible.js<br>     store<br>        actions.js<br>        getters.js<br>        index.js<br>        modules<br>           Home.js<br>        mutationtypes.js<br>        state.js<br>     views<br>         index<br>             conf.js<br>             index.vue<br>             mock.js<br>             service.js  </p>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li>views.vueindex.jsmock.jsmockconf.js</li>\n<li>components </li>\n<li>router vue-router</li>\n<li>store action.js,getter.js,mutationtype.js</li>\n<li>public axiosapi</li>\n<li>staticwebpack</li>\n<li>app.js </li>\n<li>App.vue </li>\n<li>entry-cliententry-server</li>\n<li>index.template.html</li>\n</ul>\n<h4 id=\"app-js\"><a href=\"#app-js\" class=\"headerlink\" title=\"app.js\"></a>app.js</h4><p>vue<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'./index.vue'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">'./router'</span></div><div class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">'./store'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> Vue(&#123;</div><div class=\"line\">\tel: <span class=\"string\">'#app'</span>,</div><div class=\"line\">\tstore,</div><div class=\"line\">\trouter,</div><div class=\"line\">\trender: <span class=\"function\">(<span class=\"params\">h</span>) =&gt;</span> h(App)</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">vue</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">&gt; ,routerstore</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">webpack</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">'../views/index/index.vue'</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> (<span class=\"string\">'../views/index/index.vue'</span>)</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">routercreateRouter</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'vue-router'</span>;</div><div class=\"line\">Vue.use(Router)</div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createRouter</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Router(&#123;</div><div class=\"line\">        mode: <span class=\"string\">'history'</span>,</div><div class=\"line\">        routes: [&#123;</div><div class=\"line\">            name:<span class=\"string\">'Home'</span>,</div><div class=\"line\">            path: <span class=\"string\">'/'</span>,</div><div class=\"line\">            component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></div><div class=\"line\">                <span class=\"keyword\">import</span> (<span class=\"string\">'../views/index/index.vue'</span>)</div><div class=\"line\">        &#125;]</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">storecreateStore</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"comment\">// store.js</span></div><div class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Vuex <span class=\"keyword\">from</span> <span class=\"string\">'vuex'</span></div><div class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> actions <span class=\"keyword\">from</span> <span class=\"string\">'./actions'</span></div><div class=\"line\"><span class=\"keyword\">import</span> getters <span class=\"keyword\">from</span> <span class=\"string\">'./getters'</span></div><div class=\"line\"><span class=\"keyword\">import</span> modules <span class=\"keyword\">from</span> <span class=\"string\">'./modules/index'</span></div><div class=\"line\">Vue.use(Vuex)</div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createStore</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Vuex.Store(&#123;</div><div class=\"line\">    actions,</div><div class=\"line\">    getters,</div><div class=\"line\">    modules,</div><div class=\"line\">    strict: <span class=\"literal\">false</span></div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">routerstoreapp.jscreateAppapprouterstoreappvuevuex-router-sync(route state) storeapp.js</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></div><div class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'./App.vue'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; createRouter &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./router'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./store'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; sync &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vuex-router-sync'</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./assets/style/css.less'</span>);</div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createApp</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">//  router  store </span></div><div class=\"line\">  <span class=\"keyword\">const</span> router = createRouter()</div><div class=\"line\">  <span class=\"keyword\">const</span> store = createStore()</div><div class=\"line\">  <span class=\"comment\">// (route state) store</span></div><div class=\"line\">  sync(store, router)</div><div class=\"line\">  <span class=\"comment\">//  router  store </span></div><div class=\"line\">  <span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> Vue(&#123;</div><div class=\"line\">    router,</div><div class=\"line\">    store,</div><div class=\"line\">    render: <span class=\"function\"><span class=\"params\">h</span> =&gt;</span> h(App)</div><div class=\"line\">  &#125;)</div><div class=\"line\">  <span class=\"comment\">//  app, router  store</span></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123; app, router, store &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">#### entry-client.js</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">appcreateAppapprouterstore</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./app'</span></div><div class=\"line\"><span class=\"keyword\">const</span> &#123; app, router, store &#125; = createApp()</div></pre></td></tr></table></figure></p>\n<p>onReady</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./app'</span></div><div class=\"line\"><span class=\"keyword\">const</span> &#123; app, router, store &#125; = createApp()</div><div class=\"line\">router.onReady(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  app.$mount(<span class=\"string\">'#app'</span>)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>beforeResolverouter2.5.0router.beforeEach()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">router.beforeResolve(<span class=\"function\">(<span class=\"params\">to, <span class=\"keyword\">from</span>, next</span>) =&gt;</span> &#123;</div><div class=\"line\">\t<span class=\"comment\">// to  from  </span></div><div class=\"line\">\t<span class=\"comment\">// /</span></div><div class=\"line\">\t<span class=\"keyword\">const</span> matched = router.getMatchedComponents(to)</div><div class=\"line\">    <span class=\"keyword\">const</span> prevMatched = router.getMatchedComponents(<span class=\"keyword\">from</span>)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p> state  window.<strong>INITIAL_STATE</strong>  HTML  store <strong>INITIAL_STATE</strong> render  HTML <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// vuex</span></div><div class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.__INITIAL_STATE__) &#123;</div><div class=\"line\">  store.replaceState(<span class=\"built_in\">window</span>.__INITIAL_STATE__)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>Qbabeles6Promise<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./app'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Q <span class=\"keyword\">from</span> <span class=\"string\">'q'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></div><div class=\"line\"></div><div class=\"line\">Vue.mixin(&#123;</div><div class=\"line\">  beforeRouteUpdate (to, <span class=\"keyword\">from</span>, next) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> &#123; asyncData &#125; = <span class=\"keyword\">this</span>.$options</div><div class=\"line\">    <span class=\"keyword\">if</span> (asyncData) &#123;</div><div class=\"line\">      asyncData(&#123;</div><div class=\"line\">        store: <span class=\"keyword\">this</span>.$store,</div><div class=\"line\">        route: to</div><div class=\"line\">      &#125;).then(next).catch(next)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      next()</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> &#123; app, router, store &#125; = createApp()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// vuex</span></div><div class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.__INITIAL_STATE__) &#123;</div><div class=\"line\">  store.replaceState(<span class=\"built_in\">window</span>.__INITIAL_STATE__)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">router.onReady(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  router.beforeResolve(<span class=\"function\">(<span class=\"params\">to, <span class=\"keyword\">from</span>, next</span>) =&gt;</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> matched = router.getMatchedComponents(to)</div><div class=\"line\">      <span class=\"keyword\">const</span> prevMatched = router.getMatchedComponents(<span class=\"keyword\">from</span>)</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">let</span> diffed = <span class=\"literal\">false</span></div><div class=\"line\">      <span class=\"keyword\">const</span> activated = matched.filter(<span class=\"function\">(<span class=\"params\">c, i</span>) =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> diffed || (diffed = (prevMatched[i] !== c))</div><div class=\"line\">      &#125;)</div><div class=\"line\">      <span class=\"keyword\">if</span> (!activated.length) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> next()</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// (loading indicator)</span></div><div class=\"line\">      Q.all(activated.map(<span class=\"function\"><span class=\"params\">c</span> =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (c.asyncData) &#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> c.asyncData(&#123; store, <span class=\"attr\">route</span>: to &#125;)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;)).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// (loading indicator)</span></div><div class=\"line\">        next()</div><div class=\"line\">      &#125;).catch(next)</div><div class=\"line\">    &#125;)</div><div class=\"line\">    app.$mount(<span class=\"string\">'#app'</span>)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<h4 id=\"entry-server-js\"><a href=\"#entry-server-js\" class=\"headerlink\" title=\"entry-server.js\"></a>entry-server.js</h4><p>ajax<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//asyncDataajax</span></div><div class=\"line\"><span class=\"keyword\">if</span> (Component.asyncData) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> Component.asyncData(&#123;</div><div class=\"line\">    store,</div><div class=\"line\">    route: router.currentRoute</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./app'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Q <span class=\"keyword\">from</span> <span class=\"string\">'q'</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> context =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> &#123; app, router, store &#125; = createApp()</div><div class=\"line\">    router.push(context.url)</div><div class=\"line\">    router.onReady(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> matchedComponents = router.getMatchedComponents()</div><div class=\"line\">      <span class=\"keyword\">if</span> (!matchedComponents.length) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> reject(&#123; <span class=\"attr\">code</span>: <span class=\"number\">404</span> &#125;)</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">//  `asyncData()`</span></div><div class=\"line\">      Q.all(matchedComponents.map(<span class=\"function\"><span class=\"params\">Component</span> =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (Component.asyncData) &#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> Component.asyncData(&#123;</div><div class=\"line\">            store,</div><div class=\"line\">            route: router.currentRoute</div><div class=\"line\">          &#125;)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;)).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// (preFetch hook) resolve </span></div><div class=\"line\">        <span class=\"comment\">//  store </span></div><div class=\"line\">        <span class=\"comment\">// </span></div><div class=\"line\">        <span class=\"comment\">//  `template`  renderer </span></div><div class=\"line\">        <span class=\"comment\">//  `window.__INITIAL_STATE__` HTML</span></div><div class=\"line\">        context.state = store.state</div><div class=\"line\">        resolve(app)</div><div class=\"line\">      &#125;).catch(reject)</div><div class=\"line\">    &#125;, reject)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4\"></a>4</h3><p>src</p>\n<p><img src=\"/vue-ssr2/3.jpeg\" alt=\"\"></p>\n<p></p>\n<ul>\n<li>build webpack</li>\n<li>dist webpack</li>\n<li>log pm2</li>\n<li>server.js node</li>\n<li>pmlog.json pm2</li>\n</ul>\n<h4 id=\"server-js\"><a href=\"#server-js\" class=\"headerlink\" title=\"server.js\"></a>server.js</h4><p>server.jsnodeapi<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Vue = <span class=\"built_in\">require</span>(<span class=\"string\">'vue'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> LRU = <span class=\"built_in\">require</span>(<span class=\"string\">'lru-cache'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> &#123; createBundleRenderer &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-server-renderer'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> net = <span class=\"built_in\">require</span>(<span class=\"string\">'net'</span>)</div></pre></td></tr></table></figure></p>\n<p>index.template.htmlexpresswebpackdist</p>\n<p>production<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> template = fs.readFileSync(<span class=\"string\">'./src/index.template.html'</span>, <span class=\"string\">'utf-8'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> isProd = process.env.NODE_ENV === <span class=\"string\">'production'</span></div></pre></td></tr></table></figure></p>\n<p>vue-server-rendererdistcreateBundleRendererLRU<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> resolve = <span class=\"function\"><span class=\"params\">file</span> =&gt;</span> path.resolve(__dirname, file)</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createRenderer</span> (<span class=\"params\">bundle, options</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> createBundleRenderer(bundle, <span class=\"built_in\">Object</span>.assign(options, &#123;</div><div class=\"line\">    template,</div><div class=\"line\">    cache: LRU(&#123;</div><div class=\"line\">      max: <span class=\"number\">1000</span>,</div><div class=\"line\">      maxAge: <span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">15</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    basedir: resolve(<span class=\"string\">'./dist'</span>),</div><div class=\"line\">    runInNewContext: <span class=\"literal\">false</span></div><div class=\"line\">  &#125;))</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">let</span> renderer;</div><div class=\"line\"><span class=\"keyword\">let</span> readyPromise</div><div class=\"line\"><span class=\"keyword\">if</span> (isProd) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> bundle = <span class=\"built_in\">require</span>(<span class=\"string\">'./dist/vue-ssr-server-bundle.json'</span>)</div><div class=\"line\">  <span class=\"keyword\">const</span> clientManifest = <span class=\"built_in\">require</span>(<span class=\"string\">'./dist/vue-ssr-client-manifest.json'</span>)</div><div class=\"line\">  renderer = createRenderer(bundle, &#123;</div><div class=\"line\">    clientManifest</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">  readyPromise = <span class=\"built_in\">require</span>(<span class=\"string\">'./build/setup-dev-server'</span>)(server, (bundle, options) =&gt; &#123;</div><div class=\"line\">    renderer = createRenderer(bundle, options)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>express<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> server = express()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//dist</span></div><div class=\"line\"><span class=\"keyword\">const</span> serve = <span class=\"function\">(<span class=\"params\">path, cache</span>) =&gt;</span> express.static(resolve(path), &#123;</div><div class=\"line\">  maxAge: cache &amp;&amp; isProd ? <span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span> * <span class=\"number\">30</span> : <span class=\"number\">0</span></div><div class=\"line\">&#125;)</div><div class=\"line\">server.use(<span class=\"string\">'/dist'</span>, serve(<span class=\"string\">'./dist'</span>, <span class=\"literal\">true</span>))</div><div class=\"line\">server.get(<span class=\"string\">'*'</span>, (req, res) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> context = &#123;</div><div class=\"line\">    title: <span class=\"string\">'hello'</span>,</div><div class=\"line\">    url: req.url</div><div class=\"line\">  &#125;</div><div class=\"line\">  renderer.renderToString(context, (err, html) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</div><div class=\"line\">      res.status(<span class=\"number\">500</span>).end(<span class=\"string\">'Internal Server Error'</span>)</div><div class=\"line\">      <span class=\"keyword\">return</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    res.end(html)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">probe</span>(<span class=\"params\">port, callback</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> servers = net.createServer().listen(port)</div><div class=\"line\">    <span class=\"keyword\">let</span> calledOnce = <span class=\"literal\">false</span></div><div class=\"line\">    <span class=\"keyword\">let</span> timeoutRef = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        calledOnce = <span class=\"literal\">true</span></div><div class=\"line\">        callback(<span class=\"literal\">false</span>, port)</div><div class=\"line\">    &#125;, <span class=\"number\">2000</span>)</div><div class=\"line\">    timeoutRef.unref()</div><div class=\"line\">    <span class=\"keyword\">let</span> connected = <span class=\"literal\">false</span></div><div class=\"line\">    servers.on(<span class=\"string\">'listening'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        clearTimeout(timeoutRef)</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (servers)</div><div class=\"line\">            servers.close()</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (!calledOnce) &#123;</div><div class=\"line\">            calledOnce = <span class=\"literal\">true</span></div><div class=\"line\">            callback(<span class=\"literal\">true</span>, port)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">    servers.on(<span class=\"string\">'error'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">        clearTimeout(timeoutRef)</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">let</span> result = <span class=\"literal\">true</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (err.code === <span class=\"string\">'EADDRINUSE'</span>)</div><div class=\"line\">            result = <span class=\"literal\">false</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (!calledOnce) &#123;</div><div class=\"line\">            calledOnce = <span class=\"literal\">true</span></div><div class=\"line\">            callback(result, port)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">const</span> checkPortPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</div><div class=\"line\">    (<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">serverport</span>(<span class=\"params\">_port</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">let</span> pt = _port || <span class=\"number\">8080</span>;</div><div class=\"line\">        probe(pt, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">bl, _pt</span>) </span>&#123;</div><div class=\"line\">            <span class=\"comment\">//  bl false</span></div><div class=\"line\">            <span class=\"comment\">// _pt</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (bl === <span class=\"literal\">true</span>) &#123;</div><div class=\"line\">                <span class=\"comment\">// console.log(\"\\n  Static file server running at\" + \"\\n\\n=&gt; http://localhost:\" + _pt + '\\n');</span></div><div class=\"line\">                resolve(_pt);</div><div class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                serverport(_pt + <span class=\"number\">1</span>)</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;)()</div><div class=\"line\"></div><div class=\"line\">&#125;)</div><div class=\"line\">checkPortPromise.then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</div><div class=\"line\">    uri = <span class=\"string\">'http://localhost:'</span> + data;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>+uri)</div><div class=\"line\">    server.listen(data);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>webpackdemo<br><img src=\"/vue-ssr2/4.jpeg\" alt=\"demo\"></p>\n<blockquote>\n<p>mockjsaxios</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p>vuevuevue<font color=\"#0078d8\">vue-hackernews-2.0</font>,</p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p>node6.10.1npm3.10.10</p>\n<p></p>","more":"<p>1vue 2.4.2<br>2vuex 2.3.1<br>3vue-router 2.7.0<br>4vue-server-renderer 2.4.2<br>5express 4.15.4<br>6axios 0.16.2<br>7qs 6.5.0<br>8q <a href=\"https://github.com/kriskowal/q.git\" target=\"_blank\" rel=\"external\">https://github.com/kriskowal/q.git</a><br>9webpack 3.5.0<br>10mockjs 1.0.1-beta3<br>11babel </p>\n<p>npm initpackage.json</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"dependencies\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"axios\"</span>: <span class=\"string\">\"^0.16.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"es6-promise\"</span>: <span class=\"string\">\"^4.1.1\"</span>,</div><div class=\"line\">    <span class=\"string\">\"express\"</span>: <span class=\"string\">\"^4.15.4\"</span>,</div><div class=\"line\">    <span class=\"string\">\"lodash\"</span>: <span class=\"string\">\"^4.17.4\"</span>,</div><div class=\"line\">    <span class=\"string\">\"q\"</span>: <span class=\"string\">\"git+https://github.com/kriskowal/q.git\"</span>,</div><div class=\"line\">    <span class=\"string\">\"qs\"</span>: <span class=\"string\">\"^6.5.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue\"</span>: <span class=\"string\">\"^2.4.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue-router\"</span>: <span class=\"string\">\"^2.7.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue-server-renderer\"</span>: <span class=\"string\">\"^2.4.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vuex\"</span>: <span class=\"string\">\"^2.3.1\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"string\">\"devDependencies\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"autoprefixer\"</span>: <span class=\"string\">\"^7.1.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-core\"</span>: <span class=\"string\">\"^6.25.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-loader\"</span>: <span class=\"string\">\"^7.1.1\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-plugin-syntax-dynamic-import\"</span>: <span class=\"string\">\"^6.18.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-plugin-transform-runtime\"</span>: <span class=\"string\">\"^6.22.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-preset-env\"</span>: <span class=\"string\">\"^1.6.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"babel-preset-stage-2\"</span>: <span class=\"string\">\"^6.22.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"compression\"</span>: <span class=\"string\">\"^1.7.1\"</span>,</div><div class=\"line\">    <span class=\"string\">\"cross-env\"</span>: <span class=\"string\">\"^5.0.5\"</span>,</div><div class=\"line\">    <span class=\"string\">\"css-loader\"</span>: <span class=\"string\">\"^0.28.4\"</span>,</div><div class=\"line\">    <span class=\"string\">\"extract-text-webpack-plugin\"</span>: <span class=\"string\">\"^3.0.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"file-loader\"</span>: <span class=\"string\">\"^0.11.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"friendly-errors-webpack-plugin\"</span>: <span class=\"string\">\"^1.6.1\"</span>,</div><div class=\"line\">    <span class=\"string\">\"glob\"</span>: <span class=\"string\">\"^7.1.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"less\"</span>: <span class=\"string\">\"^2.7.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"less-loader\"</span>: <span class=\"string\">\"^2.2.3\"</span>,</div><div class=\"line\">    <span class=\"string\">\"lru-cache\"</span>: <span class=\"string\">\"^4.1.1\"</span>,</div><div class=\"line\">    <span class=\"string\">\"mockjs\"</span>: <span class=\"string\">\"^1.0.1-beta3\"</span>,</div><div class=\"line\">    <span class=\"string\">\"style-loader\"</span>: <span class=\"string\">\"^0.19.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"sw-precache-webpack-plugin\"</span>: <span class=\"string\">\"^0.11.4\"</span>,</div><div class=\"line\">    <span class=\"string\">\"url-loader\"</span>: <span class=\"string\">\"^0.5.9\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue-loader\"</span>: <span class=\"string\">\"^13.0.4\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue-style-loader\"</span>: <span class=\"string\">\"^3.0.3\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vue-template-compiler\"</span>: <span class=\"string\">\"^2.4.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"vuex-router-sync\"</span>: <span class=\"string\">\"^4.2.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"webpack\"</span>: <span class=\"string\">\"^3.5.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"webpack-dev-middleware\"</span>: <span class=\"string\">\"^1.12.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"webpack-hot-middleware\"</span>: <span class=\"string\">\"^2.18.2\"</span>,</div><div class=\"line\">    <span class=\"string\">\"webpack-merge\"</span>: <span class=\"string\">\"^4.1.0\"</span>,</div><div class=\"line\">    <span class=\"string\">\"webpack-node-externals\"</span>: <span class=\"string\">\"^1.6.0\"</span></div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h3><p></p>\n<p> LICENSE<br> README.md<br> build<br>    setup-dev-server.js<br>    vue-loader.config.js<br>    webpack.base.config.js<br>    webpack.client.config.js<br>    webpack.server.config.js<br> log<br>    err.log<br>    out.log<br> package.json<br> pmlog.json<br> server.js<br> src<br>     App.vue<br>     app.js<br>     assets<br>        images<br>        style<br>           css.less<br>        views<br>            index.css<br>     components<br>        Banner.vue<br>        BottomNav.vue<br>        FloorOne.vue<br>        Header.vue<br>     entry-client.js<br>     entry-server.js<br>     index.template.html<br>     public<br>        conf.js<br>        utils<br>            api.js<br>            confUtils.js<br>     router<br>        index.js<br>     static<br>        img<br>           favicon.ico<br>        js<br>            flexible.js<br>     store<br>        actions.js<br>        getters.js<br>        index.js<br>        modules<br>           Home.js<br>        mutationtypes.js<br>        state.js<br>     views<br>         index<br>             conf.js<br>             index.vue<br>             mock.js<br>             service.js  </p>\n<blockquote>\n<p></p>\n</blockquote>\n<ul>\n<li>views.vueindex.jsmock.jsmockconf.js</li>\n<li>components </li>\n<li>router vue-router</li>\n<li>store action.js,getter.js,mutationtype.js</li>\n<li>public axiosapi</li>\n<li>staticwebpack</li>\n<li>app.js </li>\n<li>App.vue </li>\n<li>entry-cliententry-server</li>\n<li>index.template.html</li>\n</ul>\n<h4 id=\"app-js\"><a href=\"#app-js\" class=\"headerlink\" title=\"app.js\"></a>app.js</h4><p>vue<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'./index.vue'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">'./router'</span></div><div class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">'./store'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> Vue(&#123;</div><div class=\"line\">\tel: <span class=\"string\">'#app'</span>,</div><div class=\"line\">\tstore,</div><div class=\"line\">\trouter,</div><div class=\"line\">\trender: <span class=\"function\">(<span class=\"params\">h</span>) =&gt;</span> h(App)</div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">vue</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">&gt; ,routerstore</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">webpack</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">'../views/index/index.vue'</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> (<span class=\"string\">'../views/index/index.vue'</span>)</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">routercreateRouter</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'vue-router'</span>;</div><div class=\"line\">Vue.use(Router)</div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createRouter</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Router(&#123;</div><div class=\"line\">        mode: <span class=\"string\">'history'</span>,</div><div class=\"line\">        routes: [&#123;</div><div class=\"line\">            name:<span class=\"string\">'Home'</span>,</div><div class=\"line\">            path: <span class=\"string\">'/'</span>,</div><div class=\"line\">            component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></div><div class=\"line\">                <span class=\"keyword\">import</span> (<span class=\"string\">'../views/index/index.vue'</span>)</div><div class=\"line\">        &#125;]</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">storecreateStore</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"comment\">// store.js</span></div><div class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Vuex <span class=\"keyword\">from</span> <span class=\"string\">'vuex'</span></div><div class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> actions <span class=\"keyword\">from</span> <span class=\"string\">'./actions'</span></div><div class=\"line\"><span class=\"keyword\">import</span> getters <span class=\"keyword\">from</span> <span class=\"string\">'./getters'</span></div><div class=\"line\"><span class=\"keyword\">import</span> modules <span class=\"keyword\">from</span> <span class=\"string\">'./modules/index'</span></div><div class=\"line\">Vue.use(Vuex)</div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createStore</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Vuex.Store(&#123;</div><div class=\"line\">    actions,</div><div class=\"line\">    getters,</div><div class=\"line\">    modules,</div><div class=\"line\">    strict: <span class=\"literal\">false</span></div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">routerstoreapp.jscreateAppapprouterstoreappvuevuex-router-sync(route state) storeapp.js</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></div><div class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'./App.vue'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; createRouter &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./router'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./store'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; sync &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vuex-router-sync'</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./assets/style/css.less'</span>);</div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createApp</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">//  router  store </span></div><div class=\"line\">  <span class=\"keyword\">const</span> router = createRouter()</div><div class=\"line\">  <span class=\"keyword\">const</span> store = createStore()</div><div class=\"line\">  <span class=\"comment\">// (route state) store</span></div><div class=\"line\">  sync(store, router)</div><div class=\"line\">  <span class=\"comment\">//  router  store </span></div><div class=\"line\">  <span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> Vue(&#123;</div><div class=\"line\">    router,</div><div class=\"line\">    store,</div><div class=\"line\">    render: <span class=\"function\"><span class=\"params\">h</span> =&gt;</span> h(App)</div><div class=\"line\">  &#125;)</div><div class=\"line\">  <span class=\"comment\">//  app, router  store</span></div><div class=\"line\">  <span class=\"keyword\">return</span> &#123; app, router, store &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">#### entry-client.js</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">appcreateAppapprouterstore</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./app'</span></div><div class=\"line\"><span class=\"keyword\">const</span> &#123; app, router, store &#125; = createApp()</div></pre></td></tr></table></figure></p>\n<p>onReady</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./app'</span></div><div class=\"line\"><span class=\"keyword\">const</span> &#123; app, router, store &#125; = createApp()</div><div class=\"line\">router.onReady(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  app.$mount(<span class=\"string\">'#app'</span>)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>beforeResolverouter2.5.0router.beforeEach()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">router.beforeResolve(<span class=\"function\">(<span class=\"params\">to, <span class=\"keyword\">from</span>, next</span>) =&gt;</span> &#123;</div><div class=\"line\">\t<span class=\"comment\">// to  from  </span></div><div class=\"line\">\t<span class=\"comment\">// /</span></div><div class=\"line\">\t<span class=\"keyword\">const</span> matched = router.getMatchedComponents(to)</div><div class=\"line\">    <span class=\"keyword\">const</span> prevMatched = router.getMatchedComponents(<span class=\"keyword\">from</span>)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p> state  window.<strong>INITIAL_STATE</strong>  HTML  store <strong>INITIAL_STATE</strong> render  HTML <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// vuex</span></div><div class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.__INITIAL_STATE__) &#123;</div><div class=\"line\">  store.replaceState(<span class=\"built_in\">window</span>.__INITIAL_STATE__)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>Qbabeles6Promise<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./app'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Q <span class=\"keyword\">from</span> <span class=\"string\">'q'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></div><div class=\"line\"></div><div class=\"line\">Vue.mixin(&#123;</div><div class=\"line\">  beforeRouteUpdate (to, <span class=\"keyword\">from</span>, next) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> &#123; asyncData &#125; = <span class=\"keyword\">this</span>.$options</div><div class=\"line\">    <span class=\"keyword\">if</span> (asyncData) &#123;</div><div class=\"line\">      asyncData(&#123;</div><div class=\"line\">        store: <span class=\"keyword\">this</span>.$store,</div><div class=\"line\">        route: to</div><div class=\"line\">      &#125;).then(next).catch(next)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      next()</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> &#123; app, router, store &#125; = createApp()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// vuex</span></div><div class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.__INITIAL_STATE__) &#123;</div><div class=\"line\">  store.replaceState(<span class=\"built_in\">window</span>.__INITIAL_STATE__)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">router.onReady(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  router.beforeResolve(<span class=\"function\">(<span class=\"params\">to, <span class=\"keyword\">from</span>, next</span>) =&gt;</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> matched = router.getMatchedComponents(to)</div><div class=\"line\">      <span class=\"keyword\">const</span> prevMatched = router.getMatchedComponents(<span class=\"keyword\">from</span>)</div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"comment\">// </span></div><div class=\"line\">      <span class=\"keyword\">let</span> diffed = <span class=\"literal\">false</span></div><div class=\"line\">      <span class=\"keyword\">const</span> activated = matched.filter(<span class=\"function\">(<span class=\"params\">c, i</span>) =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> diffed || (diffed = (prevMatched[i] !== c))</div><div class=\"line\">      &#125;)</div><div class=\"line\">      <span class=\"keyword\">if</span> (!activated.length) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> next()</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">// (loading indicator)</span></div><div class=\"line\">      Q.all(activated.map(<span class=\"function\"><span class=\"params\">c</span> =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (c.asyncData) &#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> c.asyncData(&#123; store, <span class=\"attr\">route</span>: to &#125;)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;)).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// (loading indicator)</span></div><div class=\"line\">        next()</div><div class=\"line\">      &#125;).catch(next)</div><div class=\"line\">    &#125;)</div><div class=\"line\">    app.$mount(<span class=\"string\">'#app'</span>)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<h4 id=\"entry-server-js\"><a href=\"#entry-server-js\" class=\"headerlink\" title=\"entry-server.js\"></a>entry-server.js</h4><p>ajax<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//asyncDataajax</span></div><div class=\"line\"><span class=\"keyword\">if</span> (Component.asyncData) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> Component.asyncData(&#123;</div><div class=\"line\">    store,</div><div class=\"line\">    route: router.currentRoute</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./app'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Q <span class=\"keyword\">from</span> <span class=\"string\">'q'</span></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> context =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> &#123; app, router, store &#125; = createApp()</div><div class=\"line\">    router.push(context.url)</div><div class=\"line\">    router.onReady(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> matchedComponents = router.getMatchedComponents()</div><div class=\"line\">      <span class=\"keyword\">if</span> (!matchedComponents.length) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> reject(&#123; <span class=\"attr\">code</span>: <span class=\"number\">404</span> &#125;)</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">//  `asyncData()`</span></div><div class=\"line\">      Q.all(matchedComponents.map(<span class=\"function\"><span class=\"params\">Component</span> =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (Component.asyncData) &#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> Component.asyncData(&#123;</div><div class=\"line\">            store,</div><div class=\"line\">            route: router.currentRoute</div><div class=\"line\">          &#125;)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;)).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// (preFetch hook) resolve </span></div><div class=\"line\">        <span class=\"comment\">//  store </span></div><div class=\"line\">        <span class=\"comment\">// </span></div><div class=\"line\">        <span class=\"comment\">//  `template`  renderer </span></div><div class=\"line\">        <span class=\"comment\">//  `window.__INITIAL_STATE__` HTML</span></div><div class=\"line\">        context.state = store.state</div><div class=\"line\">        resolve(app)</div><div class=\"line\">      &#125;).catch(reject)</div><div class=\"line\">    &#125;, reject)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4\"></a>4</h3><p>src</p>\n<p><img src=\"/vue-ssr2/3.jpeg\" alt=\"\"></p>\n<p></p>\n<ul>\n<li>build webpack</li>\n<li>dist webpack</li>\n<li>log pm2</li>\n<li>server.js node</li>\n<li>pmlog.json pm2</li>\n</ul>\n<h4 id=\"server-js\"><a href=\"#server-js\" class=\"headerlink\" title=\"server.js\"></a>server.js</h4><p>server.jsnodeapi<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Vue = <span class=\"built_in\">require</span>(<span class=\"string\">'vue'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> LRU = <span class=\"built_in\">require</span>(<span class=\"string\">'lru-cache'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> &#123; createBundleRenderer &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-server-renderer'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> net = <span class=\"built_in\">require</span>(<span class=\"string\">'net'</span>)</div></pre></td></tr></table></figure></p>\n<p>index.template.htmlexpresswebpackdist</p>\n<p>production<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> template = fs.readFileSync(<span class=\"string\">'./src/index.template.html'</span>, <span class=\"string\">'utf-8'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> isProd = process.env.NODE_ENV === <span class=\"string\">'production'</span></div></pre></td></tr></table></figure></p>\n<p>vue-server-rendererdistcreateBundleRendererLRU<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> resolve = <span class=\"function\"><span class=\"params\">file</span> =&gt;</span> path.resolve(__dirname, file)</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createRenderer</span> (<span class=\"params\">bundle, options</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> createBundleRenderer(bundle, <span class=\"built_in\">Object</span>.assign(options, &#123;</div><div class=\"line\">    template,</div><div class=\"line\">    cache: LRU(&#123;</div><div class=\"line\">      max: <span class=\"number\">1000</span>,</div><div class=\"line\">      maxAge: <span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">15</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    basedir: resolve(<span class=\"string\">'./dist'</span>),</div><div class=\"line\">    runInNewContext: <span class=\"literal\">false</span></div><div class=\"line\">  &#125;))</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">let</span> renderer;</div><div class=\"line\"><span class=\"keyword\">let</span> readyPromise</div><div class=\"line\"><span class=\"keyword\">if</span> (isProd) &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> bundle = <span class=\"built_in\">require</span>(<span class=\"string\">'./dist/vue-ssr-server-bundle.json'</span>)</div><div class=\"line\">  <span class=\"keyword\">const</span> clientManifest = <span class=\"built_in\">require</span>(<span class=\"string\">'./dist/vue-ssr-client-manifest.json'</span>)</div><div class=\"line\">  renderer = createRenderer(bundle, &#123;</div><div class=\"line\">    clientManifest</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">  readyPromise = <span class=\"built_in\">require</span>(<span class=\"string\">'./build/setup-dev-server'</span>)(server, (bundle, options) =&gt; &#123;</div><div class=\"line\">    renderer = createRenderer(bundle, options)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>express<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> server = express()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//dist</span></div><div class=\"line\"><span class=\"keyword\">const</span> serve = <span class=\"function\">(<span class=\"params\">path, cache</span>) =&gt;</span> express.static(resolve(path), &#123;</div><div class=\"line\">  maxAge: cache &amp;&amp; isProd ? <span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span> * <span class=\"number\">30</span> : <span class=\"number\">0</span></div><div class=\"line\">&#125;)</div><div class=\"line\">server.use(<span class=\"string\">'/dist'</span>, serve(<span class=\"string\">'./dist'</span>, <span class=\"literal\">true</span>))</div><div class=\"line\">server.get(<span class=\"string\">'*'</span>, (req, res) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> context = &#123;</div><div class=\"line\">    title: <span class=\"string\">'hello'</span>,</div><div class=\"line\">    url: req.url</div><div class=\"line\">  &#125;</div><div class=\"line\">  renderer.renderToString(context, (err, html) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</div><div class=\"line\">      res.status(<span class=\"number\">500</span>).end(<span class=\"string\">'Internal Server Error'</span>)</div><div class=\"line\">      <span class=\"keyword\">return</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    res.end(html)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">probe</span>(<span class=\"params\">port, callback</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> servers = net.createServer().listen(port)</div><div class=\"line\">    <span class=\"keyword\">let</span> calledOnce = <span class=\"literal\">false</span></div><div class=\"line\">    <span class=\"keyword\">let</span> timeoutRef = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        calledOnce = <span class=\"literal\">true</span></div><div class=\"line\">        callback(<span class=\"literal\">false</span>, port)</div><div class=\"line\">    &#125;, <span class=\"number\">2000</span>)</div><div class=\"line\">    timeoutRef.unref()</div><div class=\"line\">    <span class=\"keyword\">let</span> connected = <span class=\"literal\">false</span></div><div class=\"line\">    servers.on(<span class=\"string\">'listening'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        clearTimeout(timeoutRef)</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (servers)</div><div class=\"line\">            servers.close()</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (!calledOnce) &#123;</div><div class=\"line\">            calledOnce = <span class=\"literal\">true</span></div><div class=\"line\">            callback(<span class=\"literal\">true</span>, port)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">    servers.on(<span class=\"string\">'error'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">        clearTimeout(timeoutRef)</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">let</span> result = <span class=\"literal\">true</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (err.code === <span class=\"string\">'EADDRINUSE'</span>)</div><div class=\"line\">            result = <span class=\"literal\">false</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (!calledOnce) &#123;</div><div class=\"line\">            calledOnce = <span class=\"literal\">true</span></div><div class=\"line\">            callback(result, port)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">const</span> checkPortPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</div><div class=\"line\">    (<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">serverport</span>(<span class=\"params\">_port</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">let</span> pt = _port || <span class=\"number\">8080</span>;</div><div class=\"line\">        probe(pt, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">bl, _pt</span>) </span>&#123;</div><div class=\"line\">            <span class=\"comment\">//  bl false</span></div><div class=\"line\">            <span class=\"comment\">// _pt</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (bl === <span class=\"literal\">true</span>) &#123;</div><div class=\"line\">                <span class=\"comment\">// console.log(\"\\n  Static file server running at\" + \"\\n\\n=&gt; http://localhost:\" + _pt + '\\n');</span></div><div class=\"line\">                resolve(_pt);</div><div class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                serverport(_pt + <span class=\"number\">1</span>)</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;)()</div><div class=\"line\"></div><div class=\"line\">&#125;)</div><div class=\"line\">checkPortPromise.then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</div><div class=\"line\">    uri = <span class=\"string\">'http://localhost:'</span> + data;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">''</span>+uri)</div><div class=\"line\">    server.listen(data);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>webpackdemo<br><img src=\"/vue-ssr2/4.jpeg\" alt=\"demo\"></p>\n<blockquote>\n<p>mockjsaxios</p>\n</blockquote>"},{"title":"vue-ssr()","comments":1,"toc":true,"date":"2017-06-05T12:09:11.000Z","_content":"\n### 1\n\naxiosajaxmockjs\n\n### 2\n\nnpmaxiosmockjs,mockjs--save-devmockmockmockRap\n\n``` javascript\nnpm install axios --save\nnpm install mockjs --save-dev\n``` \n\n<!-- more -->\n\n### 3axios\n\n>\n\n``` javascript\naxios.request(config);\naxios.get(url[,config]);\naxios.delete(url[,config]);\naxios.head(url[,config]);\naxios.post(url[,data[,config]]);\naxios.put(url[,data[,config]])\naxios.patch(url[,data[,config]])\n``` \n\n><a href=\"/2017-05-02/\" target=\"_blank\" >axios</a>\n\napi.js\n\n``` javascript\nimport axios from 'axios'\nimport qs from 'qs'\nimport Q from 'q'\n/**\n *  promise \n */\nrequire('es6-promise').polyfill();\nimport C from '../conf'\n\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8'\naxios.defaults.withCredentials = true\n\nfunction ajax(url, type, options) {\n\n  return Q.Promise((resolve, reject) => {\n    axios({\n        method: type,\n        url: C.HOST + url,\n        params: type === 'get' ? options : null,\n        data: type !== 'get' ? qs.stringify(options) : null\n      })\n      .then((result) => {\n        if (result && result.status === 401) {\n          // location.href = '/views/401.html'\n        }\n        if (result && result.status === 200) {\n          if (result.data.code === 200) {\n            resolve(result.data.data);\n          } else if (result.data.code === 401) {\n            reject({\n              nopms: true,\n              msg: result.data.msg\n            });\n          } else {\n            reject({\n              error: true,\n              msg: result.data.msg\n            });\n          }\n        } else {\n          reject({\n            errno: result.errno,\n            msg: result.msg\n          });\n        }\n      })\n      .catch(function(error) {\n        console.log(error, url);\n      });\n  })\n}\n\nconst config = {\n  get(url, options) {\n    const _self = this;\n    return Q.Promise((resolve, reject) => {\n      ajax(url, 'get', options)\n        .then((data) => {\n          resolve(data);\n        }, (error) => {\n          reject(error);\n        });\n    })\n  },\n\n  post(url, options) {\n    const _self = this;\n    return Q.Promise((resolve, reject) => {\n      ajax(url, 'post', options)\n        .then((data) => {\n          resolve(data);\n        }, (error) => {\n          reject(error);\n        });\n    })\n  },\n\n  put(url, options) {\n    const _self = this;\n    return Q.Promise((resolve, reject) => {\n      ajax(url, 'put', options)\n        .then((data) => {\n          resolve(data);\n        }, (error) => {\n          reject(error);\n        });\n    })\n  },\n\n  delete(url, options) {\n    const _self = this;\n    return Q.Promise((resolve, reject) => {\n      ajax(url, 'delete', options)\n        .then((data) => {\n          resolve(data);\n        }, (error) => {\n          reject(error);\n        });\n    })\n  },\n\n  jsonp(url, options) {\n    const _self = this;\n    return Q.Promise((resolve, reject) => {\n      ajax(url, 'jsonp', options)\n        .then((data) => {\n          resolve(data);\n        }, (error) => {\n          reject(error);\n        });\n    })\n  }\n};\n\nexport default config;\n```\n\n>mockjs\n\n\n1publicconf.jsurl\n``` javascript\nmodule.exports = {\n    HOST: \"http://www.xxx.com\",\n    DEBUGMOCK: true\n};\n```\n\n2views/indexconf.jsmockmock\n``` javascript\nconst PAGEMOCK = true;\nconst MODULECONF = {\n  index: {\n    NAME: '',\n    MOCK: true,\n    API: {\n      GET: '/api/home',\n    }\n  }\n};\n```\n\n3mockjsmock\n``` javascript\nimport Mock from 'mockjs';\nconst mData = {\n  index: {\n    API: {\n      GET: {\n        \"code\": 200,\n        \"data\": {\n          \"pin\": 'wangqi',\n          \"name\": ''\n        }\n      }\n    }\n  }\n}\n```\n\ngithub<a href=\"https://github.com/wqzwh/wq-vue-ssr\" target=\"_blank\"></a>\n","source":"_posts/vue-ssr3.md","raw":"---\ntitle: vue-ssr()\ncomments: true\ntoc: true\ndate: 2017-06-05 20:09:11\ntags: \n    - 'javascript'\n    - 'vue'\n---\n\n### 1\n\naxiosajaxmockjs\n\n### 2\n\nnpmaxiosmockjs,mockjs--save-devmockmockmockRap\n\n``` javascript\nnpm install axios --save\nnpm install mockjs --save-dev\n``` \n\n<!-- more -->\n\n### 3axios\n\n>\n\n``` javascript\naxios.request(config);\naxios.get(url[,config]);\naxios.delete(url[,config]);\naxios.head(url[,config]);\naxios.post(url[,data[,config]]);\naxios.put(url[,data[,config]])\naxios.patch(url[,data[,config]])\n``` \n\n><a href=\"/2017-05-02/\" target=\"_blank\" >axios</a>\n\napi.js\n\n``` javascript\nimport axios from 'axios'\nimport qs from 'qs'\nimport Q from 'q'\n/**\n *  promise \n */\nrequire('es6-promise').polyfill();\nimport C from '../conf'\n\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8'\naxios.defaults.withCredentials = true\n\nfunction ajax(url, type, options) {\n\n  return Q.Promise((resolve, reject) => {\n    axios({\n        method: type,\n        url: C.HOST + url,\n        params: type === 'get' ? options : null,\n        data: type !== 'get' ? qs.stringify(options) : null\n      })\n      .then((result) => {\n        if (result && result.status === 401) {\n          // location.href = '/views/401.html'\n        }\n        if (result && result.status === 200) {\n          if (result.data.code === 200) {\n            resolve(result.data.data);\n          } else if (result.data.code === 401) {\n            reject({\n              nopms: true,\n              msg: result.data.msg\n            });\n          } else {\n            reject({\n              error: true,\n              msg: result.data.msg\n            });\n          }\n        } else {\n          reject({\n            errno: result.errno,\n            msg: result.msg\n          });\n        }\n      })\n      .catch(function(error) {\n        console.log(error, url);\n      });\n  })\n}\n\nconst config = {\n  get(url, options) {\n    const _self = this;\n    return Q.Promise((resolve, reject) => {\n      ajax(url, 'get', options)\n        .then((data) => {\n          resolve(data);\n        }, (error) => {\n          reject(error);\n        });\n    })\n  },\n\n  post(url, options) {\n    const _self = this;\n    return Q.Promise((resolve, reject) => {\n      ajax(url, 'post', options)\n        .then((data) => {\n          resolve(data);\n        }, (error) => {\n          reject(error);\n        });\n    })\n  },\n\n  put(url, options) {\n    const _self = this;\n    return Q.Promise((resolve, reject) => {\n      ajax(url, 'put', options)\n        .then((data) => {\n          resolve(data);\n        }, (error) => {\n          reject(error);\n        });\n    })\n  },\n\n  delete(url, options) {\n    const _self = this;\n    return Q.Promise((resolve, reject) => {\n      ajax(url, 'delete', options)\n        .then((data) => {\n          resolve(data);\n        }, (error) => {\n          reject(error);\n        });\n    })\n  },\n\n  jsonp(url, options) {\n    const _self = this;\n    return Q.Promise((resolve, reject) => {\n      ajax(url, 'jsonp', options)\n        .then((data) => {\n          resolve(data);\n        }, (error) => {\n          reject(error);\n        });\n    })\n  }\n};\n\nexport default config;\n```\n\n>mockjs\n\n\n1publicconf.jsurl\n``` javascript\nmodule.exports = {\n    HOST: \"http://www.xxx.com\",\n    DEBUGMOCK: true\n};\n```\n\n2views/indexconf.jsmockmock\n``` javascript\nconst PAGEMOCK = true;\nconst MODULECONF = {\n  index: {\n    NAME: '',\n    MOCK: true,\n    API: {\n      GET: '/api/home',\n    }\n  }\n};\n```\n\n3mockjsmock\n``` javascript\nimport Mock from 'mockjs';\nconst mData = {\n  index: {\n    API: {\n      GET: {\n        \"code\": 200,\n        \"data\": {\n          \"pin\": 'wangqi',\n          \"name\": ''\n        }\n      }\n    }\n  }\n}\n```\n\ngithub<a href=\"https://github.com/wqzwh/wq-vue-ssr\" target=\"_blank\"></a>\n","slug":"vue-ssr3","published":1,"updated":"2018-02-10T09:08:00.902Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbc001jfdld34tv9718","content":"<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p>axiosajaxmockjs</p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p>npmaxiosmockjs,mockjssave-devmockmockmockRap</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install axios --save</div><div class=\"line\">npm install mockjs --save-dev</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">&lt;!-- more --&gt;</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">### 3axios</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">&gt;</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\">axios.request(config);</div><div class=\"line\">axios.get(url[,config]);</div><div class=\"line\">axios.delete(url[,config]);</div><div class=\"line\">axios.head(url[,config]);</div><div class=\"line\">axios.post(url[,data[,config]]);</div><div class=\"line\">axios.put(url[,data[,config]])</div><div class=\"line\">axios.patch(url[,data[,config]])</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">&gt;&lt;a href=\"/2017-05-02/\" target=\"_blank\" &gt;axios&lt;/a&gt;</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">api.js</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span></div><div class=\"line\"><span class=\"keyword\">import</span> qs <span class=\"keyword\">from</span> <span class=\"string\">'qs'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Q <span class=\"keyword\">from</span> <span class=\"string\">'q'</span></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> *  promise </span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'es6-promise'</span>).polyfill();</div><div class=\"line\"><span class=\"keyword\">import</span> C <span class=\"keyword\">from</span> <span class=\"string\">'../conf'</span></div><div class=\"line\"></div><div class=\"line\">axios.defaults.headers.post[<span class=\"string\">'Content-Type'</span>] = <span class=\"string\">'application/x-www-form-urlencoded; charset=UTF-8'</span></div><div class=\"line\">axios.defaults.withCredentials = <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">url, type, options</span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">    axios(&#123;</div><div class=\"line\">        method: type,</div><div class=\"line\">        url: C.HOST + url,</div><div class=\"line\">        params: type === <span class=\"string\">'get'</span> ? options : <span class=\"literal\">null</span>,</div><div class=\"line\">        data: type !== <span class=\"string\">'get'</span> ? qs.stringify(options) : <span class=\"literal\">null</span></div><div class=\"line\">      &#125;)</div><div class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">result</span>) =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (result &amp;&amp; result.status === <span class=\"number\">401</span>) &#123;</div><div class=\"line\">          <span class=\"comment\">// location.href = '/views/401.html'</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span> (result &amp;&amp; result.status === <span class=\"number\">200</span>) &#123;</div><div class=\"line\">          <span class=\"keyword\">if</span> (result.data.code === <span class=\"number\">200</span>) &#123;</div><div class=\"line\">            resolve(result.data.data);</div><div class=\"line\">          &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (result.data.code === <span class=\"number\">401</span>) &#123;</div><div class=\"line\">            reject(&#123;</div><div class=\"line\">              nopms: <span class=\"literal\">true</span>,</div><div class=\"line\">              msg: result.data.msg</div><div class=\"line\">            &#125;);</div><div class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            reject(&#123;</div><div class=\"line\">              error: <span class=\"literal\">true</span>,</div><div class=\"line\">              msg: result.data.msg</div><div class=\"line\">            &#125;);</div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          reject(&#123;</div><div class=\"line\">            errno: result.errno,</div><div class=\"line\">            msg: result.msg</div><div class=\"line\">          &#125;);</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;)</div><div class=\"line\">      .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(error, url);</div><div class=\"line\">      &#125;);</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> config = &#123;</div><div class=\"line\">  get(url, options) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> _self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">      ajax(url, <span class=\"string\">'get'</span>, options)</div><div class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</div><div class=\"line\">          resolve(data);</div><div class=\"line\">        &#125;, (error) =&gt; &#123;</div><div class=\"line\">          reject(error);</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\"></div><div class=\"line\">  post(url, options) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> _self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">      ajax(url, <span class=\"string\">'post'</span>, options)</div><div class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</div><div class=\"line\">          resolve(data);</div><div class=\"line\">        &#125;, (error) =&gt; &#123;</div><div class=\"line\">          reject(error);</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\"></div><div class=\"line\">  put(url, options) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> _self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">      ajax(url, <span class=\"string\">'put'</span>, options)</div><div class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</div><div class=\"line\">          resolve(data);</div><div class=\"line\">        &#125;, (error) =&gt; &#123;</div><div class=\"line\">          reject(error);</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">delete</span>(url, options) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> _self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">      ajax(url, <span class=\"string\">'delete'</span>, options)</div><div class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</div><div class=\"line\">          resolve(data);</div><div class=\"line\">        &#125;, (error) =&gt; &#123;</div><div class=\"line\">          reject(error);</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\"></div><div class=\"line\">  jsonp(url, options) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> _self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">      ajax(url, <span class=\"string\">'jsonp'</span>, options)</div><div class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</div><div class=\"line\">          resolve(data);</div><div class=\"line\">        &#125;, (error) =&gt; &#123;</div><div class=\"line\">          reject(error);</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> config;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>mockjs</p>\n</blockquote>\n<p>1publicconf.jsurl<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">    HOST: <span class=\"string\">\"http://www.xxx.com\"</span>,</div><div class=\"line\">    DEBUGMOCK: <span class=\"literal\">true</span></div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure></p>\n<p>2views/indexconf.jsmockmock<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> PAGEMOCK = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> MODULECONF = &#123;</div><div class=\"line\">  index: &#123;</div><div class=\"line\">    NAME: <span class=\"string\">''</span>,</div><div class=\"line\">    MOCK: <span class=\"literal\">true</span>,</div><div class=\"line\">    API: &#123;</div><div class=\"line\">      GET: <span class=\"string\">'/api/home'</span>,</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure></p>\n<p>3mockjsmock<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> Mock <span class=\"keyword\">from</span> <span class=\"string\">'mockjs'</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> mData = &#123;</div><div class=\"line\">  index: &#123;</div><div class=\"line\">    API: &#123;</div><div class=\"line\">      GET: &#123;</div><div class=\"line\">        <span class=\"string\">\"code\"</span>: <span class=\"number\">200</span>,</div><div class=\"line\">        <span class=\"string\">\"data\"</span>: &#123;</div><div class=\"line\">          <span class=\"string\">\"pin\"</span>: <span class=\"string\">'wangqi'</span>,</div><div class=\"line\">          <span class=\"string\">\"name\"</span>: <span class=\"string\">''</span></div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>github<a href=\"https://github.com/wqzwh/wq-vue-ssr\" target=\"_blank\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p>axiosajaxmockjs</p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p>npmaxiosmockjs,mockjssave-devmockmockmockRap</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install axios --save</div><div class=\"line\">npm install mockjs --save-dev</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">&lt;!-- more --&gt;</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">### 3axios</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">&gt;</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\">axios.request(config);</div><div class=\"line\">axios.get(url[,config]);</div><div class=\"line\">axios.delete(url[,config]);</div><div class=\"line\">axios.head(url[,config]);</div><div class=\"line\">axios.post(url[,data[,config]]);</div><div class=\"line\">axios.put(url[,data[,config]])</div><div class=\"line\">axios.patch(url[,data[,config]])</div><div class=\"line\"><span class=\"string\">``</span><span class=\"string\">` </span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">&gt;&lt;a href=\"/2017-05-02/\" target=\"_blank\" &gt;axios&lt;/a&gt;</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">api.js</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">`</span><span class=\"string\">``</span> javascript</div><div class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span></div><div class=\"line\"><span class=\"keyword\">import</span> qs <span class=\"keyword\">from</span> <span class=\"string\">'qs'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Q <span class=\"keyword\">from</span> <span class=\"string\">'q'</span></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> *  promise </span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'es6-promise'</span>).polyfill();</div><div class=\"line\"><span class=\"keyword\">import</span> C <span class=\"keyword\">from</span> <span class=\"string\">'../conf'</span></div><div class=\"line\"></div><div class=\"line\">axios.defaults.headers.post[<span class=\"string\">'Content-Type'</span>] = <span class=\"string\">'application/x-www-form-urlencoded; charset=UTF-8'</span></div><div class=\"line\">axios.defaults.withCredentials = <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">url, type, options</span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">    axios(&#123;</div><div class=\"line\">        method: type,</div><div class=\"line\">        url: C.HOST + url,</div><div class=\"line\">        params: type === <span class=\"string\">'get'</span> ? options : <span class=\"literal\">null</span>,</div><div class=\"line\">        data: type !== <span class=\"string\">'get'</span> ? qs.stringify(options) : <span class=\"literal\">null</span></div><div class=\"line\">      &#125;)</div><div class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">result</span>) =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (result &amp;&amp; result.status === <span class=\"number\">401</span>) &#123;</div><div class=\"line\">          <span class=\"comment\">// location.href = '/views/401.html'</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span> (result &amp;&amp; result.status === <span class=\"number\">200</span>) &#123;</div><div class=\"line\">          <span class=\"keyword\">if</span> (result.data.code === <span class=\"number\">200</span>) &#123;</div><div class=\"line\">            resolve(result.data.data);</div><div class=\"line\">          &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (result.data.code === <span class=\"number\">401</span>) &#123;</div><div class=\"line\">            reject(&#123;</div><div class=\"line\">              nopms: <span class=\"literal\">true</span>,</div><div class=\"line\">              msg: result.data.msg</div><div class=\"line\">            &#125;);</div><div class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            reject(&#123;</div><div class=\"line\">              error: <span class=\"literal\">true</span>,</div><div class=\"line\">              msg: result.data.msg</div><div class=\"line\">            &#125;);</div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          reject(&#123;</div><div class=\"line\">            errno: result.errno,</div><div class=\"line\">            msg: result.msg</div><div class=\"line\">          &#125;);</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;)</div><div class=\"line\">      .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(error, url);</div><div class=\"line\">      &#125;);</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> config = &#123;</div><div class=\"line\">  get(url, options) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> _self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">      ajax(url, <span class=\"string\">'get'</span>, options)</div><div class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</div><div class=\"line\">          resolve(data);</div><div class=\"line\">        &#125;, (error) =&gt; &#123;</div><div class=\"line\">          reject(error);</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\"></div><div class=\"line\">  post(url, options) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> _self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">      ajax(url, <span class=\"string\">'post'</span>, options)</div><div class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</div><div class=\"line\">          resolve(data);</div><div class=\"line\">        &#125;, (error) =&gt; &#123;</div><div class=\"line\">          reject(error);</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\"></div><div class=\"line\">  put(url, options) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> _self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">      ajax(url, <span class=\"string\">'put'</span>, options)</div><div class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</div><div class=\"line\">          resolve(data);</div><div class=\"line\">        &#125;, (error) =&gt; &#123;</div><div class=\"line\">          reject(error);</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">delete</span>(url, options) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> _self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">      ajax(url, <span class=\"string\">'delete'</span>, options)</div><div class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</div><div class=\"line\">          resolve(data);</div><div class=\"line\">        &#125;, (error) =&gt; &#123;</div><div class=\"line\">          reject(error);</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;,</div><div class=\"line\"></div><div class=\"line\">  jsonp(url, options) &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> _self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> Q.Promise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">      ajax(url, <span class=\"string\">'jsonp'</span>, options)</div><div class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</div><div class=\"line\">          resolve(data);</div><div class=\"line\">        &#125;, (error) =&gt; &#123;</div><div class=\"line\">          reject(error);</div><div class=\"line\">        &#125;);</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> config;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>mockjs</p>\n</blockquote>\n<p>1publicconf.jsurl<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">    HOST: <span class=\"string\">\"http://www.xxx.com\"</span>,</div><div class=\"line\">    DEBUGMOCK: <span class=\"literal\">true</span></div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure></p>\n<p>2views/indexconf.jsmockmock<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> PAGEMOCK = <span class=\"literal\">true</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> MODULECONF = &#123;</div><div class=\"line\">  index: &#123;</div><div class=\"line\">    NAME: <span class=\"string\">''</span>,</div><div class=\"line\">    MOCK: <span class=\"literal\">true</span>,</div><div class=\"line\">    API: &#123;</div><div class=\"line\">      GET: <span class=\"string\">'/api/home'</span>,</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure></p>\n<p>3mockjsmock<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> Mock <span class=\"keyword\">from</span> <span class=\"string\">'mockjs'</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> mData = &#123;</div><div class=\"line\">  index: &#123;</div><div class=\"line\">    API: &#123;</div><div class=\"line\">      GET: &#123;</div><div class=\"line\">        <span class=\"string\">\"code\"</span>: <span class=\"number\">200</span>,</div><div class=\"line\">        <span class=\"string\">\"data\"</span>: &#123;</div><div class=\"line\">          <span class=\"string\">\"pin\"</span>: <span class=\"string\">'wangqi'</span>,</div><div class=\"line\">          <span class=\"string\">\"name\"</span>: <span class=\"string\">''</span></div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>github<a href=\"https://github.com/wqzwh/wq-vue-ssr\" target=\"_blank\"></a></p>\n"},{"title":"WebGL--3D","comments":1,"toc":true,"date":"2017-07-01T13:09:11.000Z","_content":"\n### 3D\n\n2Dxy2D0.0yy\n\n<img width=\"300\" src=\"webgl-2017-07-01/01.jpeg\" title=\"2D\"/>\n\n<!-- more -->\n\nHTML5 canvas2D,canvasxy\n\n<img width=\"300\" src=\"webgl-2017-07-01/02.jpeg\" title=\"canvas\"/>\n\n\n``` html\n<style>\n        * {\n            margin: 0;\n            padding: 0;\n        }\n    </style>\n<canvas id=\"canvas\"></canvas>\n<script>\n  var cxt = canvas.getContext('2d');\n\n  // xy\n  var x = 50;\n  var y = 50;\n\n  // \n  cxt.fillRect(x,y,50,50);\n</script>  \n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-01/03.jpeg\"/>\nxy\n``` javascript\n  // xy\n  var x = 0;\n  var y = 0;\n```\n<img width=\"300\" src=\"webgl-2017-07-01/04.jpeg\"/>\n\n3Dz3D\n\n<img width=\"300\" src=\"webgl-2017-07-01/05.jpeg\"/>\n\nWebGLyxz+1-1\n\n<img width=\"300\" src=\"webgl-2017-07-01/06.jpeg\"/>\n\n\n``` javascript\n  const VSHADER_SOURCE =\n    `void main() {\n    gl_Position = vec4(1.0,0.0,0.0,1.0);\n    gl_PointSize = 30.0;\n}`\n```\n\nwebgl1.0\n\n<img width=\"300\" src=\"webgl-2017-07-01/07.jpeg\"/>\n\n3D\n\n<b></b>:3D\n\n<img width=\"300\" src=\"webgl-2017-07-01/08.jpeg\"/>\n\n### 3D\n\n<b></b>\n    <img width=\"200\" src=\"webgl-2017-07-01/09.jpeg\"/><img width=\"200\" src=\"webgl-2017-07-01/10.jpeg\"/><img width=\"200\" src=\"webgl-2017-07-01/11.jpeg\"/><img width=\"200\" src=\"webgl-2017-07-01/12.jpeg\"/>\n\nZ    \n``` javascript\n// \nvar ANGLE = 30.0;\nconst VSHADER_SOURCE =\n  ` attribute vec4 a_Position;\n    uniform float u_CosB,u_SinB;\n    attribute float a_PointSize;\n    void main() {\n       gl_Position.x = a_Position.x * u_CosB -  a_Position.y * u_SinB;\n       gl_Position.y = a_Position.x * u_SinB -  a_Position.y * u_CosB;\n       gl_Position.z = a_Position.z;\n       gl_Position.w = 1.0;\n     }`\n// \nconst FSHADER_SOURCE =\n  ` precision mediump float;\n    uniform vec4 u_FragColor;\n    void main() {\n      gl_FragColor = vec4(1.0,1.0,0.0,1.0);\n    }`\n```\n\n<b></b>webgl\n``` javascript\n// \n// \nvar ANGLE = 30.0;\nconst VSHADER_SOURCE =\n  ` attribute vec4 a_Position;\n    uniform mat4 u_xformMatrix; //\n    void main() {\n       gl_Position = u_xformMatrix * a_Position;\n     }`\n// \nconst FSHADER_SOURCE =\n  ` void main() {\n      gl_FragColor = vec4(1.0,1.0,0.0,1.0);\n    }`\n```\n\n### \n\n<b></b>\n<b></b>,\n<b></b>\n\n<img width=\"500\" src=\"webgl-2017-07-01/13.jpeg\"/>\n\n<b></b>\n\n<img width=\"300\" src=\"webgl-2017-07-01/14.jpeg\"/>\n\n### \n\n\n\n<b></b>cmain\n\n``` javascript\nvoid main() {\n    gl_Position = vec4(0.0,0.0,0.0,1.0);\n    gl_PointSize = 20.0;\n}\n```\n\n<b></b>1.0\n\n``` javascript\nvoid main(){\n    gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n}\n```\n\n### 3D\n\n<b></b>canvas\n\n<img width=\"400\" src=\"webgl-2017-07-01/15.jpeg\"/>\n\nWebGL","source":"_posts/webgl-2017-07-01.md","raw":"---\ntitle: WebGL--3D\ncomments: true\ntoc: true\ndate: 2017-07-01 21:09:11\ntags: \n    - 'javascript'\n    - 'webgl'\n---\n\n### 3D\n\n2Dxy2D0.0yy\n\n<img width=\"300\" src=\"webgl-2017-07-01/01.jpeg\" title=\"2D\"/>\n\n<!-- more -->\n\nHTML5 canvas2D,canvasxy\n\n<img width=\"300\" src=\"webgl-2017-07-01/02.jpeg\" title=\"canvas\"/>\n\n\n``` html\n<style>\n        * {\n            margin: 0;\n            padding: 0;\n        }\n    </style>\n<canvas id=\"canvas\"></canvas>\n<script>\n  var cxt = canvas.getContext('2d');\n\n  // xy\n  var x = 50;\n  var y = 50;\n\n  // \n  cxt.fillRect(x,y,50,50);\n</script>  \n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-01/03.jpeg\"/>\nxy\n``` javascript\n  // xy\n  var x = 0;\n  var y = 0;\n```\n<img width=\"300\" src=\"webgl-2017-07-01/04.jpeg\"/>\n\n3Dz3D\n\n<img width=\"300\" src=\"webgl-2017-07-01/05.jpeg\"/>\n\nWebGLyxz+1-1\n\n<img width=\"300\" src=\"webgl-2017-07-01/06.jpeg\"/>\n\n\n``` javascript\n  const VSHADER_SOURCE =\n    `void main() {\n    gl_Position = vec4(1.0,0.0,0.0,1.0);\n    gl_PointSize = 30.0;\n}`\n```\n\nwebgl1.0\n\n<img width=\"300\" src=\"webgl-2017-07-01/07.jpeg\"/>\n\n3D\n\n<b></b>:3D\n\n<img width=\"300\" src=\"webgl-2017-07-01/08.jpeg\"/>\n\n### 3D\n\n<b></b>\n    <img width=\"200\" src=\"webgl-2017-07-01/09.jpeg\"/><img width=\"200\" src=\"webgl-2017-07-01/10.jpeg\"/><img width=\"200\" src=\"webgl-2017-07-01/11.jpeg\"/><img width=\"200\" src=\"webgl-2017-07-01/12.jpeg\"/>\n\nZ    \n``` javascript\n// \nvar ANGLE = 30.0;\nconst VSHADER_SOURCE =\n  ` attribute vec4 a_Position;\n    uniform float u_CosB,u_SinB;\n    attribute float a_PointSize;\n    void main() {\n       gl_Position.x = a_Position.x * u_CosB -  a_Position.y * u_SinB;\n       gl_Position.y = a_Position.x * u_SinB -  a_Position.y * u_CosB;\n       gl_Position.z = a_Position.z;\n       gl_Position.w = 1.0;\n     }`\n// \nconst FSHADER_SOURCE =\n  ` precision mediump float;\n    uniform vec4 u_FragColor;\n    void main() {\n      gl_FragColor = vec4(1.0,1.0,0.0,1.0);\n    }`\n```\n\n<b></b>webgl\n``` javascript\n// \n// \nvar ANGLE = 30.0;\nconst VSHADER_SOURCE =\n  ` attribute vec4 a_Position;\n    uniform mat4 u_xformMatrix; //\n    void main() {\n       gl_Position = u_xformMatrix * a_Position;\n     }`\n// \nconst FSHADER_SOURCE =\n  ` void main() {\n      gl_FragColor = vec4(1.0,1.0,0.0,1.0);\n    }`\n```\n\n### \n\n<b></b>\n<b></b>,\n<b></b>\n\n<img width=\"500\" src=\"webgl-2017-07-01/13.jpeg\"/>\n\n<b></b>\n\n<img width=\"300\" src=\"webgl-2017-07-01/14.jpeg\"/>\n\n### \n\n\n\n<b></b>cmain\n\n``` javascript\nvoid main() {\n    gl_Position = vec4(0.0,0.0,0.0,1.0);\n    gl_PointSize = 20.0;\n}\n```\n\n<b></b>1.0\n\n``` javascript\nvoid main(){\n    gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n}\n```\n\n### 3D\n\n<b></b>canvas\n\n<img width=\"400\" src=\"webgl-2017-07-01/15.jpeg\"/>\n\nWebGL","slug":"webgl-2017-07-01","published":1,"updated":"2018-02-10T09:08:00.902Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbd001mfdlddi3mdktr","content":"<h3 id=\"3D\"><a href=\"#3D\" class=\"headerlink\" title=\"3D\"></a>3D</h3><p>2Dxy2D0.0yy</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/01.jpeg\" title=\"2D\"></p>\n<a id=\"more\"></a>\n<p>HTML5 canvas2D,canvasxy</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/02.jpeg\" title=\"canvas\"></p>\n<p><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"undefined\">        * &#123;</span></div><div class=\"line\"><span class=\"undefined\">            margin: 0;</span></div><div class=\"line\"><span class=\"undefined\">            padding: 0;</span></div><div class=\"line\"><span class=\"undefined\">        &#125;</span></div><div class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"canvas\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">var</span> cxt = canvas.getContext(<span class=\"string\">'2d'</span>);</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">  <span class=\"comment\">// xy</span></span></div><div class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">var</span> x = <span class=\"number\">50</span>;</span></div><div class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">var</span> y = <span class=\"number\">50</span>;</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">  <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"undefined\">  cxt.fillRect(x,y,50,50);</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/03.jpeg\"><br>xy<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// xy</span></div><div class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> y = <span class=\"number\">0</span>;</div></pre></td></tr></table></figure></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/04.jpeg\"></p>\n<p>3Dz3D</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/05.jpeg\"></p>\n<p>WebGLyxz+1-1</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/06.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">  <span class=\"keyword\">const</span> VSHADER_SOURCE =</div><div class=\"line\">    <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">    gl_Position = vec4(1.0,0.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">    gl_PointSize = 30.0;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<p>webgl1.0</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/07.jpeg\"></p>\n<p>3D</p>\n<p><b></b>:3D</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/08.jpeg\"></p>\n<h3 id=\"3D\"><a href=\"#3D\" class=\"headerlink\" title=\"3D\"></a>3D</h3><p><b></b><br>    <img width=\"200\" src=\"/webgl-2017-07-01/09.jpeg\"><img width=\"200\" src=\"/webgl-2017-07-01/10.jpeg\"><img width=\"200\" src=\"/webgl-2017-07-01/11.jpeg\"><img width=\"200\" src=\"/webgl-2017-07-01/12.jpeg\"></p>\n<p>Z<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> ANGLE = <span class=\"number\">30.0</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> VSHADER_SOURCE =</div><div class=\"line\">  <span class=\"string\">` attribute vec4 a_Position;</span></div><div class=\"line\"><span class=\"string\">    uniform float u_CosB,u_SinB;</span></div><div class=\"line\"><span class=\"string\">    attribute float a_PointSize;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">       gl_Position.x = a_Position.x * u_CosB -  a_Position.y * u_SinB;</span></div><div class=\"line\"><span class=\"string\">       gl_Position.y = a_Position.x * u_SinB -  a_Position.y * u_CosB;</span></div><div class=\"line\"><span class=\"string\">       gl_Position.z = a_Position.z;</span></div><div class=\"line\"><span class=\"string\">       gl_Position.w = 1.0;</span></div><div class=\"line\"><span class=\"string\">     &#125;`</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> FSHADER_SOURCE =</div><div class=\"line\">  <span class=\"string\">` precision mediump float;</span></div><div class=\"line\"><span class=\"string\">    uniform vec4 u_FragColor;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,1.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">    &#125;`</span></div></pre></td></tr></table></figure></p>\n<p><b></b>webgl<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> ANGLE = <span class=\"number\">30.0</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> VSHADER_SOURCE =</div><div class=\"line\">  <span class=\"string\">` attribute vec4 a_Position;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 u_xformMatrix; //</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">       gl_Position = u_xformMatrix * a_Position;</span></div><div class=\"line\"><span class=\"string\">     &#125;`</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> FSHADER_SOURCE =</div><div class=\"line\">  <span class=\"string\">` void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,1.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">    &#125;`</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><b></b><br><b></b>,<br><b></b></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-01/13.jpeg\"></p>\n<p><b></b></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/14.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><b></b>cmain</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">void</span> main() &#123;</div><div class=\"line\">    gl_Position = vec4(<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">    gl_PointSize = <span class=\"number\">20.0</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><b></b>1.0</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">void</span> main()&#123;</div><div class=\"line\">    gl_FragColor = vec4(<span class=\"number\">1.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3D\"><a href=\"#3D\" class=\"headerlink\" title=\"3D\"></a>3D</h3><p><b></b>canvas</p>\n<p><img width=\"400\" src=\"/webgl-2017-07-01/15.jpeg\"></p>\n<p>WebGL</p>\n","site":{"data":{}},"excerpt":"<h3 id=\"3D\"><a href=\"#3D\" class=\"headerlink\" title=\"3D\"></a>3D</h3><p>2Dxy2D0.0yy</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/01.jpeg\" title=\"2D\"></p>","more":"<p>HTML5 canvas2D,canvasxy</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/02.jpeg\" title=\"canvas\"></p>\n<p><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"undefined\">        * &#123;</span></div><div class=\"line\"><span class=\"undefined\">            margin: 0;</span></div><div class=\"line\"><span class=\"undefined\">            padding: 0;</span></div><div class=\"line\"><span class=\"undefined\">        &#125;</span></div><div class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"canvas\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">var</span> cxt = canvas.getContext(<span class=\"string\">'2d'</span>);</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">  <span class=\"comment\">// xy</span></span></div><div class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">var</span> x = <span class=\"number\">50</span>;</span></div><div class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">var</span> y = <span class=\"number\">50</span>;</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">  <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"undefined\">  cxt.fillRect(x,y,50,50);</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/03.jpeg\"><br>xy<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// xy</span></div><div class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> y = <span class=\"number\">0</span>;</div></pre></td></tr></table></figure></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/04.jpeg\"></p>\n<p>3Dz3D</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/05.jpeg\"></p>\n<p>WebGLyxz+1-1</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/06.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">  <span class=\"keyword\">const</span> VSHADER_SOURCE =</div><div class=\"line\">    <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">    gl_Position = vec4(1.0,0.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">    gl_PointSize = 30.0;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<p>webgl1.0</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/07.jpeg\"></p>\n<p>3D</p>\n<p><b></b>:3D</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/08.jpeg\"></p>\n<h3 id=\"3D\"><a href=\"#3D\" class=\"headerlink\" title=\"3D\"></a>3D</h3><p><b></b><br>    <img width=\"200\" src=\"/webgl-2017-07-01/09.jpeg\"><img width=\"200\" src=\"/webgl-2017-07-01/10.jpeg\"><img width=\"200\" src=\"/webgl-2017-07-01/11.jpeg\"><img width=\"200\" src=\"/webgl-2017-07-01/12.jpeg\"></p>\n<p>Z<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> ANGLE = <span class=\"number\">30.0</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> VSHADER_SOURCE =</div><div class=\"line\">  <span class=\"string\">` attribute vec4 a_Position;</span></div><div class=\"line\"><span class=\"string\">    uniform float u_CosB,u_SinB;</span></div><div class=\"line\"><span class=\"string\">    attribute float a_PointSize;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">       gl_Position.x = a_Position.x * u_CosB -  a_Position.y * u_SinB;</span></div><div class=\"line\"><span class=\"string\">       gl_Position.y = a_Position.x * u_SinB -  a_Position.y * u_CosB;</span></div><div class=\"line\"><span class=\"string\">       gl_Position.z = a_Position.z;</span></div><div class=\"line\"><span class=\"string\">       gl_Position.w = 1.0;</span></div><div class=\"line\"><span class=\"string\">     &#125;`</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> FSHADER_SOURCE =</div><div class=\"line\">  <span class=\"string\">` precision mediump float;</span></div><div class=\"line\"><span class=\"string\">    uniform vec4 u_FragColor;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,1.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">    &#125;`</span></div></pre></td></tr></table></figure></p>\n<p><b></b>webgl<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> ANGLE = <span class=\"number\">30.0</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> VSHADER_SOURCE =</div><div class=\"line\">  <span class=\"string\">` attribute vec4 a_Position;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 u_xformMatrix; //</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">       gl_Position = u_xformMatrix * a_Position;</span></div><div class=\"line\"><span class=\"string\">     &#125;`</span></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> FSHADER_SOURCE =</div><div class=\"line\">  <span class=\"string\">` void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,1.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">    &#125;`</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><b></b><br><b></b>,<br><b></b></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-01/13.jpeg\"></p>\n<p><b></b></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-01/14.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><b></b>cmain</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">void</span> main() &#123;</div><div class=\"line\">    gl_Position = vec4(<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">    gl_PointSize = <span class=\"number\">20.0</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><b></b>1.0</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">void</span> main()&#123;</div><div class=\"line\">    gl_FragColor = vec4(<span class=\"number\">1.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3D\"><a href=\"#3D\" class=\"headerlink\" title=\"3D\"></a>3D</h3><p><b></b>canvas</p>\n<p><img width=\"400\" src=\"/webgl-2017-07-01/15.jpeg\"></p>\n<p>WebGL</p>"},{"title":"WebGL--","comments":1,"toc":true,"date":"2017-07-02T13:09:11.000Z","_content":"\n### WebGL\n3DOpenGL ES 2.0\n\n#### \n\n* \n* \n* \n* \n* \n* \n* \n\n<!-- more -->\n\n#### API\n\nAPIwebGL\n\nAPIAPIAPI\n\n### \n\n<img width=\"600\" src=\"webgl-2017-07-02/01.jpeg\"/>\n\n### WebGL\n\n#### \n\n<img width=\"600\" src=\"webgl-2017-07-02/02.jpeg\"/>\n\n\n\n#### \n\n* javascript\n* \n*  Attribute \n*  Uniform \n*  Varying \n                                                                \n#### \n\n* javascript\n* \n* Uniform  SamplersSamplers\n*  Varying \n\n### WebGLHTML5Javascript\n\n*  HTML5 Canvas webglcanvascanvasapi\n*  Javascript \n*  HTML5 \n*  Javascript \n\n\n``` html\n<body onload=\"main()\">\n    <canvas id=\"webgl\" width=\"500\" height=\"400\"></canvas>\n    <script src=\"../lib/webgl-utils.js\"></script>\n    <script src=\"../lib/webgl-debug.js\"></script>\n    <script src=\"../lib/cuon-utils.js\"></script>\n\n    <script>\n        // \n        const VSHADER_SOURCE =\n            `void main() {\n          gl_Position = vec4(1.0,0.0,0.0,1.0);\n          gl_PointSize = 30.0;\n        }`\n        \n        // \n        const FSHADER_SOURCE =\n            `void main() {\n          gl_FragColor = vec4(1.0,1.0,0.0,1.0);\n          }`\n\n        function main() {\n            // canvan\n            var canvas = document.getElementById(\"webgl\");\n\n            // webgl\n            var gl = getWebGLContext(canvas, true);\n            if (!gl) {\n                console.log('error');\n                return;\n            }\n\n            // \n            if (!initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE)) {\n                console.log('error');\n                return;\n            }\n\n\n            // canvas\n            gl.clearColor(0.0, 0.0, 0.0, 1.0);\n            // canvas\n            gl.clear(gl.COLOR_BUFFER_BIT);\n\n            // \n            gl.drawArrays(gl.POINTS, 0, 1);\n        }\n    </script>\n</body>\n```\n\n https://github.com/wqzwh/webgl-code/tree/master/02","source":"_posts/webgl-2017-07-02.md","raw":"---\ntitle: WebGL--\ncomments: true\ntoc: true\ndate: 2017-07-02 21:09:11\ntags: \n    - 'javascript'\n    - 'webgl'\n---\n\n### WebGL\n3DOpenGL ES 2.0\n\n#### \n\n* \n* \n* \n* \n* \n* \n* \n\n<!-- more -->\n\n#### API\n\nAPIwebGL\n\nAPIAPIAPI\n\n### \n\n<img width=\"600\" src=\"webgl-2017-07-02/01.jpeg\"/>\n\n### WebGL\n\n#### \n\n<img width=\"600\" src=\"webgl-2017-07-02/02.jpeg\"/>\n\n\n\n#### \n\n* javascript\n* \n*  Attribute \n*  Uniform \n*  Varying \n                                                                \n#### \n\n* javascript\n* \n* Uniform  SamplersSamplers\n*  Varying \n\n### WebGLHTML5Javascript\n\n*  HTML5 Canvas webglcanvascanvasapi\n*  Javascript \n*  HTML5 \n*  Javascript \n\n\n``` html\n<body onload=\"main()\">\n    <canvas id=\"webgl\" width=\"500\" height=\"400\"></canvas>\n    <script src=\"../lib/webgl-utils.js\"></script>\n    <script src=\"../lib/webgl-debug.js\"></script>\n    <script src=\"../lib/cuon-utils.js\"></script>\n\n    <script>\n        // \n        const VSHADER_SOURCE =\n            `void main() {\n          gl_Position = vec4(1.0,0.0,0.0,1.0);\n          gl_PointSize = 30.0;\n        }`\n        \n        // \n        const FSHADER_SOURCE =\n            `void main() {\n          gl_FragColor = vec4(1.0,1.0,0.0,1.0);\n          }`\n\n        function main() {\n            // canvan\n            var canvas = document.getElementById(\"webgl\");\n\n            // webgl\n            var gl = getWebGLContext(canvas, true);\n            if (!gl) {\n                console.log('error');\n                return;\n            }\n\n            // \n            if (!initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE)) {\n                console.log('error');\n                return;\n            }\n\n\n            // canvas\n            gl.clearColor(0.0, 0.0, 0.0, 1.0);\n            // canvas\n            gl.clear(gl.COLOR_BUFFER_BIT);\n\n            // \n            gl.drawArrays(gl.POINTS, 0, 1);\n        }\n    </script>\n</body>\n```\n\n https://github.com/wqzwh/webgl-code/tree/master/02","slug":"webgl-2017-07-02","published":1,"updated":"2018-02-10T09:08:00.904Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbe001ofdld771g0i19","content":"<h3 id=\"WebGL\"><a href=\"#WebGL\" class=\"headerlink\" title=\"WebGL\"></a>WebGL</h3><p>3DOpenGL ES 2.0</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<a id=\"more\"></a>\n<h4 id=\"API\"><a href=\"#API\" class=\"headerlink\" title=\"API\"></a>API</h4><p>APIwebGL</p>\n<p>APIAPIAPI</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img width=\"600\" src=\"/webgl-2017-07-02/01.jpeg\"></p>\n<h3 id=\"WebGL\"><a href=\"#WebGL\" class=\"headerlink\" title=\"WebGL\"></a>WebGL</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img width=\"600\" src=\"/webgl-2017-07-02/02.jpeg\"></p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>javascript</li>\n<li></li>\n<li> Attribute </li>\n<li> Uniform </li>\n<li> Varying </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>javascript</li>\n<li></li>\n<li>Uniform  SamplersSamplers</li>\n<li> Varying </li>\n</ul>\n<h3 id=\"WebGLHTML5Javascript\"><a href=\"#WebGLHTML5Javascript\" class=\"headerlink\" title=\"WebGLHTML5Javascript\"></a>WebGLHTML5Javascript</h3><ul>\n<li> HTML5 Canvas webglcanvascanvasapi</li>\n<li> Javascript </li>\n<li> HTML5 </li>\n<li> Javascript </li>\n</ul>\n<p><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">onload</span>=<span class=\"string\">\"main()\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"webgl\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"500\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"400\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../lib/webgl-utils.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../lib/webgl-debug.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../lib/cuon-utils.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">const</span> VSHADER_SOURCE =</span></div><div class=\"line\"><span class=\"undefined\">            `void main() &#123;</span></div><div class=\"line\"><span class=\"undefined\">          gl_Position = vec4(1.0,0.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"undefined\">          gl_PointSize = 30.0;</span></div><div class=\"line\"><span class=\"undefined\">        &#125;`</span></div><div class=\"line\"><span class=\"undefined\">        </span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">const</span> FSHADER_SOURCE =</span></div><div class=\"line\"><span class=\"undefined\">            `void main() &#123;</span></div><div class=\"line\"><span class=\"undefined\">          gl_FragColor = vec4(1.0,1.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"undefined\">          &#125;`</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">main</span>(<span class=\"params\"></span>) </span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// canvan</span></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"webgl\"</span>);</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// webgl</span></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> gl = getWebGLContext(canvas, <span class=\"literal\">true</span>);</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span> (!gl) &#123;</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'error'</span>);</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">return</span>;</span></div><div class=\"line\"><span class=\"undefined\">            &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span> (!initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE)) &#123;</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'error'</span>);</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">return</span>;</span></div><div class=\"line\"><span class=\"undefined\">            &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// canvas</span></span></div><div class=\"line\"><span class=\"undefined\">            gl.clearColor(0.0, 0.0, 0.0, 1.0);</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// canvas</span></span></div><div class=\"line\"><span class=\"undefined\">            gl.clear(gl.COLOR_BUFFER_BIT);</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"undefined\">            gl.drawArrays(gl.POINTS, 0, 1);</span></div><div class=\"line\"><span class=\"undefined\">        &#125;</span></div><div class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/02\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/02</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"WebGL\"><a href=\"#WebGL\" class=\"headerlink\" title=\"WebGL\"></a>WebGL</h3><p>3DOpenGL ES 2.0</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>","more":"<h4 id=\"API\"><a href=\"#API\" class=\"headerlink\" title=\"API\"></a>API</h4><p>APIwebGL</p>\n<p>APIAPIAPI</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img width=\"600\" src=\"/webgl-2017-07-02/01.jpeg\"></p>\n<h3 id=\"WebGL\"><a href=\"#WebGL\" class=\"headerlink\" title=\"WebGL\"></a>WebGL</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img width=\"600\" src=\"/webgl-2017-07-02/02.jpeg\"></p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>javascript</li>\n<li></li>\n<li> Attribute </li>\n<li> Uniform </li>\n<li> Varying </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>javascript</li>\n<li></li>\n<li>Uniform  SamplersSamplers</li>\n<li> Varying </li>\n</ul>\n<h3 id=\"WebGLHTML5Javascript\"><a href=\"#WebGLHTML5Javascript\" class=\"headerlink\" title=\"WebGLHTML5Javascript\"></a>WebGLHTML5Javascript</h3><ul>\n<li> HTML5 Canvas webglcanvascanvasapi</li>\n<li> Javascript </li>\n<li> HTML5 </li>\n<li> Javascript </li>\n</ul>\n<p><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">onload</span>=<span class=\"string\">\"main()\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"webgl\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"500\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"400\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../lib/webgl-utils.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../lib/webgl-debug.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../lib/cuon-utils.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">const</span> VSHADER_SOURCE =</span></div><div class=\"line\"><span class=\"undefined\">            `void main() &#123;</span></div><div class=\"line\"><span class=\"undefined\">          gl_Position = vec4(1.0,0.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"undefined\">          gl_PointSize = 30.0;</span></div><div class=\"line\"><span class=\"undefined\">        &#125;`</span></div><div class=\"line\"><span class=\"undefined\">        </span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">const</span> FSHADER_SOURCE =</span></div><div class=\"line\"><span class=\"undefined\">            `void main() &#123;</span></div><div class=\"line\"><span class=\"undefined\">          gl_FragColor = vec4(1.0,1.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"undefined\">          &#125;`</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">main</span>(<span class=\"params\"></span>) </span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// canvan</span></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"webgl\"</span>);</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// webgl</span></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> gl = getWebGLContext(canvas, <span class=\"literal\">true</span>);</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span> (!gl) &#123;</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'error'</span>);</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">return</span>;</span></div><div class=\"line\"><span class=\"undefined\">            &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span> (!initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE)) &#123;</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'error'</span>);</span></div><div class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">return</span>;</span></div><div class=\"line\"><span class=\"undefined\">            &#125;</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// canvas</span></span></div><div class=\"line\"><span class=\"undefined\">            gl.clearColor(0.0, 0.0, 0.0, 1.0);</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// canvas</span></span></div><div class=\"line\"><span class=\"undefined\">            gl.clear(gl.COLOR_BUFFER_BIT);</span></div><div class=\"line\"><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"undefined\">            gl.drawArrays(gl.POINTS, 0, 1);</span></div><div class=\"line\"><span class=\"undefined\">        &#125;</span></div><div class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/02\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/02</a></p>"},{"title":"WebGL--","comments":1,"toc":true,"date":"2017-07-03T13:09:11.000Z","_content":"\n### attribute \n\nattribute\n\nattribute8attribute\n\n<img width=\"600\" src=\"webgl-2017-07-03/01.jpeg\"/>\n\n*  attribute \n*  attribute  gl_Position \n*  attribute \n\n<!-- more -->\n\n\n\n``` javascript\n// \nconst vertexShaderSource =\n    `attribute vec4 apos;\n    void main() {\n  gl_Position = apos;\n  gl_PointSize = 10.0;\n}`\n```\n\n\n``` javascript\n// \nconst fragmentShaderSource =\n    `void main() {\n  gl_FragColor = vec4(1.0,0.5,0.0,1.0);\n  }`\n```\n\nwebgl\n``` javascript\nvar cxt = canvas.getContext('webgl');\n```\n\n,\n``` javascript\n    var vertexShader = cxt.createShader(cxt.VERTEX_SHADER);\n    var fragmentShader = cxt.createShader(cxt.FRAGMENT_SHADER);\n    cxt.shaderSource(vertexShader,vertexShaderSource);\n    cxt.shaderSource(fragmentShader,fragmentShaderSource);\n    cxt.compileShader(vertexShader);\n    cxt.compileShader(fragmentShader);\n```\n\nprogramprogram\n``` javascript\n    var program = cxt.createProgram();\n    cxt.attachShader(program,vertexShader);\n    cxt.attachShader(program,fragmentShader);\n    cxt.linkProgram(program);\n    cxt.useProgram(program);\n```\n\napos\n``` javascript\n    var aposLocation = cxt.getAttribLocation(program,'apos');\n```\n\n\n``` javascript\n    cxt.clearColor(0.2,0.2,0.2,1.0);\n    cxt.clear(cxt.COLOR_BUFFER_BIT);\n```\n\nfor\n``` javascript\nfor(var i= 0,num = points.length;i<num;i++){\n    cxt.vertexAttrib4f(aposLocation,points[i].x,points[i].y,1.0,1.0);\n    cxt.drawArrays(cxt.POINTS,0,1);\n}\n```\n\n### \n\n#### \n\n* \n* \n*    \n\n#### \n\n*   var buffer = gl.createBuffer()\n* \n*  gl.bindBuffer(gl.ARRAY_BUFFER , buffer)\n\n<img width=\"600\" src=\"webgl-2017-07-03/02.jpeg\"/>\n\n#### \n* gl.bufferData(gl.ARRAY_BUFFER , data , gl.STATIC_DRAW)\n* data \n* gl.STATIC_DRAW\n* gl.STREAM_DRAW\n* gl.DYNAMIC_DRAW\n\n<img width=\"600\" src=\"webgl-2017-07-03/03.jpeg\"/>\n\n#### \n\n* Int8Array   Uint8Array   \n* Int16Array   Uint16Array\n* Int32Array   Uint32Array \n* Float32Array \n* Float64Array\n\n####  attribute \n* vertexAttribPointer(location , size , type , normalized , stride , offset ) \n*   INVALID_OPERATIONprogram\n*   INVALID_VALUEattribute\n* enableVertexAttribArray(location)localtion\n*   INVALID_OPERATIONprogram\n\n<img width=\"600\" src=\"webgl-2017-07-03/04.jpeg\"/>\n\n### \n\n\n``` javascript\nvar data = new Float32Array([\n    -1.0,1.0,\n    1.0,1.0,\n    -1.0,-1.0,\n    1.0,-1.0,\n    0.0,0.0\n]);\n```\n\nbufferbaffer\n``` javascript\nvar buf = cxt.createBuffer();\ncxt.bindBuffer(cxt.ARRAY_BUFFER,buf);\n```\n\n\n``` javascript\ncxt.bufferData(cxt.ARRAY_BUFFER,data,cxt.STATIC_DRAW);\n```\n\nattribute\n``` javascript\ncxt.vertexAttribPointer(aposLocation,2,cxt.FLOAT,false,0,0);\ncxt.enableVertexAttribArray(aposLocation);\n```\n\n\n``` javascript\ncxt.clearColor(0.0,0.5,0.5,1.0);\ncxt.clear(cxt.COLOR_BUFFER_BIT);\ncxt.drawArrays(cxt.POINTS,0,5);\n```\n\n\n``` html\n<canvas id=\"e03\" width=\"500\" height=\"500\"></canvas>\n<script src=\"../lib.js\"></script>\n<script>\n    var canvas = document.getElementById('e03');\n    var cxt = canvas.getContext('webgl');\n    // \n    const vertexShaderSource =\n        `attribute vec4 apos;\n        void main() {\n    gl_Position = apos;\n    gl_PointSize = 10.0;\n    }`\n    // \n    const fragmentShaderSource =\n        `void main() {\n    gl_FragColor = vec4(1.0,0.5,0.0,1.0);\n    }`\n    var program  = initShader(cxt,vertexShaderSource,fragmentShaderSource);\n    var aposLocation = cxt.getAttribLocation(program,'apos');\n    var buffer = cxt.createBuffer();\n    cxt.bindBuffer(cxt.ARRAY_BUFFER,buffer);\n    var data = new Float32Array([\n            -1.0,1.0,\n            1.0,1.0,\n            -1.0,-1.0,\n            1.0,-1.0,\n            0.0,0.0\n    ]);\n    cxt.bufferData(cxt.ARRAY_BUFFER,data,cxt.STATIC_DRAW);\n    cxt.vertexAttribPointer(aposLocation,2,cxt.FLOAT,false,0,0);\n    cxt.enableVertexAttribArray(aposLocation);\n    cxt.clearColor(0.0,0.5,0.5,1.0);\n    cxt.clear(cxt.COLOR_BUFFER_BIT);\n    cxt.drawArrays(cxt.POINTS,0,5);\n</script>\n```\n\n\n\n<img width=\"600\" src=\"webgl-2017-07-03/05.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/03\n\n","source":"_posts/webgl-2017-07-03.md","raw":"---\ntitle: WebGL--\ncomments: true\ntoc: true\ndate: 2017-07-03 21:09:11\ntags: \n    - 'javascript'\n    - 'webgl'\n---\n\n### attribute \n\nattribute\n\nattribute8attribute\n\n<img width=\"600\" src=\"webgl-2017-07-03/01.jpeg\"/>\n\n*  attribute \n*  attribute  gl_Position \n*  attribute \n\n<!-- more -->\n\n\n\n``` javascript\n// \nconst vertexShaderSource =\n    `attribute vec4 apos;\n    void main() {\n  gl_Position = apos;\n  gl_PointSize = 10.0;\n}`\n```\n\n\n``` javascript\n// \nconst fragmentShaderSource =\n    `void main() {\n  gl_FragColor = vec4(1.0,0.5,0.0,1.0);\n  }`\n```\n\nwebgl\n``` javascript\nvar cxt = canvas.getContext('webgl');\n```\n\n,\n``` javascript\n    var vertexShader = cxt.createShader(cxt.VERTEX_SHADER);\n    var fragmentShader = cxt.createShader(cxt.FRAGMENT_SHADER);\n    cxt.shaderSource(vertexShader,vertexShaderSource);\n    cxt.shaderSource(fragmentShader,fragmentShaderSource);\n    cxt.compileShader(vertexShader);\n    cxt.compileShader(fragmentShader);\n```\n\nprogramprogram\n``` javascript\n    var program = cxt.createProgram();\n    cxt.attachShader(program,vertexShader);\n    cxt.attachShader(program,fragmentShader);\n    cxt.linkProgram(program);\n    cxt.useProgram(program);\n```\n\napos\n``` javascript\n    var aposLocation = cxt.getAttribLocation(program,'apos');\n```\n\n\n``` javascript\n    cxt.clearColor(0.2,0.2,0.2,1.0);\n    cxt.clear(cxt.COLOR_BUFFER_BIT);\n```\n\nfor\n``` javascript\nfor(var i= 0,num = points.length;i<num;i++){\n    cxt.vertexAttrib4f(aposLocation,points[i].x,points[i].y,1.0,1.0);\n    cxt.drawArrays(cxt.POINTS,0,1);\n}\n```\n\n### \n\n#### \n\n* \n* \n*    \n\n#### \n\n*   var buffer = gl.createBuffer()\n* \n*  gl.bindBuffer(gl.ARRAY_BUFFER , buffer)\n\n<img width=\"600\" src=\"webgl-2017-07-03/02.jpeg\"/>\n\n#### \n* gl.bufferData(gl.ARRAY_BUFFER , data , gl.STATIC_DRAW)\n* data \n* gl.STATIC_DRAW\n* gl.STREAM_DRAW\n* gl.DYNAMIC_DRAW\n\n<img width=\"600\" src=\"webgl-2017-07-03/03.jpeg\"/>\n\n#### \n\n* Int8Array   Uint8Array   \n* Int16Array   Uint16Array\n* Int32Array   Uint32Array \n* Float32Array \n* Float64Array\n\n####  attribute \n* vertexAttribPointer(location , size , type , normalized , stride , offset ) \n*   INVALID_OPERATIONprogram\n*   INVALID_VALUEattribute\n* enableVertexAttribArray(location)localtion\n*   INVALID_OPERATIONprogram\n\n<img width=\"600\" src=\"webgl-2017-07-03/04.jpeg\"/>\n\n### \n\n\n``` javascript\nvar data = new Float32Array([\n    -1.0,1.0,\n    1.0,1.0,\n    -1.0,-1.0,\n    1.0,-1.0,\n    0.0,0.0\n]);\n```\n\nbufferbaffer\n``` javascript\nvar buf = cxt.createBuffer();\ncxt.bindBuffer(cxt.ARRAY_BUFFER,buf);\n```\n\n\n``` javascript\ncxt.bufferData(cxt.ARRAY_BUFFER,data,cxt.STATIC_DRAW);\n```\n\nattribute\n``` javascript\ncxt.vertexAttribPointer(aposLocation,2,cxt.FLOAT,false,0,0);\ncxt.enableVertexAttribArray(aposLocation);\n```\n\n\n``` javascript\ncxt.clearColor(0.0,0.5,0.5,1.0);\ncxt.clear(cxt.COLOR_BUFFER_BIT);\ncxt.drawArrays(cxt.POINTS,0,5);\n```\n\n\n``` html\n<canvas id=\"e03\" width=\"500\" height=\"500\"></canvas>\n<script src=\"../lib.js\"></script>\n<script>\n    var canvas = document.getElementById('e03');\n    var cxt = canvas.getContext('webgl');\n    // \n    const vertexShaderSource =\n        `attribute vec4 apos;\n        void main() {\n    gl_Position = apos;\n    gl_PointSize = 10.0;\n    }`\n    // \n    const fragmentShaderSource =\n        `void main() {\n    gl_FragColor = vec4(1.0,0.5,0.0,1.0);\n    }`\n    var program  = initShader(cxt,vertexShaderSource,fragmentShaderSource);\n    var aposLocation = cxt.getAttribLocation(program,'apos');\n    var buffer = cxt.createBuffer();\n    cxt.bindBuffer(cxt.ARRAY_BUFFER,buffer);\n    var data = new Float32Array([\n            -1.0,1.0,\n            1.0,1.0,\n            -1.0,-1.0,\n            1.0,-1.0,\n            0.0,0.0\n    ]);\n    cxt.bufferData(cxt.ARRAY_BUFFER,data,cxt.STATIC_DRAW);\n    cxt.vertexAttribPointer(aposLocation,2,cxt.FLOAT,false,0,0);\n    cxt.enableVertexAttribArray(aposLocation);\n    cxt.clearColor(0.0,0.5,0.5,1.0);\n    cxt.clear(cxt.COLOR_BUFFER_BIT);\n    cxt.drawArrays(cxt.POINTS,0,5);\n</script>\n```\n\n\n\n<img width=\"600\" src=\"webgl-2017-07-03/05.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/03\n\n","slug":"webgl-2017-07-03","published":1,"updated":"2018-02-10T09:08:00.904Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbf001rfdldtswqgtwf","content":"<h3 id=\"attribute-\"><a href=\"#attribute-\" class=\"headerlink\" title=\"attribute \"></a>attribute </h3><p>attribute</p>\n<p>attribute8attribute</p>\n<p><img width=\"600\" src=\"/webgl-2017-07-03/01.jpeg\"></p>\n<ul>\n<li> attribute </li>\n<li> attribute  gl_Position </li>\n<li> attribute </li>\n</ul>\n<a id=\"more\"></a>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">    <span class=\"string\">`attribute vec4 apos;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">  gl_Position = apos;</span></div><div class=\"line\"><span class=\"string\">  gl_PointSize = 10.0;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">    <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">  gl_FragColor = vec4(1.0,0.5,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p>webgl<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cxt = canvas.getContext(<span class=\"string\">'webgl'</span>);</div></pre></td></tr></table></figure></p>\n<p>,<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> vertexShader = cxt.createShader(cxt.VERTEX_SHADER);</div><div class=\"line\"><span class=\"keyword\">var</span> fragmentShader = cxt.createShader(cxt.FRAGMENT_SHADER);</div><div class=\"line\">cxt.shaderSource(vertexShader,vertexShaderSource);</div><div class=\"line\">cxt.shaderSource(fragmentShader,fragmentShaderSource);</div><div class=\"line\">cxt.compileShader(vertexShader);</div><div class=\"line\">cxt.compileShader(fragmentShader);</div></pre></td></tr></table></figure></p>\n<p>programprogram<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> program = cxt.createProgram();</div><div class=\"line\">cxt.attachShader(program,vertexShader);</div><div class=\"line\">cxt.attachShader(program,fragmentShader);</div><div class=\"line\">cxt.linkProgram(program);</div><div class=\"line\">cxt.useProgram(program);</div></pre></td></tr></table></figure></p>\n<p>apos<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> aposLocation = cxt.getAttribLocation(program,<span class=\"string\">'apos'</span>);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.clearColor(<span class=\"number\">0.2</span>,<span class=\"number\">0.2</span>,<span class=\"number\">0.2</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">cxt.clear(cxt.COLOR_BUFFER_BIT);</div></pre></td></tr></table></figure></p>\n<p>for<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i= <span class=\"number\">0</span>,num = points.length;i&lt;num;i++)&#123;</div><div class=\"line\">    cxt.vertexAttrib4f(aposLocation,points[i].x,points[i].y,<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">    cxt.drawArrays(cxt.POINTS,<span class=\"number\">0</span>,<span class=\"number\">1</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li>   </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>  var buffer = gl.createBuffer()</li>\n<li></li>\n<li> gl.bindBuffer(gl.ARRAY_BUFFER , buffer)</li>\n</ul>\n<p><img width=\"600\" src=\"/webgl-2017-07-03/02.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.bufferData(gl.ARRAY_BUFFER , data , gl.STATIC_DRAW)</li>\n<li>data </li>\n<li>gl.STATIC_DRAW</li>\n<li>gl.STREAM_DRAW</li>\n<li>gl.DYNAMIC_DRAW</li>\n</ul>\n<p><img width=\"600\" src=\"/webgl-2017-07-03/03.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ul>\n<li>Int8Array   Uint8Array   </li>\n<li>Int16Array   Uint16Array</li>\n<li>Int32Array   Uint32Array </li>\n<li>Float32Array </li>\n<li>Float64Array</li>\n</ul>\n<h4 id=\"-attribute-\"><a href=\"#-attribute-\" class=\"headerlink\" title=\" attribute \"></a> attribute </h4><ul>\n<li>vertexAttribPointer(location , size , type , normalized , stride , offset ) </li>\n<li>  INVALID_OPERATIONprogram</li>\n<li>  INVALID_VALUEattribute</li>\n<li>enableVertexAttribArray(location)localtion</li>\n<li>  INVALID_OPERATIONprogram</li>\n</ul>\n<p><img width=\"600\" src=\"/webgl-2017-07-03/04.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">-1.0</span>,<span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,</div><div class=\"line\">    <span class=\"number\">0.0</span>,<span class=\"number\">0.0</span></div><div class=\"line\">]);</div></pre></td></tr></table></figure></p>\n<p>bufferbaffer<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> buf = cxt.createBuffer();</div><div class=\"line\">cxt.bindBuffer(cxt.ARRAY_BUFFER,buf);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.bufferData(cxt.ARRAY_BUFFER,data,cxt.STATIC_DRAW);</div></pre></td></tr></table></figure></p>\n<p>attribute<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.vertexAttribPointer(aposLocation,<span class=\"number\">2</span>,cxt.FLOAT,<span class=\"literal\">false</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</div><div class=\"line\">cxt.enableVertexAttribArray(aposLocation);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.clearColor(<span class=\"number\">0.0</span>,<span class=\"number\">0.5</span>,<span class=\"number\">0.5</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\">cxt.drawArrays(cxt.POINTS,<span class=\"number\">0</span>,<span class=\"number\">5</span>);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"e03\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"500\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"500\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../lib.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'e03'</span>);</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> cxt = canvas.getContext(<span class=\"string\">'webgl'</span>);</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">const</span> vertexShaderSource =</span></div><div class=\"line\"><span class=\"undefined\">        `attribute vec4 apos;</span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">void</span> main() &#123;</span></div><div class=\"line\"><span class=\"undefined\">    gl_Position = apos;</span></div><div class=\"line\"><span class=\"undefined\">    gl_PointSize = 10.0;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;`</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">const</span> fragmentShaderSource =</span></div><div class=\"line\"><span class=\"undefined\">        `void main() &#123;</span></div><div class=\"line\"><span class=\"undefined\">    gl_FragColor = vec4(1.0,0.5,0.0,1.0);</span></div><div class=\"line\"><span class=\"undefined\">    &#125;`</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> program  = initShader(cxt,vertexShaderSource,fragmentShaderSource);</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> aposLocation = cxt.getAttribLocation(program,<span class=\"string\">'apos'</span>);</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> buffer = cxt.createBuffer();</span></div><div class=\"line\"><span class=\"undefined\">    cxt.bindBuffer(cxt.ARRAY_BUFFER,buffer);</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</span></div><div class=\"line\"><span class=\"undefined\">            -1.0,1.0,</span></div><div class=\"line\"><span class=\"undefined\">            1.0,1.0,</span></div><div class=\"line\"><span class=\"undefined\">            -1.0,-1.0,</span></div><div class=\"line\"><span class=\"undefined\">            1.0,-1.0,</span></div><div class=\"line\"><span class=\"undefined\">            0.0,0.0</span></div><div class=\"line\"><span class=\"undefined\">    ]);</span></div><div class=\"line\"><span class=\"undefined\">    cxt.bufferData(cxt.ARRAY_BUFFER,data,cxt.STATIC_DRAW);</span></div><div class=\"line\"><span class=\"javascript\">    cxt.vertexAttribPointer(aposLocation,<span class=\"number\">2</span>,cxt.FLOAT,<span class=\"literal\">false</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</span></div><div class=\"line\"><span class=\"undefined\">    cxt.enableVertexAttribArray(aposLocation);</span></div><div class=\"line\"><span class=\"undefined\">    cxt.clearColor(0.0,0.5,0.5,1.0);</span></div><div class=\"line\"><span class=\"undefined\">    cxt.clear(cxt.COLOR_BUFFER_BIT);</span></div><div class=\"line\"><span class=\"undefined\">    cxt.drawArrays(cxt.POINTS,0,5);</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"600\" src=\"/webgl-2017-07-03/05.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/03\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/03</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"attribute-\"><a href=\"#attribute-\" class=\"headerlink\" title=\"attribute \"></a>attribute </h3><p>attribute</p>\n<p>attribute8attribute</p>\n<p><img width=\"600\" src=\"/webgl-2017-07-03/01.jpeg\"></p>\n<ul>\n<li> attribute </li>\n<li> attribute  gl_Position </li>\n<li> attribute </li>\n</ul>","more":"<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">    <span class=\"string\">`attribute vec4 apos;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">  gl_Position = apos;</span></div><div class=\"line\"><span class=\"string\">  gl_PointSize = 10.0;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">    <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">  gl_FragColor = vec4(1.0,0.5,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p>webgl<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cxt = canvas.getContext(<span class=\"string\">'webgl'</span>);</div></pre></td></tr></table></figure></p>\n<p>,<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> vertexShader = cxt.createShader(cxt.VERTEX_SHADER);</div><div class=\"line\"><span class=\"keyword\">var</span> fragmentShader = cxt.createShader(cxt.FRAGMENT_SHADER);</div><div class=\"line\">cxt.shaderSource(vertexShader,vertexShaderSource);</div><div class=\"line\">cxt.shaderSource(fragmentShader,fragmentShaderSource);</div><div class=\"line\">cxt.compileShader(vertexShader);</div><div class=\"line\">cxt.compileShader(fragmentShader);</div></pre></td></tr></table></figure></p>\n<p>programprogram<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> program = cxt.createProgram();</div><div class=\"line\">cxt.attachShader(program,vertexShader);</div><div class=\"line\">cxt.attachShader(program,fragmentShader);</div><div class=\"line\">cxt.linkProgram(program);</div><div class=\"line\">cxt.useProgram(program);</div></pre></td></tr></table></figure></p>\n<p>apos<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> aposLocation = cxt.getAttribLocation(program,<span class=\"string\">'apos'</span>);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.clearColor(<span class=\"number\">0.2</span>,<span class=\"number\">0.2</span>,<span class=\"number\">0.2</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">cxt.clear(cxt.COLOR_BUFFER_BIT);</div></pre></td></tr></table></figure></p>\n<p>for<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i= <span class=\"number\">0</span>,num = points.length;i&lt;num;i++)&#123;</div><div class=\"line\">    cxt.vertexAttrib4f(aposLocation,points[i].x,points[i].y,<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">    cxt.drawArrays(cxt.POINTS,<span class=\"number\">0</span>,<span class=\"number\">1</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li>   </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>  var buffer = gl.createBuffer()</li>\n<li></li>\n<li> gl.bindBuffer(gl.ARRAY_BUFFER , buffer)</li>\n</ul>\n<p><img width=\"600\" src=\"/webgl-2017-07-03/02.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.bufferData(gl.ARRAY_BUFFER , data , gl.STATIC_DRAW)</li>\n<li>data </li>\n<li>gl.STATIC_DRAW</li>\n<li>gl.STREAM_DRAW</li>\n<li>gl.DYNAMIC_DRAW</li>\n</ul>\n<p><img width=\"600\" src=\"/webgl-2017-07-03/03.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ul>\n<li>Int8Array   Uint8Array   </li>\n<li>Int16Array   Uint16Array</li>\n<li>Int32Array   Uint32Array </li>\n<li>Float32Array </li>\n<li>Float64Array</li>\n</ul>\n<h4 id=\"-attribute-\"><a href=\"#-attribute-\" class=\"headerlink\" title=\" attribute \"></a> attribute </h4><ul>\n<li>vertexAttribPointer(location , size , type , normalized , stride , offset ) </li>\n<li>  INVALID_OPERATIONprogram</li>\n<li>  INVALID_VALUEattribute</li>\n<li>enableVertexAttribArray(location)localtion</li>\n<li>  INVALID_OPERATIONprogram</li>\n</ul>\n<p><img width=\"600\" src=\"/webgl-2017-07-03/04.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">-1.0</span>,<span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,</div><div class=\"line\">    <span class=\"number\">0.0</span>,<span class=\"number\">0.0</span></div><div class=\"line\">]);</div></pre></td></tr></table></figure></p>\n<p>bufferbaffer<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> buf = cxt.createBuffer();</div><div class=\"line\">cxt.bindBuffer(cxt.ARRAY_BUFFER,buf);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.bufferData(cxt.ARRAY_BUFFER,data,cxt.STATIC_DRAW);</div></pre></td></tr></table></figure></p>\n<p>attribute<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.vertexAttribPointer(aposLocation,<span class=\"number\">2</span>,cxt.FLOAT,<span class=\"literal\">false</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</div><div class=\"line\">cxt.enableVertexAttribArray(aposLocation);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.clearColor(<span class=\"number\">0.0</span>,<span class=\"number\">0.5</span>,<span class=\"number\">0.5</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\">cxt.drawArrays(cxt.POINTS,<span class=\"number\">0</span>,<span class=\"number\">5</span>);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"e03\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"500\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"500\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../lib.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'e03'</span>);</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> cxt = canvas.getContext(<span class=\"string\">'webgl'</span>);</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">const</span> vertexShaderSource =</span></div><div class=\"line\"><span class=\"undefined\">        `attribute vec4 apos;</span></div><div class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">void</span> main() &#123;</span></div><div class=\"line\"><span class=\"undefined\">    gl_Position = apos;</span></div><div class=\"line\"><span class=\"undefined\">    gl_PointSize = 10.0;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;`</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// </span></span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">const</span> fragmentShaderSource =</span></div><div class=\"line\"><span class=\"undefined\">        `void main() &#123;</span></div><div class=\"line\"><span class=\"undefined\">    gl_FragColor = vec4(1.0,0.5,0.0,1.0);</span></div><div class=\"line\"><span class=\"undefined\">    &#125;`</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> program  = initShader(cxt,vertexShaderSource,fragmentShaderSource);</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> aposLocation = cxt.getAttribLocation(program,<span class=\"string\">'apos'</span>);</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> buffer = cxt.createBuffer();</span></div><div class=\"line\"><span class=\"undefined\">    cxt.bindBuffer(cxt.ARRAY_BUFFER,buffer);</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</span></div><div class=\"line\"><span class=\"undefined\">            -1.0,1.0,</span></div><div class=\"line\"><span class=\"undefined\">            1.0,1.0,</span></div><div class=\"line\"><span class=\"undefined\">            -1.0,-1.0,</span></div><div class=\"line\"><span class=\"undefined\">            1.0,-1.0,</span></div><div class=\"line\"><span class=\"undefined\">            0.0,0.0</span></div><div class=\"line\"><span class=\"undefined\">    ]);</span></div><div class=\"line\"><span class=\"undefined\">    cxt.bufferData(cxt.ARRAY_BUFFER,data,cxt.STATIC_DRAW);</span></div><div class=\"line\"><span class=\"javascript\">    cxt.vertexAttribPointer(aposLocation,<span class=\"number\">2</span>,cxt.FLOAT,<span class=\"literal\">false</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</span></div><div class=\"line\"><span class=\"undefined\">    cxt.enableVertexAttribArray(aposLocation);</span></div><div class=\"line\"><span class=\"undefined\">    cxt.clearColor(0.0,0.5,0.5,1.0);</span></div><div class=\"line\"><span class=\"undefined\">    cxt.clear(cxt.COLOR_BUFFER_BIT);</span></div><div class=\"line\"><span class=\"undefined\">    cxt.drawArrays(cxt.POINTS,0,5);</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"600\" src=\"/webgl-2017-07-03/05.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/03\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/03</a></p>"},{"title":"WebGL--","comments":1,"toc":true,"date":"2017-07-04T13:09:11.000Z","_content":"\n### \n\n#### \n\n* gl.drawArrays( gl.POINTS, start , count )\n* gl.POINTS\n* start \n* count buffer\n\n#### \n\n*  javascript \n*  WebGL \n\n\n\n<!-- more -->\n\n### \n\n#### \n\n* gl.drawArray( gl.LINES , start , count )\n* gl.LINES\n* \n* \n\n\n\n``` javascript\ncxt.drawArrays(cxt.LINES,0,4);\n```\n\n####  \n\n* gl.drawArray( gl.LINE_STRIP , start , count )\n* gl.LINE_STRIP \n* \n\n\n\n\n``` javascript\n//\nvar data = new Float32Array([\n    -.5,.5,\n    .5,.5 ,\n    .5, -.5,\n    -.5, -.5,\n    -.5,.5\n]);\n\n// 5\ncxt.drawArrays(cxt.LINE_STRIP,0,5);\n```\n\n#### \n\n* gl.drawArray( gl.LINE_LOOP , start , count )\n* gl.LINE_LOOP 4\n\n\n\n``` javascript\n//4\nvar data = new Float32Array([\n    -.5,.5,\n    .5,.5 ,\n    .5, -.5,\n    -.5, -.5,\n    -.5,.5\n]);\n\n// 5\ncxt.drawArrays(cxt.LINE_LOOP,0,4);\n```\n\ngl.LINE_LOOPLINE_LOOP\n``` javascript\n//4\nvar data = new Float32Array([\n    -.5, .5,\n    .5, .5,\n    -.5, -.5,\n    .5, -.5\n]);\n\n// 5\ncxt.drawArrays(cxt.LINE_LOOP,0,4);\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-04/01.jpeg\"/>\n\n### \n\n#### \n\n* gl.drawArray( gl.TRIANGLES , start , count )\n* gl. TRIANGLES\n\n\n``` javascript\nvar data = new Float32Array([\n    0,0,\n    -.5,-.5 ,\n    .5, -.5\n]);\n\ncxt.drawArrays(cxt.TRIANGLES,0,3);\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-04/02.jpeg\"/>\n\n#### \n\n* gl.drawArray( gl.TRIANGLE_STRIP , start , count )\n* gl.TRIANGLE_STRIP\n\n\n``` javascript\nvar data = new Float32Array([\n        -.3,.3,\n        .5,.3,\n    -.5, -.3,\n        .3, -.3\n    ]);\n\ncxt.drawArrays(cxt.TRIANGLE_STRIP,0,4);\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-04/03.jpeg\"/>\n\n#### \n\n* gl.drawArray( gl.TRIANGLE_FAN , start , count )\n* gl.TRIANGLE_FAN\n\n\n``` javascript\nvar data = new Float32Array([\n      .0,0,\n      -.3,.5,\n      -.6,.3,\n      -.3, -.3,\n      .3, -.3,\n      .6, .3,\n          .4,.5,\n      -.3,.5\n    ]);\n\ncxt.drawArrays(cxt.TRIANGLE_FAN,0,8);\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-04/04.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/04\n","source":"_posts/webgl-2017-07-04.md","raw":"---\ntitle: WebGL--\ncomments: true\ntoc: true\ndate: 2017-07-04 21:09:11\ntags: \n    - 'javascript'\n    - 'webgl'\n---\n\n### \n\n#### \n\n* gl.drawArrays( gl.POINTS, start , count )\n* gl.POINTS\n* start \n* count buffer\n\n#### \n\n*  javascript \n*  WebGL \n\n\n\n<!-- more -->\n\n### \n\n#### \n\n* gl.drawArray( gl.LINES , start , count )\n* gl.LINES\n* \n* \n\n\n\n``` javascript\ncxt.drawArrays(cxt.LINES,0,4);\n```\n\n####  \n\n* gl.drawArray( gl.LINE_STRIP , start , count )\n* gl.LINE_STRIP \n* \n\n\n\n\n``` javascript\n//\nvar data = new Float32Array([\n    -.5,.5,\n    .5,.5 ,\n    .5, -.5,\n    -.5, -.5,\n    -.5,.5\n]);\n\n// 5\ncxt.drawArrays(cxt.LINE_STRIP,0,5);\n```\n\n#### \n\n* gl.drawArray( gl.LINE_LOOP , start , count )\n* gl.LINE_LOOP 4\n\n\n\n``` javascript\n//4\nvar data = new Float32Array([\n    -.5,.5,\n    .5,.5 ,\n    .5, -.5,\n    -.5, -.5,\n    -.5,.5\n]);\n\n// 5\ncxt.drawArrays(cxt.LINE_LOOP,0,4);\n```\n\ngl.LINE_LOOPLINE_LOOP\n``` javascript\n//4\nvar data = new Float32Array([\n    -.5, .5,\n    .5, .5,\n    -.5, -.5,\n    .5, -.5\n]);\n\n// 5\ncxt.drawArrays(cxt.LINE_LOOP,0,4);\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-04/01.jpeg\"/>\n\n### \n\n#### \n\n* gl.drawArray( gl.TRIANGLES , start , count )\n* gl. TRIANGLES\n\n\n``` javascript\nvar data = new Float32Array([\n    0,0,\n    -.5,-.5 ,\n    .5, -.5\n]);\n\ncxt.drawArrays(cxt.TRIANGLES,0,3);\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-04/02.jpeg\"/>\n\n#### \n\n* gl.drawArray( gl.TRIANGLE_STRIP , start , count )\n* gl.TRIANGLE_STRIP\n\n\n``` javascript\nvar data = new Float32Array([\n        -.3,.3,\n        .5,.3,\n    -.5, -.3,\n        .3, -.3\n    ]);\n\ncxt.drawArrays(cxt.TRIANGLE_STRIP,0,4);\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-04/03.jpeg\"/>\n\n#### \n\n* gl.drawArray( gl.TRIANGLE_FAN , start , count )\n* gl.TRIANGLE_FAN\n\n\n``` javascript\nvar data = new Float32Array([\n      .0,0,\n      -.3,.5,\n      -.6,.3,\n      -.3, -.3,\n      .3, -.3,\n      .6, .3,\n          .4,.5,\n      -.3,.5\n    ]);\n\ncxt.drawArrays(cxt.TRIANGLE_FAN,0,8);\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-04/04.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/04\n","slug":"webgl-2017-07-04","published":1,"updated":"2018-02-10T09:08:00.902Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbg001tfdld0bmo5hc0","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArrays( gl.POINTS, start , count )</li>\n<li>gl.POINTS</li>\n<li>start </li>\n<li>count buffer</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li> javascript </li>\n<li> WebGL </li>\n</ul>\n<p></p>\n<a id=\"more\"></a>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.LINES , start , count )</li>\n<li>gl.LINES</li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.drawArrays(cxt.LINES,<span class=\"number\">0</span>,<span class=\"number\">4</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.LINE_STRIP , start , count )</li>\n<li>gl.LINE_STRIP </li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">-.5</span>,<span class=\"number\">.5</span>,</div><div class=\"line\">    <span class=\"number\">.5</span>,<span class=\"number\">.5</span> ,</div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">-.5</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">-.5</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>,<span class=\"number\">.5</span></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 5</span></div><div class=\"line\">cxt.drawArrays(cxt.LINE_STRIP,<span class=\"number\">0</span>,<span class=\"number\">5</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.LINE_LOOP , start , count )</li>\n<li>gl.LINE_LOOP 4</li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//4</span></div><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">-.5</span>,<span class=\"number\">.5</span>,</div><div class=\"line\">    <span class=\"number\">.5</span>,<span class=\"number\">.5</span> ,</div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">-.5</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">-.5</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>,<span class=\"number\">.5</span></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 5</span></div><div class=\"line\">cxt.drawArrays(cxt.LINE_LOOP,<span class=\"number\">0</span>,<span class=\"number\">4</span>);</div></pre></td></tr></table></figure>\n<p>gl.LINE_LOOPLINE_LOOP<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//4</span></div><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">.5</span>,</div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">.5</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">-.5</span>,</div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">-.5</span></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 5</span></div><div class=\"line\">cxt.drawArrays(cxt.LINE_LOOP,<span class=\"number\">0</span>,<span class=\"number\">4</span>);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-04/01.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.TRIANGLES , start , count )</li>\n<li>gl. TRIANGLES</li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">0</span>,<span class=\"number\">0</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>,<span class=\"number\">-.5</span> ,</div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">-.5</span></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\">cxt.drawArrays(cxt.TRIANGLES,<span class=\"number\">0</span>,<span class=\"number\">3</span>);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-04/02.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.TRIANGLE_STRIP , start , count )</li>\n<li>gl.TRIANGLE_STRIP</li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">-.3</span>,<span class=\"number\">.3</span>,</div><div class=\"line\">        <span class=\"number\">.5</span>,<span class=\"number\">.3</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">-.3</span>,</div><div class=\"line\">        <span class=\"number\">.3</span>, <span class=\"number\">-.3</span></div><div class=\"line\">    ]);</div><div class=\"line\"></div><div class=\"line\">cxt.drawArrays(cxt.TRIANGLE_STRIP,<span class=\"number\">0</span>,<span class=\"number\">4</span>);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-04/03.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.TRIANGLE_FAN , start , count )</li>\n<li>gl.TRIANGLE_FAN</li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">      <span class=\"number\">.0</span>,<span class=\"number\">0</span>,</div><div class=\"line\">      <span class=\"number\">-.3</span>,<span class=\"number\">.5</span>,</div><div class=\"line\">      <span class=\"number\">-.6</span>,<span class=\"number\">.3</span>,</div><div class=\"line\">      <span class=\"number\">-.3</span>, <span class=\"number\">-.3</span>,</div><div class=\"line\">      <span class=\"number\">.3</span>, <span class=\"number\">-.3</span>,</div><div class=\"line\">      <span class=\"number\">.6</span>, <span class=\"number\">.3</span>,</div><div class=\"line\">          <span class=\"number\">.4</span>,<span class=\"number\">.5</span>,</div><div class=\"line\">      <span class=\"number\">-.3</span>,<span class=\"number\">.5</span></div><div class=\"line\">    ]);</div><div class=\"line\"></div><div class=\"line\">cxt.drawArrays(cxt.TRIANGLE_FAN,<span class=\"number\">0</span>,<span class=\"number\">8</span>);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-04/04.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/04\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/04</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArrays( gl.POINTS, start , count )</li>\n<li>gl.POINTS</li>\n<li>start </li>\n<li>count buffer</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li> javascript </li>\n<li> WebGL </li>\n</ul>\n<p></p>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.LINES , start , count )</li>\n<li>gl.LINES</li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.drawArrays(cxt.LINES,<span class=\"number\">0</span>,<span class=\"number\">4</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.LINE_STRIP , start , count )</li>\n<li>gl.LINE_STRIP </li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">-.5</span>,<span class=\"number\">.5</span>,</div><div class=\"line\">    <span class=\"number\">.5</span>,<span class=\"number\">.5</span> ,</div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">-.5</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">-.5</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>,<span class=\"number\">.5</span></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 5</span></div><div class=\"line\">cxt.drawArrays(cxt.LINE_STRIP,<span class=\"number\">0</span>,<span class=\"number\">5</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.LINE_LOOP , start , count )</li>\n<li>gl.LINE_LOOP 4</li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//4</span></div><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">-.5</span>,<span class=\"number\">.5</span>,</div><div class=\"line\">    <span class=\"number\">.5</span>,<span class=\"number\">.5</span> ,</div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">-.5</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">-.5</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>,<span class=\"number\">.5</span></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 5</span></div><div class=\"line\">cxt.drawArrays(cxt.LINE_LOOP,<span class=\"number\">0</span>,<span class=\"number\">4</span>);</div></pre></td></tr></table></figure>\n<p>gl.LINE_LOOPLINE_LOOP<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//4</span></div><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">.5</span>,</div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">.5</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">-.5</span>,</div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">-.5</span></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 5</span></div><div class=\"line\">cxt.drawArrays(cxt.LINE_LOOP,<span class=\"number\">0</span>,<span class=\"number\">4</span>);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-04/01.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.TRIANGLES , start , count )</li>\n<li>gl. TRIANGLES</li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">0</span>,<span class=\"number\">0</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>,<span class=\"number\">-.5</span> ,</div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">-.5</span></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\">cxt.drawArrays(cxt.TRIANGLES,<span class=\"number\">0</span>,<span class=\"number\">3</span>);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-04/02.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.TRIANGLE_STRIP , start , count )</li>\n<li>gl.TRIANGLE_STRIP</li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">-.3</span>,<span class=\"number\">.3</span>,</div><div class=\"line\">        <span class=\"number\">.5</span>,<span class=\"number\">.3</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">-.3</span>,</div><div class=\"line\">        <span class=\"number\">.3</span>, <span class=\"number\">-.3</span></div><div class=\"line\">    ]);</div><div class=\"line\"></div><div class=\"line\">cxt.drawArrays(cxt.TRIANGLE_STRIP,<span class=\"number\">0</span>,<span class=\"number\">4</span>);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-04/03.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>gl.drawArray( gl.TRIANGLE_FAN , start , count )</li>\n<li>gl.TRIANGLE_FAN</li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">      <span class=\"number\">.0</span>,<span class=\"number\">0</span>,</div><div class=\"line\">      <span class=\"number\">-.3</span>,<span class=\"number\">.5</span>,</div><div class=\"line\">      <span class=\"number\">-.6</span>,<span class=\"number\">.3</span>,</div><div class=\"line\">      <span class=\"number\">-.3</span>, <span class=\"number\">-.3</span>,</div><div class=\"line\">      <span class=\"number\">.3</span>, <span class=\"number\">-.3</span>,</div><div class=\"line\">      <span class=\"number\">.6</span>, <span class=\"number\">.3</span>,</div><div class=\"line\">          <span class=\"number\">.4</span>,<span class=\"number\">.5</span>,</div><div class=\"line\">      <span class=\"number\">-.3</span>,<span class=\"number\">.5</span></div><div class=\"line\">    ]);</div><div class=\"line\"></div><div class=\"line\">cxt.drawArrays(cxt.TRIANGLE_FAN,<span class=\"number\">0</span>,<span class=\"number\">8</span>);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-04/04.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/04\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/04</a></p>"},{"title":"WebGL--","comments":1,"toc":true,"date":"2017-07-06T13:09:11.000Z","_content":"\n### \n\n#### \n\n* \n* \n\nsetTimeout\n\n<!-- more -->\n\nabxy\n``` javascript\nconst vertexShaderSource =\n    `\n    attribute vec4 pos;\n    uniform float a;\n    uniform float b;\n    void main() {\n      gl_Position.x = pos.x + a;\n      gl_Position.y = pos.y + b;\n      gl_Position.z = .0;\n      gl_PointSize = 10.0;\n}`\n```\n\n\n``` javascript\nconst fragmentShaderSource =\n    `void main() {\n      gl_FragColor = vec4(1.0,0.5,0.0,1.0);\n  }`\n```\n\nlocation\n``` javascript\nvar posLocation = cxt.getAttribLocation(program, 'pos');\nvar aLocation = cxt.getUniformLocation(program, 'a');\nvar bLocation = cxt.getUniformLocation(program, 'b');\n```\n\nsetTimeOut\n``` javascript\nrun();\n    function run() {\n        cxt.uniform1f(aLocation, a);\n        cxt.uniform1f(bLocation, b);\n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n\n        a += .05;\n        b += .05;\n\n        setTimeout(run, 500)\n    }\n```\n\n\n### \n\n#### \n\n* ()\n* xy\n\n ,cjxycj\n ``` javascript\n const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform float cj;\n    void main() {\n      gl_Position.x = pos.x * cj;\n      gl_Position.y = pos.y * cj;\n      gl_Position.z = .0;\n      gl_Position.w = 1.0;\n      gl_PointSize = 10.0;\n}`\n```\n\ncjLocation\n``` javascript\nvar cjLocation = cxt.getUniformLocation(program, 'cj');\n```\n\nrender\n``` javascript\nvar cj = 1.0;\t\n    render();\n    function render() {\n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n        cxt.uniform1f(cjLocation, cj);\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n    }\n    function fangda() {\n        cj += .05;\n        render()\n    }\n\n    function suoxiao() {\n        cj -= .05;\n        render()\n    }\n```\n\n#### w\n\nvec4vec2posxy\n ``` javascript\n const vertexShaderSource =\n        `\n    attribute vec2 pos;\n    uniform float w;\n    void main() {\n      gl_Position = vec4(pos,0.0,w);\n}`\n```\n\nvec4vec4(x/w,y/w,z/w,w),wxy\n\n\n### \n\n#### \n\n* \n* gl.Position.xgl.Position.y\n\n#### \n\n* x = r.cos(a)\n* y = r.sin(a)\n* x1 = r.cos(a+b)\n* y1 = r.sin(a+b)\n* x1 = x.cos(b) - y.sin(b)\n* y1 = x.sin(b) + y.cos(b)\n* z1 = z = 0.0\n\n\n ``` javascript\nconst vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform float cosB;\n    uniform float sinB;\n    void main() {\n      gl_Position.x = pos.x * cosB - pos.y * sinB;\n      gl_Position.y = pos.x * sinB + pos.y * cosB;\n      gl_Position.z = .0;\n      gl_Position.w = 1.0;\n}`\n```\n\n\n ``` javascript\nvar angle = 10.0;\n    function render() {\n        var t = Math.PI * angle / 180;\n        var cosB = Math.sin(t);\n        var sinB = Math.cos(t);\n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n        cxt.uniform1f(cosBLocation, cosB);\n        cxt.uniform1f(sinBLocation, sinB);\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n    }\n\n    setInterval(() => {\n        angle += 1.0;\n        render();\n    }, 1000)\n```\n\n### \n\n#### \n\n* \n* \n\nTx,Ty,xy\n\n<img width=\"300\" src=\"webgl-2017-07-06/1.jpeg\"/>\n\nxf\n ``` javascript\nconst vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform mat4 xf;\n    void main() {\n      gl_Position = xf * pos;\n}`\n```\n\n\n ``` javascript\nvar xf = new Float32Array([\n                    1.0, 0.0, 0.0, 0.0,\n                    0.0, 1.0, 0.0, 0.0,\n                    0.0, 0.0, 1.0, 0.0,\n                    Tx, Ty, 0.0, 1.0\n                ]);\n```\n\nTxTyrender\n``` javascript\nvar Tx = 1.0, Ty = 0.0;\n\n    function render() {\n      var xf = new Float32Array([\n                    1.0, 0.0, 0.0, 0.0,\n                    0.0, 1.0, 0.0, 0.0,\n                    0.0, 0.0, 1.0, 0.0,\n                    Tx, Ty, 0.0, 1.0\n                ]);\n        \n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n        cxt.uniformMatrix4fv(xfLocation,false,xf);\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n    }\n    render()\n```\n\n### \n\n#### \n\n* \n* \n\nSx,Sy\n<img width=\"300\" src=\"webgl-2017-07-06/2.jpeg\"/>\n\n\n``` javascript\nvar sx = 1.0,\n        sy = 1.0;\n\n    function render() {\n        var xf = new Float32Array([\n            sx, 0.0, 0.0, 0.0,\n            0.0, sy, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            0.0, 0.0, 0.0, 1.0\n        ]);\n\n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n        cxt.uniformMatrix4fv(xfLocation, false, xf);\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n    }\n\n    render()\n```\n\n### \n\n#### \n\n* \n*  gl_Position.x  gl_Position.y \n\n<img width=\"300\" src=\"webgl-2017-07-06/3.jpeg\"/>\n\n\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform mat4 xf;\n    void main() {\n      gl_Position = xf * pos;\n}`\n\n    // \n    const fragmentShaderSource =\n        `void main() {\n      gl_FragColor = vec4(1.0,.0,.0,1.0);\n  }`\n```\n\nrender\n``` javascript\nvar time;\n\n    function render() {\n        angle += zl;\n\n        t = Math.PI * angle / 180;\n        sinB = Math.sin(t);\n        cosB = Math.cos(t);\n        var xf = new Float32Array([\n            cosB, sinB, 0.0, 0.0, -sinB, cosB, 0.0, .0,\n            0.0, .0, 1.0, .0,\n            0.0, .0, .0, 1.0\n        ]);\n        cxt.uniformMatrix4fv(xfLocation, false, xf);\n\n        cxt.clearColor(.5, .5, .5, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n\n        cxt.drawArrays(cxt.LINES, 0, 2);\n        time = setTimeout(render, 500);\n\n        if (!isOpen) {\n            clearTimeout(time);\n        }\n    }\n\n    render()\n```\n\n\n<img width=\"600\" src=\"webgl-2017-07-06/4.jpeg\"/>\n\n### WebGL\n\n#### \n\n*  setTimeout \n* \n* \n* A * B *   \n\n#### \n\n* \n* \n* \n* \n\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform mat4 xz;\n    uniform mat4 py;\n    void main() {\n      gl_Position = pos * xz * py;\n}`\n\n    // \n    const fragmentShaderSource =\n        `void main() {\n      gl_FragColor = vec4(1.0,.0,.0,1.0);\n  }`\n```\n\nbufferbuffer\n``` javascript\nvar cxt = document.getElementById('example08').getContext('webgl');\n\n    var buffer = cxt.createBuffer();\n    cxt.bindBuffer(cxt.ARRAY_BUFFER, buffer);\n    var data = new Float32Array([\n        0.0, 0.2, -.2, -.2,\n        .2, -.2,\n    ]);\n\n    cxt.bufferData(cxt.ARRAY_BUFFER, data, cxt.STATIC_DRAW);\n\n    var program = initShader(cxt, vertexShaderSource, fragmentShaderSource);\n\n    var posLocation = cxt.getAttribLocation(program, 'pos');\n    var xzLocation = cxt.getUniformLocation(program, 'xz');\n    var pyLocation = cxt.getUniformLocation(program, 'py');\n\n\n    cxt.vertexAttribPointer(posLocation, 2, cxt.FLOAT, false, 0, 0);\n    cxt.enableVertexAttribArray(posLocation);\n```\n\n\n``` javascript\nvar xz = new Float32Array([\n            cosB, sinB, 0.0, 0.0, \n            -sinB, cosB, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            0.0, 0.0, 0.0, 1.0\n        ]);\n var py = new Float32Array([\n            1.0, 0.0, 0.0, 0.0,\n            0.0, 1.0, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            tx, ty, 0.0, 1.0\n        ]);\n\n        cxt.uniformMatrix4fv(xzLocation,false, xz);\n        cxt.uniformMatrix4fv(pyLocation,false, py);       \n```\n\nsetTimeOutrun\n\n``` javascript\nfunction run() {\n        var t = Math.PI * ANGLE / 180;\n        sinB = Math.sin(t);\n        cosB = Math.cos(t);\n\n        var xz = new Float32Array([\n            cosB, sinB, 0.0, 0.0, \n            -sinB, cosB, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            0.0, 0.0, 0.0, 1.0\n        ]);\n\n        tx += .005;\n        ty += .005;\n\n        ANGLE += 1;\n\n        var py = new Float32Array([\n            1.0, 0.0, 0.0, 0.0,\n            0.0, 1.0, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            tx, ty, 0.0, 1.0\n        ]);\n\n        cxt.uniformMatrix4fv(xzLocation,false, xz);\n        cxt.uniformMatrix4fv(pyLocation,false, py);\n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n\n\n        setTimeout(run, 500)\n    }\n\n    run();     \n```\n\n\n### \n\n* 4 * 4 \n\n\n\n<img width=\"300\" src=\"webgl-2017-07-08/5.jpeg\"/>\n\n\n``` javascript\nfunction mix(a, b) {\n        var result = new Float32Array(16);\n\n        for (var i = 0; i < 4; i++) {\n            result[i] = a[i] * b[0] + a[i + 4] * b[1] + a[i + 8] * b[2] + a[i + 12] * b[3];\n            result[i + 4] = a[i] * b[4] + a[i + 4] * b[5] + a[i + 8] * b[6] + a[i + 12] * b[7];\n            result[i + 8] = a[i] * b[8] + a[i + 4] * b[9] + a[i + 8] * b[10] + a[i + 12] * b[11];\n            result[i + 12] = a[i] * b[12] + a[i + 4] * b[13] + a[i + 8] * b[14] + a[i + 12] * b[15];\n        }\n\n        return result;\n    }\n\n```\n\n\n``` javascript\nconst vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform mat4 xf;\n    void main() {\n      gl_Position = pos * xf;\n}`\n\n    // \n    const fragmentShaderSource =\n        `void main() {\n      gl_FragColor = vec4(1.0,.0,.0,1.0);\n  }`\n```\n\nLocation\n``` javascript\nvar xfLocation = cxt.getUniformLocation(program, 'xf');\ncxt.uniformMatrix4fv(xfLocation, false, mix(xz,py));\n```\n\n https://github.com/wqzwh/webgl-code/tree/master/05","source":"_posts/webgl-2017-07-06.md","raw":"---\ntitle: WebGL--\ncomments: true\ntoc: true\ndate: 2017-07-06 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n---\n\n### \n\n#### \n\n* \n* \n\nsetTimeout\n\n<!-- more -->\n\nabxy\n``` javascript\nconst vertexShaderSource =\n    `\n    attribute vec4 pos;\n    uniform float a;\n    uniform float b;\n    void main() {\n      gl_Position.x = pos.x + a;\n      gl_Position.y = pos.y + b;\n      gl_Position.z = .0;\n      gl_PointSize = 10.0;\n}`\n```\n\n\n``` javascript\nconst fragmentShaderSource =\n    `void main() {\n      gl_FragColor = vec4(1.0,0.5,0.0,1.0);\n  }`\n```\n\nlocation\n``` javascript\nvar posLocation = cxt.getAttribLocation(program, 'pos');\nvar aLocation = cxt.getUniformLocation(program, 'a');\nvar bLocation = cxt.getUniformLocation(program, 'b');\n```\n\nsetTimeOut\n``` javascript\nrun();\n    function run() {\n        cxt.uniform1f(aLocation, a);\n        cxt.uniform1f(bLocation, b);\n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n\n        a += .05;\n        b += .05;\n\n        setTimeout(run, 500)\n    }\n```\n\n\n### \n\n#### \n\n* ()\n* xy\n\n ,cjxycj\n ``` javascript\n const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform float cj;\n    void main() {\n      gl_Position.x = pos.x * cj;\n      gl_Position.y = pos.y * cj;\n      gl_Position.z = .0;\n      gl_Position.w = 1.0;\n      gl_PointSize = 10.0;\n}`\n```\n\ncjLocation\n``` javascript\nvar cjLocation = cxt.getUniformLocation(program, 'cj');\n```\n\nrender\n``` javascript\nvar cj = 1.0;\t\n    render();\n    function render() {\n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n        cxt.uniform1f(cjLocation, cj);\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n    }\n    function fangda() {\n        cj += .05;\n        render()\n    }\n\n    function suoxiao() {\n        cj -= .05;\n        render()\n    }\n```\n\n#### w\n\nvec4vec2posxy\n ``` javascript\n const vertexShaderSource =\n        `\n    attribute vec2 pos;\n    uniform float w;\n    void main() {\n      gl_Position = vec4(pos,0.0,w);\n}`\n```\n\nvec4vec4(x/w,y/w,z/w,w),wxy\n\n\n### \n\n#### \n\n* \n* gl.Position.xgl.Position.y\n\n#### \n\n* x = r.cos(a)\n* y = r.sin(a)\n* x1 = r.cos(a+b)\n* y1 = r.sin(a+b)\n* x1 = x.cos(b) - y.sin(b)\n* y1 = x.sin(b) + y.cos(b)\n* z1 = z = 0.0\n\n\n ``` javascript\nconst vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform float cosB;\n    uniform float sinB;\n    void main() {\n      gl_Position.x = pos.x * cosB - pos.y * sinB;\n      gl_Position.y = pos.x * sinB + pos.y * cosB;\n      gl_Position.z = .0;\n      gl_Position.w = 1.0;\n}`\n```\n\n\n ``` javascript\nvar angle = 10.0;\n    function render() {\n        var t = Math.PI * angle / 180;\n        var cosB = Math.sin(t);\n        var sinB = Math.cos(t);\n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n        cxt.uniform1f(cosBLocation, cosB);\n        cxt.uniform1f(sinBLocation, sinB);\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n    }\n\n    setInterval(() => {\n        angle += 1.0;\n        render();\n    }, 1000)\n```\n\n### \n\n#### \n\n* \n* \n\nTx,Ty,xy\n\n<img width=\"300\" src=\"webgl-2017-07-06/1.jpeg\"/>\n\nxf\n ``` javascript\nconst vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform mat4 xf;\n    void main() {\n      gl_Position = xf * pos;\n}`\n```\n\n\n ``` javascript\nvar xf = new Float32Array([\n                    1.0, 0.0, 0.0, 0.0,\n                    0.0, 1.0, 0.0, 0.0,\n                    0.0, 0.0, 1.0, 0.0,\n                    Tx, Ty, 0.0, 1.0\n                ]);\n```\n\nTxTyrender\n``` javascript\nvar Tx = 1.0, Ty = 0.0;\n\n    function render() {\n      var xf = new Float32Array([\n                    1.0, 0.0, 0.0, 0.0,\n                    0.0, 1.0, 0.0, 0.0,\n                    0.0, 0.0, 1.0, 0.0,\n                    Tx, Ty, 0.0, 1.0\n                ]);\n        \n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n        cxt.uniformMatrix4fv(xfLocation,false,xf);\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n    }\n    render()\n```\n\n### \n\n#### \n\n* \n* \n\nSx,Sy\n<img width=\"300\" src=\"webgl-2017-07-06/2.jpeg\"/>\n\n\n``` javascript\nvar sx = 1.0,\n        sy = 1.0;\n\n    function render() {\n        var xf = new Float32Array([\n            sx, 0.0, 0.0, 0.0,\n            0.0, sy, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            0.0, 0.0, 0.0, 1.0\n        ]);\n\n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n        cxt.uniformMatrix4fv(xfLocation, false, xf);\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n    }\n\n    render()\n```\n\n### \n\n#### \n\n* \n*  gl_Position.x  gl_Position.y \n\n<img width=\"300\" src=\"webgl-2017-07-06/3.jpeg\"/>\n\n\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform mat4 xf;\n    void main() {\n      gl_Position = xf * pos;\n}`\n\n    // \n    const fragmentShaderSource =\n        `void main() {\n      gl_FragColor = vec4(1.0,.0,.0,1.0);\n  }`\n```\n\nrender\n``` javascript\nvar time;\n\n    function render() {\n        angle += zl;\n\n        t = Math.PI * angle / 180;\n        sinB = Math.sin(t);\n        cosB = Math.cos(t);\n        var xf = new Float32Array([\n            cosB, sinB, 0.0, 0.0, -sinB, cosB, 0.0, .0,\n            0.0, .0, 1.0, .0,\n            0.0, .0, .0, 1.0\n        ]);\n        cxt.uniformMatrix4fv(xfLocation, false, xf);\n\n        cxt.clearColor(.5, .5, .5, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n\n        cxt.drawArrays(cxt.LINES, 0, 2);\n        time = setTimeout(render, 500);\n\n        if (!isOpen) {\n            clearTimeout(time);\n        }\n    }\n\n    render()\n```\n\n\n<img width=\"600\" src=\"webgl-2017-07-06/4.jpeg\"/>\n\n### WebGL\n\n#### \n\n*  setTimeout \n* \n* \n* A * B *   \n\n#### \n\n* \n* \n* \n* \n\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform mat4 xz;\n    uniform mat4 py;\n    void main() {\n      gl_Position = pos * xz * py;\n}`\n\n    // \n    const fragmentShaderSource =\n        `void main() {\n      gl_FragColor = vec4(1.0,.0,.0,1.0);\n  }`\n```\n\nbufferbuffer\n``` javascript\nvar cxt = document.getElementById('example08').getContext('webgl');\n\n    var buffer = cxt.createBuffer();\n    cxt.bindBuffer(cxt.ARRAY_BUFFER, buffer);\n    var data = new Float32Array([\n        0.0, 0.2, -.2, -.2,\n        .2, -.2,\n    ]);\n\n    cxt.bufferData(cxt.ARRAY_BUFFER, data, cxt.STATIC_DRAW);\n\n    var program = initShader(cxt, vertexShaderSource, fragmentShaderSource);\n\n    var posLocation = cxt.getAttribLocation(program, 'pos');\n    var xzLocation = cxt.getUniformLocation(program, 'xz');\n    var pyLocation = cxt.getUniformLocation(program, 'py');\n\n\n    cxt.vertexAttribPointer(posLocation, 2, cxt.FLOAT, false, 0, 0);\n    cxt.enableVertexAttribArray(posLocation);\n```\n\n\n``` javascript\nvar xz = new Float32Array([\n            cosB, sinB, 0.0, 0.0, \n            -sinB, cosB, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            0.0, 0.0, 0.0, 1.0\n        ]);\n var py = new Float32Array([\n            1.0, 0.0, 0.0, 0.0,\n            0.0, 1.0, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            tx, ty, 0.0, 1.0\n        ]);\n\n        cxt.uniformMatrix4fv(xzLocation,false, xz);\n        cxt.uniformMatrix4fv(pyLocation,false, py);       \n```\n\nsetTimeOutrun\n\n``` javascript\nfunction run() {\n        var t = Math.PI * ANGLE / 180;\n        sinB = Math.sin(t);\n        cosB = Math.cos(t);\n\n        var xz = new Float32Array([\n            cosB, sinB, 0.0, 0.0, \n            -sinB, cosB, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            0.0, 0.0, 0.0, 1.0\n        ]);\n\n        tx += .005;\n        ty += .005;\n\n        ANGLE += 1;\n\n        var py = new Float32Array([\n            1.0, 0.0, 0.0, 0.0,\n            0.0, 1.0, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            tx, ty, 0.0, 1.0\n        ]);\n\n        cxt.uniformMatrix4fv(xzLocation,false, xz);\n        cxt.uniformMatrix4fv(pyLocation,false, py);\n        cxt.clearColor(0.0, 0.0, 0.0, 1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n\n        cxt.drawArrays(cxt.TRIANGLES, 0, 3);\n\n\n        setTimeout(run, 500)\n    }\n\n    run();     \n```\n\n\n### \n\n* 4 * 4 \n\n\n\n<img width=\"300\" src=\"webgl-2017-07-08/5.jpeg\"/>\n\n\n``` javascript\nfunction mix(a, b) {\n        var result = new Float32Array(16);\n\n        for (var i = 0; i < 4; i++) {\n            result[i] = a[i] * b[0] + a[i + 4] * b[1] + a[i + 8] * b[2] + a[i + 12] * b[3];\n            result[i + 4] = a[i] * b[4] + a[i + 4] * b[5] + a[i + 8] * b[6] + a[i + 12] * b[7];\n            result[i + 8] = a[i] * b[8] + a[i + 4] * b[9] + a[i + 8] * b[10] + a[i + 12] * b[11];\n            result[i + 12] = a[i] * b[12] + a[i + 4] * b[13] + a[i + 8] * b[14] + a[i + 12] * b[15];\n        }\n\n        return result;\n    }\n\n```\n\n\n``` javascript\nconst vertexShaderSource =\n        `\n    attribute vec4 pos;\n    uniform mat4 xf;\n    void main() {\n      gl_Position = pos * xf;\n}`\n\n    // \n    const fragmentShaderSource =\n        `void main() {\n      gl_FragColor = vec4(1.0,.0,.0,1.0);\n  }`\n```\n\nLocation\n``` javascript\nvar xfLocation = cxt.getUniformLocation(program, 'xf');\ncxt.uniformMatrix4fv(xfLocation, false, mix(xz,py));\n```\n\n https://github.com/wqzwh/webgl-code/tree/master/05","slug":"webgl-2017-07-06","published":1,"updated":"2018-02-10T09:08:00.917Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbh001wfdldvux0ft4g","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<p>setTimeout</p>\n<a id=\"more\"></a>\n<p>abxy<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">    <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform float a;</span></div><div class=\"line\"><span class=\"string\">    uniform float b;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.x = pos.x + a;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.y = pos.y + b;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.z = .0;</span></div><div class=\"line\"><span class=\"string\">      gl_PointSize = 10.0;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">    <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,0.5,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p>location<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> posLocation = cxt.getAttribLocation(program, <span class=\"string\">'pos'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> aLocation = cxt.getUniformLocation(program, <span class=\"string\">'a'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> bLocation = cxt.getUniformLocation(program, <span class=\"string\">'b'</span>);</div></pre></td></tr></table></figure></p>\n<p>setTimeOut<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">run();</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        cxt.uniform1f(aLocation, a);</div><div class=\"line\">        cxt.uniform1f(bLocation, b);</div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\"></div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\"></div><div class=\"line\">        a += <span class=\"number\">.05</span>;</div><div class=\"line\">        b += <span class=\"number\">.05</span>;</div><div class=\"line\"></div><div class=\"line\">        setTimeout(run, <span class=\"number\">500</span>)</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>()</li>\n<li><p>xy</p>\n<p>,cjxycj</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform float cj;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.x = pos.x * cj;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.y = pos.y * cj;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.z = .0;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.w = 1.0;</span></div><div class=\"line\"><span class=\"string\">      gl_PointSize = 10.0;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>cjLocation<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cjLocation = cxt.getUniformLocation(program, <span class=\"string\">'cj'</span>);</div></pre></td></tr></table></figure></p>\n<p>render<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cj = <span class=\"number\">1.0</span>;\t</div><div class=\"line\">    render();</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\">        cxt.uniform1f(cjLocation, cj);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fangda</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        cj += <span class=\"number\">.05</span>;</div><div class=\"line\">        render()</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">suoxiao</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        cj -= <span class=\"number\">.05</span>;</div><div class=\"line\">        render()</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"w\"><a href=\"#w\" class=\"headerlink\" title=\"w\"></a>w</h4><p>vec4vec2posxy<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec2 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform float w;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = vec4(pos,0.0,w);</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<p>vec4vec4(x/w,y/w,z/w,w),wxy</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li>gl.Position.xgl.Position.y</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>x = r.cos(a)</li>\n<li>y = r.sin(a)</li>\n<li>x1 = r.cos(a+b)</li>\n<li>y1 = r.sin(a+b)</li>\n<li>x1 = x.cos(b) - y.sin(b)</li>\n<li>y1 = x.sin(b) + y.cos(b)</li>\n<li>z1 = z = 0.0</li>\n</ul>\n<p><br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform float cosB;</span></div><div class=\"line\"><span class=\"string\">    uniform float sinB;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.x = pos.x * cosB - pos.y * sinB;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.y = pos.x * sinB + pos.y * cosB;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.z = .0;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.w = 1.0;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> angle = <span class=\"number\">10.0</span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> t = <span class=\"built_in\">Math</span>.PI * angle / <span class=\"number\">180</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> cosB = <span class=\"built_in\">Math</span>.sin(t);</div><div class=\"line\">        <span class=\"keyword\">var</span> sinB = <span class=\"built_in\">Math</span>.cos(t);</div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\">        cxt.uniform1f(cosBLocation, cosB);</div><div class=\"line\">        cxt.uniform1f(sinBLocation, sinB);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    setInterval(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">        angle += <span class=\"number\">1.0</span>;</div><div class=\"line\">        render();</div><div class=\"line\">    &#125;, <span class=\"number\">1000</span>)</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<p>Tx,Ty,xy</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-06/1.jpeg\"></p>\n<p>xf<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 xf;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = xf * pos;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xf = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">                    <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    Tx, Ty, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">                ]);</div></pre></td></tr></table></figure></p>\n<p>TxTyrender<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> Tx = <span class=\"number\">1.0</span>, Ty = <span class=\"number\">0.0</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> xf = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">                    <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    Tx, Ty, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">                ]);</div><div class=\"line\">        </div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\">        cxt.uniformMatrix4fv(xfLocation,<span class=\"literal\">false</span>,xf);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    render()</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-4\"><a href=\"#-4\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<p>Sx,Sy<br><img width=\"300\" src=\"/webgl-2017-07-06/2.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> sx = <span class=\"number\">1.0</span>,</div><div class=\"line\">        sy = <span class=\"number\">1.0</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> xf = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            sx, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, sy, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\"></div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\">        cxt.uniformMatrix4fv(xfLocation, <span class=\"literal\">false</span>, xf);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    render()</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-5\"><a href=\"#-5\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li> gl_Position.x  gl_Position.y </li>\n</ul>\n<p><img width=\"300\" src=\"/webgl-2017-07-06/3.jpeg\"></p>\n<p></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 xf;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = xf * pos;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,.0,.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p>render<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> time;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        angle += zl;</div><div class=\"line\"></div><div class=\"line\">        t = <span class=\"built_in\">Math</span>.PI * angle / <span class=\"number\">180</span>;</div><div class=\"line\">        sinB = <span class=\"built_in\">Math</span>.sin(t);</div><div class=\"line\">        cosB = <span class=\"built_in\">Math</span>.cos(t);</div><div class=\"line\">        <span class=\"keyword\">var</span> xf = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            cosB, sinB, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, -sinB, cosB, <span class=\"number\">0.0</span>, <span class=\"number\">.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">.0</span>, <span class=\"number\">.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\">        cxt.uniformMatrix4fv(xfLocation, <span class=\"literal\">false</span>, xf);</div><div class=\"line\"></div><div class=\"line\">        cxt.clearColor(<span class=\"number\">.5</span>, <span class=\"number\">.5</span>, <span class=\"number\">.5</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\"></div><div class=\"line\">        cxt.drawArrays(cxt.LINES, <span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">        time = setTimeout(render, <span class=\"number\">500</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (!isOpen) &#123;</div><div class=\"line\">            clearTimeout(time);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    render()</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/webgl-2017-07-06/4.jpeg\"></p>\n<h3 id=\"WebGL\"><a href=\"#WebGL\" class=\"headerlink\" title=\"WebGL\"></a>WebGL</h3><h4 id=\"-6\"><a href=\"#-6\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li> setTimeout </li>\n<li></li>\n<li></li>\n<li>A <em> B </em>   </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 xz;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 py;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = pos * xz * py;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,.0,.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure>\n<p>bufferbuffer<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cxt = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'example08'</span>).getContext(<span class=\"string\">'webgl'</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> buffer = cxt.createBuffer();</div><div class=\"line\">    cxt.bindBuffer(cxt.ARRAY_BUFFER, buffer);</div><div class=\"line\">    <span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">0.0</span>, <span class=\"number\">0.2</span>, <span class=\"number\">-.2</span>, <span class=\"number\">-.2</span>,</div><div class=\"line\">        <span class=\"number\">.2</span>, <span class=\"number\">-.2</span>,</div><div class=\"line\">    ]);</div><div class=\"line\"></div><div class=\"line\">    cxt.bufferData(cxt.ARRAY_BUFFER, data, cxt.STATIC_DRAW);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> program = initShader(cxt, vertexShaderSource, fragmentShaderSource);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> posLocation = cxt.getAttribLocation(program, <span class=\"string\">'pos'</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> xzLocation = cxt.getUniformLocation(program, <span class=\"string\">'xz'</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> pyLocation = cxt.getUniformLocation(program, <span class=\"string\">'py'</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    cxt.vertexAttribPointer(posLocation, <span class=\"number\">2</span>, cxt.FLOAT, <span class=\"literal\">false</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</div><div class=\"line\">    cxt.enableVertexAttribArray(posLocation);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xz = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            cosB, sinB, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, </div><div class=\"line\">            -sinB, cosB, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\"> <span class=\"keyword\">var</span> py = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            tx, ty, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\"></div><div class=\"line\">        cxt.uniformMatrix4fv(xzLocation,<span class=\"literal\">false</span>, xz);</div><div class=\"line\">        cxt.uniformMatrix4fv(pyLocation,<span class=\"literal\">false</span>, py);</div></pre></td></tr></table></figure></p>\n<p>setTimeOutrun</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> t = <span class=\"built_in\">Math</span>.PI * ANGLE / <span class=\"number\">180</span>;</div><div class=\"line\">        sinB = <span class=\"built_in\">Math</span>.sin(t);</div><div class=\"line\">        cosB = <span class=\"built_in\">Math</span>.cos(t);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> xz = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            cosB, sinB, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, </div><div class=\"line\">            -sinB, cosB, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\"></div><div class=\"line\">        tx += <span class=\"number\">.005</span>;</div><div class=\"line\">        ty += <span class=\"number\">.005</span>;</div><div class=\"line\"></div><div class=\"line\">        ANGLE += <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> py = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            tx, ty, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\"></div><div class=\"line\">        cxt.uniformMatrix4fv(xzLocation,<span class=\"literal\">false</span>, xz);</div><div class=\"line\">        cxt.uniformMatrix4fv(pyLocation,<span class=\"literal\">false</span>, py);</div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\"></div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        setTimeout(run, <span class=\"number\">500</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    run();</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>4 * 4 </li>\n</ul>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-06/5.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mix</span>(<span class=\"params\">a, b</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> result = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>(<span class=\"number\">16</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</div><div class=\"line\">            result[i] = a[i] * b[<span class=\"number\">0</span>] + a[i + <span class=\"number\">4</span>] * b[<span class=\"number\">1</span>] + a[i + <span class=\"number\">8</span>] * b[<span class=\"number\">2</span>] + a[i + <span class=\"number\">12</span>] * b[<span class=\"number\">3</span>];</div><div class=\"line\">            result[i + <span class=\"number\">4</span>] = a[i] * b[<span class=\"number\">4</span>] + a[i + <span class=\"number\">4</span>] * b[<span class=\"number\">5</span>] + a[i + <span class=\"number\">8</span>] * b[<span class=\"number\">6</span>] + a[i + <span class=\"number\">12</span>] * b[<span class=\"number\">7</span>];</div><div class=\"line\">            result[i + <span class=\"number\">8</span>] = a[i] * b[<span class=\"number\">8</span>] + a[i + <span class=\"number\">4</span>] * b[<span class=\"number\">9</span>] + a[i + <span class=\"number\">8</span>] * b[<span class=\"number\">10</span>] + a[i + <span class=\"number\">12</span>] * b[<span class=\"number\">11</span>];</div><div class=\"line\">            result[i + <span class=\"number\">12</span>] = a[i] * b[<span class=\"number\">12</span>] + a[i + <span class=\"number\">4</span>] * b[<span class=\"number\">13</span>] + a[i + <span class=\"number\">8</span>] * b[<span class=\"number\">14</span>] + a[i + <span class=\"number\">12</span>] * b[<span class=\"number\">15</span>];</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 xf;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = pos * xf;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,.0,.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p>Location<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xfLocation = cxt.getUniformLocation(program, <span class=\"string\">'xf'</span>);</div><div class=\"line\">cxt.uniformMatrix4fv(xfLocation, <span class=\"literal\">false</span>, mix(xz,py));</div></pre></td></tr></table></figure></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/05\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/05</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<p>setTimeout</p>","more":"<p>abxy<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">    <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform float a;</span></div><div class=\"line\"><span class=\"string\">    uniform float b;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.x = pos.x + a;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.y = pos.y + b;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.z = .0;</span></div><div class=\"line\"><span class=\"string\">      gl_PointSize = 10.0;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">    <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,0.5,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p>location<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> posLocation = cxt.getAttribLocation(program, <span class=\"string\">'pos'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> aLocation = cxt.getUniformLocation(program, <span class=\"string\">'a'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> bLocation = cxt.getUniformLocation(program, <span class=\"string\">'b'</span>);</div></pre></td></tr></table></figure></p>\n<p>setTimeOut<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">run();</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        cxt.uniform1f(aLocation, a);</div><div class=\"line\">        cxt.uniform1f(bLocation, b);</div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\"></div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\"></div><div class=\"line\">        a += <span class=\"number\">.05</span>;</div><div class=\"line\">        b += <span class=\"number\">.05</span>;</div><div class=\"line\"></div><div class=\"line\">        setTimeout(run, <span class=\"number\">500</span>)</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>()</li>\n<li><p>xy</p>\n<p>,cjxycj</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform float cj;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.x = pos.x * cj;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.y = pos.y * cj;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.z = .0;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.w = 1.0;</span></div><div class=\"line\"><span class=\"string\">      gl_PointSize = 10.0;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>cjLocation<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cjLocation = cxt.getUniformLocation(program, <span class=\"string\">'cj'</span>);</div></pre></td></tr></table></figure></p>\n<p>render<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cj = <span class=\"number\">1.0</span>;\t</div><div class=\"line\">    render();</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\">        cxt.uniform1f(cjLocation, cj);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fangda</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        cj += <span class=\"number\">.05</span>;</div><div class=\"line\">        render()</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">suoxiao</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        cj -= <span class=\"number\">.05</span>;</div><div class=\"line\">        render()</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"w\"><a href=\"#w\" class=\"headerlink\" title=\"w\"></a>w</h4><p>vec4vec2posxy<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec2 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform float w;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = vec4(pos,0.0,w);</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<p>vec4vec4(x/w,y/w,z/w,w),wxy</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li>gl.Position.xgl.Position.y</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>x = r.cos(a)</li>\n<li>y = r.sin(a)</li>\n<li>x1 = r.cos(a+b)</li>\n<li>y1 = r.sin(a+b)</li>\n<li>x1 = x.cos(b) - y.sin(b)</li>\n<li>y1 = x.sin(b) + y.cos(b)</li>\n<li>z1 = z = 0.0</li>\n</ul>\n<p><br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform float cosB;</span></div><div class=\"line\"><span class=\"string\">    uniform float sinB;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.x = pos.x * cosB - pos.y * sinB;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.y = pos.x * sinB + pos.y * cosB;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.z = .0;</span></div><div class=\"line\"><span class=\"string\">      gl_Position.w = 1.0;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> angle = <span class=\"number\">10.0</span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> t = <span class=\"built_in\">Math</span>.PI * angle / <span class=\"number\">180</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> cosB = <span class=\"built_in\">Math</span>.sin(t);</div><div class=\"line\">        <span class=\"keyword\">var</span> sinB = <span class=\"built_in\">Math</span>.cos(t);</div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\">        cxt.uniform1f(cosBLocation, cosB);</div><div class=\"line\">        cxt.uniform1f(sinBLocation, sinB);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    setInterval(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">        angle += <span class=\"number\">1.0</span>;</div><div class=\"line\">        render();</div><div class=\"line\">    &#125;, <span class=\"number\">1000</span>)</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<p>Tx,Ty,xy</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-06/1.jpeg\"></p>\n<p>xf<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 xf;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = xf * pos;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xf = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">                    <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    Tx, Ty, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">                ]);</div></pre></td></tr></table></figure></p>\n<p>TxTyrender<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> Tx = <span class=\"number\">1.0</span>, Ty = <span class=\"number\">0.0</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> xf = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">                    <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">                    Tx, Ty, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">                ]);</div><div class=\"line\">        </div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\">        cxt.uniformMatrix4fv(xfLocation,<span class=\"literal\">false</span>,xf);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    render()</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-4\"><a href=\"#-4\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<p>Sx,Sy<br><img width=\"300\" src=\"/webgl-2017-07-06/2.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> sx = <span class=\"number\">1.0</span>,</div><div class=\"line\">        sy = <span class=\"number\">1.0</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> xf = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            sx, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, sy, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\"></div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\">        cxt.uniformMatrix4fv(xfLocation, <span class=\"literal\">false</span>, xf);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    render()</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-5\"><a href=\"#-5\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li> gl_Position.x  gl_Position.y </li>\n</ul>\n<p><img width=\"300\" src=\"/webgl-2017-07-06/3.jpeg\"></p>\n<p></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 xf;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = xf * pos;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,.0,.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p>render<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> time;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        angle += zl;</div><div class=\"line\"></div><div class=\"line\">        t = <span class=\"built_in\">Math</span>.PI * angle / <span class=\"number\">180</span>;</div><div class=\"line\">        sinB = <span class=\"built_in\">Math</span>.sin(t);</div><div class=\"line\">        cosB = <span class=\"built_in\">Math</span>.cos(t);</div><div class=\"line\">        <span class=\"keyword\">var</span> xf = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            cosB, sinB, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, -sinB, cosB, <span class=\"number\">0.0</span>, <span class=\"number\">.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">.0</span>, <span class=\"number\">.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\">        cxt.uniformMatrix4fv(xfLocation, <span class=\"literal\">false</span>, xf);</div><div class=\"line\"></div><div class=\"line\">        cxt.clearColor(<span class=\"number\">.5</span>, <span class=\"number\">.5</span>, <span class=\"number\">.5</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\"></div><div class=\"line\">        cxt.drawArrays(cxt.LINES, <span class=\"number\">0</span>, <span class=\"number\">2</span>);</div><div class=\"line\">        time = setTimeout(render, <span class=\"number\">500</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (!isOpen) &#123;</div><div class=\"line\">            clearTimeout(time);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    render()</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"600\" src=\"/webgl-2017-07-06/4.jpeg\"></p>\n<h3 id=\"WebGL\"><a href=\"#WebGL\" class=\"headerlink\" title=\"WebGL\"></a>WebGL</h3><h4 id=\"-6\"><a href=\"#-6\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li> setTimeout </li>\n<li></li>\n<li></li>\n<li>A <em> B </em>   </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 xz;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 py;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = pos * xz * py;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,.0,.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure>\n<p>bufferbuffer<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cxt = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'example08'</span>).getContext(<span class=\"string\">'webgl'</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> buffer = cxt.createBuffer();</div><div class=\"line\">    cxt.bindBuffer(cxt.ARRAY_BUFFER, buffer);</div><div class=\"line\">    <span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">0.0</span>, <span class=\"number\">0.2</span>, <span class=\"number\">-.2</span>, <span class=\"number\">-.2</span>,</div><div class=\"line\">        <span class=\"number\">.2</span>, <span class=\"number\">-.2</span>,</div><div class=\"line\">    ]);</div><div class=\"line\"></div><div class=\"line\">    cxt.bufferData(cxt.ARRAY_BUFFER, data, cxt.STATIC_DRAW);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> program = initShader(cxt, vertexShaderSource, fragmentShaderSource);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> posLocation = cxt.getAttribLocation(program, <span class=\"string\">'pos'</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> xzLocation = cxt.getUniformLocation(program, <span class=\"string\">'xz'</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> pyLocation = cxt.getUniformLocation(program, <span class=\"string\">'py'</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    cxt.vertexAttribPointer(posLocation, <span class=\"number\">2</span>, cxt.FLOAT, <span class=\"literal\">false</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</div><div class=\"line\">    cxt.enableVertexAttribArray(posLocation);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xz = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            cosB, sinB, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, </div><div class=\"line\">            -sinB, cosB, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\"> <span class=\"keyword\">var</span> py = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            tx, ty, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\"></div><div class=\"line\">        cxt.uniformMatrix4fv(xzLocation,<span class=\"literal\">false</span>, xz);</div><div class=\"line\">        cxt.uniformMatrix4fv(pyLocation,<span class=\"literal\">false</span>, py);</div></pre></td></tr></table></figure></p>\n<p>setTimeOutrun</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> t = <span class=\"built_in\">Math</span>.PI * ANGLE / <span class=\"number\">180</span>;</div><div class=\"line\">        sinB = <span class=\"built_in\">Math</span>.sin(t);</div><div class=\"line\">        cosB = <span class=\"built_in\">Math</span>.cos(t);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> xz = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            cosB, sinB, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, </div><div class=\"line\">            -sinB, cosB, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\"></div><div class=\"line\">        tx += <span class=\"number\">.005</span>;</div><div class=\"line\">        ty += <span class=\"number\">.005</span>;</div><div class=\"line\"></div><div class=\"line\">        ANGLE += <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> py = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>,</div><div class=\"line\">            tx, ty, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span></div><div class=\"line\">        ]);</div><div class=\"line\"></div><div class=\"line\">        cxt.uniformMatrix4fv(xzLocation,<span class=\"literal\">false</span>, xz);</div><div class=\"line\">        cxt.uniformMatrix4fv(pyLocation,<span class=\"literal\">false</span>, py);</div><div class=\"line\">        cxt.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\"></div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        setTimeout(run, <span class=\"number\">500</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    run();</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>4 * 4 </li>\n</ul>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-06/5.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mix</span>(<span class=\"params\">a, b</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> result = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>(<span class=\"number\">16</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</div><div class=\"line\">            result[i] = a[i] * b[<span class=\"number\">0</span>] + a[i + <span class=\"number\">4</span>] * b[<span class=\"number\">1</span>] + a[i + <span class=\"number\">8</span>] * b[<span class=\"number\">2</span>] + a[i + <span class=\"number\">12</span>] * b[<span class=\"number\">3</span>];</div><div class=\"line\">            result[i + <span class=\"number\">4</span>] = a[i] * b[<span class=\"number\">4</span>] + a[i + <span class=\"number\">4</span>] * b[<span class=\"number\">5</span>] + a[i + <span class=\"number\">8</span>] * b[<span class=\"number\">6</span>] + a[i + <span class=\"number\">12</span>] * b[<span class=\"number\">7</span>];</div><div class=\"line\">            result[i + <span class=\"number\">8</span>] = a[i] * b[<span class=\"number\">8</span>] + a[i + <span class=\"number\">4</span>] * b[<span class=\"number\">9</span>] + a[i + <span class=\"number\">8</span>] * b[<span class=\"number\">10</span>] + a[i + <span class=\"number\">12</span>] * b[<span class=\"number\">11</span>];</div><div class=\"line\">            result[i + <span class=\"number\">12</span>] = a[i] * b[<span class=\"number\">12</span>] + a[i + <span class=\"number\">4</span>] * b[<span class=\"number\">13</span>] + a[i + <span class=\"number\">8</span>] * b[<span class=\"number\">14</span>] + a[i + <span class=\"number\">12</span>] * b[<span class=\"number\">15</span>];</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 xf;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = pos * xf;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,.0,.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p>Location<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xfLocation = cxt.getUniformLocation(program, <span class=\"string\">'xf'</span>);</div><div class=\"line\">cxt.uniformMatrix4fv(xfLocation, <span class=\"literal\">false</span>, mix(xz,py));</div></pre></td></tr></table></figure></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/05\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/05</a></p>"},{"title":"WebGL--","comments":1,"toc":true,"date":"2017-07-08T13:09:11.000Z","_content":"\n### \n\n#### \n\n<img width=\"300\" src=\"webgl-2017-07-08/1.jpeg\"/>\n\nattribute\n\nattribute\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    attribute float size;\n    void main() {\n      gl_Position = pos;\n      gl_PointSize = size;\n}`\n```\n\n<!-- more -->\nprogram\n``` javascript\nvar program = initShader(cxt, vertexShaderSource, fragmentShaderSource);\n```\n\nlibbindAttributebuffer\n``` javascript\nbindAttribute(cxt, 'pos', new Float32Array([\n            0.0,0.0,\n            0.3,0.5,\n            0.2,1.0\n    ]), program, 2);\n    bindAttribute(cxt, 'size', new Float32Array([\n            10.0,20.0,30.0\n    ]), program, 1);\n```\n\ndrawArrays\n``` javascript\ncxt.drawArrays(cxt.POINTS, 0, 3);\n```\n\n### \n\n* \n* \n\n\n``` javascript\nvar data = new Float32Array([\n        0.0, 0.0, 10.0,\n        0.5, 0.5, 30.0,\n        0.2, -.6, 50.0\n    ]);\n```\n\nvertexAttribPointerdata.BYTES_PER_ELEMENT*3*3*22\n``` javascript\ncxt.vertexAttribPointer(posLocation, 2, cxt.FLOAT, false, data.BYTES_PER_ELEMENT * 3, 0);\n    cxt.vertexAttribPointer(sizeLocation, 1, cxt.FLOAT, false, data.BYTES_PER_ELEMENT * 3, data.BYTES_PER_ELEMENT * 2)\n```\n\n\n### \n\n*  uniform uniform\n*  varying \n\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    varying vec4 color;\n    void main() {\n      gl_Position = pos;\n      gl_PointSize = abs(pos.x) * 30.0;\n      color = pos;\n}`\n\n    // \n    const fragmentShaderSource =\n        `\n\t\tprecision lowp float;\n\t\tvarying vec4 color;\n        void main() {\n      gl_FragColor = color;\n  }`\n```\n\n\n<img width=\"300\" src=\"webgl-2017-07-08/2.jpeg\"/>\n\nbuffer\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    attribute vec4 vcolor;\n    varying vec4 color;\n    void main() {\n      gl_Position = pos;\n      color = vcolor;\n}`\n\n    // \n    const fragmentShaderSource =\n        `\n\t\tprecision lowp float;\n\t\tvarying vec4 color;\n        void main() {\n      gl_FragColor = color;\n  }`\n```\n\nbufferdata\n``` javascript\nvar data = new Float32Array([\n        0.0, .3,  1.0 ,0.0,0.0,\n        -.5, -.5, 0.0, 1.0,0.0,\n        .5, -.5  , 0.0, 0.0,1.0\n\n    ]);\n```\n\n\n<img width=\"300\" src=\"webgl-2017-07-08/3.jpeg\"/>\n\n\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n        uniform mat4 xf;\n    attribute vec4 pos;\n    varying vec4 vpos;\n    void main() {\n      gl_Position =  xf * pos;\n      vpos = gl_Position;\n}`\n\n    // \n    const fragmentShaderSource =\n        `\n\t\tprecision lowp float;\n        varying vec4 vpos;\n        void main() {\n      gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n  }`\n```\n\nprogramlibinitShader\n\n``` javascript\nvar cxt = document.getElementById('example06').getContext('webgl');\n\n    var program = initShader(cxt, vertexShaderSource, fragmentShaderSource);\n```\n\nbuffer\n\n``` javascript\nvar data = new Float32Array([\n        -.3, .3,\n        -0.5, -.3,\n        .5, .3,\n        .3, -.3\n\n    ]);\n\n    bindAttribute(cxt,'pos',data,program);\n```\n\nxf\n``` javascript\nvar xfLocation = cxt.getUniformLocation(program,'xf');\nvar angle = 0;\nrun()\n    function run() {\n        angle++\n        var xzm = createXZMatrix(angle);\n        cxt.uniformMatrix4fv(xfLocation, false, xzm);\n        cxt.drawArrays(cxt.TRIANGLE_STRIP, 0, 4);\n        setTimeout(run, 100)\n    }\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-08/6.jpeg\"/>\n\n\n``` javascript\n// \n    const fragmentShaderSource =\n        `\n\t\tprecision lowp float;\n        varying vec4 vpos;\n        void main() {\n      if(vpos.x >= 0.0 && vpos.y >= 0.0){\n                   gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n               }else if(vpos.x >0.0 && vpos.y < 0.0){\n                   gl_FragColor = vec4(0.0,1.0,0.0,1.0);\n               }else if(vpos.x < 0.0 && vpos.y > 0.0){\n                   gl_FragColor = vec4(0.0,0.0,1.0,1.0);\n               }else{\n                   gl_FragColor = vec4(0.2,0.2,0.2,1.0);\n            }\n  }`\n\n```\n\n\n<img width=\"300\" src=\"webgl-2017-07-08/7.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/06","source":"_posts/webgl-2017-07-08.md","raw":"---\ntitle: WebGL--\ncomments: true\ntoc: true\ndate: 2017-07-08 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n---\n\n### \n\n#### \n\n<img width=\"300\" src=\"webgl-2017-07-08/1.jpeg\"/>\n\nattribute\n\nattribute\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    attribute float size;\n    void main() {\n      gl_Position = pos;\n      gl_PointSize = size;\n}`\n```\n\n<!-- more -->\nprogram\n``` javascript\nvar program = initShader(cxt, vertexShaderSource, fragmentShaderSource);\n```\n\nlibbindAttributebuffer\n``` javascript\nbindAttribute(cxt, 'pos', new Float32Array([\n            0.0,0.0,\n            0.3,0.5,\n            0.2,1.0\n    ]), program, 2);\n    bindAttribute(cxt, 'size', new Float32Array([\n            10.0,20.0,30.0\n    ]), program, 1);\n```\n\ndrawArrays\n``` javascript\ncxt.drawArrays(cxt.POINTS, 0, 3);\n```\n\n### \n\n* \n* \n\n\n``` javascript\nvar data = new Float32Array([\n        0.0, 0.0, 10.0,\n        0.5, 0.5, 30.0,\n        0.2, -.6, 50.0\n    ]);\n```\n\nvertexAttribPointerdata.BYTES_PER_ELEMENT*3*3*22\n``` javascript\ncxt.vertexAttribPointer(posLocation, 2, cxt.FLOAT, false, data.BYTES_PER_ELEMENT * 3, 0);\n    cxt.vertexAttribPointer(sizeLocation, 1, cxt.FLOAT, false, data.BYTES_PER_ELEMENT * 3, data.BYTES_PER_ELEMENT * 2)\n```\n\n\n### \n\n*  uniform uniform\n*  varying \n\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    varying vec4 color;\n    void main() {\n      gl_Position = pos;\n      gl_PointSize = abs(pos.x) * 30.0;\n      color = pos;\n}`\n\n    // \n    const fragmentShaderSource =\n        `\n\t\tprecision lowp float;\n\t\tvarying vec4 color;\n        void main() {\n      gl_FragColor = color;\n  }`\n```\n\n\n<img width=\"300\" src=\"webgl-2017-07-08/2.jpeg\"/>\n\nbuffer\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 pos;\n    attribute vec4 vcolor;\n    varying vec4 color;\n    void main() {\n      gl_Position = pos;\n      color = vcolor;\n}`\n\n    // \n    const fragmentShaderSource =\n        `\n\t\tprecision lowp float;\n\t\tvarying vec4 color;\n        void main() {\n      gl_FragColor = color;\n  }`\n```\n\nbufferdata\n``` javascript\nvar data = new Float32Array([\n        0.0, .3,  1.0 ,0.0,0.0,\n        -.5, -.5, 0.0, 1.0,0.0,\n        .5, -.5  , 0.0, 0.0,1.0\n\n    ]);\n```\n\n\n<img width=\"300\" src=\"webgl-2017-07-08/3.jpeg\"/>\n\n\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n        uniform mat4 xf;\n    attribute vec4 pos;\n    varying vec4 vpos;\n    void main() {\n      gl_Position =  xf * pos;\n      vpos = gl_Position;\n}`\n\n    // \n    const fragmentShaderSource =\n        `\n\t\tprecision lowp float;\n        varying vec4 vpos;\n        void main() {\n      gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n  }`\n```\n\nprogramlibinitShader\n\n``` javascript\nvar cxt = document.getElementById('example06').getContext('webgl');\n\n    var program = initShader(cxt, vertexShaderSource, fragmentShaderSource);\n```\n\nbuffer\n\n``` javascript\nvar data = new Float32Array([\n        -.3, .3,\n        -0.5, -.3,\n        .5, .3,\n        .3, -.3\n\n    ]);\n\n    bindAttribute(cxt,'pos',data,program);\n```\n\nxf\n``` javascript\nvar xfLocation = cxt.getUniformLocation(program,'xf');\nvar angle = 0;\nrun()\n    function run() {\n        angle++\n        var xzm = createXZMatrix(angle);\n        cxt.uniformMatrix4fv(xfLocation, false, xzm);\n        cxt.drawArrays(cxt.TRIANGLE_STRIP, 0, 4);\n        setTimeout(run, 100)\n    }\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-08/6.jpeg\"/>\n\n\n``` javascript\n// \n    const fragmentShaderSource =\n        `\n\t\tprecision lowp float;\n        varying vec4 vpos;\n        void main() {\n      if(vpos.x >= 0.0 && vpos.y >= 0.0){\n                   gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n               }else if(vpos.x >0.0 && vpos.y < 0.0){\n                   gl_FragColor = vec4(0.0,1.0,0.0,1.0);\n               }else if(vpos.x < 0.0 && vpos.y > 0.0){\n                   gl_FragColor = vec4(0.0,0.0,1.0,1.0);\n               }else{\n                   gl_FragColor = vec4(0.2,0.2,0.2,1.0);\n            }\n  }`\n\n```\n\n\n<img width=\"300\" src=\"webgl-2017-07-08/7.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/06","slug":"webgl-2017-07-08","published":1,"updated":"2018-02-10T09:08:00.904Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbi001yfdld7lqqxdx1","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img width=\"300\" src=\"/webgl-2017-07-08/1.jpeg\"></p>\n<p>attribute</p>\n<p>attribute<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    attribute float size;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = pos;</span></div><div class=\"line\"><span class=\"string\">      gl_PointSize = size;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>program<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> program = initShader(cxt, vertexShaderSource, fragmentShaderSource);</div></pre></td></tr></table></figure></p>\n<p>libbindAttributebuffer<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">bindAttribute(cxt, <span class=\"string\">'pos'</span>, <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            <span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.3</span>,<span class=\"number\">0.5</span>,</div><div class=\"line\">            <span class=\"number\">0.2</span>,<span class=\"number\">1.0</span></div><div class=\"line\">    ]), program, <span class=\"number\">2</span>);</div><div class=\"line\">    bindAttribute(cxt, <span class=\"string\">'size'</span>, <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            <span class=\"number\">10.0</span>,<span class=\"number\">20.0</span>,<span class=\"number\">30.0</span></div><div class=\"line\">    ]), program, <span class=\"number\">1</span>);</div></pre></td></tr></table></figure></p>\n<p>drawArrays<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.drawArrays(cxt.POINTS, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">10.0</span>,</div><div class=\"line\">        <span class=\"number\">0.5</span>, <span class=\"number\">0.5</span>, <span class=\"number\">30.0</span>,</div><div class=\"line\">        <span class=\"number\">0.2</span>, <span class=\"number\">-.6</span>, <span class=\"number\">50.0</span></div><div class=\"line\">    ]);</div></pre></td></tr></table></figure></p>\n<p>vertexAttribPointerdata.BYTES_PER_ELEMENT<em>3</em>3*22<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.vertexAttribPointer(posLocation, <span class=\"number\">2</span>, cxt.FLOAT, <span class=\"literal\">false</span>, data.BYTES_PER_ELEMENT * <span class=\"number\">3</span>, <span class=\"number\">0</span>);</div><div class=\"line\">    cxt.vertexAttribPointer(sizeLocation, <span class=\"number\">1</span>, cxt.FLOAT, <span class=\"literal\">false</span>, data.BYTES_PER_ELEMENT * <span class=\"number\">3</span>, data.BYTES_PER_ELEMENT * <span class=\"number\">2</span>)</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> uniform uniform</li>\n<li> varying </li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 color;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = pos;</span></div><div class=\"line\"><span class=\"string\">      gl_PointSize = abs(pos.x) * 30.0;</span></div><div class=\"line\"><span class=\"string\">      color = pos;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t\tprecision lowp float;</span></div><div class=\"line\"><span class=\"string\">\t\tvarying vec4 color;</span></div><div class=\"line\"><span class=\"string\">        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = color;</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br><img width=\"300\" src=\"/webgl-2017-07-08/2.jpeg\"></p>\n<p>buffer<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 vcolor;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 color;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = pos;</span></div><div class=\"line\"><span class=\"string\">      color = vcolor;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t\tprecision lowp float;</span></div><div class=\"line\"><span class=\"string\">\t\tvarying vec4 color;</span></div><div class=\"line\"><span class=\"string\">        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = color;</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p>bufferdata<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">0.0</span>, <span class=\"number\">.3</span>,  <span class=\"number\">1.0</span> ,<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,</div><div class=\"line\">        <span class=\"number\">-.5</span>, <span class=\"number\">-.5</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">0.0</span>,</div><div class=\"line\">        <span class=\"number\">.5</span>, <span class=\"number\">-.5</span>  , <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,<span class=\"number\">1.0</span></div><div class=\"line\"></div><div class=\"line\">    ]);</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"300\" src=\"/webgl-2017-07-08/3.jpeg\"></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">        uniform mat4 xf;</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 vpos;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position =  xf * pos;</span></div><div class=\"line\"><span class=\"string\">      vpos = gl_Position;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t\tprecision lowp float;</span></div><div class=\"line\"><span class=\"string\">        varying vec4 vpos;</span></div><div class=\"line\"><span class=\"string\">        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,0.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure>\n<p>programlibinitShader</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cxt = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'example06'</span>).getContext(<span class=\"string\">'webgl'</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> program = initShader(cxt, vertexShaderSource, fragmentShaderSource);</div></pre></td></tr></table></figure>\n<p>buffer</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">-.3</span>, <span class=\"number\">.3</span>,</div><div class=\"line\">        <span class=\"number\">-0.5</span>, <span class=\"number\">-.3</span>,</div><div class=\"line\">        <span class=\"number\">.5</span>, <span class=\"number\">.3</span>,</div><div class=\"line\">        <span class=\"number\">.3</span>, <span class=\"number\">-.3</span></div><div class=\"line\"></div><div class=\"line\">    ]);</div><div class=\"line\"></div><div class=\"line\">    bindAttribute(cxt,<span class=\"string\">'pos'</span>,data,program);</div></pre></td></tr></table></figure>\n<p>xf<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xfLocation = cxt.getUniformLocation(program,<span class=\"string\">'xf'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> angle = <span class=\"number\">0</span>;</div><div class=\"line\">run()</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        angle++</div><div class=\"line\">        <span class=\"keyword\">var</span> xzm = createXZMatrix(angle);</div><div class=\"line\">        cxt.uniformMatrix4fv(xfLocation, <span class=\"literal\">false</span>, xzm);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLE_STRIP, <span class=\"number\">0</span>, <span class=\"number\">4</span>);</div><div class=\"line\">        setTimeout(run, <span class=\"number\">100</span>)</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-08/6.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t\tprecision lowp float;</span></div><div class=\"line\"><span class=\"string\">        varying vec4 vpos;</span></div><div class=\"line\"><span class=\"string\">        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      if(vpos.x &gt;= 0.0 &amp;&amp; vpos.y &gt;= 0.0)&#123;</span></div><div class=\"line\"><span class=\"string\">                   gl_FragColor = vec4(1.0,0.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">               &#125;else if(vpos.x &gt;0.0 &amp;&amp; vpos.y &lt; 0.0)&#123;</span></div><div class=\"line\"><span class=\"string\">                   gl_FragColor = vec4(0.0,1.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">               &#125;else if(vpos.x &lt; 0.0 &amp;&amp; vpos.y &gt; 0.0)&#123;</span></div><div class=\"line\"><span class=\"string\">                   gl_FragColor = vec4(0.0,0.0,1.0,1.0);</span></div><div class=\"line\"><span class=\"string\">               &#125;else&#123;</span></div><div class=\"line\"><span class=\"string\">                   gl_FragColor = vec4(0.2,0.2,0.2,1.0);</span></div><div class=\"line\"><span class=\"string\">            &#125;</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br><img width=\"300\" src=\"/webgl-2017-07-08/7.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/06\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/06</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img width=\"300\" src=\"/webgl-2017-07-08/1.jpeg\"></p>\n<p>attribute</p>\n<p>attribute<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    attribute float size;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = pos;</span></div><div class=\"line\"><span class=\"string\">      gl_PointSize = size;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div></pre></td></tr></table></figure></p>","more":"<p>program<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> program = initShader(cxt, vertexShaderSource, fragmentShaderSource);</div></pre></td></tr></table></figure></p>\n<p>libbindAttributebuffer<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">bindAttribute(cxt, <span class=\"string\">'pos'</span>, <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            <span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,</div><div class=\"line\">            <span class=\"number\">0.3</span>,<span class=\"number\">0.5</span>,</div><div class=\"line\">            <span class=\"number\">0.2</span>,<span class=\"number\">1.0</span></div><div class=\"line\">    ]), program, <span class=\"number\">2</span>);</div><div class=\"line\">    bindAttribute(cxt, <span class=\"string\">'size'</span>, <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">            <span class=\"number\">10.0</span>,<span class=\"number\">20.0</span>,<span class=\"number\">30.0</span></div><div class=\"line\">    ]), program, <span class=\"number\">1</span>);</div></pre></td></tr></table></figure></p>\n<p>drawArrays<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.drawArrays(cxt.POINTS, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">10.0</span>,</div><div class=\"line\">        <span class=\"number\">0.5</span>, <span class=\"number\">0.5</span>, <span class=\"number\">30.0</span>,</div><div class=\"line\">        <span class=\"number\">0.2</span>, <span class=\"number\">-.6</span>, <span class=\"number\">50.0</span></div><div class=\"line\">    ]);</div></pre></td></tr></table></figure></p>\n<p>vertexAttribPointerdata.BYTES_PER_ELEMENT<em>3</em>3*22<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cxt.vertexAttribPointer(posLocation, <span class=\"number\">2</span>, cxt.FLOAT, <span class=\"literal\">false</span>, data.BYTES_PER_ELEMENT * <span class=\"number\">3</span>, <span class=\"number\">0</span>);</div><div class=\"line\">    cxt.vertexAttribPointer(sizeLocation, <span class=\"number\">1</span>, cxt.FLOAT, <span class=\"literal\">false</span>, data.BYTES_PER_ELEMENT * <span class=\"number\">3</span>, data.BYTES_PER_ELEMENT * <span class=\"number\">2</span>)</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> uniform uniform</li>\n<li> varying </li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 color;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = pos;</span></div><div class=\"line\"><span class=\"string\">      gl_PointSize = abs(pos.x) * 30.0;</span></div><div class=\"line\"><span class=\"string\">      color = pos;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t\tprecision lowp float;</span></div><div class=\"line\"><span class=\"string\">\t\tvarying vec4 color;</span></div><div class=\"line\"><span class=\"string\">        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = color;</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br><img width=\"300\" src=\"/webgl-2017-07-08/2.jpeg\"></p>\n<p>buffer<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 vcolor;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 color;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = pos;</span></div><div class=\"line\"><span class=\"string\">      color = vcolor;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t\tprecision lowp float;</span></div><div class=\"line\"><span class=\"string\">\t\tvarying vec4 color;</span></div><div class=\"line\"><span class=\"string\">        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = color;</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p>bufferdata<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">0.0</span>, <span class=\"number\">.3</span>,  <span class=\"number\">1.0</span> ,<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,</div><div class=\"line\">        <span class=\"number\">-.5</span>, <span class=\"number\">-.5</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">0.0</span>,</div><div class=\"line\">        <span class=\"number\">.5</span>, <span class=\"number\">-.5</span>  , <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>,<span class=\"number\">1.0</span></div><div class=\"line\"></div><div class=\"line\">    ]);</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"300\" src=\"/webgl-2017-07-08/3.jpeg\"></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">        uniform mat4 xf;</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 vpos;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position =  xf * pos;</span></div><div class=\"line\"><span class=\"string\">      vpos = gl_Position;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t\tprecision lowp float;</span></div><div class=\"line\"><span class=\"string\">        varying vec4 vpos;</span></div><div class=\"line\"><span class=\"string\">        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = vec4(1.0,0.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure>\n<p>programlibinitShader</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cxt = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'example06'</span>).getContext(<span class=\"string\">'webgl'</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> program = initShader(cxt, vertexShaderSource, fragmentShaderSource);</div></pre></td></tr></table></figure>\n<p>buffer</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">-.3</span>, <span class=\"number\">.3</span>,</div><div class=\"line\">        <span class=\"number\">-0.5</span>, <span class=\"number\">-.3</span>,</div><div class=\"line\">        <span class=\"number\">.5</span>, <span class=\"number\">.3</span>,</div><div class=\"line\">        <span class=\"number\">.3</span>, <span class=\"number\">-.3</span></div><div class=\"line\"></div><div class=\"line\">    ]);</div><div class=\"line\"></div><div class=\"line\">    bindAttribute(cxt,<span class=\"string\">'pos'</span>,data,program);</div></pre></td></tr></table></figure>\n<p>xf<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xfLocation = cxt.getUniformLocation(program,<span class=\"string\">'xf'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> angle = <span class=\"number\">0</span>;</div><div class=\"line\">run()</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        angle++</div><div class=\"line\">        <span class=\"keyword\">var</span> xzm = createXZMatrix(angle);</div><div class=\"line\">        cxt.uniformMatrix4fv(xfLocation, <span class=\"literal\">false</span>, xzm);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLE_STRIP, <span class=\"number\">0</span>, <span class=\"number\">4</span>);</div><div class=\"line\">        setTimeout(run, <span class=\"number\">100</span>)</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-08/6.jpeg\"></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t\tprecision lowp float;</span></div><div class=\"line\"><span class=\"string\">        varying vec4 vpos;</span></div><div class=\"line\"><span class=\"string\">        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      if(vpos.x &gt;= 0.0 &amp;&amp; vpos.y &gt;= 0.0)&#123;</span></div><div class=\"line\"><span class=\"string\">                   gl_FragColor = vec4(1.0,0.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">               &#125;else if(vpos.x &gt;0.0 &amp;&amp; vpos.y &lt; 0.0)&#123;</span></div><div class=\"line\"><span class=\"string\">                   gl_FragColor = vec4(0.0,1.0,0.0,1.0);</span></div><div class=\"line\"><span class=\"string\">               &#125;else if(vpos.x &lt; 0.0 &amp;&amp; vpos.y &gt; 0.0)&#123;</span></div><div class=\"line\"><span class=\"string\">                   gl_FragColor = vec4(0.0,0.0,1.0,1.0);</span></div><div class=\"line\"><span class=\"string\">               &#125;else&#123;</span></div><div class=\"line\"><span class=\"string\">                   gl_FragColor = vec4(0.2,0.2,0.2,1.0);</span></div><div class=\"line\"><span class=\"string\">            &#125;</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br><img width=\"300\" src=\"/webgl-2017-07-08/7.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/06\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/06</a></p>"},{"title":"WebGL--","comments":1,"toc":true,"date":"2017-07-09T13:09:11.000Z","_content":"\n### \n\n* \n* \n* \n\n#### \n\n* \n* lookAt(out, eye, center, up)\n* eye \n* center  \n* up  \n\n<!-- more -->\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 a_Position;\n    attribute vec4 a_Color;\n    uniform mat4 u_vmatrix;\n    varying vec4 v_Color;\n    void main() {\n      gl_Position = u_vmatrix * a_Position;\n      v_Color = a_Color;\n}`\n\n    // \n    const fragmentShaderSource =\n        `\n        precision lowp float;\n        varying vec4 v_Color;\n        void main() {\n      gl_FragColor = v_Color;\n  }`\n```\n\n\n``` javascript\nfunction normalize(v){\n        var sum = 0;\n        for (var i=0;i< v.length;i++){\n            sum += v[i] * v[i];\n        }\n        var result = Math.sqrt(sum);\n        for(var j=0;j< v.length; j++){\n            v[i] = v[i] / result;\n        }\n    }\n\n    function cross(a,b){\n        var nX = a[1] * b[2] - a[2] * b[1];\n        var nY = a[2] * b[0] -a[0] * b[2];\n        var nZ = a[0] * b[1] - a[1] * b[0];\n\n        return new Float32Array([nX,nY,nZ]);\n    }\n\n    function dot(a,b){\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n    }\n\n    function minus(a , b){\n        return new Float32Array([a[0] - b[0], a[1] - b[1] , a[2] - b[2]]);\n    }\n```\n\n\n``` javascript\nfunction getVMatrix(){\n\n        var eye = new Float32Array([0.4,0.0,0.26]);\n        var lookat = new Float32Array([0.0,0.0,0.0]);\n        var up = new Float32Array([0,1,1]);\n\n        var zA = minus(eye , lookat);\n        normalize(zA);\n\n        normalize(up);\n        var xA = cross(up, zA);\n\n        var yA = cross(zA,xA);\n\n        return new Float32Array([\n                xA[0],yA[0],zA[0], 0,\n                xA[1],yA[1],zA[1], 0,\n                xA[2],yA[2],zA[2], 0,\n                - dot(xA,eye), -dot(yA,eye),-dot(zA,eye),1\n\n        ])\n\n    }\n```\n\n\n``` javascript\n\nvar data = new Float32Array([\n        0.0, 0.5, -0.4, 0.4, 1.0, 0.4,\n        -0.5, -0.5, -0.4, 0.4, 1.0, 0.4,\n        0.5, -0.5, -0.4, 1.0, 0.4, 0.4,\n\n        0.5, 0.4, -0.2, 1.0, 0.4, 0.4,\n        -0.5, 0.4, -0.2, 1.0, 1.0, 0.4,\n        0.0, -0.6, -0.2, 1.0, 1.0, 0.4\n    ]);\n```\n\n\n``` javascript\n\nvar u_vmatrixLocation = cxt.getUniformLocation(program,'u_vmatrix');\n\nvar mx = getVMatrix(); // \n\ncxt.uniformMatrix4fv(u_vmatrixLocation,false,mx);\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-09/1.jpeg\"/>\n\n### \n\n*    * \n*    * \n*    *  * \n*  *  * \n\n\n``` javascript\n\nvar eyeX = 0.25;\n\n    function draw(eyeX){\n\n        var mx = getVMatrix(eyeX); // \n\n        cxt.uniformMatrix4fv(u_vmatrixLocation,false,mx);\n\n        cxt.clearColor(1.0,1.0,1.0,1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n\n        cxt.drawArrays(cxt.TRIANGLES,0,6);\n\n    }\n\n    document.addEventListener('keydown', function (event) {\n        switch (event.keyCode){\n            case 37:\n                eyeX += .01;\n                break;\n            case 39:\n                eyeX -= .01;\n                break;\n        }\n        draw(eyeX);\n\n    });\n\n    draw(eyeX);\n```\n\n\n https://github.com/wqzwh/webgl-code/tree/master/09","source":"_posts/webgl-2017-07-09.md","raw":"---\ntitle: WebGL--\ncomments: true\ntoc: true\ndate: 2017-07-09 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n---\n\n### \n\n* \n* \n* \n\n#### \n\n* \n* lookAt(out, eye, center, up)\n* eye \n* center  \n* up  \n\n<!-- more -->\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n    attribute vec4 a_Position;\n    attribute vec4 a_Color;\n    uniform mat4 u_vmatrix;\n    varying vec4 v_Color;\n    void main() {\n      gl_Position = u_vmatrix * a_Position;\n      v_Color = a_Color;\n}`\n\n    // \n    const fragmentShaderSource =\n        `\n        precision lowp float;\n        varying vec4 v_Color;\n        void main() {\n      gl_FragColor = v_Color;\n  }`\n```\n\n\n``` javascript\nfunction normalize(v){\n        var sum = 0;\n        for (var i=0;i< v.length;i++){\n            sum += v[i] * v[i];\n        }\n        var result = Math.sqrt(sum);\n        for(var j=0;j< v.length; j++){\n            v[i] = v[i] / result;\n        }\n    }\n\n    function cross(a,b){\n        var nX = a[1] * b[2] - a[2] * b[1];\n        var nY = a[2] * b[0] -a[0] * b[2];\n        var nZ = a[0] * b[1] - a[1] * b[0];\n\n        return new Float32Array([nX,nY,nZ]);\n    }\n\n    function dot(a,b){\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n    }\n\n    function minus(a , b){\n        return new Float32Array([a[0] - b[0], a[1] - b[1] , a[2] - b[2]]);\n    }\n```\n\n\n``` javascript\nfunction getVMatrix(){\n\n        var eye = new Float32Array([0.4,0.0,0.26]);\n        var lookat = new Float32Array([0.0,0.0,0.0]);\n        var up = new Float32Array([0,1,1]);\n\n        var zA = minus(eye , lookat);\n        normalize(zA);\n\n        normalize(up);\n        var xA = cross(up, zA);\n\n        var yA = cross(zA,xA);\n\n        return new Float32Array([\n                xA[0],yA[0],zA[0], 0,\n                xA[1],yA[1],zA[1], 0,\n                xA[2],yA[2],zA[2], 0,\n                - dot(xA,eye), -dot(yA,eye),-dot(zA,eye),1\n\n        ])\n\n    }\n```\n\n\n``` javascript\n\nvar data = new Float32Array([\n        0.0, 0.5, -0.4, 0.4, 1.0, 0.4,\n        -0.5, -0.5, -0.4, 0.4, 1.0, 0.4,\n        0.5, -0.5, -0.4, 1.0, 0.4, 0.4,\n\n        0.5, 0.4, -0.2, 1.0, 0.4, 0.4,\n        -0.5, 0.4, -0.2, 1.0, 1.0, 0.4,\n        0.0, -0.6, -0.2, 1.0, 1.0, 0.4\n    ]);\n```\n\n\n``` javascript\n\nvar u_vmatrixLocation = cxt.getUniformLocation(program,'u_vmatrix');\n\nvar mx = getVMatrix(); // \n\ncxt.uniformMatrix4fv(u_vmatrixLocation,false,mx);\n```\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-09/1.jpeg\"/>\n\n### \n\n*    * \n*    * \n*    *  * \n*  *  * \n\n\n``` javascript\n\nvar eyeX = 0.25;\n\n    function draw(eyeX){\n\n        var mx = getVMatrix(eyeX); // \n\n        cxt.uniformMatrix4fv(u_vmatrixLocation,false,mx);\n\n        cxt.clearColor(1.0,1.0,1.0,1.0);\n        cxt.clear(cxt.COLOR_BUFFER_BIT);\n\n        cxt.drawArrays(cxt.TRIANGLES,0,6);\n\n    }\n\n    document.addEventListener('keydown', function (event) {\n        switch (event.keyCode){\n            case 37:\n                eyeX += .01;\n                break;\n            case 39:\n                eyeX -= .01;\n                break;\n        }\n        draw(eyeX);\n\n    });\n\n    draw(eyeX);\n```\n\n\n https://github.com/wqzwh/webgl-code/tree/master/09","slug":"webgl-2017-07-09","published":1,"updated":"2018-02-10T09:08:00.904Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbj0020fdld7xyqqx3s","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li>lookAt(out, eye, center, up)</li>\n<li>eye </li>\n<li>center  </li>\n<li>up  </li>\n</ul>\n<a id=\"more\"></a>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 a_Position;</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 a_Color;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 u_vmatrix;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = u_vmatrix * a_Position;</span></div><div class=\"line\"><span class=\"string\">      v_Color = a_Color;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">        precision lowp float;</span></div><div class=\"line\"><span class=\"string\">        varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\">        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = v_Color;</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">normalize</span>(<span class=\"params\">v</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> sum = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt; v.length;i++)&#123;</div><div class=\"line\">            sum += v[i] * v[i];</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">var</span> result = <span class=\"built_in\">Math</span>.sqrt(sum);</div><div class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> j=<span class=\"number\">0</span>;j&lt; v.length; j++)&#123;</div><div class=\"line\">            v[i] = v[i] / result;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cross</span>(<span class=\"params\">a,b</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> nX = a[<span class=\"number\">1</span>] * b[<span class=\"number\">2</span>] - a[<span class=\"number\">2</span>] * b[<span class=\"number\">1</span>];</div><div class=\"line\">        <span class=\"keyword\">var</span> nY = a[<span class=\"number\">2</span>] * b[<span class=\"number\">0</span>] -a[<span class=\"number\">0</span>] * b[<span class=\"number\">2</span>];</div><div class=\"line\">        <span class=\"keyword\">var</span> nZ = a[<span class=\"number\">0</span>] * b[<span class=\"number\">1</span>] - a[<span class=\"number\">1</span>] * b[<span class=\"number\">0</span>];</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([nX,nY,nZ]);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dot</span>(<span class=\"params\">a,b</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> a[<span class=\"number\">0</span>] * b[<span class=\"number\">0</span>] + a[<span class=\"number\">1</span>] * b[<span class=\"number\">1</span>] + a[<span class=\"number\">2</span>] * b[<span class=\"number\">2</span>];</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">minus</span>(<span class=\"params\">a , b</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([a[<span class=\"number\">0</span>] - b[<span class=\"number\">0</span>], a[<span class=\"number\">1</span>] - b[<span class=\"number\">1</span>] , a[<span class=\"number\">2</span>] - b[<span class=\"number\">2</span>]]);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getVMatrix</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> eye = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([<span class=\"number\">0.4</span>,<span class=\"number\">0.0</span>,<span class=\"number\">0.26</span>]);</div><div class=\"line\">        <span class=\"keyword\">var</span> lookat = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>]);</div><div class=\"line\">        <span class=\"keyword\">var</span> up = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>]);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> zA = minus(eye , lookat);</div><div class=\"line\">        normalize(zA);</div><div class=\"line\"></div><div class=\"line\">        normalize(up);</div><div class=\"line\">        <span class=\"keyword\">var</span> xA = cross(up, zA);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> yA = cross(zA,xA);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">                xA[<span class=\"number\">0</span>],yA[<span class=\"number\">0</span>],zA[<span class=\"number\">0</span>], <span class=\"number\">0</span>,</div><div class=\"line\">                xA[<span class=\"number\">1</span>],yA[<span class=\"number\">1</span>],zA[<span class=\"number\">1</span>], <span class=\"number\">0</span>,</div><div class=\"line\">                xA[<span class=\"number\">2</span>],yA[<span class=\"number\">2</span>],zA[<span class=\"number\">2</span>], <span class=\"number\">0</span>,</div><div class=\"line\">                - dot(xA,eye), -dot(yA,eye),-dot(zA,eye),<span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\">        ])</div><div class=\"line\"></div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">0.0</span>, <span class=\"number\">0.5</span>, <span class=\"number\">-0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">        <span class=\"number\">-0.5</span>, <span class=\"number\">-0.5</span>, <span class=\"number\">-0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">        <span class=\"number\">0.5</span>, <span class=\"number\">-0.5</span>, <span class=\"number\">-0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\"></div><div class=\"line\">        <span class=\"number\">0.5</span>, <span class=\"number\">0.4</span>, <span class=\"number\">-0.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">        <span class=\"number\">-0.5</span>, <span class=\"number\">0.4</span>, <span class=\"number\">-0.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">        <span class=\"number\">0.0</span>, <span class=\"number\">-0.6</span>, <span class=\"number\">-0.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span></div><div class=\"line\">    ]);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> u_vmatrixLocation = cxt.getUniformLocation(program,<span class=\"string\">'u_vmatrix'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> mx = getVMatrix(); <span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\">cxt.uniformMatrix4fv(u_vmatrixLocation,<span class=\"literal\">false</span>,mx);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-09/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>   * </li>\n<li>   * </li>\n<li>   <em>  </em> </li>\n<li> <em>  </em> </li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> eyeX = <span class=\"number\">0.25</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">draw</span>(<span class=\"params\">eyeX</span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> mx = getVMatrix(eyeX); <span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\">        cxt.uniformMatrix4fv(u_vmatrixLocation,<span class=\"literal\">false</span>,mx);</div><div class=\"line\"></div><div class=\"line\">        cxt.clearColor(<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\"></div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES,<span class=\"number\">0</span>,<span class=\"number\">6</span>);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'keydown'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">switch</span> (event.keyCode)&#123;</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">37</span>:</div><div class=\"line\">                eyeX += <span class=\"number\">.01</span>;</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">39</span>:</div><div class=\"line\">                eyeX -= <span class=\"number\">.01</span>;</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        draw(eyeX);</div><div class=\"line\"></div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">    draw(eyeX);</div></pre></td></tr></table></figure></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/09\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/09</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li>lookAt(out, eye, center, up)</li>\n<li>eye </li>\n<li>center  </li>\n<li>up  </li>\n</ul>","more":"<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 a_Position;</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 a_Color;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 u_vmatrix;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\">    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_Position = u_vmatrix * a_Position;</span></div><div class=\"line\"><span class=\"string\">      v_Color = a_Color;</span></div><div class=\"line\"><span class=\"string\">&#125;`</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">        precision lowp float;</span></div><div class=\"line\"><span class=\"string\">        varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\">        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">      gl_FragColor = v_Color;</span></div><div class=\"line\"><span class=\"string\">  &#125;`</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">normalize</span>(<span class=\"params\">v</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> sum = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt; v.length;i++)&#123;</div><div class=\"line\">            sum += v[i] * v[i];</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">var</span> result = <span class=\"built_in\">Math</span>.sqrt(sum);</div><div class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> j=<span class=\"number\">0</span>;j&lt; v.length; j++)&#123;</div><div class=\"line\">            v[i] = v[i] / result;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cross</span>(<span class=\"params\">a,b</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> nX = a[<span class=\"number\">1</span>] * b[<span class=\"number\">2</span>] - a[<span class=\"number\">2</span>] * b[<span class=\"number\">1</span>];</div><div class=\"line\">        <span class=\"keyword\">var</span> nY = a[<span class=\"number\">2</span>] * b[<span class=\"number\">0</span>] -a[<span class=\"number\">0</span>] * b[<span class=\"number\">2</span>];</div><div class=\"line\">        <span class=\"keyword\">var</span> nZ = a[<span class=\"number\">0</span>] * b[<span class=\"number\">1</span>] - a[<span class=\"number\">1</span>] * b[<span class=\"number\">0</span>];</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([nX,nY,nZ]);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dot</span>(<span class=\"params\">a,b</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> a[<span class=\"number\">0</span>] * b[<span class=\"number\">0</span>] + a[<span class=\"number\">1</span>] * b[<span class=\"number\">1</span>] + a[<span class=\"number\">2</span>] * b[<span class=\"number\">2</span>];</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">minus</span>(<span class=\"params\">a , b</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([a[<span class=\"number\">0</span>] - b[<span class=\"number\">0</span>], a[<span class=\"number\">1</span>] - b[<span class=\"number\">1</span>] , a[<span class=\"number\">2</span>] - b[<span class=\"number\">2</span>]]);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getVMatrix</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> eye = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([<span class=\"number\">0.4</span>,<span class=\"number\">0.0</span>,<span class=\"number\">0.26</span>]);</div><div class=\"line\">        <span class=\"keyword\">var</span> lookat = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>]);</div><div class=\"line\">        <span class=\"keyword\">var</span> up = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>]);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> zA = minus(eye , lookat);</div><div class=\"line\">        normalize(zA);</div><div class=\"line\"></div><div class=\"line\">        normalize(up);</div><div class=\"line\">        <span class=\"keyword\">var</span> xA = cross(up, zA);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> yA = cross(zA,xA);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">                xA[<span class=\"number\">0</span>],yA[<span class=\"number\">0</span>],zA[<span class=\"number\">0</span>], <span class=\"number\">0</span>,</div><div class=\"line\">                xA[<span class=\"number\">1</span>],yA[<span class=\"number\">1</span>],zA[<span class=\"number\">1</span>], <span class=\"number\">0</span>,</div><div class=\"line\">                xA[<span class=\"number\">2</span>],yA[<span class=\"number\">2</span>],zA[<span class=\"number\">2</span>], <span class=\"number\">0</span>,</div><div class=\"line\">                - dot(xA,eye), -dot(yA,eye),-dot(zA,eye),<span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\">        ])</div><div class=\"line\"></div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">0.0</span>, <span class=\"number\">0.5</span>, <span class=\"number\">-0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">        <span class=\"number\">-0.5</span>, <span class=\"number\">-0.5</span>, <span class=\"number\">-0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">        <span class=\"number\">0.5</span>, <span class=\"number\">-0.5</span>, <span class=\"number\">-0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\"></div><div class=\"line\">        <span class=\"number\">0.5</span>, <span class=\"number\">0.4</span>, <span class=\"number\">-0.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">        <span class=\"number\">-0.5</span>, <span class=\"number\">0.4</span>, <span class=\"number\">-0.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">        <span class=\"number\">0.0</span>, <span class=\"number\">-0.6</span>, <span class=\"number\">-0.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span></div><div class=\"line\">    ]);</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> u_vmatrixLocation = cxt.getUniformLocation(program,<span class=\"string\">'u_vmatrix'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> mx = getVMatrix(); <span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\">cxt.uniformMatrix4fv(u_vmatrixLocation,<span class=\"literal\">false</span>,mx);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-09/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>   * </li>\n<li>   * </li>\n<li>   <em>  </em> </li>\n<li> <em>  </em> </li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> eyeX = <span class=\"number\">0.25</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">draw</span>(<span class=\"params\">eyeX</span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">var</span> mx = getVMatrix(eyeX); <span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\">        cxt.uniformMatrix4fv(u_vmatrixLocation,<span class=\"literal\">false</span>,mx);</div><div class=\"line\"></div><div class=\"line\">        cxt.clearColor(<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>);</div><div class=\"line\">        cxt.clear(cxt.COLOR_BUFFER_BIT);</div><div class=\"line\"></div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLES,<span class=\"number\">0</span>,<span class=\"number\">6</span>);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'keydown'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">switch</span> (event.keyCode)&#123;</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">37</span>:</div><div class=\"line\">                eyeX += <span class=\"number\">.01</span>;</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">39</span>:</div><div class=\"line\">                eyeX -= <span class=\"number\">.01</span>;</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        draw(eyeX);</div><div class=\"line\"></div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">    draw(eyeX);</div></pre></td></tr></table></figure></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/09\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/09</a></p>"},{"title":"WebGL--","comments":1,"toc":true,"date":"2017-07-10T13:09:11.000Z","_content":"\n### \n\n#### \n\n\n* JPG 24\n* GIF 40%50%256\n* PNG \n\n#### \n\n* \n* \n* \n* \n\n<!-- more -->\n\n\n### \n\n#### \n\n* st\n\n<img width=\"300\" src=\"webgl-2017-07-10/1.jpeg\"/>\n\n#### \n\n* createTexture \n* deleteTexture(tex) \n\n#### \n\n* \n* \n* \n* \n* \n* \n* \n\n#### \n\n* Y \n* \n* \n* \n* \n* \n\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n\t    attribute vec4 pos;\n\t    attribute vec2 texPos;\n\t    varying vec2 v_texPos;\n\t    void main() {\n\t      gl_Position = pos;\n\t      v_texPos = texPos;\n\t}`\n\n\t    // \n\t    const fragmentShaderSource =\n\t        `\n\t        precision lowp float;\n\t        uniform sampler2D ss;\n\t        varying vec2 v_texPos;\n\t        void main() {\n\t      gl_FragColor = texture2D(ss,v_texPos);\n\t  }`   \n```\n\ncanvas\n``` javascript\n\nfunction loadImg(url,callback){\n        var img = new Image;\n        img.src = url;\n        img.onload = function () {\n            callback(img);\n        }\n    }\n\n\n    loadImg('./img.png', function (img) {\n        var texture = cxt.createTexture();\n        cxt.pixelStorei(cxt.UNPACK_FLIP_Y_WEBGL,1);\n        cxt.activeTexture(cxt.TEXTURE0);\n        cxt.bindTexture(cxt.TEXTURE_2D,texture);\n\n        cxt.texParameteri(cxt.TEXTURE_2D,cxt.TEXTURE_MIN_FILTER,cxt.LINEAR);\n        cxt.texImage2D(cxt.TEXTURE_2D,0,cxt.RGB,cxt.RGB,cxt.UNSIGNED_BYTE,img);\n        cxt.uniform1i(texLocation,0);\n        cxt.drawArrays(cxt.TRIANGLE_STRIP,0,4);\n\n    });\n```\n\n\n<img width=\"300\" src=\"webgl-2017-07-10/2.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/10","source":"_posts/webgl-2017-07-10.md","raw":"---\ntitle: WebGL--\ncomments: true\ntoc: true\ndate: 2017-07-10 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n---\n\n### \n\n#### \n\n\n* JPG 24\n* GIF 40%50%256\n* PNG \n\n#### \n\n* \n* \n* \n* \n\n<!-- more -->\n\n\n### \n\n#### \n\n* st\n\n<img width=\"300\" src=\"webgl-2017-07-10/1.jpeg\"/>\n\n#### \n\n* createTexture \n* deleteTexture(tex) \n\n#### \n\n* \n* \n* \n* \n* \n* \n* \n\n#### \n\n* Y \n* \n* \n* \n* \n* \n\n\n\n``` javascript\n// \n    const vertexShaderSource =\n        `\n\t    attribute vec4 pos;\n\t    attribute vec2 texPos;\n\t    varying vec2 v_texPos;\n\t    void main() {\n\t      gl_Position = pos;\n\t      v_texPos = texPos;\n\t}`\n\n\t    // \n\t    const fragmentShaderSource =\n\t        `\n\t        precision lowp float;\n\t        uniform sampler2D ss;\n\t        varying vec2 v_texPos;\n\t        void main() {\n\t      gl_FragColor = texture2D(ss,v_texPos);\n\t  }`   \n```\n\ncanvas\n``` javascript\n\nfunction loadImg(url,callback){\n        var img = new Image;\n        img.src = url;\n        img.onload = function () {\n            callback(img);\n        }\n    }\n\n\n    loadImg('./img.png', function (img) {\n        var texture = cxt.createTexture();\n        cxt.pixelStorei(cxt.UNPACK_FLIP_Y_WEBGL,1);\n        cxt.activeTexture(cxt.TEXTURE0);\n        cxt.bindTexture(cxt.TEXTURE_2D,texture);\n\n        cxt.texParameteri(cxt.TEXTURE_2D,cxt.TEXTURE_MIN_FILTER,cxt.LINEAR);\n        cxt.texImage2D(cxt.TEXTURE_2D,0,cxt.RGB,cxt.RGB,cxt.UNSIGNED_BYTE,img);\n        cxt.uniform1i(texLocation,0);\n        cxt.drawArrays(cxt.TRIANGLE_STRIP,0,4);\n\n    });\n```\n\n\n<img width=\"300\" src=\"webgl-2017-07-10/2.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/10","slug":"webgl-2017-07-10","published":1,"updated":"2018-02-10T09:08:00.902Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbk0023fdlddh0n5e5l","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>JPG 24</li>\n<li>GIF 40%50%256</li>\n<li>PNG </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<a id=\"more\"></a>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>st</li>\n</ul>\n<p><img width=\"300\" src=\"/webgl-2017-07-10/1.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>createTexture </li>\n<li>deleteTexture(tex) </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>Y </li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">\t    attribute vec2 texPos;</span></div><div class=\"line\"><span class=\"string\">\t    varying vec2 v_texPos;</span></div><div class=\"line\"><span class=\"string\">\t    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">\t      gl_Position = pos;</span></div><div class=\"line\"><span class=\"string\">\t      v_texPos = texPos;</span></div><div class=\"line\"><span class=\"string\">\t&#125;`</span></div><div class=\"line\"></div><div class=\"line\">\t    <span class=\"comment\">// </span></div><div class=\"line\">\t    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">\t        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t        precision lowp float;</span></div><div class=\"line\"><span class=\"string\">\t        uniform sampler2D ss;</span></div><div class=\"line\"><span class=\"string\">\t        varying vec2 v_texPos;</span></div><div class=\"line\"><span class=\"string\">\t        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">\t      gl_FragColor = texture2D(ss,v_texPos);</span></div><div class=\"line\"><span class=\"string\">\t  &#125;`</span></div></pre></td></tr></table></figure>\n<p>canvas<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadImg</span>(<span class=\"params\">url,callback</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> img = <span class=\"keyword\">new</span> Image;</div><div class=\"line\">        img.src = url;</div><div class=\"line\">        img.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            callback(img);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    loadImg(<span class=\"string\">'./img.png'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">img</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> texture = cxt.createTexture();</div><div class=\"line\">        cxt.pixelStorei(cxt.UNPACK_FLIP_Y_WEBGL,<span class=\"number\">1</span>);</div><div class=\"line\">        cxt.activeTexture(cxt.TEXTURE0);</div><div class=\"line\">        cxt.bindTexture(cxt.TEXTURE_2D,texture);</div><div class=\"line\"></div><div class=\"line\">        cxt.texParameteri(cxt.TEXTURE_2D,cxt.TEXTURE_MIN_FILTER,cxt.LINEAR);</div><div class=\"line\">        cxt.texImage2D(cxt.TEXTURE_2D,<span class=\"number\">0</span>,cxt.RGB,cxt.RGB,cxt.UNSIGNED_BYTE,img);</div><div class=\"line\">        cxt.uniform1i(texLocation,<span class=\"number\">0</span>);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLE_STRIP,<span class=\"number\">0</span>,<span class=\"number\">4</span>);</div><div class=\"line\"></div><div class=\"line\">    &#125;);</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"300\" src=\"/webgl-2017-07-10/2.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/10\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/10</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>JPG 24</li>\n<li>GIF 40%50%256</li>\n<li>PNG </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>st</li>\n</ul>\n<p><img width=\"300\" src=\"/webgl-2017-07-10/1.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>createTexture </li>\n<li>deleteTexture(tex) </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>Y </li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">const</span> vertexShaderSource =</div><div class=\"line\">        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">\t    attribute vec2 texPos;</span></div><div class=\"line\"><span class=\"string\">\t    varying vec2 v_texPos;</span></div><div class=\"line\"><span class=\"string\">\t    void main() &#123;</span></div><div class=\"line\"><span class=\"string\">\t      gl_Position = pos;</span></div><div class=\"line\"><span class=\"string\">\t      v_texPos = texPos;</span></div><div class=\"line\"><span class=\"string\">\t&#125;`</span></div><div class=\"line\"></div><div class=\"line\">\t    <span class=\"comment\">// </span></div><div class=\"line\">\t    <span class=\"keyword\">const</span> fragmentShaderSource =</div><div class=\"line\">\t        <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">\t        precision lowp float;</span></div><div class=\"line\"><span class=\"string\">\t        uniform sampler2D ss;</span></div><div class=\"line\"><span class=\"string\">\t        varying vec2 v_texPos;</span></div><div class=\"line\"><span class=\"string\">\t        void main() &#123;</span></div><div class=\"line\"><span class=\"string\">\t      gl_FragColor = texture2D(ss,v_texPos);</span></div><div class=\"line\"><span class=\"string\">\t  &#125;`</span></div></pre></td></tr></table></figure>\n<p>canvas<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadImg</span>(<span class=\"params\">url,callback</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> img = <span class=\"keyword\">new</span> Image;</div><div class=\"line\">        img.src = url;</div><div class=\"line\">        img.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            callback(img);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    loadImg(<span class=\"string\">'./img.png'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">img</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> texture = cxt.createTexture();</div><div class=\"line\">        cxt.pixelStorei(cxt.UNPACK_FLIP_Y_WEBGL,<span class=\"number\">1</span>);</div><div class=\"line\">        cxt.activeTexture(cxt.TEXTURE0);</div><div class=\"line\">        cxt.bindTexture(cxt.TEXTURE_2D,texture);</div><div class=\"line\"></div><div class=\"line\">        cxt.texParameteri(cxt.TEXTURE_2D,cxt.TEXTURE_MIN_FILTER,cxt.LINEAR);</div><div class=\"line\">        cxt.texImage2D(cxt.TEXTURE_2D,<span class=\"number\">0</span>,cxt.RGB,cxt.RGB,cxt.UNSIGNED_BYTE,img);</div><div class=\"line\">        cxt.uniform1i(texLocation,<span class=\"number\">0</span>);</div><div class=\"line\">        cxt.drawArrays(cxt.TRIANGLE_STRIP,<span class=\"number\">0</span>,<span class=\"number\">4</span>);</div><div class=\"line\"></div><div class=\"line\">    &#125;);</div></pre></td></tr></table></figure></p>\n<p><br><img width=\"300\" src=\"/webgl-2017-07-10/2.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/10\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/10</a></p>"},{"title":"WebGL--","comments":1,"toc":true,"date":"2017-07-12T13:09:11.000Z","_content":"\n### \n\n* OpenGL\n* \n*  C \n\n#### \n\n* main\n* void\n* void main(){...}\n\n\n``` javascript\nvoid main(){\n   ...\n}\n```\n\n<!-- more -->\n\n#### \n\n* \n* \n\n``` javascript\nbool a;\ninit b;\nfloat c;\nvoid main(){\n   ...\n}\n```\n\n#### \n\n* a-z , A-Z , 0-9 , _\n* \n* \n*  gl_  , _webgl_ \n\n\n#### \n\n* - * / +\n* + -\n* ++ \n* =\n* += -= *= /=\n* < > <= >=\n* ==  != \n* !   &&  ||  ^^  \n\n``` javascript\nfloat a;\nfloat b;\n\nfloat c = a + b;\n++a/a++\n\ntrue ^^ true // false\nfalse ^^ false // false\nfalse ^^ true // true\n```\n\n### \n\n#### \n\nstruct bright{\n   vec4 color;\n   vec3 position;\n}\n\n\n\n``` javascript\n\nstruct user {\n\tfloat gezi;\n\tvec3 book;\n}\n\nuser wq;\nfloat a = 12.0;\nvec3 b = vec3(1.2,3.3,5.0);\nwq = user(a,b)\nwq = user(12.0,vec3(2.1,3.3,5.0));\n\n```\n\n#### \n\n* \n*  0 \n*  const \n* float floatArr[4];\n\n#### \n\n* \n* sampler2D\n*  uniform \n* 8\n\n### \n\n#### \n\nif (1){\n  true\n}else if(1){\n 1 false2 true\n}else{\n   12 false  \n}\n\n``` javascript\n\nvarying vec4 vpos;\n\nif(vpos.x >= 0.0 && vpos.y >= 0.0){\n\tgl_FragColor = vec4(1.0,0.0,0.0,1.0); //\n}else if(vpos.x >= 0.0 && vpos.y < 0.0){\n\tgl_FragColor = vec4(0.0,1.0,0.0,1.0); //\n}else if(vpos.x < 0.0 && vpos.y >= 0.0){\n\tgl_FragColor = vec4(0.0,0.0,1.0,1.0); //\n}else{\n\tgl_FragColor = vec4(1.0,1.0,0.0,1.0); //\n}\n\n```\n\n#### \n\nfor (  ;  ;  ) {\n \n}\n\n``` javascript\n\ninit sum = 0;\nfor(init i = 0; i<10;i++){\n\tsum += 1;\n}\n// sum = 10;\n\nfloat sum = 0.0;\nfor(init i = 0; i<10;i++){\n\tsum += float(i);\n}\n```\n\n### \n\n#### \n\n (type0 arg0 , type1 arg1 , ) {\n   \n   return  ;\n}\n``` javascript\n\ninit sum(int a,int b){\n\treturn a + b;\n}\n```\n\n#### \n\n* float bright();  // \n* void main(){ bright(); }\n* float bright(){  }   \n\n#### \n\n* \n* \n* \n* \n* \n* \n* \n\n``` javascript\n\n//\nradians(float d);\nradians(vec2 d);\nradians(vec3 d);\nradians(vec4 d);\n\ndegrees(float d);\ndegrees(vec2 d);\ndegrees(vec3 d);\ndegrees(vec4 d);\n\n// cos tan ...\nsin(float d);\nsin(vec2 d);\nsin(vec3 d);\nsin(vec4 d);\n\n// \n\npow(float x,float y)\npow(vec2 x,vec2 y)\npow(vec3 x,vec3 y)\npow(vec4 x,vec4 y)\n\n// \n\nabc(float x);\nabc(vec2 x);\nabc(vec3 x);\nabc(vec4 x);\n\nfloor(float x);\nfloor(vec2 x);\nfloor(vec3 x);\nfloor(vec4 x);\n\nmax(float x,float y);\n\n// \n// x\nlength(float x) // vec2 ,vec3, vec4\n...\n```\n\n\n### \n\n####  \n\n<img width=\"500\" src=\"webgl-2017-07-12/1.jpeg\"/>\n\n* const \n* attribute \n* uniform \n* varying varyingvarying\n\n#### \n\n* highp   \n* mediump   \n* lowp   \n* precision lowp float //  \n\n","source":"_posts/webgl-2017-07-12.md","raw":"---\ntitle: WebGL--\ncomments: true\ntoc: true\ndate: 2017-07-12 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n---\n\n### \n\n* OpenGL\n* \n*  C \n\n#### \n\n* main\n* void\n* void main(){...}\n\n\n``` javascript\nvoid main(){\n   ...\n}\n```\n\n<!-- more -->\n\n#### \n\n* \n* \n\n``` javascript\nbool a;\ninit b;\nfloat c;\nvoid main(){\n   ...\n}\n```\n\n#### \n\n* a-z , A-Z , 0-9 , _\n* \n* \n*  gl_  , _webgl_ \n\n\n#### \n\n* - * / +\n* + -\n* ++ \n* =\n* += -= *= /=\n* < > <= >=\n* ==  != \n* !   &&  ||  ^^  \n\n``` javascript\nfloat a;\nfloat b;\n\nfloat c = a + b;\n++a/a++\n\ntrue ^^ true // false\nfalse ^^ false // false\nfalse ^^ true // true\n```\n\n### \n\n#### \n\nstruct bright{\n   vec4 color;\n   vec3 position;\n}\n\n\n\n``` javascript\n\nstruct user {\n\tfloat gezi;\n\tvec3 book;\n}\n\nuser wq;\nfloat a = 12.0;\nvec3 b = vec3(1.2,3.3,5.0);\nwq = user(a,b)\nwq = user(12.0,vec3(2.1,3.3,5.0));\n\n```\n\n#### \n\n* \n*  0 \n*  const \n* float floatArr[4];\n\n#### \n\n* \n* sampler2D\n*  uniform \n* 8\n\n### \n\n#### \n\nif (1){\n  true\n}else if(1){\n 1 false2 true\n}else{\n   12 false  \n}\n\n``` javascript\n\nvarying vec4 vpos;\n\nif(vpos.x >= 0.0 && vpos.y >= 0.0){\n\tgl_FragColor = vec4(1.0,0.0,0.0,1.0); //\n}else if(vpos.x >= 0.0 && vpos.y < 0.0){\n\tgl_FragColor = vec4(0.0,1.0,0.0,1.0); //\n}else if(vpos.x < 0.0 && vpos.y >= 0.0){\n\tgl_FragColor = vec4(0.0,0.0,1.0,1.0); //\n}else{\n\tgl_FragColor = vec4(1.0,1.0,0.0,1.0); //\n}\n\n```\n\n#### \n\nfor (  ;  ;  ) {\n \n}\n\n``` javascript\n\ninit sum = 0;\nfor(init i = 0; i<10;i++){\n\tsum += 1;\n}\n// sum = 10;\n\nfloat sum = 0.0;\nfor(init i = 0; i<10;i++){\n\tsum += float(i);\n}\n```\n\n### \n\n#### \n\n (type0 arg0 , type1 arg1 , ) {\n   \n   return  ;\n}\n``` javascript\n\ninit sum(int a,int b){\n\treturn a + b;\n}\n```\n\n#### \n\n* float bright();  // \n* void main(){ bright(); }\n* float bright(){  }   \n\n#### \n\n* \n* \n* \n* \n* \n* \n* \n\n``` javascript\n\n//\nradians(float d);\nradians(vec2 d);\nradians(vec3 d);\nradians(vec4 d);\n\ndegrees(float d);\ndegrees(vec2 d);\ndegrees(vec3 d);\ndegrees(vec4 d);\n\n// cos tan ...\nsin(float d);\nsin(vec2 d);\nsin(vec3 d);\nsin(vec4 d);\n\n// \n\npow(float x,float y)\npow(vec2 x,vec2 y)\npow(vec3 x,vec3 y)\npow(vec4 x,vec4 y)\n\n// \n\nabc(float x);\nabc(vec2 x);\nabc(vec3 x);\nabc(vec4 x);\n\nfloor(float x);\nfloor(vec2 x);\nfloor(vec3 x);\nfloor(vec4 x);\n\nmax(float x,float y);\n\n// \n// x\nlength(float x) // vec2 ,vec3, vec4\n...\n```\n\n\n### \n\n####  \n\n<img width=\"500\" src=\"webgl-2017-07-12/1.jpeg\"/>\n\n* const \n* attribute \n* uniform \n* varying varyingvarying\n\n#### \n\n* highp   \n* mediump   \n* lowp   \n* precision lowp float //  \n\n","slug":"webgl-2017-07-12","published":1,"updated":"2018-02-10T09:08:00.902Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbl0025fdldq5afzbds","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>OpenGL</li>\n<li></li>\n<li> C </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>main</li>\n<li>void</li>\n<li>void main(){}</li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">void</span> main()&#123;</div><div class=\"line\">   ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">bool a;</div><div class=\"line\">init b;</div><div class=\"line\">float c;</div><div class=\"line\"><span class=\"keyword\">void</span> main()&#123;</div><div class=\"line\">   ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>a-z , A-Z , 0-9 , _</li>\n<li></li>\n<li></li>\n<li> gl_  , <em>webgl</em> </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><ul>\n<li><ul>\n<li>/ +</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><ul>\n<li>-</li>\n</ul>\n</li>\n<li>++ </li>\n<li>=</li>\n<li>+= -= *= /=</li>\n<li>&lt; &gt; &lt;= &gt;=</li>\n<li>==  != </li>\n<li>!   &amp;&amp;  ||  ^^  </li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">float a;</div><div class=\"line\">float b;</div><div class=\"line\"></div><div class=\"line\">float c = a + b;</div><div class=\"line\">++a/a++</div><div class=\"line\"></div><div class=\"line\"><span class=\"literal\">true</span> ^^ <span class=\"literal\">true</span> <span class=\"comment\">// false</span></div><div class=\"line\"><span class=\"literal\">false</span> ^^ <span class=\"literal\">false</span> <span class=\"comment\">// false</span></div><div class=\"line\"><span class=\"literal\">false</span> ^^ <span class=\"literal\">true</span> <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>struct bright{<br>   vec4 color;<br>   vec3 position;<br>}</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">struct user &#123;</div><div class=\"line\">\tfloat gezi;</div><div class=\"line\">\tvec3 book;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">user wq;</div><div class=\"line\">float a = <span class=\"number\">12.0</span>;</div><div class=\"line\">vec3 b = vec3(<span class=\"number\">1.2</span>,<span class=\"number\">3.3</span>,<span class=\"number\">5.0</span>);</div><div class=\"line\">wq = user(a,b)</div><div class=\"line\">wq = user(<span class=\"number\">12.0</span>,vec3(<span class=\"number\">2.1</span>,<span class=\"number\">3.3</span>,<span class=\"number\">5.0</span>));</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li> 0 </li>\n<li> const </li>\n<li>float floatArr[4];</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li>sampler2D</li>\n<li> uniform </li>\n<li>8</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>if (1){<br>  true<br>}else if(1){<br> 1 false2 true<br>}else{<br>   12 false  <br>}</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">varying vec4 vpos;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span>(vpos.x &gt;= <span class=\"number\">0.0</span> &amp;&amp; vpos.y &gt;= <span class=\"number\">0.0</span>)&#123;</div><div class=\"line\">\tgl_FragColor = vec4(<span class=\"number\">1.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>); <span class=\"comment\">//</span></div><div class=\"line\">&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(vpos.x &gt;= <span class=\"number\">0.0</span> &amp;&amp; vpos.y &lt; <span class=\"number\">0.0</span>)&#123;</div><div class=\"line\">\tgl_FragColor = vec4(<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>); <span class=\"comment\">//</span></div><div class=\"line\">&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(vpos.x &lt; <span class=\"number\">0.0</span> &amp;&amp; vpos.y &gt;= <span class=\"number\">0.0</span>)&#123;</div><div class=\"line\">\tgl_FragColor = vec4(<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>); <span class=\"comment\">//</span></div><div class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">\tgl_FragColor = vec4(<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>); <span class=\"comment\">//</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>for (  ;  ;  ) {<br> <br>}</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">init sum = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"keyword\">for</span>(init i = <span class=\"number\">0</span>; i&lt;<span class=\"number\">10</span>;i++)&#123;</div><div class=\"line\">\tsum += <span class=\"number\">1</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// sum = 10;</span></div><div class=\"line\"></div><div class=\"line\">float sum = <span class=\"number\">0.0</span>;</div><div class=\"line\"><span class=\"keyword\">for</span>(init i = <span class=\"number\">0</span>; i&lt;<span class=\"number\">10</span>;i++)&#123;</div><div class=\"line\">\tsum += float(i);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> (type0 arg0 , type1 arg1 , ) {<br>   <br>   return  ;<br>}<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">init sum(int a,int b)&#123;</div><div class=\"line\">\t<span class=\"keyword\">return</span> a + b;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>float bright();  // </li>\n<li>void main(){ bright(); }</li>\n<li>float bright(){  }   </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">radians(float d);</div><div class=\"line\">radians(vec2 d);</div><div class=\"line\">radians(vec3 d);</div><div class=\"line\">radians(vec4 d);</div><div class=\"line\"></div><div class=\"line\">degrees(float d);</div><div class=\"line\">degrees(vec2 d);</div><div class=\"line\">degrees(vec3 d);</div><div class=\"line\">degrees(vec4 d);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// cos tan ...</span></div><div class=\"line\">sin(float d);</div><div class=\"line\">sin(vec2 d);</div><div class=\"line\">sin(vec3 d);</div><div class=\"line\">sin(vec4 d);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\">pow(float x,float y)</div><div class=\"line\">pow(vec2 x,vec2 y)</div><div class=\"line\">pow(vec3 x,vec3 y)</div><div class=\"line\">pow(vec4 x,vec4 y)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\">abc(float x);</div><div class=\"line\">abc(vec2 x);</div><div class=\"line\">abc(vec3 x);</div><div class=\"line\">abc(vec4 x);</div><div class=\"line\"></div><div class=\"line\">floor(float x);</div><div class=\"line\">floor(vec2 x);</div><div class=\"line\">floor(vec3 x);</div><div class=\"line\">floor(vec4 x);</div><div class=\"line\"></div><div class=\"line\">max(float x,float y);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// x</span></div><div class=\"line\">length(float x) <span class=\"comment\">// vec2 ,vec3, vec4</span></div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img width=\"500\" src=\"/webgl-2017-07-12/1.jpeg\"></p>\n<ul>\n<li>const </li>\n<li>attribute </li>\n<li>uniform </li>\n<li>varying varyingvarying</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>highp   </li>\n<li>mediump   </li>\n<li>lowp   </li>\n<li>precision lowp float //  </li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>OpenGL</li>\n<li></li>\n<li> C </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>main</li>\n<li>void</li>\n<li>void main(){}</li>\n</ul>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">void</span> main()&#123;</div><div class=\"line\">   ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">bool a;</div><div class=\"line\">init b;</div><div class=\"line\">float c;</div><div class=\"line\"><span class=\"keyword\">void</span> main()&#123;</div><div class=\"line\">   ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>a-z , A-Z , 0-9 , _</li>\n<li></li>\n<li></li>\n<li> gl_  , <em>webgl</em> </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><ul>\n<li><ul>\n<li>/ +</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><ul>\n<li>-</li>\n</ul>\n</li>\n<li>++ </li>\n<li>=</li>\n<li>+= -= *= /=</li>\n<li>&lt; &gt; &lt;= &gt;=</li>\n<li>==  != </li>\n<li>!   &amp;&amp;  ||  ^^  </li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">float a;</div><div class=\"line\">float b;</div><div class=\"line\"></div><div class=\"line\">float c = a + b;</div><div class=\"line\">++a/a++</div><div class=\"line\"></div><div class=\"line\"><span class=\"literal\">true</span> ^^ <span class=\"literal\">true</span> <span class=\"comment\">// false</span></div><div class=\"line\"><span class=\"literal\">false</span> ^^ <span class=\"literal\">false</span> <span class=\"comment\">// false</span></div><div class=\"line\"><span class=\"literal\">false</span> ^^ <span class=\"literal\">true</span> <span class=\"comment\">// true</span></div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>struct bright{<br>   vec4 color;<br>   vec3 position;<br>}</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">struct user &#123;</div><div class=\"line\">\tfloat gezi;</div><div class=\"line\">\tvec3 book;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">user wq;</div><div class=\"line\">float a = <span class=\"number\">12.0</span>;</div><div class=\"line\">vec3 b = vec3(<span class=\"number\">1.2</span>,<span class=\"number\">3.3</span>,<span class=\"number\">5.0</span>);</div><div class=\"line\">wq = user(a,b)</div><div class=\"line\">wq = user(<span class=\"number\">12.0</span>,vec3(<span class=\"number\">2.1</span>,<span class=\"number\">3.3</span>,<span class=\"number\">5.0</span>));</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li> 0 </li>\n<li> const </li>\n<li>float floatArr[4];</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li>sampler2D</li>\n<li> uniform </li>\n<li>8</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>if (1){<br>  true<br>}else if(1){<br> 1 false2 true<br>}else{<br>   12 false  <br>}</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">varying vec4 vpos;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span>(vpos.x &gt;= <span class=\"number\">0.0</span> &amp;&amp; vpos.y &gt;= <span class=\"number\">0.0</span>)&#123;</div><div class=\"line\">\tgl_FragColor = vec4(<span class=\"number\">1.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>); <span class=\"comment\">//</span></div><div class=\"line\">&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(vpos.x &gt;= <span class=\"number\">0.0</span> &amp;&amp; vpos.y &lt; <span class=\"number\">0.0</span>)&#123;</div><div class=\"line\">\tgl_FragColor = vec4(<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>); <span class=\"comment\">//</span></div><div class=\"line\">&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(vpos.x &lt; <span class=\"number\">0.0</span> &amp;&amp; vpos.y &gt;= <span class=\"number\">0.0</span>)&#123;</div><div class=\"line\">\tgl_FragColor = vec4(<span class=\"number\">0.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>); <span class=\"comment\">//</span></div><div class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">\tgl_FragColor = vec4(<span class=\"number\">1.0</span>,<span class=\"number\">1.0</span>,<span class=\"number\">0.0</span>,<span class=\"number\">1.0</span>); <span class=\"comment\">//</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>for (  ;  ;  ) {<br> <br>}</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">init sum = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"keyword\">for</span>(init i = <span class=\"number\">0</span>; i&lt;<span class=\"number\">10</span>;i++)&#123;</div><div class=\"line\">\tsum += <span class=\"number\">1</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// sum = 10;</span></div><div class=\"line\"></div><div class=\"line\">float sum = <span class=\"number\">0.0</span>;</div><div class=\"line\"><span class=\"keyword\">for</span>(init i = <span class=\"number\">0</span>; i&lt;<span class=\"number\">10</span>;i++)&#123;</div><div class=\"line\">\tsum += float(i);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> (type0 arg0 , type1 arg1 , ) {<br>   <br>   return  ;<br>}<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">init sum(int a,int b)&#123;</div><div class=\"line\">\t<span class=\"keyword\">return</span> a + b;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>float bright();  // </li>\n<li>void main(){ bright(); }</li>\n<li>float bright(){  }   </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">radians(float d);</div><div class=\"line\">radians(vec2 d);</div><div class=\"line\">radians(vec3 d);</div><div class=\"line\">radians(vec4 d);</div><div class=\"line\"></div><div class=\"line\">degrees(float d);</div><div class=\"line\">degrees(vec2 d);</div><div class=\"line\">degrees(vec3 d);</div><div class=\"line\">degrees(vec4 d);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// cos tan ...</span></div><div class=\"line\">sin(float d);</div><div class=\"line\">sin(vec2 d);</div><div class=\"line\">sin(vec3 d);</div><div class=\"line\">sin(vec4 d);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\">pow(float x,float y)</div><div class=\"line\">pow(vec2 x,vec2 y)</div><div class=\"line\">pow(vec3 x,vec3 y)</div><div class=\"line\">pow(vec4 x,vec4 y)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\">abc(float x);</div><div class=\"line\">abc(vec2 x);</div><div class=\"line\">abc(vec3 x);</div><div class=\"line\">abc(vec4 x);</div><div class=\"line\"></div><div class=\"line\">floor(float x);</div><div class=\"line\">floor(vec2 x);</div><div class=\"line\">floor(vec3 x);</div><div class=\"line\">floor(vec4 x);</div><div class=\"line\"></div><div class=\"line\">max(float x,float y);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"comment\">// x</span></div><div class=\"line\">length(float x) <span class=\"comment\">// vec2 ,vec3, vec4</span></div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img width=\"500\" src=\"/webgl-2017-07-12/1.jpeg\"></p>\n<ul>\n<li>const </li>\n<li>attribute </li>\n<li>uniform </li>\n<li>varying varyingvarying</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>highp   </li>\n<li>mediump   </li>\n<li>lowp   </li>\n<li>precision lowp float //  </li>\n</ul>"},{"title":"WebGL--","comments":1,"toc":true,"date":"2017-07-11T13:09:11.000Z","_content":"\n### \n\n#### \n\n* \n* \n\n\n\n<!-- more -->\n\n#### \n\nright,top,-near,(-left,top,-near),(-left,-bottom,-near),(right,-bottom,-near),(right,top,far),(-left,top,far),(-left,-bottom,far),(right,-bottom,far).\n\n<img width=\"300\" src=\"webgl-2017-07-11/01.jpeg\"/>\n\n<canvas><canvas><canvas>\n\n### \n\n#### \n\n* setOrtho(left , right , bottom , top , near , far)\n* left / right / bottom / top \n* near  \n* far  \n\n\n\n<img width=\"300\" src=\"webgl-2017-07-11/2.jpeg\"/>\n\n\n\nuniform\n``` javascript\nvar vertexShaderSource = `\n    attribute vec4 pos;\n    uniform mat4 u_mx;\n    attribute vec4 a_Color;\n    varying vec4 v_Color;\n\n    void main(){\n        gl_Position = u_mx * pos;\n        v_Color = a_Color;\n    }\n`\n\nvar fragmentShaderSource = `\n    precision lowp float;\n    varying vec4 v_Color;\n    void main(){\n        gl_FragColor = v_Color;\n    }\n`  \n```\n\n\n``` javascript\nfunction getOMX(left,right,bottom,top,near,far){\n\n    return new Float32Array([\n        2 / (right - left), 0, 0, 0,\n        0, 2 / (top - bottom), 0, 0,\n        0, 0, -2 / (far - near), 0,\n        -(right + left) / (right - left),\n        -(top + bottom) / (top - bottom),\n        -(far + near) / (far - near),\n        1\n    ]);\n\n}\nvar near = 0.0;\nvar far = .5;\n\nvar omx = getOMX(-.5,.5, -.5,.5, near , far);    \n```\n\n\ndata\n``` javascript\nvar data = new Float32Array([\n    0.0, 0.6, -.4, 0.4, 1.0, 0.4,\n    -.45, -.4, -.51, .4, 1.0, .4,\n    0.5, -.4, -.4, 1.0, .4, .4,\n\n    .5, .4, -.2, 1.0, .4, .4,\n    -.5, .4, -.2, 1.0, 1.0, .3,\n    .0, -.6, -.2, 1.0, 1.0, .4\n]);   \n```\n\nfar.5,data-.51\n\n<img width=\"300\" src=\"webgl-2017-07-11/3.jpeg\"/>\n\n### \n\n* \n* <> * <> * <>\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-11/4.jpeg\"/>\n\n### \n\n#### \n\n* \n* 0\n* \n\n<img width=\"300\" src=\"webgl-2017-07-11/5.jpeg\"/>\n\n\n\n#### \n\n### \n\n<img width=\"500\" src=\"webgl-2017-07-11/6.jpeg\"/>\n\n\n\n\n\n``` javascript\nvar vertexShaderSource = `\n    attribute vec4 pos;\n    uniform mat4 u_mx;\n    attribute vec4 a_Color;\n    varying vec4 v_Color;\n\n    void main(){\n        gl_Position = u_mx * pos;\n        v_Color = a_Color;\n    }\n`\n\nvar fragmentShaderSource = `\n    precision lowp float;\n    varying vec4 v_Color;\n    void main(){\n        gl_FragColor = v_Color;\n    }\n`   \n```\n\nprogram\n\n``` javascript\nvar gl = canvas.getContext('webgl');\n\nvar program = initShader(gl,vertexShaderSource,fragmentShaderSource); \n```\n\n\n\n``` javascript\n/**\n * \n * fov \n * aspect   \n * near  \n * far  \n */\nfunction getTS(fov,aspect,near,far){\n    fov = fov * Math.PI / 180; // \n    return new Float32Array([\n        1 / (aspect * Math.tan(fov / 2)), 0, 0, 0,\n        0, 1 / Math.tan(fov / 2), 0, 0,\n        0, 0, -(far + near) / (far - near), -1,\n        0, 0, -2 * (far * near) / (far - near), 0\n    ]);\n}\n```\n\natadatabuffer\n\n``` javascript\n// \nvar buffer_data = new Float32Array([\n\n    0.75, 1.0, -.8, 1.0, 1.0, .4,\n    .25, -1.0, -.8, 1.0, 1.0, .4,\n    1.0, -1.0, -.8, 1.0, .4, .4,\n\n    .75, 1.0, 0.8, .4, .4, 1.0,\n    .25, -1.0, .8, .4, .4, 1.0,\n    1.0, -1.0, .8, 1.0, .4, .4,\n\n\n    // \n    -.75, 1.0, -.8, 1.0, 1.0, .4,\n    -1.0, -1.0, -.8, 1.0, 1.0, 0.4,\n    -0.25, -1.0, -.8, 1.0, .4, .4,\n\n    -.75, 1.0, .8, .4, .4, 1.0,\n    -1.0, -1.0, .8, .4, .4, 1.0,\n    -.25, -1.0, .8, 1.0, .4, .4\n\n]);\n\nvar buffer = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer);\ngl.bufferData(gl.ARRAY_BUFFER, buffer_data, gl.STATIC_DRAW);\n```\n\nLocation\n\n``` javascript\nvar posLocation = gl.getAttribLocation(program, 'pos');\nvar aColorLocation = gl.getAttribLocation(program, 'a_Color');\nvar uMXLocation = gl.getUniformLocation(program, 'u_mx');\n\nvar BYTES_SIZE = buffer_data.BYTES_PER_ELEMENT;\n\ngl.vertexAttribPointer(posLocation, 3, gl.FLOAT, false, BYTES_SIZE * 6, 0);\ngl.vertexAttribPointer(aColorLocation, 3, gl.FLOAT, false, BYTES_SIZE * 6, BYTES_SIZE * 3);\ngl.enableVertexAttribArray(posLocation);\ngl.enableVertexAttribArray(aColorLocation);\n```\n\ngetVMatrixmultiplyMatrixlib\n\n``` javascript\nfunction draw() {\n\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    var mx = getTS(30, canvas.width / canvas.height, 1, 100);\n    var vmx = getVMatrix(0,0,5,0,0,-100);\n    gl.uniformMatrix4fv(uMXLocation,false,multiplyMatrix(mx,vmx));\n\n    gl.drawArrays(gl.TRIANGLES, 0, 12);\n}\n\ndraw();\n```\n\n\n\n<img width=\"400\" src=\"webgl-2017-07-11/7.jpeg\"/>\n\n#### \n\n* WebGL \n* \n\ndata\n\n``` javascript\n// \nvar buffer_data = new Float32Array([\n\n    .75, 1.0, 0.8, .4, .4, 1.0,\n    .25, -1.0, .8, .4, .4, 1.0,\n    1.0, -1.0, .8, 1.0, .4, .4,\n\n    0.75, 1.0, -.8, 1.0, 1.0, .4,\n    .25, -1.0, -.8, 1.0, 1.0, .4,\n    1.0, -1.0, -.8, 1.0, .4, .4,\n\n    -.75, 1.0, .8, .4, .4, 1.0,\n    -1.0, -1.0, .8, .4, .4, 1.0,\n    -.25, -1.0, .8, 1.0, .4, .4,\n\n    -.75, 1.0, -.8, 1.0, 1.0, .4,\n    -1.0, -1.0, -.8, 1.0, 1.0, 0.4,\n    -0.25, -1.0, -.8, 1.0, .4, .4,\n\n]);\n```\n\n<img width=\"400\" src=\"webgl-2017-07-11/8.jpeg\"/>\n\nwebgl\n\n#### \n\n* \n* \n\n\n\n``` javascript\ngl.enable(gl.DEPTH_TEST);\ngl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n```\n\n\n\n#### \n\nWebGLZ fighting\n\n\n\n``` javascript\ngl.enable(gl.POLYGON_OFFSET_FILL);\ngl.drawArrays(gl.TRIANGLES, 0, 3);\ngl.polygonOffset(1.0, 1.0);   \ngl.drawArrays(gl.TRIANGLES, 3, 3);\n```\n\n\n\n<img width=\"400\" src=\"webgl-2017-07-11/9.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/11","source":"_posts/webgl-2017-07-11.md","raw":"---\ntitle: WebGL--\ncomments: true\ntoc: true\ndate: 2017-07-11 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n---\n\n### \n\n#### \n\n* \n* \n\n\n\n<!-- more -->\n\n#### \n\nright,top,-near,(-left,top,-near),(-left,-bottom,-near),(right,-bottom,-near),(right,top,far),(-left,top,far),(-left,-bottom,far),(right,-bottom,far).\n\n<img width=\"300\" src=\"webgl-2017-07-11/01.jpeg\"/>\n\n<canvas><canvas><canvas>\n\n### \n\n#### \n\n* setOrtho(left , right , bottom , top , near , far)\n* left / right / bottom / top \n* near  \n* far  \n\n\n\n<img width=\"300\" src=\"webgl-2017-07-11/2.jpeg\"/>\n\n\n\nuniform\n``` javascript\nvar vertexShaderSource = `\n    attribute vec4 pos;\n    uniform mat4 u_mx;\n    attribute vec4 a_Color;\n    varying vec4 v_Color;\n\n    void main(){\n        gl_Position = u_mx * pos;\n        v_Color = a_Color;\n    }\n`\n\nvar fragmentShaderSource = `\n    precision lowp float;\n    varying vec4 v_Color;\n    void main(){\n        gl_FragColor = v_Color;\n    }\n`  \n```\n\n\n``` javascript\nfunction getOMX(left,right,bottom,top,near,far){\n\n    return new Float32Array([\n        2 / (right - left), 0, 0, 0,\n        0, 2 / (top - bottom), 0, 0,\n        0, 0, -2 / (far - near), 0,\n        -(right + left) / (right - left),\n        -(top + bottom) / (top - bottom),\n        -(far + near) / (far - near),\n        1\n    ]);\n\n}\nvar near = 0.0;\nvar far = .5;\n\nvar omx = getOMX(-.5,.5, -.5,.5, near , far);    \n```\n\n\ndata\n``` javascript\nvar data = new Float32Array([\n    0.0, 0.6, -.4, 0.4, 1.0, 0.4,\n    -.45, -.4, -.51, .4, 1.0, .4,\n    0.5, -.4, -.4, 1.0, .4, .4,\n\n    .5, .4, -.2, 1.0, .4, .4,\n    -.5, .4, -.2, 1.0, 1.0, .3,\n    .0, -.6, -.2, 1.0, 1.0, .4\n]);   \n```\n\nfar.5,data-.51\n\n<img width=\"300\" src=\"webgl-2017-07-11/3.jpeg\"/>\n\n### \n\n* \n* <> * <> * <>\n\n\n\n<img width=\"300\" src=\"webgl-2017-07-11/4.jpeg\"/>\n\n### \n\n#### \n\n* \n* 0\n* \n\n<img width=\"300\" src=\"webgl-2017-07-11/5.jpeg\"/>\n\n\n\n#### \n\n### \n\n<img width=\"500\" src=\"webgl-2017-07-11/6.jpeg\"/>\n\n\n\n\n\n``` javascript\nvar vertexShaderSource = `\n    attribute vec4 pos;\n    uniform mat4 u_mx;\n    attribute vec4 a_Color;\n    varying vec4 v_Color;\n\n    void main(){\n        gl_Position = u_mx * pos;\n        v_Color = a_Color;\n    }\n`\n\nvar fragmentShaderSource = `\n    precision lowp float;\n    varying vec4 v_Color;\n    void main(){\n        gl_FragColor = v_Color;\n    }\n`   \n```\n\nprogram\n\n``` javascript\nvar gl = canvas.getContext('webgl');\n\nvar program = initShader(gl,vertexShaderSource,fragmentShaderSource); \n```\n\n\n\n``` javascript\n/**\n * \n * fov \n * aspect   \n * near  \n * far  \n */\nfunction getTS(fov,aspect,near,far){\n    fov = fov * Math.PI / 180; // \n    return new Float32Array([\n        1 / (aspect * Math.tan(fov / 2)), 0, 0, 0,\n        0, 1 / Math.tan(fov / 2), 0, 0,\n        0, 0, -(far + near) / (far - near), -1,\n        0, 0, -2 * (far * near) / (far - near), 0\n    ]);\n}\n```\n\natadatabuffer\n\n``` javascript\n// \nvar buffer_data = new Float32Array([\n\n    0.75, 1.0, -.8, 1.0, 1.0, .4,\n    .25, -1.0, -.8, 1.0, 1.0, .4,\n    1.0, -1.0, -.8, 1.0, .4, .4,\n\n    .75, 1.0, 0.8, .4, .4, 1.0,\n    .25, -1.0, .8, .4, .4, 1.0,\n    1.0, -1.0, .8, 1.0, .4, .4,\n\n\n    // \n    -.75, 1.0, -.8, 1.0, 1.0, .4,\n    -1.0, -1.0, -.8, 1.0, 1.0, 0.4,\n    -0.25, -1.0, -.8, 1.0, .4, .4,\n\n    -.75, 1.0, .8, .4, .4, 1.0,\n    -1.0, -1.0, .8, .4, .4, 1.0,\n    -.25, -1.0, .8, 1.0, .4, .4\n\n]);\n\nvar buffer = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer);\ngl.bufferData(gl.ARRAY_BUFFER, buffer_data, gl.STATIC_DRAW);\n```\n\nLocation\n\n``` javascript\nvar posLocation = gl.getAttribLocation(program, 'pos');\nvar aColorLocation = gl.getAttribLocation(program, 'a_Color');\nvar uMXLocation = gl.getUniformLocation(program, 'u_mx');\n\nvar BYTES_SIZE = buffer_data.BYTES_PER_ELEMENT;\n\ngl.vertexAttribPointer(posLocation, 3, gl.FLOAT, false, BYTES_SIZE * 6, 0);\ngl.vertexAttribPointer(aColorLocation, 3, gl.FLOAT, false, BYTES_SIZE * 6, BYTES_SIZE * 3);\ngl.enableVertexAttribArray(posLocation);\ngl.enableVertexAttribArray(aColorLocation);\n```\n\ngetVMatrixmultiplyMatrixlib\n\n``` javascript\nfunction draw() {\n\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    var mx = getTS(30, canvas.width / canvas.height, 1, 100);\n    var vmx = getVMatrix(0,0,5,0,0,-100);\n    gl.uniformMatrix4fv(uMXLocation,false,multiplyMatrix(mx,vmx));\n\n    gl.drawArrays(gl.TRIANGLES, 0, 12);\n}\n\ndraw();\n```\n\n\n\n<img width=\"400\" src=\"webgl-2017-07-11/7.jpeg\"/>\n\n#### \n\n* WebGL \n* \n\ndata\n\n``` javascript\n// \nvar buffer_data = new Float32Array([\n\n    .75, 1.0, 0.8, .4, .4, 1.0,\n    .25, -1.0, .8, .4, .4, 1.0,\n    1.0, -1.0, .8, 1.0, .4, .4,\n\n    0.75, 1.0, -.8, 1.0, 1.0, .4,\n    .25, -1.0, -.8, 1.0, 1.0, .4,\n    1.0, -1.0, -.8, 1.0, .4, .4,\n\n    -.75, 1.0, .8, .4, .4, 1.0,\n    -1.0, -1.0, .8, .4, .4, 1.0,\n    -.25, -1.0, .8, 1.0, .4, .4,\n\n    -.75, 1.0, -.8, 1.0, 1.0, .4,\n    -1.0, -1.0, -.8, 1.0, 1.0, 0.4,\n    -0.25, -1.0, -.8, 1.0, .4, .4,\n\n]);\n```\n\n<img width=\"400\" src=\"webgl-2017-07-11/8.jpeg\"/>\n\nwebgl\n\n#### \n\n* \n* \n\n\n\n``` javascript\ngl.enable(gl.DEPTH_TEST);\ngl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n```\n\n\n\n#### \n\nWebGLZ fighting\n\n\n\n``` javascript\ngl.enable(gl.POLYGON_OFFSET_FILL);\ngl.drawArrays(gl.TRIANGLES, 0, 3);\ngl.polygonOffset(1.0, 1.0);   \ngl.drawArrays(gl.TRIANGLES, 3, 3);\n```\n\n\n\n<img width=\"400\" src=\"webgl-2017-07-11/9.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/11","slug":"webgl-2017-07-11","published":1,"updated":"2018-02-10T09:08:00.902Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbl0028fdldtfw3rc6w","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<a id=\"more\"></a>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>right,top,-near,(-left,top,-near),(-left,-bottom,-near),(right,-bottom,-near),(right,top,far),(-left,top,far),(-left,-bottom,far),(right,-bottom,far).</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-11/01.jpeg\"></p>\n<p><canvas><canvas><canvas></canvas></canvas></canvas></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>setOrtho(left , right , bottom , top , near , far)</li>\n<li>left / right / bottom / top </li>\n<li>near  </li>\n<li>far  </li>\n</ul>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-11/2.jpeg\"></p>\n<p></p>\n<p>uniform<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> vertexShaderSource = <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 u_mx;</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 a_Color;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">    void main()&#123;</span></div><div class=\"line\"><span class=\"string\">        gl_Position = u_mx * pos;</span></div><div class=\"line\"><span class=\"string\">        v_Color = a_Color;</span></div><div class=\"line\"><span class=\"string\">    &#125;</span></div><div class=\"line\"><span class=\"string\">`</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> fragmentShaderSource = <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    precision lowp float;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\">    void main()&#123;</span></div><div class=\"line\"><span class=\"string\">        gl_FragColor = v_Color;</span></div><div class=\"line\"><span class=\"string\">    &#125;</span></div><div class=\"line\"><span class=\"string\">`</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getOMX</span>(<span class=\"params\">left,right,bottom,top,near,far</span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">2</span> / (right - left), <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>,</div><div class=\"line\">        <span class=\"number\">0</span>, <span class=\"number\">2</span> / (top - bottom), <span class=\"number\">0</span>, <span class=\"number\">0</span>,</div><div class=\"line\">        <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">-2</span> / (far - near), <span class=\"number\">0</span>,</div><div class=\"line\">        -(right + left) / (right - left),</div><div class=\"line\">        -(top + bottom) / (top - bottom),</div><div class=\"line\">        -(far + near) / (far - near),</div><div class=\"line\">        <span class=\"number\">1</span></div><div class=\"line\">    ]);</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> near = <span class=\"number\">0.0</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> far = <span class=\"number\">.5</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> omx = getOMX(<span class=\"number\">-.5</span>,<span class=\"number\">.5</span>, <span class=\"number\">-.5</span>,<span class=\"number\">.5</span>, near , far);</div></pre></td></tr></table></figure></p>\n<p>data<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">0.0</span>, <span class=\"number\">0.6</span>, <span class=\"number\">-.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">    <span class=\"number\">-.45</span>, <span class=\"number\">-.4</span>, <span class=\"number\">-.51</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">0.5</span>, <span class=\"number\">-.4</span>, <span class=\"number\">-.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">.4</span>, <span class=\"number\">-.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">.4</span>, <span class=\"number\">-.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.3</span>,</div><div class=\"line\">    <span class=\"number\">.0</span>, <span class=\"number\">-.6</span>, <span class=\"number\">-.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span></div><div class=\"line\">]);</div></pre></td></tr></table></figure></p>\n<p>far.5,data-.51</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-11/3.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li>&lt;&gt; <em> &lt;&gt; </em> &lt;&gt;</li>\n</ul>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-11/4.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li>0</li>\n<li></li>\n</ul>\n<p><img width=\"300\" src=\"/webgl-2017-07-11/5.jpeg\"></p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img width=\"500\" src=\"/webgl-2017-07-11/6.jpeg\"></p>\n<p></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> vertexShaderSource = <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 u_mx;</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 a_Color;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">    void main()&#123;</span></div><div class=\"line\"><span class=\"string\">        gl_Position = u_mx * pos;</span></div><div class=\"line\"><span class=\"string\">        v_Color = a_Color;</span></div><div class=\"line\"><span class=\"string\">    &#125;</span></div><div class=\"line\"><span class=\"string\">`</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> fragmentShaderSource = <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    precision lowp float;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\">    void main()&#123;</span></div><div class=\"line\"><span class=\"string\">        gl_FragColor = v_Color;</span></div><div class=\"line\"><span class=\"string\">    &#125;</span></div><div class=\"line\"><span class=\"string\">`</span></div></pre></td></tr></table></figure>\n<p>program</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> gl = canvas.getContext(<span class=\"string\">'webgl'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> program = initShader(gl,vertexShaderSource,fragmentShaderSource);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * </span></div><div class=\"line\"><span class=\"comment\"> * fov </span></div><div class=\"line\"><span class=\"comment\"> * aspect   </span></div><div class=\"line\"><span class=\"comment\"> * near  </span></div><div class=\"line\"><span class=\"comment\"> * far  </span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getTS</span>(<span class=\"params\">fov,aspect,near,far</span>)</span>&#123;</div><div class=\"line\">    fov = fov * <span class=\"built_in\">Math</span>.PI / <span class=\"number\">180</span>; <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">1</span> / (aspect * <span class=\"built_in\">Math</span>.tan(fov / <span class=\"number\">2</span>)), <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>,</div><div class=\"line\">        <span class=\"number\">0</span>, <span class=\"number\">1</span> / <span class=\"built_in\">Math</span>.tan(fov / <span class=\"number\">2</span>), <span class=\"number\">0</span>, <span class=\"number\">0</span>,</div><div class=\"line\">        <span class=\"number\">0</span>, <span class=\"number\">0</span>, -(far + near) / (far - near), <span class=\"number\">-1</span>,</div><div class=\"line\">        <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">-2</span> * (far * near) / (far - near), <span class=\"number\">0</span></div><div class=\"line\">    ]);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>atadatabuffer</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> buffer_data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">0.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">-.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">    <span class=\"number\">-0.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">-.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">-.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span></div><div class=\"line\"></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> buffer = gl.createBuffer();</div><div class=\"line\">gl.bindBuffer(gl.ARRAY_BUFFER, buffer);</div><div class=\"line\">gl.bufferData(gl.ARRAY_BUFFER, buffer_data, gl.STATIC_DRAW);</div></pre></td></tr></table></figure>\n<p>Location</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> posLocation = gl.getAttribLocation(program, <span class=\"string\">'pos'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> aColorLocation = gl.getAttribLocation(program, <span class=\"string\">'a_Color'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> uMXLocation = gl.getUniformLocation(program, <span class=\"string\">'u_mx'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> BYTES_SIZE = buffer_data.BYTES_PER_ELEMENT;</div><div class=\"line\"></div><div class=\"line\">gl.vertexAttribPointer(posLocation, <span class=\"number\">3</span>, gl.FLOAT, <span class=\"literal\">false</span>, BYTES_SIZE * <span class=\"number\">6</span>, <span class=\"number\">0</span>);</div><div class=\"line\">gl.vertexAttribPointer(aColorLocation, <span class=\"number\">3</span>, gl.FLOAT, <span class=\"literal\">false</span>, BYTES_SIZE * <span class=\"number\">6</span>, BYTES_SIZE * <span class=\"number\">3</span>);</div><div class=\"line\">gl.enableVertexAttribArray(posLocation);</div><div class=\"line\">gl.enableVertexAttribArray(aColorLocation);</div></pre></td></tr></table></figure>\n<p>getVMatrixmultiplyMatrixlib</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">draw</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    gl.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\"></div><div class=\"line\">    gl.clear(gl.COLOR_BUFFER_BIT);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> mx = getTS(<span class=\"number\">30</span>, canvas.width / canvas.height, <span class=\"number\">1</span>, <span class=\"number\">100</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> vmx = getVMatrix(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">-100</span>);</div><div class=\"line\">    gl.uniformMatrix4fv(uMXLocation,<span class=\"literal\">false</span>,multiplyMatrix(mx,vmx));</div><div class=\"line\"></div><div class=\"line\">    gl.drawArrays(gl.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">12</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">draw();</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"400\" src=\"/webgl-2017-07-11/7.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>WebGL </li>\n<li></li>\n</ul>\n<p>data</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> buffer_data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">0.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">-.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">-.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">-.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">    <span class=\"number\">-0.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">]);</div></pre></td></tr></table></figure>\n<p><img width=\"400\" src=\"/webgl-2017-07-11/8.jpeg\"></p>\n<p>webgl</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">gl.enable(gl.DEPTH_TEST);</div><div class=\"line\">gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);</div></pre></td></tr></table></figure>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>WebGLZ fighting</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">gl.enable(gl.POLYGON_OFFSET_FILL);</div><div class=\"line\">gl.drawArrays(gl.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\">gl.polygonOffset(<span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>);   </div><div class=\"line\">gl.drawArrays(gl.TRIANGLES, <span class=\"number\">3</span>, <span class=\"number\">3</span>);</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"400\" src=\"/webgl-2017-07-11/9.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/11\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/11</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<p></p>","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>right,top,-near,(-left,top,-near),(-left,-bottom,-near),(right,-bottom,-near),(right,top,far),(-left,top,far),(-left,-bottom,far),(right,-bottom,far).</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-11/01.jpeg\"></p>\n<p><canvas><canvas><canvas></canvas></canvas></canvas></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>setOrtho(left , right , bottom , top , near , far)</li>\n<li>left / right / bottom / top </li>\n<li>near  </li>\n<li>far  </li>\n</ul>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-11/2.jpeg\"></p>\n<p></p>\n<p>uniform<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> vertexShaderSource = <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 u_mx;</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 a_Color;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">    void main()&#123;</span></div><div class=\"line\"><span class=\"string\">        gl_Position = u_mx * pos;</span></div><div class=\"line\"><span class=\"string\">        v_Color = a_Color;</span></div><div class=\"line\"><span class=\"string\">    &#125;</span></div><div class=\"line\"><span class=\"string\">`</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> fragmentShaderSource = <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    precision lowp float;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\">    void main()&#123;</span></div><div class=\"line\"><span class=\"string\">        gl_FragColor = v_Color;</span></div><div class=\"line\"><span class=\"string\">    &#125;</span></div><div class=\"line\"><span class=\"string\">`</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getOMX</span>(<span class=\"params\">left,right,bottom,top,near,far</span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">2</span> / (right - left), <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>,</div><div class=\"line\">        <span class=\"number\">0</span>, <span class=\"number\">2</span> / (top - bottom), <span class=\"number\">0</span>, <span class=\"number\">0</span>,</div><div class=\"line\">        <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">-2</span> / (far - near), <span class=\"number\">0</span>,</div><div class=\"line\">        -(right + left) / (right - left),</div><div class=\"line\">        -(top + bottom) / (top - bottom),</div><div class=\"line\">        -(far + near) / (far - near),</div><div class=\"line\">        <span class=\"number\">1</span></div><div class=\"line\">    ]);</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> near = <span class=\"number\">0.0</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> far = <span class=\"number\">.5</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> omx = getOMX(<span class=\"number\">-.5</span>,<span class=\"number\">.5</span>, <span class=\"number\">-.5</span>,<span class=\"number\">.5</span>, near , far);</div></pre></td></tr></table></figure></p>\n<p>data<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">0.0</span>, <span class=\"number\">0.6</span>, <span class=\"number\">-.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">    <span class=\"number\">-.45</span>, <span class=\"number\">-.4</span>, <span class=\"number\">-.51</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">0.5</span>, <span class=\"number\">-.4</span>, <span class=\"number\">-.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">.5</span>, <span class=\"number\">.4</span>, <span class=\"number\">-.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">-.5</span>, <span class=\"number\">.4</span>, <span class=\"number\">-.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.3</span>,</div><div class=\"line\">    <span class=\"number\">.0</span>, <span class=\"number\">-.6</span>, <span class=\"number\">-.2</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span></div><div class=\"line\">]);</div></pre></td></tr></table></figure></p>\n<p>far.5,data-.51</p>\n<p><img width=\"300\" src=\"/webgl-2017-07-11/3.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li>&lt;&gt; <em> &lt;&gt; </em> &lt;&gt;</li>\n</ul>\n<p></p>\n<p><img width=\"300\" src=\"/webgl-2017-07-11/4.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li>0</li>\n<li></li>\n</ul>\n<p><img width=\"300\" src=\"/webgl-2017-07-11/5.jpeg\"></p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img width=\"500\" src=\"/webgl-2017-07-11/6.jpeg\"></p>\n<p></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> vertexShaderSource = <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 pos;</span></div><div class=\"line\"><span class=\"string\">    uniform mat4 u_mx;</span></div><div class=\"line\"><span class=\"string\">    attribute vec4 a_Color;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\"></span></div><div class=\"line\"><span class=\"string\">    void main()&#123;</span></div><div class=\"line\"><span class=\"string\">        gl_Position = u_mx * pos;</span></div><div class=\"line\"><span class=\"string\">        v_Color = a_Color;</span></div><div class=\"line\"><span class=\"string\">    &#125;</span></div><div class=\"line\"><span class=\"string\">`</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> fragmentShaderSource = <span class=\"string\">`</span></div><div class=\"line\"><span class=\"string\">    precision lowp float;</span></div><div class=\"line\"><span class=\"string\">    varying vec4 v_Color;</span></div><div class=\"line\"><span class=\"string\">    void main()&#123;</span></div><div class=\"line\"><span class=\"string\">        gl_FragColor = v_Color;</span></div><div class=\"line\"><span class=\"string\">    &#125;</span></div><div class=\"line\"><span class=\"string\">`</span></div></pre></td></tr></table></figure>\n<p>program</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> gl = canvas.getContext(<span class=\"string\">'webgl'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> program = initShader(gl,vertexShaderSource,fragmentShaderSource);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * </span></div><div class=\"line\"><span class=\"comment\"> * fov </span></div><div class=\"line\"><span class=\"comment\"> * aspect   </span></div><div class=\"line\"><span class=\"comment\"> * near  </span></div><div class=\"line\"><span class=\"comment\"> * far  </span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getTS</span>(<span class=\"params\">fov,aspect,near,far</span>)</span>&#123;</div><div class=\"line\">    fov = fov * <span class=\"built_in\">Math</span>.PI / <span class=\"number\">180</span>; <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">        <span class=\"number\">1</span> / (aspect * <span class=\"built_in\">Math</span>.tan(fov / <span class=\"number\">2</span>)), <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>,</div><div class=\"line\">        <span class=\"number\">0</span>, <span class=\"number\">1</span> / <span class=\"built_in\">Math</span>.tan(fov / <span class=\"number\">2</span>), <span class=\"number\">0</span>, <span class=\"number\">0</span>,</div><div class=\"line\">        <span class=\"number\">0</span>, <span class=\"number\">0</span>, -(far + near) / (far - near), <span class=\"number\">-1</span>,</div><div class=\"line\">        <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">-2</span> * (far * near) / (far - near), <span class=\"number\">0</span></div><div class=\"line\">    ]);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>atadatabuffer</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> buffer_data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">0.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">-.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">    <span class=\"number\">-0.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">-.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">-.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span></div><div class=\"line\"></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> buffer = gl.createBuffer();</div><div class=\"line\">gl.bindBuffer(gl.ARRAY_BUFFER, buffer);</div><div class=\"line\">gl.bufferData(gl.ARRAY_BUFFER, buffer_data, gl.STATIC_DRAW);</div></pre></td></tr></table></figure>\n<p>Location</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> posLocation = gl.getAttribLocation(program, <span class=\"string\">'pos'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> aColorLocation = gl.getAttribLocation(program, <span class=\"string\">'a_Color'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> uMXLocation = gl.getUniformLocation(program, <span class=\"string\">'u_mx'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> BYTES_SIZE = buffer_data.BYTES_PER_ELEMENT;</div><div class=\"line\"></div><div class=\"line\">gl.vertexAttribPointer(posLocation, <span class=\"number\">3</span>, gl.FLOAT, <span class=\"literal\">false</span>, BYTES_SIZE * <span class=\"number\">6</span>, <span class=\"number\">0</span>);</div><div class=\"line\">gl.vertexAttribPointer(aColorLocation, <span class=\"number\">3</span>, gl.FLOAT, <span class=\"literal\">false</span>, BYTES_SIZE * <span class=\"number\">6</span>, BYTES_SIZE * <span class=\"number\">3</span>);</div><div class=\"line\">gl.enableVertexAttribArray(posLocation);</div><div class=\"line\">gl.enableVertexAttribArray(aColorLocation);</div></pre></td></tr></table></figure>\n<p>getVMatrixmultiplyMatrixlib</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">draw</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    gl.clearColor(<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</div><div class=\"line\"></div><div class=\"line\">    gl.clear(gl.COLOR_BUFFER_BIT);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> mx = getTS(<span class=\"number\">30</span>, canvas.width / canvas.height, <span class=\"number\">1</span>, <span class=\"number\">100</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> vmx = getVMatrix(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">-100</span>);</div><div class=\"line\">    gl.uniformMatrix4fv(uMXLocation,<span class=\"literal\">false</span>,multiplyMatrix(mx,vmx));</div><div class=\"line\"></div><div class=\"line\">    gl.drawArrays(gl.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">12</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">draw();</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"400\" src=\"/webgl-2017-07-11/7.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>WebGL </li>\n<li></li>\n</ul>\n<p>data</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> buffer_data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">0.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">-.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>, <span class=\"number\">1.0</span>,</div><div class=\"line\">    <span class=\"number\">-.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"number\">-.75</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>,</div><div class=\"line\">    <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,</div><div class=\"line\">    <span class=\"number\">-0.25</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-.8</span>, <span class=\"number\">1.0</span>, <span class=\"number\">.4</span>, <span class=\"number\">.4</span>,</div><div class=\"line\"></div><div class=\"line\">]);</div></pre></td></tr></table></figure>\n<p><img width=\"400\" src=\"/webgl-2017-07-11/8.jpeg\"></p>\n<p>webgl</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">gl.enable(gl.DEPTH_TEST);</div><div class=\"line\">gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);</div></pre></td></tr></table></figure>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>WebGLZ fighting</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">gl.enable(gl.POLYGON_OFFSET_FILL);</div><div class=\"line\">gl.drawArrays(gl.TRIANGLES, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</div><div class=\"line\">gl.polygonOffset(<span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>);   </div><div class=\"line\">gl.drawArrays(gl.TRIANGLES, <span class=\"number\">3</span>, <span class=\"number\">3</span>);</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"400\" src=\"/webgl-2017-07-11/9.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/11\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/11</a></p>"},{"title":"WebGL--","comments":1,"toc":true,"date":"2017-07-13T13:09:11.000Z","_content":"\n### \n\n* 8\n* 368\n* \n*  new Uint8Array(  ) \n\n\n\n* gl.drawElements(mode , count , type , offset)\n* mode \n* count \n* type \n* offset \n\n<!-- more -->\n\n\n\n8buffer\n\n``` javascript\nvar buffer_data = new Float32Array([\n\t// \n\t1.0, 1.0, 1.0, 1.0, 1.0, 1.0, // v0 White\n\t-1.0, 1.0, 1.0, 1.0, 0.0, 1.0, // v1 Magenta\n\t-1.0, -1.0, 1.0, 1.0, 0.0, 0.0, // v2 Red\n\t1.0, -1.0, 1.0, 1.0, 1.0, 0.0, // v3 Yellow\n\t1.0, -1.0, -1.0, 0.0, 1.0, 0.0, // v4 Green\n\t1.0, 1.0, -1.0, 0.0, 1.0, 1.0, // v5 Cyan\n\t-1.0, 1.0, -1.0, 0.0, 0.0, 1.0, // v6 Blue\n\t-1.0, -1.0, -1.0, 0.0, 0.0, 0.0 // v7 Black\n]);\n\nvar buffer = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n\ngl.bufferData(gl.ARRAY_BUFFER, buffer_data, gl.STATIC_DRAW);\n```\n\nbufferbuffer\n\n``` javascript\nvar indices = new Uint8Array([\n    0, 1, 2, 0, 2, 3, // \n    0, 3, 4, 0, 4, 5, // \n    0, 5, 6, 0, 6, 1, // \n    1, 6, 7, 1, 7, 2, // \n    7, 4, 3, 7, 3, 2, // \n    4, 7, 6, 4, 6, 5 // \n]);\nvar indexBuffer = gl.createBuffer();\n\ngl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,indexBuffer);\ngl.bufferData(gl.ELEMENT_ARRAY_BUFFER,indices,gl.STATIC_DRAW);\n```\n\n\n\n``` javascript\n// \nvar tsMX = getTS(30,1,1,100);\n\n// \nvar vMX = getVMatrix(3,3,7,0,0,0);\n\nvar mx = multiplyMatrix(tsMX,vMX);\n\ngl.uniformMatrix4fv(mxLocation,false,mx);\n```\n\ngl.drawElements\n\n``` javascript\ngl.drawElements(gl.TRIANGLES, indices.length,gl.UNSIGNED_BYTE,0);\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-13/1.jpeg\"/>\n\n### \n\n* \n* \n* \n\n\n\n``` javascript\n\n// Create a cube\n//    v6----- v5\n//   /|      /|\n//  v1------v0|\n//  | |     | |\n//  | |v7---|-|v4\n//  |/      |/\n//  v2------v3\n\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-13/2.jpeg\"/>\n\n\n\n``` javascript\nvar buffer_data = new Float32Array([\n\t1.0, 1.0, 1.0,  -1.0, 1.0, 1.0,  -1.0,-1.0, 1.0,   1.0,-1.0, 1.0,  // v0-v1-v2-v3 front\n\t 1.0, 1.0, 1.0,   1.0,-1.0, 1.0,   1.0,-1.0,-1.0,   1.0, 1.0,-1.0,  // v0-v3-v4-v5 right\n\t 1.0, 1.0, 1.0,   1.0, 1.0,-1.0,  -1.0, 1.0,-1.0,  -1.0, 1.0, 1.0,  // v0-v5-v6-v1 up\n\t-1.0, 1.0, 1.0,  -1.0, 1.0,-1.0,  -1.0,-1.0,-1.0,  -1.0,-1.0, 1.0,  // v1-v6-v7-v2 left\n\t-1.0,-1.0,-1.0,   1.0,-1.0,-1.0,   1.0,-1.0, 1.0,  -1.0,-1.0, 1.0,  // v7-v4-v3-v2 down\n\t 1.0,-1.0,-1.0,  -1.0,-1.0,-1.0,  -1.0, 1.0,-1.0,   1.0, 1.0,-1.0   // v4-v7-v6-v5 back\n]);\n```\n\n\n\n``` javascript\nvar color_data = new Float32Array([\n    0.4, 0.4, 1.0,  0.4, 0.4, 1.0,  0.4, 0.4, 1.0,  0.4, 0.4, 1.0,  // v0-v1-v2-v3 front(blue)\n    0.4, 1.0, 0.4,  0.4, 1.0, 0.4,  0.4, 1.0, 0.4,  0.4, 1.0, 0.4,  // v0-v3-v4-v5 right(green)\n    1.0, 0.4, 0.4,  1.0, 0.4, 0.4,  1.0, 0.4, 0.4,  1.0, 0.4, 0.4,  // v0-v5-v6-v1 up(red)\n    1.0, 1.0, 0.4,  1.0, 1.0, 0.4,  1.0, 1.0, 0.4,  1.0, 1.0, 0.4,  // v1-v6-v7-v2 left\n    1.0, 1.0, 1.0,  1.0, 1.0, 1.0,  1.0, 1.0, 1.0,  1.0, 1.0, 1.0,  // v7-v4-v3-v2 down\n    0.4, 1.0, 1.0,  0.4, 1.0, 1.0,  0.4, 1.0, 1.0,  0.4, 1.0, 1.0   // v4-v7-v6-v5 back\n]);\n```\n\n\n\n``` javascript\n// \ngl.enable(gl.DEPTH_TEST);\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-13/3.jpeg\"/>\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-13/4.jpeg\"/>\n\n\n https://github.com/wqzwh/webgl-code/tree/master/12","source":"_posts/webgl-2017-07-13.md","raw":"---\ntitle: WebGL--\ncomments: true\ntoc: true\ndate: 2017-07-13 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n---\n\n### \n\n* 8\n* 368\n* \n*  new Uint8Array(  ) \n\n\n\n* gl.drawElements(mode , count , type , offset)\n* mode \n* count \n* type \n* offset \n\n<!-- more -->\n\n\n\n8buffer\n\n``` javascript\nvar buffer_data = new Float32Array([\n\t// \n\t1.0, 1.0, 1.0, 1.0, 1.0, 1.0, // v0 White\n\t-1.0, 1.0, 1.0, 1.0, 0.0, 1.0, // v1 Magenta\n\t-1.0, -1.0, 1.0, 1.0, 0.0, 0.0, // v2 Red\n\t1.0, -1.0, 1.0, 1.0, 1.0, 0.0, // v3 Yellow\n\t1.0, -1.0, -1.0, 0.0, 1.0, 0.0, // v4 Green\n\t1.0, 1.0, -1.0, 0.0, 1.0, 1.0, // v5 Cyan\n\t-1.0, 1.0, -1.0, 0.0, 0.0, 1.0, // v6 Blue\n\t-1.0, -1.0, -1.0, 0.0, 0.0, 0.0 // v7 Black\n]);\n\nvar buffer = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n\ngl.bufferData(gl.ARRAY_BUFFER, buffer_data, gl.STATIC_DRAW);\n```\n\nbufferbuffer\n\n``` javascript\nvar indices = new Uint8Array([\n    0, 1, 2, 0, 2, 3, // \n    0, 3, 4, 0, 4, 5, // \n    0, 5, 6, 0, 6, 1, // \n    1, 6, 7, 1, 7, 2, // \n    7, 4, 3, 7, 3, 2, // \n    4, 7, 6, 4, 6, 5 // \n]);\nvar indexBuffer = gl.createBuffer();\n\ngl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,indexBuffer);\ngl.bufferData(gl.ELEMENT_ARRAY_BUFFER,indices,gl.STATIC_DRAW);\n```\n\n\n\n``` javascript\n// \nvar tsMX = getTS(30,1,1,100);\n\n// \nvar vMX = getVMatrix(3,3,7,0,0,0);\n\nvar mx = multiplyMatrix(tsMX,vMX);\n\ngl.uniformMatrix4fv(mxLocation,false,mx);\n```\n\ngl.drawElements\n\n``` javascript\ngl.drawElements(gl.TRIANGLES, indices.length,gl.UNSIGNED_BYTE,0);\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-13/1.jpeg\"/>\n\n### \n\n* \n* \n* \n\n\n\n``` javascript\n\n// Create a cube\n//    v6----- v5\n//   /|      /|\n//  v1------v0|\n//  | |     | |\n//  | |v7---|-|v4\n//  |/      |/\n//  v2------v3\n\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-13/2.jpeg\"/>\n\n\n\n``` javascript\nvar buffer_data = new Float32Array([\n\t1.0, 1.0, 1.0,  -1.0, 1.0, 1.0,  -1.0,-1.0, 1.0,   1.0,-1.0, 1.0,  // v0-v1-v2-v3 front\n\t 1.0, 1.0, 1.0,   1.0,-1.0, 1.0,   1.0,-1.0,-1.0,   1.0, 1.0,-1.0,  // v0-v3-v4-v5 right\n\t 1.0, 1.0, 1.0,   1.0, 1.0,-1.0,  -1.0, 1.0,-1.0,  -1.0, 1.0, 1.0,  // v0-v5-v6-v1 up\n\t-1.0, 1.0, 1.0,  -1.0, 1.0,-1.0,  -1.0,-1.0,-1.0,  -1.0,-1.0, 1.0,  // v1-v6-v7-v2 left\n\t-1.0,-1.0,-1.0,   1.0,-1.0,-1.0,   1.0,-1.0, 1.0,  -1.0,-1.0, 1.0,  // v7-v4-v3-v2 down\n\t 1.0,-1.0,-1.0,  -1.0,-1.0,-1.0,  -1.0, 1.0,-1.0,   1.0, 1.0,-1.0   // v4-v7-v6-v5 back\n]);\n```\n\n\n\n``` javascript\nvar color_data = new Float32Array([\n    0.4, 0.4, 1.0,  0.4, 0.4, 1.0,  0.4, 0.4, 1.0,  0.4, 0.4, 1.0,  // v0-v1-v2-v3 front(blue)\n    0.4, 1.0, 0.4,  0.4, 1.0, 0.4,  0.4, 1.0, 0.4,  0.4, 1.0, 0.4,  // v0-v3-v4-v5 right(green)\n    1.0, 0.4, 0.4,  1.0, 0.4, 0.4,  1.0, 0.4, 0.4,  1.0, 0.4, 0.4,  // v0-v5-v6-v1 up(red)\n    1.0, 1.0, 0.4,  1.0, 1.0, 0.4,  1.0, 1.0, 0.4,  1.0, 1.0, 0.4,  // v1-v6-v7-v2 left\n    1.0, 1.0, 1.0,  1.0, 1.0, 1.0,  1.0, 1.0, 1.0,  1.0, 1.0, 1.0,  // v7-v4-v3-v2 down\n    0.4, 1.0, 1.0,  0.4, 1.0, 1.0,  0.4, 1.0, 1.0,  0.4, 1.0, 1.0   // v4-v7-v6-v5 back\n]);\n```\n\n\n\n``` javascript\n// \ngl.enable(gl.DEPTH_TEST);\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-13/3.jpeg\"/>\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-13/4.jpeg\"/>\n\n\n https://github.com/wqzwh/webgl-code/tree/master/12","slug":"webgl-2017-07-13","published":1,"updated":"2018-02-10T09:08:00.936Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbm002afdldq43vm6w4","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>8</li>\n<li>368</li>\n<li></li>\n<li> new Uint8Array(  ) </li>\n</ul>\n<p></p>\n<ul>\n<li>gl.drawElements(mode , count , type , offset)</li>\n<li>mode </li>\n<li>count </li>\n<li>type </li>\n<li>offset </li>\n</ul>\n<a id=\"more\"></a>\n<p></p>\n<p>8buffer</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> buffer_data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">\t<span class=\"comment\">// </span></div><div class=\"line\">\t<span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"comment\">// v0 White</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"comment\">// v1 Magenta</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"comment\">// v2 Red</span></div><div class=\"line\">\t<span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"comment\">// v3 Yellow</span></div><div class=\"line\">\t<span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"comment\">// v4 Green</span></div><div class=\"line\">\t<span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"comment\">// v5 Cyan</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"comment\">// v6 Blue</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span> <span class=\"comment\">// v7 Black</span></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> buffer = gl.createBuffer();</div><div class=\"line\">gl.bindBuffer(gl.ARRAY_BUFFER, buffer);</div><div class=\"line\"></div><div class=\"line\">gl.bufferData(gl.ARRAY_BUFFER, buffer_data, gl.STATIC_DRAW);</div></pre></td></tr></table></figure>\n<p>bufferbuffer</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> indices = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>([</div><div class=\"line\">    <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">0</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">0</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">0</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">0</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">0</span>, <span class=\"number\">6</span>, <span class=\"number\">1</span>, <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">1</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">1</span>, <span class=\"number\">7</span>, <span class=\"number\">2</span>, <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">7</span>, <span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">7</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">4</span>, <span class=\"number\">7</span>, <span class=\"number\">6</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>, <span class=\"number\">5</span> <span class=\"comment\">// </span></div><div class=\"line\">]);</div><div class=\"line\"><span class=\"keyword\">var</span> indexBuffer = gl.createBuffer();</div><div class=\"line\"></div><div class=\"line\">gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,indexBuffer);</div><div class=\"line\">gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,indices,gl.STATIC_DRAW);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> tsMX = getTS(<span class=\"number\">30</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">100</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> vMX = getVMatrix(<span class=\"number\">3</span>,<span class=\"number\">3</span>,<span class=\"number\">7</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> mx = multiplyMatrix(tsMX,vMX);</div><div class=\"line\"></div><div class=\"line\">gl.uniformMatrix4fv(mxLocation,<span class=\"literal\">false</span>,mx);</div></pre></td></tr></table></figure>\n<p>gl.drawElements</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">gl.drawElements(gl.TRIANGLES, indices.length,gl.UNSIGNED_BYTE,<span class=\"number\">0</span>);</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-13/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Create a cube</span></div><div class=\"line\"><span class=\"comment\">//    v6----- v5</span></div><div class=\"line\"><span class=\"comment\">//   /|      /|</span></div><div class=\"line\"><span class=\"comment\">//  v1------v0|</span></div><div class=\"line\"><span class=\"comment\">//  | |     | |</span></div><div class=\"line\"><span class=\"comment\">//  | |v7---|-|v4</span></div><div class=\"line\"><span class=\"comment\">//  |/      |/</span></div><div class=\"line\"><span class=\"comment\">//  v2------v3</span></div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-13/2.jpeg\"></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> buffer_data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">\t<span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,   <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v0-v1-v2-v3 front</span></div><div class=\"line\">\t <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,   <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,   <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,   <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"comment\">// v0-v3-v4-v5 right</span></div><div class=\"line\">\t <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,   <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v0-v5-v6-v1 up</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v1-v6-v7-v2 left</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,   <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,   <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v7-v4-v3-v2 down</span></div><div class=\"line\">\t <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,   <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>   <span class=\"comment\">// v4-v7-v6-v5 back</span></div><div class=\"line\">]);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> color_data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v0-v1-v2-v3 front(blue)</span></div><div class=\"line\">    <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"comment\">// v0-v3-v4-v5 right(green)</span></div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,  <span class=\"comment\">// v0-v5-v6-v1 up(red)</span></div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"comment\">// v1-v6-v7-v2 left</span></div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v7-v4-v3-v2 down</span></div><div class=\"line\">    <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>   <span class=\"comment\">// v4-v7-v6-v5 back</span></div><div class=\"line\">]);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">gl.enable(gl.DEPTH_TEST);</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-13/3.jpeg\"></p>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-13/4.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/12\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/12</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>8</li>\n<li>368</li>\n<li></li>\n<li> new Uint8Array(  ) </li>\n</ul>\n<p></p>\n<ul>\n<li>gl.drawElements(mode , count , type , offset)</li>\n<li>mode </li>\n<li>count </li>\n<li>type </li>\n<li>offset </li>\n</ul>","more":"<p></p>\n<p>8buffer</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> buffer_data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">\t<span class=\"comment\">// </span></div><div class=\"line\">\t<span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"comment\">// v0 White</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"comment\">// v1 Magenta</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"comment\">// v2 Red</span></div><div class=\"line\">\t<span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"comment\">// v3 Yellow</span></div><div class=\"line\">\t<span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"comment\">// v4 Green</span></div><div class=\"line\">\t<span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"comment\">// v5 Cyan</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"comment\">// v6 Blue</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">-1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span> <span class=\"comment\">// v7 Black</span></div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> buffer = gl.createBuffer();</div><div class=\"line\">gl.bindBuffer(gl.ARRAY_BUFFER, buffer);</div><div class=\"line\"></div><div class=\"line\">gl.bufferData(gl.ARRAY_BUFFER, buffer_data, gl.STATIC_DRAW);</div></pre></td></tr></table></figure>\n<p>bufferbuffer</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> indices = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>([</div><div class=\"line\">    <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">0</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">0</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">0</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">0</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">0</span>, <span class=\"number\">6</span>, <span class=\"number\">1</span>, <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">1</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">1</span>, <span class=\"number\">7</span>, <span class=\"number\">2</span>, <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">7</span>, <span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">7</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"number\">4</span>, <span class=\"number\">7</span>, <span class=\"number\">6</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>, <span class=\"number\">5</span> <span class=\"comment\">// </span></div><div class=\"line\">]);</div><div class=\"line\"><span class=\"keyword\">var</span> indexBuffer = gl.createBuffer();</div><div class=\"line\"></div><div class=\"line\">gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,indexBuffer);</div><div class=\"line\">gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,indices,gl.STATIC_DRAW);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> tsMX = getTS(<span class=\"number\">30</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">100</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> vMX = getVMatrix(<span class=\"number\">3</span>,<span class=\"number\">3</span>,<span class=\"number\">7</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> mx = multiplyMatrix(tsMX,vMX);</div><div class=\"line\"></div><div class=\"line\">gl.uniformMatrix4fv(mxLocation,<span class=\"literal\">false</span>,mx);</div></pre></td></tr></table></figure>\n<p>gl.drawElements</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">gl.drawElements(gl.TRIANGLES, indices.length,gl.UNSIGNED_BYTE,<span class=\"number\">0</span>);</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-13/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Create a cube</span></div><div class=\"line\"><span class=\"comment\">//    v6----- v5</span></div><div class=\"line\"><span class=\"comment\">//   /|      /|</span></div><div class=\"line\"><span class=\"comment\">//  v1------v0|</span></div><div class=\"line\"><span class=\"comment\">//  | |     | |</span></div><div class=\"line\"><span class=\"comment\">//  | |v7---|-|v4</span></div><div class=\"line\"><span class=\"comment\">//  |/      |/</span></div><div class=\"line\"><span class=\"comment\">//  v2------v3</span></div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-13/2.jpeg\"></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> buffer_data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">\t<span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,   <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v0-v1-v2-v3 front</span></div><div class=\"line\">\t <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,   <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,   <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,   <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"comment\">// v0-v3-v4-v5 right</span></div><div class=\"line\">\t <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,   <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v0-v5-v6-v1 up</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v1-v6-v7-v2 left</span></div><div class=\"line\">\t<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,   <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,   <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v7-v4-v3-v2 down</span></div><div class=\"line\">\t <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,<span class=\"number\">-1.0</span>,  <span class=\"number\">-1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>,   <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,<span class=\"number\">-1.0</span>   <span class=\"comment\">// v4-v7-v6-v5 back</span></div><div class=\"line\">]);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> color_data = <span class=\"keyword\">new</span> <span class=\"built_in\">Float32Array</span>([</div><div class=\"line\">    <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v0-v1-v2-v3 front(blue)</span></div><div class=\"line\">    <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"comment\">// v0-v3-v4-v5 right(green)</span></div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>, <span class=\"number\">0.4</span>,  <span class=\"comment\">// v0-v5-v6-v1 up(red)</span></div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.4</span>,  <span class=\"comment\">// v1-v6-v7-v2 left</span></div><div class=\"line\">    <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"comment\">// v7-v4-v3-v2 down</span></div><div class=\"line\">    <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>,  <span class=\"number\">0.4</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>   <span class=\"comment\">// v4-v7-v6-v5 back</span></div><div class=\"line\">]);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">gl.enable(gl.DEPTH_TEST);</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-13/3.jpeg\"></p>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-13/4.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/12\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/12</a></p>"},{"title":"Three.js--","comments":1,"toc":true,"date":"2017-07-14T13:09:11.000Z","_content":"\n### \n\n#### \n\n* \n* \n* \n\n#### \n\n* scene.add()  \n* scene.remove()  \n* scene.getChildByName()  \n\n#### \n\n* fog  \n* overrideMaterial  \n* children \n\n<!-- more -->\n\n\n\n``` javascript\n// \nvar scene = new THREE.Scene();\n\n// \nvar camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, .1, 1000);\n\n// \nvar renderer = new THREE.WebGLRenderer();\n\nrenderer.setClearColor(new THREE.Color(0xEEEEEE, 1.0));\n\nrenderer.setSize(window.innerWidth, window.innerHeight);\n\n// \nrenderer.shadowMapEnabled = true;\n```\n\n\n\n``` javascript\n// \nvar planeGeometry = new THREE.PlaneGeometry(60, 20, 1, 1);\n\n// \nvar planeMaterial = new THREE.MeshLambertMaterial({ color: 0xffffff });\nvar plane = new THREE.Mesh(planeGeometry, planeMaterial);\n\nplane.receiveShadow = true;\n\nplane.rotation.x = -.5 * Math.PI;\nplane.position.x = 16;\nplane.position.y = 0;\nplane.position.z = 0;\n\nscene.add(plane);\n```\n\n\n``` javascript\ncamera.position.x = -30;\ncamera.position.y = 40;\ncamera.position.z = 30;\ncamera.lookAt(scene.position);\n```\n\n\n\n``` javascript\n// \nvar ambientLight = new THREE.AmbientLight(0x0c0c0c);\nscene.add(ambientLight);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, -10);\nspotLight.castShadow = true;\nscene.add(spotLight);\n```\n\n\n\n``` javascript\ndocument.body.appendChild(renderer.domElement);\n\nrenderer.render(scene, camera);\n```\n\n\n\n``` javascript\nfunction addCube() {\n\n  // \n  var cubeGeometry = new THREE.BoxGeometry(4, 4, 4);\n  var cubeMaterial = new THREE.MeshLambertMaterial({ color: 0xff0000 });\n  var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n\n  // cube.castShadow = true;\n\n  cube.position.x = -4 + Math.round(Math.random() * planeGeometry.parameters.width);\n  cube.position.y = 3 + Math.round(Math.random() * 5);\n  cube.position.z = 0 + Math.round(Math.random() * planeGeometry.parameters.height);\n\n  scene.add(cube);\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-14/01.jpeg\"/>\n\n### \n\n#### \n\n* THREE.Geometry   geom \n* geom.vertices \n* geom.faces \n\n#### \n\n* position \n* rotation \n* scale  x , y z \n* translateX x \n* translateY y \n* translateZ z \n\n\n\n``` javascript\n// \n\nvar vertices = [\n  new THREE.Vector3(1, 3, 1),\n  new THREE.Vector3(1, 3, -1),\n  new THREE.Vector3(1, -1, 1),\n  new THREE.Vector3(1, -1, -1),\n  new THREE.Vector3(-1, 3, -1),\n  new THREE.Vector3(-1, 3, 1),\n  new THREE.Vector3(-1, -1, -1),\n  new THREE.Vector3(-1, -1, 1)\n];\n\n// \n\nvar faces = [\n\n  new THREE.Face3(0, 2, 1),\n  new THREE.Face3(2, 3, 1),\n\n  new THREE.Face3(4, 6, 5),\n  new THREE.Face3(6, 7, 5),\n\n  new THREE.Face3(4, 5, 1),\n  new THREE.Face3(5, 0, 1),\n\n  new THREE.Face3(7, 6, 2),\n  new THREE.Face3(6, 3, 2),\n\n  new THREE.Face3(5, 7, 0),\n  new THREE.Face3(7, 2, 0),\n\n  new THREE.Face3(1, 3, 4),\n  new THREE.Face3(3, 6, 4)\n];\n\nvar geom = new THREE.Geometry();\ngeom.vertices = vertices;\ngeom.faces = faces;\ngeom.computeFaceNormals();\n\nvar materials = [\n  new THREE.MeshLambertMaterial({\n    opacity: 0.5,\n    color: 0x44ff44,\n    transparent: true\n  }),\n  new THREE.MeshBasicMaterial({ color: 0x000000, wireframe: true })\n];\n\nvar mesh = THREE.SceneUtils.createMultiMaterialObject(geom, materials);\nmesh.children.forEach(function(e) {\n  e.castShadow = true;\n});\nscene.add(mesh);\n\ndocument.body.appendChild(renderer.domElement);\nrenderer.render(scene, camera);\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-14/2.jpeg\"/>\n\n### \n\n#### PerspectiveCamera\n\n* fov  \n* aspect   window.innerWidth / window.innerHeight \n* near  0.1 \n* far  1000  \n\n#### OrthographicCamera\n\n* left \n* right \n* top \n* bottom \n* near \n* far \n* camera.lookAt  \n\n\n\n``` javascript\n\n// \nscene.fog = new THREE.Fog( 0xffffff, .005, 100 );\n\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-14/3.jpeg\"/>\n\n\n\n``` javascript\nvar cubeGeometry = new THREE.BoxGeometry(4, 4, 4);\nfor (var j = 0; j < planeGeometry.parameters.height / 5; j++) {\n  for (var i = 0; i < planeGeometry.parameters.width / 5; i++) {\n    var rnd = Math.random() * 0.75 + 0.25;\n    var cubeMaterial = new THREE.MeshLambertMaterial();\n    cubeMaterial.color = new THREE.Color(rnd, 0, 0);\n    var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n    cube.position.z = -(planeGeometry.parameters.height / 2) + 2 + (j * 5);\n    cube.position.x = -(planeGeometry.parameters.width / 2) + 2 + (i * 5);\n    cube.position.y = 2;\n    scene.add(cube);\n  }\n}\n\n// \n\nvar controls = new function() {\n  this.perspective = 'Perspective';\n  this.switchCamera = function() {\n    if (camera instanceof THREE.PerspectiveCamera) {\n      camera = new THREE.OrthographicCamera(\n        window.innerWidth / -16,\n        window.innerWidth / 16,\n        window.innerHeight / 16,\n        window.innerHeight / -16, -200, 500\n      );\n      camera.position.x = -20;\n      camera.position.y = 60;\n      camera.position.z = 50;\n      camera.lookAt(scene.position);\n      this.perspective = 'Orthographic';\n    } else {\n      this.perspective = 'Perspective';\n      camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);\n      camera.position.x = -20;\n      camera.position.y = 60;\n      camera.position.z = 50;\n      camera.lookAt(scene.position);\n    }\n  }\n};\n\nsetInterval(function(){controls.switchCamera();},2000)\n\nfunction render() {\n  renderer.render(scene, camera);\n}\n\nrender();\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-14/4.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/13","source":"_posts/webgl-2017-07-14.md","raw":"---\ntitle: Three.js--\ncomments: true\ntoc: true\ndate: 2017-07-14 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n    - 'three.js'\n---\n\n### \n\n#### \n\n* \n* \n* \n\n#### \n\n* scene.add()  \n* scene.remove()  \n* scene.getChildByName()  \n\n#### \n\n* fog  \n* overrideMaterial  \n* children \n\n<!-- more -->\n\n\n\n``` javascript\n// \nvar scene = new THREE.Scene();\n\n// \nvar camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, .1, 1000);\n\n// \nvar renderer = new THREE.WebGLRenderer();\n\nrenderer.setClearColor(new THREE.Color(0xEEEEEE, 1.0));\n\nrenderer.setSize(window.innerWidth, window.innerHeight);\n\n// \nrenderer.shadowMapEnabled = true;\n```\n\n\n\n``` javascript\n// \nvar planeGeometry = new THREE.PlaneGeometry(60, 20, 1, 1);\n\n// \nvar planeMaterial = new THREE.MeshLambertMaterial({ color: 0xffffff });\nvar plane = new THREE.Mesh(planeGeometry, planeMaterial);\n\nplane.receiveShadow = true;\n\nplane.rotation.x = -.5 * Math.PI;\nplane.position.x = 16;\nplane.position.y = 0;\nplane.position.z = 0;\n\nscene.add(plane);\n```\n\n\n``` javascript\ncamera.position.x = -30;\ncamera.position.y = 40;\ncamera.position.z = 30;\ncamera.lookAt(scene.position);\n```\n\n\n\n``` javascript\n// \nvar ambientLight = new THREE.AmbientLight(0x0c0c0c);\nscene.add(ambientLight);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, -10);\nspotLight.castShadow = true;\nscene.add(spotLight);\n```\n\n\n\n``` javascript\ndocument.body.appendChild(renderer.domElement);\n\nrenderer.render(scene, camera);\n```\n\n\n\n``` javascript\nfunction addCube() {\n\n  // \n  var cubeGeometry = new THREE.BoxGeometry(4, 4, 4);\n  var cubeMaterial = new THREE.MeshLambertMaterial({ color: 0xff0000 });\n  var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n\n  // cube.castShadow = true;\n\n  cube.position.x = -4 + Math.round(Math.random() * planeGeometry.parameters.width);\n  cube.position.y = 3 + Math.round(Math.random() * 5);\n  cube.position.z = 0 + Math.round(Math.random() * planeGeometry.parameters.height);\n\n  scene.add(cube);\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-14/01.jpeg\"/>\n\n### \n\n#### \n\n* THREE.Geometry   geom \n* geom.vertices \n* geom.faces \n\n#### \n\n* position \n* rotation \n* scale  x , y z \n* translateX x \n* translateY y \n* translateZ z \n\n\n\n``` javascript\n// \n\nvar vertices = [\n  new THREE.Vector3(1, 3, 1),\n  new THREE.Vector3(1, 3, -1),\n  new THREE.Vector3(1, -1, 1),\n  new THREE.Vector3(1, -1, -1),\n  new THREE.Vector3(-1, 3, -1),\n  new THREE.Vector3(-1, 3, 1),\n  new THREE.Vector3(-1, -1, -1),\n  new THREE.Vector3(-1, -1, 1)\n];\n\n// \n\nvar faces = [\n\n  new THREE.Face3(0, 2, 1),\n  new THREE.Face3(2, 3, 1),\n\n  new THREE.Face3(4, 6, 5),\n  new THREE.Face3(6, 7, 5),\n\n  new THREE.Face3(4, 5, 1),\n  new THREE.Face3(5, 0, 1),\n\n  new THREE.Face3(7, 6, 2),\n  new THREE.Face3(6, 3, 2),\n\n  new THREE.Face3(5, 7, 0),\n  new THREE.Face3(7, 2, 0),\n\n  new THREE.Face3(1, 3, 4),\n  new THREE.Face3(3, 6, 4)\n];\n\nvar geom = new THREE.Geometry();\ngeom.vertices = vertices;\ngeom.faces = faces;\ngeom.computeFaceNormals();\n\nvar materials = [\n  new THREE.MeshLambertMaterial({\n    opacity: 0.5,\n    color: 0x44ff44,\n    transparent: true\n  }),\n  new THREE.MeshBasicMaterial({ color: 0x000000, wireframe: true })\n];\n\nvar mesh = THREE.SceneUtils.createMultiMaterialObject(geom, materials);\nmesh.children.forEach(function(e) {\n  e.castShadow = true;\n});\nscene.add(mesh);\n\ndocument.body.appendChild(renderer.domElement);\nrenderer.render(scene, camera);\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-14/2.jpeg\"/>\n\n### \n\n#### PerspectiveCamera\n\n* fov  \n* aspect   window.innerWidth / window.innerHeight \n* near  0.1 \n* far  1000  \n\n#### OrthographicCamera\n\n* left \n* right \n* top \n* bottom \n* near \n* far \n* camera.lookAt  \n\n\n\n``` javascript\n\n// \nscene.fog = new THREE.Fog( 0xffffff, .005, 100 );\n\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-14/3.jpeg\"/>\n\n\n\n``` javascript\nvar cubeGeometry = new THREE.BoxGeometry(4, 4, 4);\nfor (var j = 0; j < planeGeometry.parameters.height / 5; j++) {\n  for (var i = 0; i < planeGeometry.parameters.width / 5; i++) {\n    var rnd = Math.random() * 0.75 + 0.25;\n    var cubeMaterial = new THREE.MeshLambertMaterial();\n    cubeMaterial.color = new THREE.Color(rnd, 0, 0);\n    var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n    cube.position.z = -(planeGeometry.parameters.height / 2) + 2 + (j * 5);\n    cube.position.x = -(planeGeometry.parameters.width / 2) + 2 + (i * 5);\n    cube.position.y = 2;\n    scene.add(cube);\n  }\n}\n\n// \n\nvar controls = new function() {\n  this.perspective = 'Perspective';\n  this.switchCamera = function() {\n    if (camera instanceof THREE.PerspectiveCamera) {\n      camera = new THREE.OrthographicCamera(\n        window.innerWidth / -16,\n        window.innerWidth / 16,\n        window.innerHeight / 16,\n        window.innerHeight / -16, -200, 500\n      );\n      camera.position.x = -20;\n      camera.position.y = 60;\n      camera.position.z = 50;\n      camera.lookAt(scene.position);\n      this.perspective = 'Orthographic';\n    } else {\n      this.perspective = 'Perspective';\n      camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);\n      camera.position.x = -20;\n      camera.position.y = 60;\n      camera.position.z = 50;\n      camera.lookAt(scene.position);\n    }\n  }\n};\n\nsetInterval(function(){controls.switchCamera();},2000)\n\nfunction render() {\n  renderer.render(scene, camera);\n}\n\nrender();\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-14/4.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/13","slug":"webgl-2017-07-14","published":1,"updated":"2018-02-10T09:08:00.902Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbo002dfdldyds2g2lv","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>scene.add()  </li>\n<li>scene.remove()  </li>\n<li>scene.getChildByName()  </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>fog  </li>\n<li>overrideMaterial  </li>\n<li>children </li>\n</ul>\n<a id=\"more\"></a>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">60</span>, <span class=\"built_in\">window</span>.innerWidth / <span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">.1</span>, <span class=\"number\">1000</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\"></div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0xEEEEEE</span>, <span class=\"number\">1.0</span>));</div><div class=\"line\"></div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth, <span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">renderer.shadowMapEnabled = <span class=\"literal\">true</span>;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> planeGeometry = <span class=\"keyword\">new</span> THREE.PlaneGeometry(<span class=\"number\">60</span>, <span class=\"number\">20</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> planeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0xffffff</span> &#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> plane = <span class=\"keyword\">new</span> THREE.Mesh(planeGeometry, planeMaterial);</div><div class=\"line\"></div><div class=\"line\">plane.receiveShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">plane.rotation.x = <span class=\"number\">-.5</span> * <span class=\"built_in\">Math</span>.PI;</div><div class=\"line\">plane.position.x = <span class=\"number\">16</span>;</div><div class=\"line\">plane.position.y = <span class=\"number\">0</span>;</div><div class=\"line\">plane.position.z = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">scene.add(plane);</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">camera.position.x = <span class=\"number\">-30</span>;</div><div class=\"line\">camera.position.y = <span class=\"number\">40</span>;</div><div class=\"line\">camera.position.z = <span class=\"number\">30</span>;</div><div class=\"line\">camera.lookAt(scene.position);</div></pre></td></tr></table></figure></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> ambientLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"number\">0x0c0c0c</span>);</div><div class=\"line\">scene.add(ambientLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">-10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\">scene.add(spotLight);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">renderer.render(scene, camera);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCube</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">4</span>, <span class=\"number\">4</span>, <span class=\"number\">4</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0xff0000</span> &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry, cubeMaterial);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// cube.castShadow = true;</span></div><div class=\"line\"></div><div class=\"line\">  cube.position.x = <span class=\"number\">-4</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * planeGeometry.parameters.width);</div><div class=\"line\">  cube.position.y = <span class=\"number\">3</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">5</span>);</div><div class=\"line\">  cube.position.z = <span class=\"number\">0</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * planeGeometry.parameters.height);</div><div class=\"line\"></div><div class=\"line\">  scene.add(cube);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-14/01.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>THREE.Geometry   geom </li>\n<li>geom.vertices </li>\n<li>geom.faces </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>position </li>\n<li>rotation </li>\n<li>scale  x , y z </li>\n<li>translateX x </li>\n<li>translateY y </li>\n<li>translateZ z </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> vertices = [</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">-1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">1</span>, <span class=\"number\">-1</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">1</span>, <span class=\"number\">-1</span>, <span class=\"number\">-1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">-1</span>, <span class=\"number\">3</span>, <span class=\"number\">-1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">-1</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">-1</span>, <span class=\"number\">-1</span>, <span class=\"number\">-1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">-1</span>, <span class=\"number\">-1</span>, <span class=\"number\">1</span>)</div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> faces = [</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">0</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span>),</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">4</span>, <span class=\"number\">6</span>, <span class=\"number\">5</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">5</span>),</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">5</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>),</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">7</span>, <span class=\"number\">6</span>, <span class=\"number\">2</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">6</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>),</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">5</span>, <span class=\"number\">7</span>, <span class=\"number\">0</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">7</span>, <span class=\"number\">2</span>, <span class=\"number\">0</span>),</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">3</span>, <span class=\"number\">6</span>, <span class=\"number\">4</span>)</div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> geom = <span class=\"keyword\">new</span> THREE.Geometry();</div><div class=\"line\">geom.vertices = vertices;</div><div class=\"line\">geom.faces = faces;</div><div class=\"line\">geom.computeFaceNormals();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> materials = [</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;</div><div class=\"line\">    opacity: <span class=\"number\">0.5</span>,</div><div class=\"line\">    color: <span class=\"number\">0x44ff44</span>,</div><div class=\"line\">    transparent: <span class=\"literal\">true</span></div><div class=\"line\">  &#125;),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.MeshBasicMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0x000000</span>, <span class=\"attr\">wireframe</span>: <span class=\"literal\">true</span> &#125;)</div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> mesh = THREE.SceneUtils.createMultiMaterialObject(geom, materials);</div><div class=\"line\">mesh.children.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">  e.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;);</div><div class=\"line\">scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\">renderer.render(scene, camera);</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-14/2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"PerspectiveCamera\"><a href=\"#PerspectiveCamera\" class=\"headerlink\" title=\"PerspectiveCamera\"></a>PerspectiveCamera</h4><ul>\n<li>fov  </li>\n<li>aspect   window.innerWidth / window.innerHeight </li>\n<li>near  0.1 </li>\n<li>far  1000  </li>\n</ul>\n<h4 id=\"OrthographicCamera\"><a href=\"#OrthographicCamera\" class=\"headerlink\" title=\"OrthographicCamera\"></a>OrthographicCamera</h4><ul>\n<li>left </li>\n<li>right </li>\n<li>top </li>\n<li>bottom </li>\n<li>near </li>\n<li>far </li>\n<li>camera.lookAt  </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">scene.fog = <span class=\"keyword\">new</span> THREE.Fog( <span class=\"number\">0xffffff</span>, <span class=\"number\">.005</span>, <span class=\"number\">100</span> );</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-14/3.jpeg\"></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">4</span>, <span class=\"number\">4</span>, <span class=\"number\">4</span>);</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; planeGeometry.parameters.height / <span class=\"number\">5</span>; j++) &#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; planeGeometry.parameters.width / <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> rnd = <span class=\"built_in\">Math</span>.random() * <span class=\"number\">0.75</span> + <span class=\"number\">0.25</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial();</div><div class=\"line\">    cubeMaterial.color = <span class=\"keyword\">new</span> THREE.Color(rnd, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry, cubeMaterial);</div><div class=\"line\">    cube.position.z = -(planeGeometry.parameters.height / <span class=\"number\">2</span>) + <span class=\"number\">2</span> + (j * <span class=\"number\">5</span>);</div><div class=\"line\">    cube.position.x = -(planeGeometry.parameters.width / <span class=\"number\">2</span>) + <span class=\"number\">2</span> + (i * <span class=\"number\">5</span>);</div><div class=\"line\">    cube.position.y = <span class=\"number\">2</span>;</div><div class=\"line\">    scene.add(cube);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> controls = <span class=\"keyword\">new</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.perspective = <span class=\"string\">'Perspective'</span>;</div><div class=\"line\">  <span class=\"keyword\">this</span>.switchCamera = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (camera <span class=\"keyword\">instanceof</span> THREE.PerspectiveCamera) &#123;</div><div class=\"line\">      camera = <span class=\"keyword\">new</span> THREE.OrthographicCamera(</div><div class=\"line\">        <span class=\"built_in\">window</span>.innerWidth / <span class=\"number\">-16</span>,</div><div class=\"line\">        <span class=\"built_in\">window</span>.innerWidth / <span class=\"number\">16</span>,</div><div class=\"line\">        <span class=\"built_in\">window</span>.innerHeight / <span class=\"number\">16</span>,</div><div class=\"line\">        <span class=\"built_in\">window</span>.innerHeight / <span class=\"number\">-16</span>, <span class=\"number\">-200</span>, <span class=\"number\">500</span></div><div class=\"line\">      );</div><div class=\"line\">      camera.position.x = <span class=\"number\">-20</span>;</div><div class=\"line\">      camera.position.y = <span class=\"number\">60</span>;</div><div class=\"line\">      camera.position.z = <span class=\"number\">50</span>;</div><div class=\"line\">      camera.lookAt(scene.position);</div><div class=\"line\">      <span class=\"keyword\">this</span>.perspective = <span class=\"string\">'Orthographic'</span>;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.perspective = <span class=\"string\">'Perspective'</span>;</div><div class=\"line\">      camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">45</span>, <span class=\"built_in\">window</span>.innerWidth / <span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">0.1</span>, <span class=\"number\">1000</span>);</div><div class=\"line\">      camera.position.x = <span class=\"number\">-20</span>;</div><div class=\"line\">      camera.position.y = <span class=\"number\">60</span>;</div><div class=\"line\">      camera.position.z = <span class=\"number\">50</span>;</div><div class=\"line\">      camera.lookAt(scene.position);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">setInterval(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;controls.switchCamera();&#125;,<span class=\"number\">2000</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  renderer.render(scene, camera);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">render();</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-14/4.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/13\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/13</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>scene.add()  </li>\n<li>scene.remove()  </li>\n<li>scene.getChildByName()  </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>fog  </li>\n<li>overrideMaterial  </li>\n<li>children </li>\n</ul>","more":"<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">60</span>, <span class=\"built_in\">window</span>.innerWidth / <span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">.1</span>, <span class=\"number\">1000</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\"></div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0xEEEEEE</span>, <span class=\"number\">1.0</span>));</div><div class=\"line\"></div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth, <span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">renderer.shadowMapEnabled = <span class=\"literal\">true</span>;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> planeGeometry = <span class=\"keyword\">new</span> THREE.PlaneGeometry(<span class=\"number\">60</span>, <span class=\"number\">20</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> planeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0xffffff</span> &#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> plane = <span class=\"keyword\">new</span> THREE.Mesh(planeGeometry, planeMaterial);</div><div class=\"line\"></div><div class=\"line\">plane.receiveShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">plane.rotation.x = <span class=\"number\">-.5</span> * <span class=\"built_in\">Math</span>.PI;</div><div class=\"line\">plane.position.x = <span class=\"number\">16</span>;</div><div class=\"line\">plane.position.y = <span class=\"number\">0</span>;</div><div class=\"line\">plane.position.z = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">scene.add(plane);</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">camera.position.x = <span class=\"number\">-30</span>;</div><div class=\"line\">camera.position.y = <span class=\"number\">40</span>;</div><div class=\"line\">camera.position.z = <span class=\"number\">30</span>;</div><div class=\"line\">camera.lookAt(scene.position);</div></pre></td></tr></table></figure></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> ambientLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"number\">0x0c0c0c</span>);</div><div class=\"line\">scene.add(ambientLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">-10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\">scene.add(spotLight);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">renderer.render(scene, camera);</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCube</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">4</span>, <span class=\"number\">4</span>, <span class=\"number\">4</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0xff0000</span> &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry, cubeMaterial);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// cube.castShadow = true;</span></div><div class=\"line\"></div><div class=\"line\">  cube.position.x = <span class=\"number\">-4</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * planeGeometry.parameters.width);</div><div class=\"line\">  cube.position.y = <span class=\"number\">3</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">5</span>);</div><div class=\"line\">  cube.position.z = <span class=\"number\">0</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * planeGeometry.parameters.height);</div><div class=\"line\"></div><div class=\"line\">  scene.add(cube);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-14/01.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>THREE.Geometry   geom </li>\n<li>geom.vertices </li>\n<li>geom.faces </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>position </li>\n<li>rotation </li>\n<li>scale  x , y z </li>\n<li>translateX x </li>\n<li>translateY y </li>\n<li>translateZ z </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> vertices = [</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">-1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">1</span>, <span class=\"number\">-1</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">1</span>, <span class=\"number\">-1</span>, <span class=\"number\">-1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">-1</span>, <span class=\"number\">3</span>, <span class=\"number\">-1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">-1</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">-1</span>, <span class=\"number\">-1</span>, <span class=\"number\">-1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Vector3(<span class=\"number\">-1</span>, <span class=\"number\">-1</span>, <span class=\"number\">1</span>)</div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> faces = [</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">0</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span>),</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">4</span>, <span class=\"number\">6</span>, <span class=\"number\">5</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">5</span>),</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">5</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>),</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">7</span>, <span class=\"number\">6</span>, <span class=\"number\">2</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">6</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>),</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">5</span>, <span class=\"number\">7</span>, <span class=\"number\">0</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">7</span>, <span class=\"number\">2</span>, <span class=\"number\">0</span>),</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.Face3(<span class=\"number\">3</span>, <span class=\"number\">6</span>, <span class=\"number\">4</span>)</div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> geom = <span class=\"keyword\">new</span> THREE.Geometry();</div><div class=\"line\">geom.vertices = vertices;</div><div class=\"line\">geom.faces = faces;</div><div class=\"line\">geom.computeFaceNormals();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> materials = [</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;</div><div class=\"line\">    opacity: <span class=\"number\">0.5</span>,</div><div class=\"line\">    color: <span class=\"number\">0x44ff44</span>,</div><div class=\"line\">    transparent: <span class=\"literal\">true</span></div><div class=\"line\">  &#125;),</div><div class=\"line\">  <span class=\"keyword\">new</span> THREE.MeshBasicMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0x000000</span>, <span class=\"attr\">wireframe</span>: <span class=\"literal\">true</span> &#125;)</div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> mesh = THREE.SceneUtils.createMultiMaterialObject(geom, materials);</div><div class=\"line\">mesh.children.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">  e.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;);</div><div class=\"line\">scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\">renderer.render(scene, camera);</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-14/2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"PerspectiveCamera\"><a href=\"#PerspectiveCamera\" class=\"headerlink\" title=\"PerspectiveCamera\"></a>PerspectiveCamera</h4><ul>\n<li>fov  </li>\n<li>aspect   window.innerWidth / window.innerHeight </li>\n<li>near  0.1 </li>\n<li>far  1000  </li>\n</ul>\n<h4 id=\"OrthographicCamera\"><a href=\"#OrthographicCamera\" class=\"headerlink\" title=\"OrthographicCamera\"></a>OrthographicCamera</h4><ul>\n<li>left </li>\n<li>right </li>\n<li>top </li>\n<li>bottom </li>\n<li>near </li>\n<li>far </li>\n<li>camera.lookAt  </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">scene.fog = <span class=\"keyword\">new</span> THREE.Fog( <span class=\"number\">0xffffff</span>, <span class=\"number\">.005</span>, <span class=\"number\">100</span> );</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-14/3.jpeg\"></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">4</span>, <span class=\"number\">4</span>, <span class=\"number\">4</span>);</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; planeGeometry.parameters.height / <span class=\"number\">5</span>; j++) &#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; planeGeometry.parameters.width / <span class=\"number\">5</span>; i++) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> rnd = <span class=\"built_in\">Math</span>.random() * <span class=\"number\">0.75</span> + <span class=\"number\">0.25</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial();</div><div class=\"line\">    cubeMaterial.color = <span class=\"keyword\">new</span> THREE.Color(rnd, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry, cubeMaterial);</div><div class=\"line\">    cube.position.z = -(planeGeometry.parameters.height / <span class=\"number\">2</span>) + <span class=\"number\">2</span> + (j * <span class=\"number\">5</span>);</div><div class=\"line\">    cube.position.x = -(planeGeometry.parameters.width / <span class=\"number\">2</span>) + <span class=\"number\">2</span> + (i * <span class=\"number\">5</span>);</div><div class=\"line\">    cube.position.y = <span class=\"number\">2</span>;</div><div class=\"line\">    scene.add(cube);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> controls = <span class=\"keyword\">new</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.perspective = <span class=\"string\">'Perspective'</span>;</div><div class=\"line\">  <span class=\"keyword\">this</span>.switchCamera = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (camera <span class=\"keyword\">instanceof</span> THREE.PerspectiveCamera) &#123;</div><div class=\"line\">      camera = <span class=\"keyword\">new</span> THREE.OrthographicCamera(</div><div class=\"line\">        <span class=\"built_in\">window</span>.innerWidth / <span class=\"number\">-16</span>,</div><div class=\"line\">        <span class=\"built_in\">window</span>.innerWidth / <span class=\"number\">16</span>,</div><div class=\"line\">        <span class=\"built_in\">window</span>.innerHeight / <span class=\"number\">16</span>,</div><div class=\"line\">        <span class=\"built_in\">window</span>.innerHeight / <span class=\"number\">-16</span>, <span class=\"number\">-200</span>, <span class=\"number\">500</span></div><div class=\"line\">      );</div><div class=\"line\">      camera.position.x = <span class=\"number\">-20</span>;</div><div class=\"line\">      camera.position.y = <span class=\"number\">60</span>;</div><div class=\"line\">      camera.position.z = <span class=\"number\">50</span>;</div><div class=\"line\">      camera.lookAt(scene.position);</div><div class=\"line\">      <span class=\"keyword\">this</span>.perspective = <span class=\"string\">'Orthographic'</span>;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.perspective = <span class=\"string\">'Perspective'</span>;</div><div class=\"line\">      camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">45</span>, <span class=\"built_in\">window</span>.innerWidth / <span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">0.1</span>, <span class=\"number\">1000</span>);</div><div class=\"line\">      camera.position.x = <span class=\"number\">-20</span>;</div><div class=\"line\">      camera.position.y = <span class=\"number\">60</span>;</div><div class=\"line\">      camera.position.z = <span class=\"number\">50</span>;</div><div class=\"line\">      camera.lookAt(scene.position);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">setInterval(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;controls.switchCamera();&#125;,<span class=\"number\">2000</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  renderer.render(scene, camera);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">render();</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-14/4.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/13\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/13</a></p>"},{"title":"Three.js--","comments":1,"toc":true,"date":"2017-07-15T13:09:11.000Z","_content":"\n### \n\n#### \n\n* AmbientLight  \n* PointLight \n* SpotLight \n* DirectionalLight \n* HemisphereLight \n* AreaLight \n* LensFlare \n\n<!-- more -->\n\n### \n\n*  AmbientLight \n* \n* \n\n#### three.color \n\n* add(color)  \n* clone() \n\n\n\n``` javascript\n// \nshareObj.scene.add(new THREE.AmbientLight('#f00'))\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-15/1.jpeg\"/>\n\n### \n\n*  PointLight \n* \n*  GPU \n\n#### \n\n* color \n* intensity \n* distance \n* position \n\n\n\n``` javascript\n// \n\nvar pointLight = new THREE.PointLight(0xffffff);\npointLight.position.set(-40,60,10);\n\nshareObj.scene.add(pointLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render(){\n  requestAnimationFrame(render);\n  pointLight.position.z += 0.2;\n  shareObj.renderer.render(shareObj.scene,shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-15/2.jpeg\"/>\n\n### \n\n*  SpotLight \n* \n* \n\n#### \n\n* castShadow  true  \n* target \n* angle \n\n\n\n``` javascript\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nspotLight.target = cube;\nspotLight.angle = Math.PI / 10;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nvar angleNUM = 3;\n\ndocument.onkeydown = function(event) {\n  console.log(event.keyCode);\n  switch (event.keyCode) {\n    case 38:\n      angleNUM += 1;\n      break;\n    case 40:\n      angleNUM -= 1;\n      if (angleNUM < 1) {\n        angleNUM = 1;\n      }\n      break;\n\n    case 37:\n      spotLight.position.x += 0.2;\n      break;\n    case 39:\n      spotLight.position.x -= 0.2;\n\n      break;\n  }\n};\n\nfunction render() {\n\n  spotLight.angle = Math.PI / angleNUM;\n  requestAnimationFrame(render);\n\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\nrender();\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-15/3.jpeg\"/>\n\n### \n\n*  DirectinalLight \n* \n\n#### \n\n* castShadowtarget  angle \n*  shadowCameraVisible shadowDarknessshadowMapWidth  shadowMapHeight \n\n\n\n``` javascript\nvar ambiLight = new THREE.AmbientLight('#1c1c1c');\nshareObj.scene.add(ambiLight);\n\nvar target = new THREE.Object3D();\ntarget.position.set(5, 0, 0);\n\nvar directionalLight = new THREE.DirectionalLight('#ff5818');\ndirectionalLight.position.set(-40, 60, -11);\ndirectionalLight.castShadow = true;\n\ndirectionalLight.shadowCameraFar = 200;\ndirectionalLight.shadowCameraNear = 3;\n\ndirectionalLight.intensity = 0.5;\n\ndirectionalLight.shadowMapWidth = 1000;\ndirectionalLight.shadowMapHeight = 2000;\ndirectionalLight.target = target;\n\ndocument.body.appendChild(shareObj.renderer.domElement);\nshareObj.scene.add(directionalLight);\n\n\ndocument.onkeydown = function(event) {\n  switch (event.keyCode) {\n    case 37:\n      directionalLight.intensity += .1;\n      break;\n    case 39:\n      directionalLight.intensity -= .1;\n      if (directionalLight.intensity > 0) {\n        directionalLight.intensity = .1;\n      }\n\n      break;\n  }\n};\n\nrender();\n\nfunction render() {\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n  requestAnimationFrame(render);\n}\n\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-15/4.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/14","source":"_posts/webgl-2017-07-15.md","raw":"---\ntitle: Three.js--\ncomments: true\ntoc: true\ndate: 2017-07-15 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n    - 'three.js'\n---\n\n### \n\n#### \n\n* AmbientLight  \n* PointLight \n* SpotLight \n* DirectionalLight \n* HemisphereLight \n* AreaLight \n* LensFlare \n\n<!-- more -->\n\n### \n\n*  AmbientLight \n* \n* \n\n#### three.color \n\n* add(color)  \n* clone() \n\n\n\n``` javascript\n// \nshareObj.scene.add(new THREE.AmbientLight('#f00'))\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-15/1.jpeg\"/>\n\n### \n\n*  PointLight \n* \n*  GPU \n\n#### \n\n* color \n* intensity \n* distance \n* position \n\n\n\n``` javascript\n// \n\nvar pointLight = new THREE.PointLight(0xffffff);\npointLight.position.set(-40,60,10);\n\nshareObj.scene.add(pointLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render(){\n  requestAnimationFrame(render);\n  pointLight.position.z += 0.2;\n  shareObj.renderer.render(shareObj.scene,shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-15/2.jpeg\"/>\n\n### \n\n*  SpotLight \n* \n* \n\n#### \n\n* castShadow  true  \n* target \n* angle \n\n\n\n``` javascript\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nspotLight.target = cube;\nspotLight.angle = Math.PI / 10;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nvar angleNUM = 3;\n\ndocument.onkeydown = function(event) {\n  console.log(event.keyCode);\n  switch (event.keyCode) {\n    case 38:\n      angleNUM += 1;\n      break;\n    case 40:\n      angleNUM -= 1;\n      if (angleNUM < 1) {\n        angleNUM = 1;\n      }\n      break;\n\n    case 37:\n      spotLight.position.x += 0.2;\n      break;\n    case 39:\n      spotLight.position.x -= 0.2;\n\n      break;\n  }\n};\n\nfunction render() {\n\n  spotLight.angle = Math.PI / angleNUM;\n  requestAnimationFrame(render);\n\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\nrender();\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-15/3.jpeg\"/>\n\n### \n\n*  DirectinalLight \n* \n\n#### \n\n* castShadowtarget  angle \n*  shadowCameraVisible shadowDarknessshadowMapWidth  shadowMapHeight \n\n\n\n``` javascript\nvar ambiLight = new THREE.AmbientLight('#1c1c1c');\nshareObj.scene.add(ambiLight);\n\nvar target = new THREE.Object3D();\ntarget.position.set(5, 0, 0);\n\nvar directionalLight = new THREE.DirectionalLight('#ff5818');\ndirectionalLight.position.set(-40, 60, -11);\ndirectionalLight.castShadow = true;\n\ndirectionalLight.shadowCameraFar = 200;\ndirectionalLight.shadowCameraNear = 3;\n\ndirectionalLight.intensity = 0.5;\n\ndirectionalLight.shadowMapWidth = 1000;\ndirectionalLight.shadowMapHeight = 2000;\ndirectionalLight.target = target;\n\ndocument.body.appendChild(shareObj.renderer.domElement);\nshareObj.scene.add(directionalLight);\n\n\ndocument.onkeydown = function(event) {\n  switch (event.keyCode) {\n    case 37:\n      directionalLight.intensity += .1;\n      break;\n    case 39:\n      directionalLight.intensity -= .1;\n      if (directionalLight.intensity > 0) {\n        directionalLight.intensity = .1;\n      }\n\n      break;\n  }\n};\n\nrender();\n\nfunction render() {\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n  requestAnimationFrame(render);\n}\n\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-15/4.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/14","slug":"webgl-2017-07-15","published":1,"updated":"2018-02-10T09:08:00.902Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbo002ffdldxz4mco0l","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>AmbientLight  </li>\n<li>PointLight </li>\n<li>SpotLight </li>\n<li>DirectionalLight </li>\n<li>HemisphereLight </li>\n<li>AreaLight </li>\n<li>LensFlare </li>\n</ul>\n<a id=\"more\"></a>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> AmbientLight </li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"three-color-\"><a href=\"#three-color-\" class=\"headerlink\" title=\"three.color \"></a>three.color </h4><ul>\n<li>add(color)  </li>\n<li>clone() </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">shareObj.scene.add(<span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"string\">'#f00'</span>))</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-15/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> PointLight </li>\n<li></li>\n<li> GPU </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>color </li>\n<li>intensity </li>\n<li>distance </li>\n<li>position </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> pointLight = <span class=\"keyword\">new</span> THREE.PointLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">pointLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">10</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(pointLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  pointLight.position.z += <span class=\"number\">0.2</span>;</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene,shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-15/2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> SpotLight </li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>castShadow  true  </li>\n<li>target </li>\n<li>angle </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">spotLight.target = cube;</div><div class=\"line\">spotLight.angle = <span class=\"built_in\">Math</span>.PI / <span class=\"number\">10</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> angleNUM = <span class=\"number\">3</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.onkeydown = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(event.keyCode);</div><div class=\"line\">  <span class=\"keyword\">switch</span> (event.keyCode) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">38</span>:</div><div class=\"line\">      angleNUM += <span class=\"number\">1</span>;</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">40</span>:</div><div class=\"line\">      angleNUM -= <span class=\"number\">1</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (angleNUM &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">        angleNUM = <span class=\"number\">1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">37</span>:</div><div class=\"line\">      spotLight.position.x += <span class=\"number\">0.2</span>;</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">39</span>:</div><div class=\"line\">      spotLight.position.x -= <span class=\"number\">0.2</span>;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  spotLight.angle = <span class=\"built_in\">Math</span>.PI / angleNUM;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\"></div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\">render();</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-15/3.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> DirectinalLight </li>\n<li></li>\n</ul>\n<h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>castShadowtarget  angle </li>\n<li> shadowCameraVisible shadowDarknessshadowMapWidth  shadowMapHeight </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> ambiLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"string\">'#1c1c1c'</span>);</div><div class=\"line\">shareObj.scene.add(ambiLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> target = <span class=\"keyword\">new</span> THREE.Object3D();</div><div class=\"line\">target.position.set(<span class=\"number\">5</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> directionalLight = <span class=\"keyword\">new</span> THREE.DirectionalLight(<span class=\"string\">'#ff5818'</span>);</div><div class=\"line\">directionalLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">-11</span>);</div><div class=\"line\">directionalLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">directionalLight.shadowCameraFar = <span class=\"number\">200</span>;</div><div class=\"line\">directionalLight.shadowCameraNear = <span class=\"number\">3</span>;</div><div class=\"line\"></div><div class=\"line\">directionalLight.intensity = <span class=\"number\">0.5</span>;</div><div class=\"line\"></div><div class=\"line\">directionalLight.shadowMapWidth = <span class=\"number\">1000</span>;</div><div class=\"line\">directionalLight.shadowMapHeight = <span class=\"number\">2000</span>;</div><div class=\"line\">directionalLight.target = target;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\">shareObj.scene.add(directionalLight);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.onkeydown = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">switch</span> (event.keyCode) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">37</span>:</div><div class=\"line\">      directionalLight.intensity += <span class=\"number\">.1</span>;</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">39</span>:</div><div class=\"line\">      directionalLight.intensity -= <span class=\"number\">.1</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (directionalLight.intensity &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        directionalLight.intensity = <span class=\"number\">.1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-15/4.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/14\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/14</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>AmbientLight  </li>\n<li>PointLight </li>\n<li>SpotLight </li>\n<li>DirectionalLight </li>\n<li>HemisphereLight </li>\n<li>AreaLight </li>\n<li>LensFlare </li>\n</ul>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> AmbientLight </li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"three-color-\"><a href=\"#three-color-\" class=\"headerlink\" title=\"three.color \"></a>three.color </h4><ul>\n<li>add(color)  </li>\n<li>clone() </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">shareObj.scene.add(<span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"string\">'#f00'</span>))</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-15/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> PointLight </li>\n<li></li>\n<li> GPU </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>color </li>\n<li>intensity </li>\n<li>distance </li>\n<li>position </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> pointLight = <span class=\"keyword\">new</span> THREE.PointLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">pointLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">10</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(pointLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  pointLight.position.z += <span class=\"number\">0.2</span>;</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene,shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-15/2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> SpotLight </li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>castShadow  true  </li>\n<li>target </li>\n<li>angle </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">spotLight.target = cube;</div><div class=\"line\">spotLight.angle = <span class=\"built_in\">Math</span>.PI / <span class=\"number\">10</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> angleNUM = <span class=\"number\">3</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.onkeydown = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(event.keyCode);</div><div class=\"line\">  <span class=\"keyword\">switch</span> (event.keyCode) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">38</span>:</div><div class=\"line\">      angleNUM += <span class=\"number\">1</span>;</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">40</span>:</div><div class=\"line\">      angleNUM -= <span class=\"number\">1</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (angleNUM &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">        angleNUM = <span class=\"number\">1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">37</span>:</div><div class=\"line\">      spotLight.position.x += <span class=\"number\">0.2</span>;</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">39</span>:</div><div class=\"line\">      spotLight.position.x -= <span class=\"number\">0.2</span>;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  spotLight.angle = <span class=\"built_in\">Math</span>.PI / angleNUM;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\"></div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\">render();</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-15/3.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li> DirectinalLight </li>\n<li></li>\n</ul>\n<h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>castShadowtarget  angle </li>\n<li> shadowCameraVisible shadowDarknessshadowMapWidth  shadowMapHeight </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> ambiLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"string\">'#1c1c1c'</span>);</div><div class=\"line\">shareObj.scene.add(ambiLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> target = <span class=\"keyword\">new</span> THREE.Object3D();</div><div class=\"line\">target.position.set(<span class=\"number\">5</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> directionalLight = <span class=\"keyword\">new</span> THREE.DirectionalLight(<span class=\"string\">'#ff5818'</span>);</div><div class=\"line\">directionalLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">-11</span>);</div><div class=\"line\">directionalLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">directionalLight.shadowCameraFar = <span class=\"number\">200</span>;</div><div class=\"line\">directionalLight.shadowCameraNear = <span class=\"number\">3</span>;</div><div class=\"line\"></div><div class=\"line\">directionalLight.intensity = <span class=\"number\">0.5</span>;</div><div class=\"line\"></div><div class=\"line\">directionalLight.shadowMapWidth = <span class=\"number\">1000</span>;</div><div class=\"line\">directionalLight.shadowMapHeight = <span class=\"number\">2000</span>;</div><div class=\"line\">directionalLight.target = target;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\">shareObj.scene.add(directionalLight);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.onkeydown = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">switch</span> (event.keyCode) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">37</span>:</div><div class=\"line\">      directionalLight.intensity += <span class=\"number\">.1</span>;</div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">39</span>:</div><div class=\"line\">      directionalLight.intensity -= <span class=\"number\">.1</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (directionalLight.intensity &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        directionalLight.intensity = <span class=\"number\">.1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">break</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-15/4.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/14\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/14</a></p>"},{"title":"Three.js--","comments":1,"toc":true,"date":"2017-07-17T13:09:11.000Z","_content":"\n### \n\n####  PlaneGeometry\n\n* width \n* height \n* wSegments \n* hSegments \n\n\n\n<!-- more -->\n\n``` javascript\nvar shareObj = share();\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\nvar plane = createMesh(new THREE.PlaneGeometry(12, 15, 10, 15));\nshareObj.scene.add(plane);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  plane.rotation.x += 0.01;\n  plane.rotation.z += 0.01;\n  plane.rotation.y += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/1.jpeg\"/>\n\n####  CircleGeometry\n\n* radius \n* segments \n* start \n* length \n\n\n\n``` javascript\nvar shareObj = share();\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\nvar circle = createMesh(new THREE.CircleGeometry(4,10,0.3 * Math.PI, 0.3 * Math.PI));\nshareObj.scene.add(circle);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  circle.rotation.x += 0.01;\n  circle.rotation.z += 0.01;\n  circle.rotation.y += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/2.jpeg\"/>\n\n### \n\n####  SphereGeometry\n\n* radius \n* widthSegments \n* heightSegments \n* phistart  x \n* thetaStart  y \n* theLength \n\n\n\n``` javascript\nvar shareObj = share();\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\n\n// \nvar sphere = createMesh(new THREE.SphereGeometry(10,50,50,0,2 * Math.PI));\nshareObj.scene.add(sphere);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  sphere.rotation.x += 0.01;\n  sphere.rotation.z += 0.01;\n  sphere.rotation.y += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/3.jpeg\"/>\n\n####  CylinderGeometry\n\n* radiusTop \n* radiusBottom \n* height \n* segmentsX  x \n* segmentsY  y \n* segmentsZ  z \n* openEnded \n\n####  TorusGeometry \n\n* radius \n* tube \n* radialSegments \n* tubularSegments \n* arc \n\n####  TorusKnotGeometry\n\n* radius \n* tube \n* radialSegments \n* tubularSegments \n* detail \n\n\n\n``` javascript\nvar shareObj = share();\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\n\nvar mesh;\nvar sphere = createMesh(new THREE.SphereGeometry(10,50,50,0, 2 * Math.PI));\nvar cylinder = createMesh(new THREE.CylinderGeometry(20,20,20,20,100))\nvar torus = createMesh(new THREE.TorusGeometry(10,2,20,10,Math.PI * 2));\nvar knot = createMesh(new THREE.TorusKnotGeometry(10,1,64,8,2,9,1))\n\nmesh = sphere;\n\n$('#sphere').click(function(){\n    shareObj.scene.remove(mesh);\n    mesh = sphere;\n    shareObj.scene.add(mesh);\n\n\n});\n\n$('#cylinder').click(function(){\n    shareObj.scene.remove(mesh);\n\n    mesh = cylinder;\n    shareObj.scene.add(mesh);\n\n});\n\n$('#torus').click(function(){\n    shareObj.scene.remove(mesh);\n\n    mesh = torus;\n    shareObj.scene.add(mesh);\n\n});\n\n$('#knot').click(function(){\n    shareObj.scene.remove(mesh);\n\n    mesh = knot;\n    shareObj.scene.add(mesh);\n\n});\n\nshareObj.scene.add(mesh);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\n$(\"#webgl-scene\").append(shareObj.renderer.domElement)\n\nrender();\n\nfunction render() {\n  sphere.rotation.y += 0.01;\n\n  cylinder.rotation.y += 0.01;\n\n  torus.rotation.y += 0.01;\n\n  knot.rotation.y += 0.01;\n\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/4.jpeg\"/>\n\n### \n\n####  PolyhedronGeometry\n\n* vertices \n* faces \n* radius \n* detail \n\n\n\n``` javascript\nvar shareObj = share();\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\n\nvar vertices = [\n    1, 1, 1,\n    -1, -1, 1,\n    -1, 1, -1,\n    1, -1, -1\n];\n\nvar faces = [\n    2, 1, 0,\n    0, 3, 2,\n    1, 3, 0,\n    2, 3, 1\n];\n\n// \nvar polyhedron = createMesh(new THREE.PolyhedronGeometry(vertices,faces,10));\nshareObj.scene.add(polyhedron);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  polyhedron.rotation.x += 0.01;\n  polyhedron.rotation.z += 0.01;\n  polyhedron.rotation.y += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/5.jpeg\"/>\n\n#### \n\n* IcosahedronGeometry \n* TetrahedronGeometry \n* Octahedron \n\n\n\n``` javascript\nvar shareObj = share(false);\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\n\nvar mesh = null;\nvar size = 10;\nvar z20 = createMesh(new THREE.IcosahedronGeometry(size));\nvar z4 = createMesh(new THREE.TetrahedronGeometry(size));\nvar z8 = createMesh(new THREE.OctahedronGeometry(size));\nmesh = z20;\n\n$(\"#z4\").click(function(e){\n    shareObj.scene.remove(mesh);\n    mesh = z4;\n    shareObj.scene.add(mesh);\n})\n\n$(\"#z8\").click(function(e){\n    shareObj.scene.remove(mesh);\n    mesh = z8;\n    shareObj.scene.add(mesh);\n})\n\n$(\"#z20\").click(function(e){\n    shareObj.scene.remove(mesh);\n    mesh = z20;\n    shareObj.scene.add(mesh);\n})\nshareObj.scene.add(mesh);\n\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\n$(\"#webgl-scene\").append(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n\n  z4.rotation.y += 0.01;\n  z8.rotation.y += 0.01;\n  z20.rotation.y += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/6.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/16\n","source":"_posts/webgl-2017-07-17.md","raw":"---\ntitle: Three.js--\ncomments: true\ntoc: true\ndate: 2017-07-17 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n    - 'three.js'\n---\n\n### \n\n####  PlaneGeometry\n\n* width \n* height \n* wSegments \n* hSegments \n\n\n\n<!-- more -->\n\n``` javascript\nvar shareObj = share();\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\nvar plane = createMesh(new THREE.PlaneGeometry(12, 15, 10, 15));\nshareObj.scene.add(plane);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  plane.rotation.x += 0.01;\n  plane.rotation.z += 0.01;\n  plane.rotation.y += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/1.jpeg\"/>\n\n####  CircleGeometry\n\n* radius \n* segments \n* start \n* length \n\n\n\n``` javascript\nvar shareObj = share();\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\nvar circle = createMesh(new THREE.CircleGeometry(4,10,0.3 * Math.PI, 0.3 * Math.PI));\nshareObj.scene.add(circle);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  circle.rotation.x += 0.01;\n  circle.rotation.z += 0.01;\n  circle.rotation.y += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/2.jpeg\"/>\n\n### \n\n####  SphereGeometry\n\n* radius \n* widthSegments \n* heightSegments \n* phistart  x \n* thetaStart  y \n* theLength \n\n\n\n``` javascript\nvar shareObj = share();\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\n\n// \nvar sphere = createMesh(new THREE.SphereGeometry(10,50,50,0,2 * Math.PI));\nshareObj.scene.add(sphere);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  sphere.rotation.x += 0.01;\n  sphere.rotation.z += 0.01;\n  sphere.rotation.y += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/3.jpeg\"/>\n\n####  CylinderGeometry\n\n* radiusTop \n* radiusBottom \n* height \n* segmentsX  x \n* segmentsY  y \n* segmentsZ  z \n* openEnded \n\n####  TorusGeometry \n\n* radius \n* tube \n* radialSegments \n* tubularSegments \n* arc \n\n####  TorusKnotGeometry\n\n* radius \n* tube \n* radialSegments \n* tubularSegments \n* detail \n\n\n\n``` javascript\nvar shareObj = share();\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\n\nvar mesh;\nvar sphere = createMesh(new THREE.SphereGeometry(10,50,50,0, 2 * Math.PI));\nvar cylinder = createMesh(new THREE.CylinderGeometry(20,20,20,20,100))\nvar torus = createMesh(new THREE.TorusGeometry(10,2,20,10,Math.PI * 2));\nvar knot = createMesh(new THREE.TorusKnotGeometry(10,1,64,8,2,9,1))\n\nmesh = sphere;\n\n$('#sphere').click(function(){\n    shareObj.scene.remove(mesh);\n    mesh = sphere;\n    shareObj.scene.add(mesh);\n\n\n});\n\n$('#cylinder').click(function(){\n    shareObj.scene.remove(mesh);\n\n    mesh = cylinder;\n    shareObj.scene.add(mesh);\n\n});\n\n$('#torus').click(function(){\n    shareObj.scene.remove(mesh);\n\n    mesh = torus;\n    shareObj.scene.add(mesh);\n\n});\n\n$('#knot').click(function(){\n    shareObj.scene.remove(mesh);\n\n    mesh = knot;\n    shareObj.scene.add(mesh);\n\n});\n\nshareObj.scene.add(mesh);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\n$(\"#webgl-scene\").append(shareObj.renderer.domElement)\n\nrender();\n\nfunction render() {\n  sphere.rotation.y += 0.01;\n\n  cylinder.rotation.y += 0.01;\n\n  torus.rotation.y += 0.01;\n\n  knot.rotation.y += 0.01;\n\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/4.jpeg\"/>\n\n### \n\n####  PolyhedronGeometry\n\n* vertices \n* faces \n* radius \n* detail \n\n\n\n``` javascript\nvar shareObj = share();\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\n\nvar vertices = [\n    1, 1, 1,\n    -1, -1, 1,\n    -1, 1, -1,\n    1, -1, -1\n];\n\nvar faces = [\n    2, 1, 0,\n    0, 3, 2,\n    1, 3, 0,\n    2, 3, 1\n];\n\n// \nvar polyhedron = createMesh(new THREE.PolyhedronGeometry(vertices,faces,10));\nshareObj.scene.add(polyhedron);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  polyhedron.rotation.x += 0.01;\n  polyhedron.rotation.z += 0.01;\n  polyhedron.rotation.y += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/5.jpeg\"/>\n\n#### \n\n* IcosahedronGeometry \n* TetrahedronGeometry \n* Octahedron \n\n\n\n``` javascript\nvar shareObj = share(false);\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction createMesh(geom) {\n  var meshMaterial = new THREE.MeshNormalMaterial();\n  var wireFrameMaterial = new THREE.MeshBasicMaterial();\n  wireFrameMaterial.wireframe = true;\n  return THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);\n}\n\nvar mesh = null;\nvar size = 10;\nvar z20 = createMesh(new THREE.IcosahedronGeometry(size));\nvar z4 = createMesh(new THREE.TetrahedronGeometry(size));\nvar z8 = createMesh(new THREE.OctahedronGeometry(size));\nmesh = z20;\n\n$(\"#z4\").click(function(e){\n    shareObj.scene.remove(mesh);\n    mesh = z4;\n    shareObj.scene.add(mesh);\n})\n\n$(\"#z8\").click(function(e){\n    shareObj.scene.remove(mesh);\n    mesh = z8;\n    shareObj.scene.add(mesh);\n})\n\n$(\"#z20\").click(function(e){\n    shareObj.scene.remove(mesh);\n    mesh = z20;\n    shareObj.scene.add(mesh);\n})\nshareObj.scene.add(mesh);\n\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\n$(\"#webgl-scene\").append(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n\n  z4.rotation.y += 0.01;\n  z8.rotation.y += 0.01;\n  z20.rotation.y += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-17/6.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/16\n","slug":"webgl-2017-07-17","published":1,"updated":"2018-02-10T09:08:00.904Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbq002ifdldtuzh65rt","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-PlaneGeometry\"><a href=\"#-PlaneGeometry\" class=\"headerlink\" title=\" PlaneGeometry\"></a> PlaneGeometry</h4><ul>\n<li>width </li>\n<li>height </li>\n<li>wSegments </li>\n<li>hSegments </li>\n</ul>\n<p></p>\n<a id=\"more\"></a>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> plane = createMesh(<span class=\"keyword\">new</span> THREE.PlaneGeometry(<span class=\"number\">12</span>, <span class=\"number\">15</span>, <span class=\"number\">10</span>, <span class=\"number\">15</span>));</div><div class=\"line\">shareObj.scene.add(plane);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  plane.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  plane.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  plane.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/1.jpeg\"></p>\n<h4 id=\"-CircleGeometry\"><a href=\"#-CircleGeometry\" class=\"headerlink\" title=\" CircleGeometry\"></a> CircleGeometry</h4><ul>\n<li>radius </li>\n<li>segments </li>\n<li>start </li>\n<li>length </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> circle = createMesh(<span class=\"keyword\">new</span> THREE.CircleGeometry(<span class=\"number\">4</span>,<span class=\"number\">10</span>,<span class=\"number\">0.3</span> * <span class=\"built_in\">Math</span>.PI, <span class=\"number\">0.3</span> * <span class=\"built_in\">Math</span>.PI));</div><div class=\"line\">shareObj.scene.add(circle);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  circle.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  circle.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  circle.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-SphereGeometry\"><a href=\"#-SphereGeometry\" class=\"headerlink\" title=\" SphereGeometry\"></a> SphereGeometry</h4><ul>\n<li>radius </li>\n<li>widthSegments </li>\n<li>heightSegments </li>\n<li>phistart  x </li>\n<li>thetaStart  y </li>\n<li>theLength </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> sphere = createMesh(<span class=\"keyword\">new</span> THREE.SphereGeometry(<span class=\"number\">10</span>,<span class=\"number\">50</span>,<span class=\"number\">50</span>,<span class=\"number\">0</span>,<span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI));</div><div class=\"line\">shareObj.scene.add(sphere);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  sphere.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  sphere.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  sphere.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/3.jpeg\"></p>\n<h4 id=\"-CylinderGeometry\"><a href=\"#-CylinderGeometry\" class=\"headerlink\" title=\" CylinderGeometry\"></a> CylinderGeometry</h4><ul>\n<li>radiusTop </li>\n<li>radiusBottom </li>\n<li>height </li>\n<li>segmentsX  x </li>\n<li>segmentsY  y </li>\n<li>segmentsZ  z </li>\n<li>openEnded </li>\n</ul>\n<h4 id=\"TorusGeometry-\"><a href=\"#TorusGeometry-\" class=\"headerlink\" title=\"TorusGeometry \"></a>TorusGeometry </h4><ul>\n<li>radius </li>\n<li>tube </li>\n<li>radialSegments </li>\n<li>tubularSegments </li>\n<li>arc </li>\n</ul>\n<h4 id=\"-TorusKnotGeometry\"><a href=\"#-TorusKnotGeometry\" class=\"headerlink\" title=\" TorusKnotGeometry\"></a> TorusKnotGeometry</h4><ul>\n<li>radius </li>\n<li>tube </li>\n<li>radialSegments </li>\n<li>tubularSegments </li>\n<li>detail </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> mesh;</div><div class=\"line\"><span class=\"keyword\">var</span> sphere = createMesh(<span class=\"keyword\">new</span> THREE.SphereGeometry(<span class=\"number\">10</span>,<span class=\"number\">50</span>,<span class=\"number\">50</span>,<span class=\"number\">0</span>, <span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI));</div><div class=\"line\"><span class=\"keyword\">var</span> cylinder = createMesh(<span class=\"keyword\">new</span> THREE.CylinderGeometry(<span class=\"number\">20</span>,<span class=\"number\">20</span>,<span class=\"number\">20</span>,<span class=\"number\">20</span>,<span class=\"number\">100</span>))</div><div class=\"line\"><span class=\"keyword\">var</span> torus = createMesh(<span class=\"keyword\">new</span> THREE.TorusGeometry(<span class=\"number\">10</span>,<span class=\"number\">2</span>,<span class=\"number\">20</span>,<span class=\"number\">10</span>,<span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span>));</div><div class=\"line\"><span class=\"keyword\">var</span> knot = createMesh(<span class=\"keyword\">new</span> THREE.TorusKnotGeometry(<span class=\"number\">10</span>,<span class=\"number\">1</span>,<span class=\"number\">64</span>,<span class=\"number\">8</span>,<span class=\"number\">2</span>,<span class=\"number\">9</span>,<span class=\"number\">1</span>))</div><div class=\"line\"></div><div class=\"line\">mesh = sphere;</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#sphere'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\">    mesh = sphere;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#cylinder'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\"></div><div class=\"line\">    mesh = cylinder;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#torus'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\"></div><div class=\"line\">    mesh = torus;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#knot'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\"></div><div class=\"line\">    mesh = knot;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\"#webgl-scene\"</span>).append(shareObj.renderer.domElement)</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  sphere.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">  cylinder.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">  torus.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">  knot.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/4.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-PolyhedronGeometry\"><a href=\"#-PolyhedronGeometry\" class=\"headerlink\" title=\" PolyhedronGeometry\"></a> PolyhedronGeometry</h4><ul>\n<li>vertices </li>\n<li>faces </li>\n<li>radius </li>\n<li>detail </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> vertices = [</div><div class=\"line\">    <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"number\">-1</span>, <span class=\"number\">-1</span>, <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"number\">-1</span>, <span class=\"number\">1</span>, <span class=\"number\">-1</span>,</div><div class=\"line\">    <span class=\"number\">1</span>, <span class=\"number\">-1</span>, <span class=\"number\">-1</span></div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> faces = [</div><div class=\"line\">    <span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>,</div><div class=\"line\">    <span class=\"number\">0</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>,</div><div class=\"line\">    <span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">0</span>,</div><div class=\"line\">    <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span></div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> polyhedron = createMesh(<span class=\"keyword\">new</span> THREE.PolyhedronGeometry(vertices,faces,<span class=\"number\">10</span>));</div><div class=\"line\">shareObj.scene.add(polyhedron);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  polyhedron.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  polyhedron.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  polyhedron.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/5.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>IcosahedronGeometry </li>\n<li>TetrahedronGeometry </li>\n<li>Octahedron </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share(<span class=\"literal\">false</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> mesh = <span class=\"literal\">null</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> size = <span class=\"number\">10</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> z20 = createMesh(<span class=\"keyword\">new</span> THREE.IcosahedronGeometry(size));</div><div class=\"line\"><span class=\"keyword\">var</span> z4 = createMesh(<span class=\"keyword\">new</span> THREE.TetrahedronGeometry(size));</div><div class=\"line\"><span class=\"keyword\">var</span> z8 = createMesh(<span class=\"keyword\">new</span> THREE.OctahedronGeometry(size));</div><div class=\"line\">mesh = z20;</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\"#z4\"</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\">    mesh = z4;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\"#z8\"</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\">    mesh = z8;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\"#z20\"</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\">    mesh = z20;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\">&#125;)</div><div class=\"line\">shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\"#webgl-scene\"</span>).append(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  z4.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  z8.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  z20.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/6.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/16\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/16</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-PlaneGeometry\"><a href=\"#-PlaneGeometry\" class=\"headerlink\" title=\" PlaneGeometry\"></a> PlaneGeometry</h4><ul>\n<li>width </li>\n<li>height </li>\n<li>wSegments </li>\n<li>hSegments </li>\n</ul>\n<p></p>","more":"<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> plane = createMesh(<span class=\"keyword\">new</span> THREE.PlaneGeometry(<span class=\"number\">12</span>, <span class=\"number\">15</span>, <span class=\"number\">10</span>, <span class=\"number\">15</span>));</div><div class=\"line\">shareObj.scene.add(plane);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  plane.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  plane.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  plane.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/1.jpeg\"></p>\n<h4 id=\"-CircleGeometry\"><a href=\"#-CircleGeometry\" class=\"headerlink\" title=\" CircleGeometry\"></a> CircleGeometry</h4><ul>\n<li>radius </li>\n<li>segments </li>\n<li>start </li>\n<li>length </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> circle = createMesh(<span class=\"keyword\">new</span> THREE.CircleGeometry(<span class=\"number\">4</span>,<span class=\"number\">10</span>,<span class=\"number\">0.3</span> * <span class=\"built_in\">Math</span>.PI, <span class=\"number\">0.3</span> * <span class=\"built_in\">Math</span>.PI));</div><div class=\"line\">shareObj.scene.add(circle);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  circle.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  circle.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  circle.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-SphereGeometry\"><a href=\"#-SphereGeometry\" class=\"headerlink\" title=\" SphereGeometry\"></a> SphereGeometry</h4><ul>\n<li>radius </li>\n<li>widthSegments </li>\n<li>heightSegments </li>\n<li>phistart  x </li>\n<li>thetaStart  y </li>\n<li>theLength </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> sphere = createMesh(<span class=\"keyword\">new</span> THREE.SphereGeometry(<span class=\"number\">10</span>,<span class=\"number\">50</span>,<span class=\"number\">50</span>,<span class=\"number\">0</span>,<span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI));</div><div class=\"line\">shareObj.scene.add(sphere);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  sphere.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  sphere.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  sphere.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/3.jpeg\"></p>\n<h4 id=\"-CylinderGeometry\"><a href=\"#-CylinderGeometry\" class=\"headerlink\" title=\" CylinderGeometry\"></a> CylinderGeometry</h4><ul>\n<li>radiusTop </li>\n<li>radiusBottom </li>\n<li>height </li>\n<li>segmentsX  x </li>\n<li>segmentsY  y </li>\n<li>segmentsZ  z </li>\n<li>openEnded </li>\n</ul>\n<h4 id=\"TorusGeometry-\"><a href=\"#TorusGeometry-\" class=\"headerlink\" title=\"TorusGeometry \"></a>TorusGeometry </h4><ul>\n<li>radius </li>\n<li>tube </li>\n<li>radialSegments </li>\n<li>tubularSegments </li>\n<li>arc </li>\n</ul>\n<h4 id=\"-TorusKnotGeometry\"><a href=\"#-TorusKnotGeometry\" class=\"headerlink\" title=\" TorusKnotGeometry\"></a> TorusKnotGeometry</h4><ul>\n<li>radius </li>\n<li>tube </li>\n<li>radialSegments </li>\n<li>tubularSegments </li>\n<li>detail </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> mesh;</div><div class=\"line\"><span class=\"keyword\">var</span> sphere = createMesh(<span class=\"keyword\">new</span> THREE.SphereGeometry(<span class=\"number\">10</span>,<span class=\"number\">50</span>,<span class=\"number\">50</span>,<span class=\"number\">0</span>, <span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI));</div><div class=\"line\"><span class=\"keyword\">var</span> cylinder = createMesh(<span class=\"keyword\">new</span> THREE.CylinderGeometry(<span class=\"number\">20</span>,<span class=\"number\">20</span>,<span class=\"number\">20</span>,<span class=\"number\">20</span>,<span class=\"number\">100</span>))</div><div class=\"line\"><span class=\"keyword\">var</span> torus = createMesh(<span class=\"keyword\">new</span> THREE.TorusGeometry(<span class=\"number\">10</span>,<span class=\"number\">2</span>,<span class=\"number\">20</span>,<span class=\"number\">10</span>,<span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span>));</div><div class=\"line\"><span class=\"keyword\">var</span> knot = createMesh(<span class=\"keyword\">new</span> THREE.TorusKnotGeometry(<span class=\"number\">10</span>,<span class=\"number\">1</span>,<span class=\"number\">64</span>,<span class=\"number\">8</span>,<span class=\"number\">2</span>,<span class=\"number\">9</span>,<span class=\"number\">1</span>))</div><div class=\"line\"></div><div class=\"line\">mesh = sphere;</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#sphere'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\">    mesh = sphere;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#cylinder'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\"></div><div class=\"line\">    mesh = cylinder;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#torus'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\"></div><div class=\"line\">    mesh = torus;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'#knot'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\"></div><div class=\"line\">    mesh = knot;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\"#webgl-scene\"</span>).append(shareObj.renderer.domElement)</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  sphere.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">  cylinder.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">  torus.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">  knot.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/4.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-PolyhedronGeometry\"><a href=\"#-PolyhedronGeometry\" class=\"headerlink\" title=\" PolyhedronGeometry\"></a> PolyhedronGeometry</h4><ul>\n<li>vertices </li>\n<li>faces </li>\n<li>radius </li>\n<li>detail </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> vertices = [</div><div class=\"line\">    <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"number\">-1</span>, <span class=\"number\">-1</span>, <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"number\">-1</span>, <span class=\"number\">1</span>, <span class=\"number\">-1</span>,</div><div class=\"line\">    <span class=\"number\">1</span>, <span class=\"number\">-1</span>, <span class=\"number\">-1</span></div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> faces = [</div><div class=\"line\">    <span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>,</div><div class=\"line\">    <span class=\"number\">0</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>,</div><div class=\"line\">    <span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">0</span>,</div><div class=\"line\">    <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span></div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> polyhedron = createMesh(<span class=\"keyword\">new</span> THREE.PolyhedronGeometry(vertices,faces,<span class=\"number\">10</span>));</div><div class=\"line\">shareObj.scene.add(polyhedron);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  polyhedron.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  polyhedron.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  polyhedron.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/5.jpeg\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>IcosahedronGeometry </li>\n<li>TetrahedronGeometry </li>\n<li>Octahedron </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share(<span class=\"literal\">false</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMesh</span>(<span class=\"params\">geom</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> meshMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial();</div><div class=\"line\">  <span class=\"keyword\">var</span> wireFrameMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial();</div><div class=\"line\">  wireFrameMaterial.wireframe = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMaterial]);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> mesh = <span class=\"literal\">null</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> size = <span class=\"number\">10</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> z20 = createMesh(<span class=\"keyword\">new</span> THREE.IcosahedronGeometry(size));</div><div class=\"line\"><span class=\"keyword\">var</span> z4 = createMesh(<span class=\"keyword\">new</span> THREE.TetrahedronGeometry(size));</div><div class=\"line\"><span class=\"keyword\">var</span> z8 = createMesh(<span class=\"keyword\">new</span> THREE.OctahedronGeometry(size));</div><div class=\"line\">mesh = z20;</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\"#z4\"</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\">    mesh = z4;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\"#z8\"</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\">    mesh = z8;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\"#z20\"</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</div><div class=\"line\">    shareObj.scene.remove(mesh);</div><div class=\"line\">    mesh = z20;</div><div class=\"line\">    shareObj.scene.add(mesh);</div><div class=\"line\">&#125;)</div><div class=\"line\">shareObj.scene.add(mesh);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\"#webgl-scene\"</span>).append(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  z4.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  z8.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  z20.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-17/6.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/16\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/16</a></p>"},{"title":"Three.js--","comments":1,"toc":true,"date":"2017-07-16T13:09:11.000Z","_content":"\n### \n\n* \n* \n* \n* \n* \n* Phong \n* \n\n#### \n\n* id \n* name \n* opacity \n* transparent \n* overdraw \n* visible \n* needsUpdate \n* \n* \n\n<!-- more -->\n\n### \n\n* \n* \n* \n\n#### \n\n* color \n* wireframe  true \n* fog  \n\n\n\n``` javascript\n\nvar shareObj = share();\n\nvar cubeGeometry = new THREE.BoxGeometry(5, 5, 5);\nvar cubeMaterial = new THREE.MeshLambertMaterial({ color: 0xff0000 });\nvar cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\ncube.castShadow = true;\n\n\nvar sphereGeometry = new THREE.SphereGeometry(5, 20, 20);\nvar sphereMaterial = new THREE.MeshLambertMaterial({ color: 0x770077,wireframe:true });\nvar sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);\n\nsphere.position.set(0,3,2);\n\ncube.position = sphere.position;\n\nsphere.castShadow = true;\n\nshareObj.scene.add(sphere);\nshareObj.scene.add(cube);\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\nvar ambiLight = new THREE.AmbientLight('#1c1c1c');\nshareObj.scene.add(ambiLight);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40,60,10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n  cube.rotation.y  += 0.01;\n  sphere.rotation.y  += 0.01;\n  requestAnimationFrame(render);\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-16/1.jpeg\"/>\n\n### \n\n* \n* \n* \n\n#### \n\n* wireframe \n* writeframeLinewidth \n\n\n\n``` javascript\n\nvar scene = new THREE.Scene;\nscene.overrideMaterial = new THREE.MeshDepthMaterial();\n\nvar camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 10, 130);\n\nvar renderer = new THREE.WebGLRenderer();\nrenderer.setClearColor(new THREE.Color(0x000000, 1.0));\nrenderer.setSize(window.innerWidth, window.innerHeight);\n\ncamera.position.set(-50, 40, 50);\ncamera.lookAt(scene.position);\n\n// \nfunction addCube() {\n  var cubeSize = Math.ceil(3 + (Math.random() * 3));\n  var cubeGeometry = new THREE.BoxGeometry(cubeSize, cubeSize, cubeSize);\n  var cubeMaterial = new THREE.MeshLambertMaterial({\n    color: Math.random() * 0xffffff\n  });\n  var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n  cube.castShadow = true;\n  cube.position.set(\n    -60 + Math.round(Math.random() * 100),\n    Math.round(Math.random() * 10),\n    -100 + Math.round(Math.random() * 150)\n  );\n  scene.add(cube)\n}\n\n\nfor (var i = 0; i < 100; i++) {\n  addCube();\n}\n\ndocument.body.appendChild(renderer.domElement);\n\nrender();\n\nfunction render() {\n  requestAnimationFrame(render);\n\n  scene.traverse(function(e) {\n    if (e instanceof THREE.Mesh) {\n      e.rotation.x += 0.02;\n      e.rotation.y += 0.02;\n      e.rotation.z += 0.02;\n    }\n  });\n\n  renderer.render(scene, camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-16/2.jpeg\"/>\n\n### \n\n* \n*   THREE.SceneUtils.createMultiMaterialObject\n\n\n\n``` javascript\nvar scene = new THREE.Scene;\nvar camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 10, 130);\n\nvar renderer = new THREE.WebGLRenderer();\nrenderer.setClearColor(new THREE.Color(0x000000, 1.0));\nrenderer.setSize(window.innerWidth, window.innerHeight);\n\ncamera.position.set(-50, 40, 50);\ncamera.lookAt(scene.position);\n\n// \nfunction addCube() {\n  var cubeSize = Math.ceil(3 + (Math.random() * 3));\n  var cubeGeometry = new THREE.BoxGeometry(cubeSize, cubeSize, cubeSize);\n  // \n  var cubeMaterial = new THREE.MeshDepthMaterial();\n  // \n  var colorMaterial = new THREE.MeshBasicMaterial({\n      color:0x00ff00,\n      transparent:true,\n      blending:THREE.MultiplyBlending\n  });\n\n  var cube = new THREE.SceneUtils.createMultiMaterialObject(cubeGeometry,[\n     colorMaterial,cubeMaterial\n  ]);\n\n  cube.children[1].scale.set(0.99,0.99,0.99);\n  cube.castShadow = true;\n  cube.position.set(\n          -60 + Math.round(Math.random() * 100),\n          Math.round(Math.random() * 10),\n          -100 + Math.round(Math.random() * 150)\n\n  );\n\n  scene.add(cube);\n}\n\n\nfor (var i = 0; i < 100; i++) {\n  addCube();\n}\n\ndocument.body.appendChild(renderer.domElement);\n\nrender();\n\nfunction render() {\n  requestAnimationFrame(render);\n\n  scene.traverse(function(e) {\n    if (e instanceof THREE.Mesh) {\n      e.rotation.x += 0.02;\n      e.rotation.y += 0.02;\n      e.rotation.z += 0.02;\n    }\n  });\n\n  renderer.render(scene, camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-16/3.jpeg\"/>\n\n### \n\n* MeshNormalMaterial \n* \n\n#### \n\n* wireframe \n* wireframeLineWidth \n* shading \n\n\n\n``` javascript\nvar shareObj = share();\n\nvar cubeGeometry = new THREE.BoxGeometry(5, 5, 5);\n// \nvar cubeMaterial = new THREE.MeshNormalMaterial({ color: 0x7777ff });\n\nvar cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n\nshareObj.scene.add(cube);\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\nvar ambiLight = new THREE.AmbientLight('#1c1c1c');\nshareObj.scene.add(ambiLight);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40,60,10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n  cube.rotation.y  += 0.01;\n  requestAnimationFrame(render);\n}\n\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-16/4.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/15\n","source":"_posts/webgl-2017-07-16.md","raw":"---\ntitle: Three.js--\ncomments: true\ntoc: true\ndate: 2017-07-16 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n    - 'three.js'\n---\n\n### \n\n* \n* \n* \n* \n* \n* Phong \n* \n\n#### \n\n* id \n* name \n* opacity \n* transparent \n* overdraw \n* visible \n* needsUpdate \n* \n* \n\n<!-- more -->\n\n### \n\n* \n* \n* \n\n#### \n\n* color \n* wireframe  true \n* fog  \n\n\n\n``` javascript\n\nvar shareObj = share();\n\nvar cubeGeometry = new THREE.BoxGeometry(5, 5, 5);\nvar cubeMaterial = new THREE.MeshLambertMaterial({ color: 0xff0000 });\nvar cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\ncube.castShadow = true;\n\n\nvar sphereGeometry = new THREE.SphereGeometry(5, 20, 20);\nvar sphereMaterial = new THREE.MeshLambertMaterial({ color: 0x770077,wireframe:true });\nvar sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);\n\nsphere.position.set(0,3,2);\n\ncube.position = sphere.position;\n\nsphere.castShadow = true;\n\nshareObj.scene.add(sphere);\nshareObj.scene.add(cube);\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\nvar ambiLight = new THREE.AmbientLight('#1c1c1c');\nshareObj.scene.add(ambiLight);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40,60,10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n  cube.rotation.y  += 0.01;\n  sphere.rotation.y  += 0.01;\n  requestAnimationFrame(render);\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-16/1.jpeg\"/>\n\n### \n\n* \n* \n* \n\n#### \n\n* wireframe \n* writeframeLinewidth \n\n\n\n``` javascript\n\nvar scene = new THREE.Scene;\nscene.overrideMaterial = new THREE.MeshDepthMaterial();\n\nvar camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 10, 130);\n\nvar renderer = new THREE.WebGLRenderer();\nrenderer.setClearColor(new THREE.Color(0x000000, 1.0));\nrenderer.setSize(window.innerWidth, window.innerHeight);\n\ncamera.position.set(-50, 40, 50);\ncamera.lookAt(scene.position);\n\n// \nfunction addCube() {\n  var cubeSize = Math.ceil(3 + (Math.random() * 3));\n  var cubeGeometry = new THREE.BoxGeometry(cubeSize, cubeSize, cubeSize);\n  var cubeMaterial = new THREE.MeshLambertMaterial({\n    color: Math.random() * 0xffffff\n  });\n  var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n  cube.castShadow = true;\n  cube.position.set(\n    -60 + Math.round(Math.random() * 100),\n    Math.round(Math.random() * 10),\n    -100 + Math.round(Math.random() * 150)\n  );\n  scene.add(cube)\n}\n\n\nfor (var i = 0; i < 100; i++) {\n  addCube();\n}\n\ndocument.body.appendChild(renderer.domElement);\n\nrender();\n\nfunction render() {\n  requestAnimationFrame(render);\n\n  scene.traverse(function(e) {\n    if (e instanceof THREE.Mesh) {\n      e.rotation.x += 0.02;\n      e.rotation.y += 0.02;\n      e.rotation.z += 0.02;\n    }\n  });\n\n  renderer.render(scene, camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-16/2.jpeg\"/>\n\n### \n\n* \n*   THREE.SceneUtils.createMultiMaterialObject\n\n\n\n``` javascript\nvar scene = new THREE.Scene;\nvar camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 10, 130);\n\nvar renderer = new THREE.WebGLRenderer();\nrenderer.setClearColor(new THREE.Color(0x000000, 1.0));\nrenderer.setSize(window.innerWidth, window.innerHeight);\n\ncamera.position.set(-50, 40, 50);\ncamera.lookAt(scene.position);\n\n// \nfunction addCube() {\n  var cubeSize = Math.ceil(3 + (Math.random() * 3));\n  var cubeGeometry = new THREE.BoxGeometry(cubeSize, cubeSize, cubeSize);\n  // \n  var cubeMaterial = new THREE.MeshDepthMaterial();\n  // \n  var colorMaterial = new THREE.MeshBasicMaterial({\n      color:0x00ff00,\n      transparent:true,\n      blending:THREE.MultiplyBlending\n  });\n\n  var cube = new THREE.SceneUtils.createMultiMaterialObject(cubeGeometry,[\n     colorMaterial,cubeMaterial\n  ]);\n\n  cube.children[1].scale.set(0.99,0.99,0.99);\n  cube.castShadow = true;\n  cube.position.set(\n          -60 + Math.round(Math.random() * 100),\n          Math.round(Math.random() * 10),\n          -100 + Math.round(Math.random() * 150)\n\n  );\n\n  scene.add(cube);\n}\n\n\nfor (var i = 0; i < 100; i++) {\n  addCube();\n}\n\ndocument.body.appendChild(renderer.domElement);\n\nrender();\n\nfunction render() {\n  requestAnimationFrame(render);\n\n  scene.traverse(function(e) {\n    if (e instanceof THREE.Mesh) {\n      e.rotation.x += 0.02;\n      e.rotation.y += 0.02;\n      e.rotation.z += 0.02;\n    }\n  });\n\n  renderer.render(scene, camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-16/3.jpeg\"/>\n\n### \n\n* MeshNormalMaterial \n* \n\n#### \n\n* wireframe \n* wireframeLineWidth \n* shading \n\n\n\n``` javascript\nvar shareObj = share();\n\nvar cubeGeometry = new THREE.BoxGeometry(5, 5, 5);\n// \nvar cubeMaterial = new THREE.MeshNormalMaterial({ color: 0x7777ff });\n\nvar cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n\nshareObj.scene.add(cube);\n\nshareObj.camera.position.set(-25, 30, 25);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\nvar ambiLight = new THREE.AmbientLight('#1c1c1c');\nshareObj.scene.add(ambiLight);\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40,60,10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n  cube.rotation.y  += 0.01;\n  requestAnimationFrame(render);\n}\n\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-16/4.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/15\n","slug":"webgl-2017-07-16","published":1,"updated":"2018-02-10T09:08:00.902Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbr002kfdld6k6ko91s","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>Phong </li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>id </li>\n<li>name </li>\n<li>opacity </li>\n<li>transparent </li>\n<li>overdraw </li>\n<li>visible </li>\n<li>needsUpdate </li>\n<li></li>\n<li></li>\n</ul>\n<a id=\"more\"></a>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>color </li>\n<li>wireframe  true </li>\n<li>fog  </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">5</span>, <span class=\"number\">5</span>, <span class=\"number\">5</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0xff0000</span> &#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry, cubeMaterial);</div><div class=\"line\">cube.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> sphereGeometry = <span class=\"keyword\">new</span> THREE.SphereGeometry(<span class=\"number\">5</span>, <span class=\"number\">20</span>, <span class=\"number\">20</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> sphereMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0x770077</span>,<span class=\"attr\">wireframe</span>:<span class=\"literal\">true</span> &#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> sphere = <span class=\"keyword\">new</span> THREE.Mesh(sphereGeometry, sphereMaterial);</div><div class=\"line\"></div><div class=\"line\">sphere.position.set(<span class=\"number\">0</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>);</div><div class=\"line\"></div><div class=\"line\">cube.position = sphere.position;</div><div class=\"line\"></div><div class=\"line\">sphere.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(sphere);</div><div class=\"line\">shareObj.scene.add(cube);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ambiLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"string\">'#1c1c1c'</span>);</div><div class=\"line\">shareObj.scene.add(ambiLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\">  cube.rotation.y  += <span class=\"number\">0.01</span>;</div><div class=\"line\">  sphere.rotation.y  += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-16/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>wireframe </li>\n<li>writeframeLinewidth </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene;</div><div class=\"line\">scene.overrideMaterial = <span class=\"keyword\">new</span> THREE.MeshDepthMaterial();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">50</span>, <span class=\"built_in\">window</span>.innerWidth / <span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">10</span>, <span class=\"number\">130</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0x000000</span>, <span class=\"number\">1.0</span>));</div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth, <span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\">camera.position.set(<span class=\"number\">-50</span>, <span class=\"number\">40</span>, <span class=\"number\">50</span>);</div><div class=\"line\">camera.lookAt(scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCube</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeSize = <span class=\"built_in\">Math</span>.ceil(<span class=\"number\">3</span> + (<span class=\"built_in\">Math</span>.random() * <span class=\"number\">3</span>));</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(cubeSize, cubeSize, cubeSize);</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;</div><div class=\"line\">    color: <span class=\"built_in\">Math</span>.random() * <span class=\"number\">0xffffff</span></div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry, cubeMaterial);</div><div class=\"line\">  cube.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\">  cube.position.set(</div><div class=\"line\">    <span class=\"number\">-60</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">100</span>),</div><div class=\"line\">    <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">10</span>),</div><div class=\"line\">    <span class=\"number\">-100</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">150</span>)</div><div class=\"line\">  );</div><div class=\"line\">  scene.add(cube)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</div><div class=\"line\">  addCube();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\"></div><div class=\"line\">  scene.traverse(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> THREE.Mesh) &#123;</div><div class=\"line\">      e.rotation.x += <span class=\"number\">0.02</span>;</div><div class=\"line\">      e.rotation.y += <span class=\"number\">0.02</span>;</div><div class=\"line\">      e.rotation.z += <span class=\"number\">0.02</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  renderer.render(scene, camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-16/2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li>  THREE.SceneUtils.createMultiMaterialObject</li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene;</div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">45</span>, <span class=\"built_in\">window</span>.innerWidth / <span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">10</span>, <span class=\"number\">130</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0x000000</span>, <span class=\"number\">1.0</span>));</div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth, <span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\">camera.position.set(<span class=\"number\">-50</span>, <span class=\"number\">40</span>, <span class=\"number\">50</span>);</div><div class=\"line\">camera.lookAt(scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCube</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeSize = <span class=\"built_in\">Math</span>.ceil(<span class=\"number\">3</span> + (<span class=\"built_in\">Math</span>.random() * <span class=\"number\">3</span>));</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(cubeSize, cubeSize, cubeSize);</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshDepthMaterial();</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">var</span> colorMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial(&#123;</div><div class=\"line\">      color:<span class=\"number\">0x00ff00</span>,</div><div class=\"line\">      transparent:<span class=\"literal\">true</span>,</div><div class=\"line\">      blending:THREE.MultiplyBlending</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.SceneUtils.createMultiMaterialObject(cubeGeometry,[</div><div class=\"line\">     colorMaterial,cubeMaterial</div><div class=\"line\">  ]);</div><div class=\"line\"></div><div class=\"line\">  cube.children[<span class=\"number\">1</span>].scale.set(<span class=\"number\">0.99</span>,<span class=\"number\">0.99</span>,<span class=\"number\">0.99</span>);</div><div class=\"line\">  cube.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\">  cube.position.set(</div><div class=\"line\">          <span class=\"number\">-60</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">100</span>),</div><div class=\"line\">          <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">10</span>),</div><div class=\"line\">          <span class=\"number\">-100</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">150</span>)</div><div class=\"line\"></div><div class=\"line\">  );</div><div class=\"line\"></div><div class=\"line\">  scene.add(cube);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</div><div class=\"line\">  addCube();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\"></div><div class=\"line\">  scene.traverse(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> THREE.Mesh) &#123;</div><div class=\"line\">      e.rotation.x += <span class=\"number\">0.02</span>;</div><div class=\"line\">      e.rotation.y += <span class=\"number\">0.02</span>;</div><div class=\"line\">      e.rotation.z += <span class=\"number\">0.02</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  renderer.render(scene, camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-16/3.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>MeshNormalMaterial </li>\n<li></li>\n</ul>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>wireframe </li>\n<li>wireframeLineWidth </li>\n<li>shading </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">5</span>, <span class=\"number\">5</span>, <span class=\"number\">5</span>);</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0x7777ff</span> &#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry, cubeMaterial);</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(cube);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ambiLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"string\">'#1c1c1c'</span>);</div><div class=\"line\">shareObj.scene.add(ambiLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\">  cube.rotation.y  += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-16/4.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/15\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/15</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>Phong </li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>id </li>\n<li>name </li>\n<li>opacity </li>\n<li>transparent </li>\n<li>overdraw </li>\n<li>visible </li>\n<li>needsUpdate </li>\n<li></li>\n<li></li>\n</ul>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>color </li>\n<li>wireframe  true </li>\n<li>fog  </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">5</span>, <span class=\"number\">5</span>, <span class=\"number\">5</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0xff0000</span> &#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry, cubeMaterial);</div><div class=\"line\">cube.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> sphereGeometry = <span class=\"keyword\">new</span> THREE.SphereGeometry(<span class=\"number\">5</span>, <span class=\"number\">20</span>, <span class=\"number\">20</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> sphereMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0x770077</span>,<span class=\"attr\">wireframe</span>:<span class=\"literal\">true</span> &#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> sphere = <span class=\"keyword\">new</span> THREE.Mesh(sphereGeometry, sphereMaterial);</div><div class=\"line\"></div><div class=\"line\">sphere.position.set(<span class=\"number\">0</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>);</div><div class=\"line\"></div><div class=\"line\">cube.position = sphere.position;</div><div class=\"line\"></div><div class=\"line\">sphere.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(sphere);</div><div class=\"line\">shareObj.scene.add(cube);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ambiLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"string\">'#1c1c1c'</span>);</div><div class=\"line\">shareObj.scene.add(ambiLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\">  cube.rotation.y  += <span class=\"number\">0.01</span>;</div><div class=\"line\">  sphere.rotation.y  += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-16/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>wireframe </li>\n<li>writeframeLinewidth </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene;</div><div class=\"line\">scene.overrideMaterial = <span class=\"keyword\">new</span> THREE.MeshDepthMaterial();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">50</span>, <span class=\"built_in\">window</span>.innerWidth / <span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">10</span>, <span class=\"number\">130</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0x000000</span>, <span class=\"number\">1.0</span>));</div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth, <span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\">camera.position.set(<span class=\"number\">-50</span>, <span class=\"number\">40</span>, <span class=\"number\">50</span>);</div><div class=\"line\">camera.lookAt(scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCube</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeSize = <span class=\"built_in\">Math</span>.ceil(<span class=\"number\">3</span> + (<span class=\"built_in\">Math</span>.random() * <span class=\"number\">3</span>));</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(cubeSize, cubeSize, cubeSize);</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;</div><div class=\"line\">    color: <span class=\"built_in\">Math</span>.random() * <span class=\"number\">0xffffff</span></div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry, cubeMaterial);</div><div class=\"line\">  cube.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\">  cube.position.set(</div><div class=\"line\">    <span class=\"number\">-60</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">100</span>),</div><div class=\"line\">    <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">10</span>),</div><div class=\"line\">    <span class=\"number\">-100</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">150</span>)</div><div class=\"line\">  );</div><div class=\"line\">  scene.add(cube)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</div><div class=\"line\">  addCube();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\"></div><div class=\"line\">  scene.traverse(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> THREE.Mesh) &#123;</div><div class=\"line\">      e.rotation.x += <span class=\"number\">0.02</span>;</div><div class=\"line\">      e.rotation.y += <span class=\"number\">0.02</span>;</div><div class=\"line\">      e.rotation.z += <span class=\"number\">0.02</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  renderer.render(scene, camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-16/2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li>  THREE.SceneUtils.createMultiMaterialObject</li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene;</div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">45</span>, <span class=\"built_in\">window</span>.innerWidth / <span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">10</span>, <span class=\"number\">130</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0x000000</span>, <span class=\"number\">1.0</span>));</div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth, <span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\">camera.position.set(<span class=\"number\">-50</span>, <span class=\"number\">40</span>, <span class=\"number\">50</span>);</div><div class=\"line\">camera.lookAt(scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCube</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeSize = <span class=\"built_in\">Math</span>.ceil(<span class=\"number\">3</span> + (<span class=\"built_in\">Math</span>.random() * <span class=\"number\">3</span>));</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(cubeSize, cubeSize, cubeSize);</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshDepthMaterial();</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">var</span> colorMaterial = <span class=\"keyword\">new</span> THREE.MeshBasicMaterial(&#123;</div><div class=\"line\">      color:<span class=\"number\">0x00ff00</span>,</div><div class=\"line\">      transparent:<span class=\"literal\">true</span>,</div><div class=\"line\">      blending:THREE.MultiplyBlending</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.SceneUtils.createMultiMaterialObject(cubeGeometry,[</div><div class=\"line\">     colorMaterial,cubeMaterial</div><div class=\"line\">  ]);</div><div class=\"line\"></div><div class=\"line\">  cube.children[<span class=\"number\">1</span>].scale.set(<span class=\"number\">0.99</span>,<span class=\"number\">0.99</span>,<span class=\"number\">0.99</span>);</div><div class=\"line\">  cube.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\">  cube.position.set(</div><div class=\"line\">          <span class=\"number\">-60</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">100</span>),</div><div class=\"line\">          <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">10</span>),</div><div class=\"line\">          <span class=\"number\">-100</span> + <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">150</span>)</div><div class=\"line\"></div><div class=\"line\">  );</div><div class=\"line\"></div><div class=\"line\">  scene.add(cube);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</div><div class=\"line\">  addCube();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\"></div><div class=\"line\">  scene.traverse(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> THREE.Mesh) &#123;</div><div class=\"line\">      e.rotation.x += <span class=\"number\">0.02</span>;</div><div class=\"line\">      e.rotation.y += <span class=\"number\">0.02</span>;</div><div class=\"line\">      e.rotation.z += <span class=\"number\">0.02</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  renderer.render(scene, camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-16/3.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>MeshNormalMaterial </li>\n<li></li>\n</ul>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>wireframe </li>\n<li>wireframeLineWidth </li>\n<li>shading </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">5</span>, <span class=\"number\">5</span>, <span class=\"number\">5</span>);</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshNormalMaterial(&#123; <span class=\"attr\">color</span>: <span class=\"number\">0x7777ff</span> &#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry, cubeMaterial);</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(cube);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">-25</span>, <span class=\"number\">30</span>, <span class=\"number\">25</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ambiLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"string\">'#1c1c1c'</span>);</div><div class=\"line\">shareObj.scene.add(ambiLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\">  cube.rotation.y  += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-16/4.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/15\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/15</a></p>"},{"title":"Three.js--","comments":1,"toc":true,"date":"2017-07-18T13:09:11.000Z","_content":"\n### \n\n#### \n\n*  THREE.Particle \n*  CanvasRenderer \n* WebGLRenderer  THREE.ParticleSystem \n\n#### \n\n* color \n* map \n* size \n\n<!-- more -->\n\n\n\n``` javascript\nvar shareObj = share(false);\n\nshareObj.camera.position.set(0, 0, 115);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\ncreateSprites();\nvar cloud;\n// \nfunction createSprites(){\n  var geom = new THREE.Geometry();\n  var material = new THREE.PointsMaterial({\n    size:5,\n    vertexColors:true,\n    opacity:.5,\n    transparent:true,\n    sizeAttenuation:true,\n    color:0xffffff\n  });\n  for(var x = -5;x<5;x++){\n    for(var y = -5;y<5;y++){\n      var particle = new THREE.Vector3(x*10,y*10,0);\n      geom.vertices.push(particle);\n      var color = new THREE.Color(0x00ffff);\n      color.setHSL(color.getHSL().h,color.getHSL().s,Math.random() * color.getHSL().l);\n      geom.colors.push(color);\n    }\n  }\n  cloud = new THREE.Points(geom,material);\n  shareObj.scene.add(cloud);\n}\n\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  cloud.rotation.x += 0.01;\n  cloud.rotation.y += 0.01;\n  cloud.rotation.z += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-18/1.jpeg\"/>\n\n### \n\n#### ParticleCanvasMaterial \n\n* color \n* program \n* opacity \n* transparent  \n\n#### WebGLRenderer \n\n*  ParticleCanvasMaterial\n*  ParticleBasicMaterial\n*  map canvas\n\n#### \n\n* ImageUtils.loadTexture \n*  map \n*  blending \n\ncanvas\n\n``` javascript\nvar shareObj = share(false);\n\nshareObj.camera.position.set(0, 0, 65);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction getTexture(){\n  var canvas = document.createElement('canvas');\n  canvas.width = 32;\n  canvas.height = 32;\n\n  var ctx = canvas.getContext('2d');\n  ctx.translate(-81,-84);\n  ctx.fillStyle = 'white';\n  ctx.beginPath();\n  ctx.moveTo(91,96);\n  ctx.bezierCurveTo(88,96,87,99,87,101);\n  ctx.bezierCurveTo(87,103,88,106,91,106);\n  ctx.bezierCurveTo(94,106,95,103,95,101);\n  ctx.bezierCurveTo(95,99,94,96,91,96);\n\n  ctx.moveTo(103,96);\n  ctx.bezierCurveTo(100,96,99,99,99,101);\n  ctx.bezierCurveTo(99,103,100,106,103,106);\n  ctx.bezierCurveTo(106,106,107,103,107,101)\n  ctx.bezierCurveTo(107,99,106,96,103,96);\n\n  ctx.fill();\n\n  var texture = new THREE.Texture(canvas);\n  texture.needsUpdate = true;\n  return texture;\n\n}\n\ncreateSprites();\nvar cloud;\n// \nfunction createSprites(){\n  var geom = new THREE.Geometry();\n  var material = new THREE.PointsMaterial({\n    size:5,\n    vertexColors:true,\n    opacity:.5,\n    transparent:true,\n    sizeAttenuation:true,\n    color:0xffffff,\n    map: getTexture()\n  });\n  for(var x = -5;x<5;x++){\n    for(var y = -5;y<5;y++){\n      var particle = new THREE.Vector3(x*10,y*10,0);\n      geom.vertices.push(particle);\n      var color = new THREE.Color(0x00ffff);\n      color.setHSL(color.getHSL().h,color.getHSL().s,Math.random() * color.getHSL().l);\n      geom.colors.push(color);\n    }\n  }\n  cloud = new THREE.Points(geom,material);\n  shareObj.scene.add(cloud);\n}\n\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  cloud.rotation.x += 0.01;\n  cloud.rotation.y += 0.01;\n  cloud.rotation.z += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-18/2.jpeg\"/>\n\npng\n\n``` javascript\nvar shareObj = share(false);\n\nshareObj.camera.position.set(0, 0, 65);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\ncreateSprites();\nvar cloud;\n// \nfunction createSprites(){\n  if(cloud){\n      shareObj.scene.remove(cloud);\n  }\n  var texture = new THREE.ImageUtils.loadTexture('./yudi.png');\n  var geom = new THREE.Geometry();\n  var material = new THREE.PointsMaterial({\n    size:10,\n    transparent:true,\n    opacity : 0.3,\n    map:texture,\n    // blending:THREE.AdditiveBlending,\n    sizeAttenuation:true,\n    color:0xffffff\n  });\n  var range = 600;\n  for(var i = 0;i<1000;i++){\n      var particle = new THREE.Vector3(\n        Math.random() * range - range/2,\n        Math.random() * range - range/2,\n        Math.random() * range - range/2\n      );\n      particle.velocityY = 0.1 + Math.random() /5;\n      particle.velocityX = (Math.random()-0.5) / 3;\n      geom.vertices.push(particle);\n  }\n  cloud = new THREE.Points(geom,material);\n  cloud.sortParticles = true;\n  shareObj.scene.add(cloud);\n}\n\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\nvar startTime = Date.now();\n\nfunction render() {\n\n  if(Date.now() - startTime > 80){\n      createSprites();\n      startTime = Date.now();\n\n  }\n\n  requestAnimationFrame(render);\n  // \n  var vertices = cloud.geometry.vertices;\n  vertices.forEach(function(v){\n      v.y = v.y - v.velocityY;\n      v.x = v.x - v.velocityX;\n      if(v.y <= 0 ) v.y = 60;\n      if(v.x <= -20 || v.x >= 20) v.velocityX = v.velocityX -1;\n  });\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-18/3.jpeg\"/>\n\n### \n\n####   THREE.Sprit \n\n*  HUD\n* \n\n#### \n\n* color \n* map \n* blending \n* useScreenCoordinates \n\n\n\n``` javascript\nvar shareObj = share(false);\n\nshareObj.camera.position.set(0, 0, 65);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\ncreateSprites();\nvar group;\n// \nfunction createSprites(){\n  group = new THREE.Object3D();\n  var range = 200;\n  for(var i=0;i<500;i++){\n      group.add(createSprite(10,false,0.6,0xffffff,i%5,range));\n\n  }\n  shareObj.scene.add(group);\n}\n\nfunction getTexture(){\n   return new THREE.ImageUtils.loadTexture('./yudi.png');\n}\n\nfunction createSprite(size,transparent,opacity,color,spriteNumber,range){\n    var spriteMaterial = new THREE.SpriteMaterial({\n       opacity:opacity,\n        color:color,\n        transparent:transparent,\n        map:getTexture()\n\n    });\n\n    spriteMaterial.map.offset = new THREE.Vector2(0.2 * spriteNumber, 0 );\n    spriteMaterial.map.repeat = new THREE.Vector2(1/5,1);\n    spriteMaterial.depthTest = false;\n    // spriteMaterial.blending = THREE.AdditiveBlending;\n    // \n    var sprite = new THREE.Sprite(spriteMaterial);\n    // \n    sprite.scale.set(size,size,size);\n    sprite.position.set(\n            Math.random() * range - range/2,\n            Math.random() * range - range/2,\n            Math.random() * range - range/2\n    );\n    sprite.velocityX = 5;\n    return sprite;\n}\n\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render(){\n    group.rotation.x += 0.01;\n\n    requestAnimationFrame(render);\n\n\n    shareObj.renderer.render(shareObj.scene,shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-18/4.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/17\n","source":"_posts/webgl-2017-07-18.md","raw":"---\ntitle: Three.js--\ncomments: true\ntoc: true\ndate: 2017-07-18 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n    - 'three.js'\n---\n\n### \n\n#### \n\n*  THREE.Particle \n*  CanvasRenderer \n* WebGLRenderer  THREE.ParticleSystem \n\n#### \n\n* color \n* map \n* size \n\n<!-- more -->\n\n\n\n``` javascript\nvar shareObj = share(false);\n\nshareObj.camera.position.set(0, 0, 115);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\ncreateSprites();\nvar cloud;\n// \nfunction createSprites(){\n  var geom = new THREE.Geometry();\n  var material = new THREE.PointsMaterial({\n    size:5,\n    vertexColors:true,\n    opacity:.5,\n    transparent:true,\n    sizeAttenuation:true,\n    color:0xffffff\n  });\n  for(var x = -5;x<5;x++){\n    for(var y = -5;y<5;y++){\n      var particle = new THREE.Vector3(x*10,y*10,0);\n      geom.vertices.push(particle);\n      var color = new THREE.Color(0x00ffff);\n      color.setHSL(color.getHSL().h,color.getHSL().s,Math.random() * color.getHSL().l);\n      geom.colors.push(color);\n    }\n  }\n  cloud = new THREE.Points(geom,material);\n  shareObj.scene.add(cloud);\n}\n\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  cloud.rotation.x += 0.01;\n  cloud.rotation.y += 0.01;\n  cloud.rotation.z += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-18/1.jpeg\"/>\n\n### \n\n#### ParticleCanvasMaterial \n\n* color \n* program \n* opacity \n* transparent  \n\n#### WebGLRenderer \n\n*  ParticleCanvasMaterial\n*  ParticleBasicMaterial\n*  map canvas\n\n#### \n\n* ImageUtils.loadTexture \n*  map \n*  blending \n\ncanvas\n\n``` javascript\nvar shareObj = share(false);\n\nshareObj.camera.position.set(0, 0, 65);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\n// \nfunction getTexture(){\n  var canvas = document.createElement('canvas');\n  canvas.width = 32;\n  canvas.height = 32;\n\n  var ctx = canvas.getContext('2d');\n  ctx.translate(-81,-84);\n  ctx.fillStyle = 'white';\n  ctx.beginPath();\n  ctx.moveTo(91,96);\n  ctx.bezierCurveTo(88,96,87,99,87,101);\n  ctx.bezierCurveTo(87,103,88,106,91,106);\n  ctx.bezierCurveTo(94,106,95,103,95,101);\n  ctx.bezierCurveTo(95,99,94,96,91,96);\n\n  ctx.moveTo(103,96);\n  ctx.bezierCurveTo(100,96,99,99,99,101);\n  ctx.bezierCurveTo(99,103,100,106,103,106);\n  ctx.bezierCurveTo(106,106,107,103,107,101)\n  ctx.bezierCurveTo(107,99,106,96,103,96);\n\n  ctx.fill();\n\n  var texture = new THREE.Texture(canvas);\n  texture.needsUpdate = true;\n  return texture;\n\n}\n\ncreateSprites();\nvar cloud;\n// \nfunction createSprites(){\n  var geom = new THREE.Geometry();\n  var material = new THREE.PointsMaterial({\n    size:5,\n    vertexColors:true,\n    opacity:.5,\n    transparent:true,\n    sizeAttenuation:true,\n    color:0xffffff,\n    map: getTexture()\n  });\n  for(var x = -5;x<5;x++){\n    for(var y = -5;y<5;y++){\n      var particle = new THREE.Vector3(x*10,y*10,0);\n      geom.vertices.push(particle);\n      var color = new THREE.Color(0x00ffff);\n      color.setHSL(color.getHSL().h,color.getHSL().s,Math.random() * color.getHSL().l);\n      geom.colors.push(color);\n    }\n  }\n  cloud = new THREE.Points(geom,material);\n  shareObj.scene.add(cloud);\n}\n\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render() {\n  cloud.rotation.x += 0.01;\n  cloud.rotation.y += 0.01;\n  cloud.rotation.z += 0.01;\n  requestAnimationFrame(render);\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-18/2.jpeg\"/>\n\npng\n\n``` javascript\nvar shareObj = share(false);\n\nshareObj.camera.position.set(0, 0, 65);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\ncreateSprites();\nvar cloud;\n// \nfunction createSprites(){\n  if(cloud){\n      shareObj.scene.remove(cloud);\n  }\n  var texture = new THREE.ImageUtils.loadTexture('./yudi.png');\n  var geom = new THREE.Geometry();\n  var material = new THREE.PointsMaterial({\n    size:10,\n    transparent:true,\n    opacity : 0.3,\n    map:texture,\n    // blending:THREE.AdditiveBlending,\n    sizeAttenuation:true,\n    color:0xffffff\n  });\n  var range = 600;\n  for(var i = 0;i<1000;i++){\n      var particle = new THREE.Vector3(\n        Math.random() * range - range/2,\n        Math.random() * range - range/2,\n        Math.random() * range - range/2\n      );\n      particle.velocityY = 0.1 + Math.random() /5;\n      particle.velocityX = (Math.random()-0.5) / 3;\n      geom.vertices.push(particle);\n  }\n  cloud = new THREE.Points(geom,material);\n  cloud.sortParticles = true;\n  shareObj.scene.add(cloud);\n}\n\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\nvar startTime = Date.now();\n\nfunction render() {\n\n  if(Date.now() - startTime > 80){\n      createSprites();\n      startTime = Date.now();\n\n  }\n\n  requestAnimationFrame(render);\n  // \n  var vertices = cloud.geometry.vertices;\n  vertices.forEach(function(v){\n      v.y = v.y - v.velocityY;\n      v.x = v.x - v.velocityX;\n      if(v.y <= 0 ) v.y = 60;\n      if(v.x <= -20 || v.x >= 20) v.velocityX = v.velocityX -1;\n  });\n  shareObj.renderer.render(shareObj.scene, shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-18/3.jpeg\"/>\n\n### \n\n####   THREE.Sprit \n\n*  HUD\n* \n\n#### \n\n* color \n* map \n* blending \n* useScreenCoordinates \n\n\n\n``` javascript\nvar shareObj = share(false);\n\nshareObj.camera.position.set(0, 0, 65);\n\nshareObj.camera.lookAt(shareObj.scene.position);\n\ncreateSprites();\nvar group;\n// \nfunction createSprites(){\n  group = new THREE.Object3D();\n  var range = 200;\n  for(var i=0;i<500;i++){\n      group.add(createSprite(10,false,0.6,0xffffff,i%5,range));\n\n  }\n  shareObj.scene.add(group);\n}\n\nfunction getTexture(){\n   return new THREE.ImageUtils.loadTexture('./yudi.png');\n}\n\nfunction createSprite(size,transparent,opacity,color,spriteNumber,range){\n    var spriteMaterial = new THREE.SpriteMaterial({\n       opacity:opacity,\n        color:color,\n        transparent:transparent,\n        map:getTexture()\n\n    });\n\n    spriteMaterial.map.offset = new THREE.Vector2(0.2 * spriteNumber, 0 );\n    spriteMaterial.map.repeat = new THREE.Vector2(1/5,1);\n    spriteMaterial.depthTest = false;\n    // spriteMaterial.blending = THREE.AdditiveBlending;\n    // \n    var sprite = new THREE.Sprite(spriteMaterial);\n    // \n    sprite.scale.set(size,size,size);\n    sprite.position.set(\n            Math.random() * range - range/2,\n            Math.random() * range - range/2,\n            Math.random() * range - range/2\n    );\n    sprite.velocityX = 5;\n    return sprite;\n}\n\n\nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40, 60, 10);\nspotLight.castShadow = true;\n\nshareObj.scene.add(spotLight);\n\ndocument.body.appendChild(shareObj.renderer.domElement);\n\nrender();\n\nfunction render(){\n    group.rotation.x += 0.01;\n\n    requestAnimationFrame(render);\n\n\n    shareObj.renderer.render(shareObj.scene,shareObj.camera);\n\n}\n```\n\n\n\n<img width=\"500\" src=\"webgl-2017-07-18/4.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/17\n","slug":"webgl-2017-07-18","published":1,"updated":"2018-02-10T09:08:00.902Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbt002nfdld2gz3jxdm","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li> THREE.Particle </li>\n<li> CanvasRenderer </li>\n<li>WebGLRenderer  THREE.ParticleSystem </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>color </li>\n<li>map </li>\n<li>size </li>\n</ul>\n<a id=\"more\"></a>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share(<span class=\"literal\">false</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">115</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\">createSprites();</div><div class=\"line\"><span class=\"keyword\">var</span> cloud;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createSprites</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> geom = <span class=\"keyword\">new</span> THREE.Geometry();</div><div class=\"line\">  <span class=\"keyword\">var</span> material = <span class=\"keyword\">new</span> THREE.PointsMaterial(&#123;</div><div class=\"line\">    size:<span class=\"number\">5</span>,</div><div class=\"line\">    vertexColors:<span class=\"literal\">true</span>,</div><div class=\"line\">    opacity:<span class=\"number\">.5</span>,</div><div class=\"line\">    transparent:<span class=\"literal\">true</span>,</div><div class=\"line\">    sizeAttenuation:<span class=\"literal\">true</span>,</div><div class=\"line\">    color:<span class=\"number\">0xffffff</span></div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> x = <span class=\"number\">-5</span>;x&lt;<span class=\"number\">5</span>;x++)&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> y = <span class=\"number\">-5</span>;y&lt;<span class=\"number\">5</span>;y++)&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> particle = <span class=\"keyword\">new</span> THREE.Vector3(x*<span class=\"number\">10</span>,y*<span class=\"number\">10</span>,<span class=\"number\">0</span>);</div><div class=\"line\">      geom.vertices.push(particle);</div><div class=\"line\">      <span class=\"keyword\">var</span> color = <span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0x00ffff</span>);</div><div class=\"line\">      color.setHSL(color.getHSL().h,color.getHSL().s,<span class=\"built_in\">Math</span>.random() * color.getHSL().l);</div><div class=\"line\">      geom.colors.push(color);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  cloud = <span class=\"keyword\">new</span> THREE.Points(geom,material);</div><div class=\"line\">  shareObj.scene.add(cloud);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  cloud.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  cloud.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  cloud.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-18/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"ParticleCanvasMaterial-\"><a href=\"#ParticleCanvasMaterial-\" class=\"headerlink\" title=\"ParticleCanvasMaterial \"></a>ParticleCanvasMaterial </h4><ul>\n<li>color </li>\n<li>program </li>\n<li>opacity </li>\n<li>transparent  </li>\n</ul>\n<h4 id=\"WebGLRenderer-\"><a href=\"#WebGLRenderer-\" class=\"headerlink\" title=\"WebGLRenderer \"></a>WebGLRenderer </h4><ul>\n<li> ParticleCanvasMaterial</li>\n<li> ParticleBasicMaterial</li>\n<li> map canvas</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>ImageUtils.loadTexture </li>\n<li> map </li>\n<li> blending </li>\n</ul>\n<p>canvas</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share(<span class=\"literal\">false</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">65</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getTexture</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'canvas'</span>);</div><div class=\"line\">  canvas.width = <span class=\"number\">32</span>;</div><div class=\"line\">  canvas.height = <span class=\"number\">32</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>);</div><div class=\"line\">  ctx.translate(<span class=\"number\">-81</span>,<span class=\"number\">-84</span>);</div><div class=\"line\">  ctx.fillStyle = <span class=\"string\">'white'</span>;</div><div class=\"line\">  ctx.beginPath();</div><div class=\"line\">  ctx.moveTo(<span class=\"number\">91</span>,<span class=\"number\">96</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">88</span>,<span class=\"number\">96</span>,<span class=\"number\">87</span>,<span class=\"number\">99</span>,<span class=\"number\">87</span>,<span class=\"number\">101</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">87</span>,<span class=\"number\">103</span>,<span class=\"number\">88</span>,<span class=\"number\">106</span>,<span class=\"number\">91</span>,<span class=\"number\">106</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">94</span>,<span class=\"number\">106</span>,<span class=\"number\">95</span>,<span class=\"number\">103</span>,<span class=\"number\">95</span>,<span class=\"number\">101</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">95</span>,<span class=\"number\">99</span>,<span class=\"number\">94</span>,<span class=\"number\">96</span>,<span class=\"number\">91</span>,<span class=\"number\">96</span>);</div><div class=\"line\"></div><div class=\"line\">  ctx.moveTo(<span class=\"number\">103</span>,<span class=\"number\">96</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">100</span>,<span class=\"number\">96</span>,<span class=\"number\">99</span>,<span class=\"number\">99</span>,<span class=\"number\">99</span>,<span class=\"number\">101</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">99</span>,<span class=\"number\">103</span>,<span class=\"number\">100</span>,<span class=\"number\">106</span>,<span class=\"number\">103</span>,<span class=\"number\">106</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">106</span>,<span class=\"number\">106</span>,<span class=\"number\">107</span>,<span class=\"number\">103</span>,<span class=\"number\">107</span>,<span class=\"number\">101</span>)</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">107</span>,<span class=\"number\">99</span>,<span class=\"number\">106</span>,<span class=\"number\">96</span>,<span class=\"number\">103</span>,<span class=\"number\">96</span>);</div><div class=\"line\"></div><div class=\"line\">  ctx.fill();</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> texture = <span class=\"keyword\">new</span> THREE.Texture(canvas);</div><div class=\"line\">  texture.needsUpdate = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> texture;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">createSprites();</div><div class=\"line\"><span class=\"keyword\">var</span> cloud;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createSprites</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> geom = <span class=\"keyword\">new</span> THREE.Geometry();</div><div class=\"line\">  <span class=\"keyword\">var</span> material = <span class=\"keyword\">new</span> THREE.PointsMaterial(&#123;</div><div class=\"line\">    size:<span class=\"number\">5</span>,</div><div class=\"line\">    vertexColors:<span class=\"literal\">true</span>,</div><div class=\"line\">    opacity:<span class=\"number\">.5</span>,</div><div class=\"line\">    transparent:<span class=\"literal\">true</span>,</div><div class=\"line\">    sizeAttenuation:<span class=\"literal\">true</span>,</div><div class=\"line\">    color:<span class=\"number\">0xffffff</span>,</div><div class=\"line\">    map: getTexture()</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> x = <span class=\"number\">-5</span>;x&lt;<span class=\"number\">5</span>;x++)&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> y = <span class=\"number\">-5</span>;y&lt;<span class=\"number\">5</span>;y++)&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> particle = <span class=\"keyword\">new</span> THREE.Vector3(x*<span class=\"number\">10</span>,y*<span class=\"number\">10</span>,<span class=\"number\">0</span>);</div><div class=\"line\">      geom.vertices.push(particle);</div><div class=\"line\">      <span class=\"keyword\">var</span> color = <span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0x00ffff</span>);</div><div class=\"line\">      color.setHSL(color.getHSL().h,color.getHSL().s,<span class=\"built_in\">Math</span>.random() * color.getHSL().l);</div><div class=\"line\">      geom.colors.push(color);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  cloud = <span class=\"keyword\">new</span> THREE.Points(geom,material);</div><div class=\"line\">  shareObj.scene.add(cloud);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  cloud.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  cloud.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  cloud.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-18/2.jpeg\"></p>\n<p>png</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share(<span class=\"literal\">false</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">65</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\">createSprites();</div><div class=\"line\"><span class=\"keyword\">var</span> cloud;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createSprites</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span>(cloud)&#123;</div><div class=\"line\">      shareObj.scene.remove(cloud);</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">var</span> texture = <span class=\"keyword\">new</span> THREE.ImageUtils.loadTexture(<span class=\"string\">'./yudi.png'</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> geom = <span class=\"keyword\">new</span> THREE.Geometry();</div><div class=\"line\">  <span class=\"keyword\">var</span> material = <span class=\"keyword\">new</span> THREE.PointsMaterial(&#123;</div><div class=\"line\">    size:<span class=\"number\">10</span>,</div><div class=\"line\">    transparent:<span class=\"literal\">true</span>,</div><div class=\"line\">    opacity : <span class=\"number\">0.3</span>,</div><div class=\"line\">    map:texture,</div><div class=\"line\">    <span class=\"comment\">// blending:THREE.AdditiveBlending,</span></div><div class=\"line\">    sizeAttenuation:<span class=\"literal\">true</span>,</div><div class=\"line\">    color:<span class=\"number\">0xffffff</span></div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> range = <span class=\"number\">600</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;i&lt;<span class=\"number\">1000</span>;i++)&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> particle = <span class=\"keyword\">new</span> THREE.Vector3(</div><div class=\"line\">        <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span>,</div><div class=\"line\">        <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span>,</div><div class=\"line\">        <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span></div><div class=\"line\">      );</div><div class=\"line\">      particle.velocityY = <span class=\"number\">0.1</span> + <span class=\"built_in\">Math</span>.random() /<span class=\"number\">5</span>;</div><div class=\"line\">      particle.velocityX = (<span class=\"built_in\">Math</span>.random()<span class=\"number\">-0.5</span>) / <span class=\"number\">3</span>;</div><div class=\"line\">      geom.vertices.push(particle);</div><div class=\"line\">  &#125;</div><div class=\"line\">  cloud = <span class=\"keyword\">new</span> THREE.Points(geom,material);</div><div class=\"line\">  cloud.sortParticles = <span class=\"literal\">true</span>;</div><div class=\"line\">  shareObj.scene.add(cloud);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"><span class=\"keyword\">var</span> startTime = <span class=\"built_in\">Date</span>.now();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">if</span>(<span class=\"built_in\">Date</span>.now() - startTime &gt; <span class=\"number\">80</span>)&#123;</div><div class=\"line\">      createSprites();</div><div class=\"line\">      startTime = <span class=\"built_in\">Date</span>.now();</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">var</span> vertices = cloud.geometry.vertices;</div><div class=\"line\">  vertices.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">v</span>)</span>&#123;</div><div class=\"line\">      v.y = v.y - v.velocityY;</div><div class=\"line\">      v.x = v.x - v.velocityX;</div><div class=\"line\">      <span class=\"keyword\">if</span>(v.y &lt;= <span class=\"number\">0</span> ) v.y = <span class=\"number\">60</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span>(v.x &lt;= <span class=\"number\">-20</span> || v.x &gt;= <span class=\"number\">20</span>) v.velocityX = v.velocityX <span class=\"number\">-1</span>;</div><div class=\"line\">  &#125;);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-18/3.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-THREE-Sprit-\"><a href=\"#-THREE-Sprit-\" class=\"headerlink\" title=\" THREE.Sprit \"></a> THREE.Sprit </h4><ul>\n<li> HUD</li>\n<li></li>\n</ul>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>color </li>\n<li>map </li>\n<li>blending </li>\n<li>useScreenCoordinates </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share(<span class=\"literal\">false</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">65</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\">createSprites();</div><div class=\"line\"><span class=\"keyword\">var</span> group;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createSprites</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  group = <span class=\"keyword\">new</span> THREE.Object3D();</div><div class=\"line\">  <span class=\"keyword\">var</span> range = <span class=\"number\">200</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">500</span>;i++)&#123;</div><div class=\"line\">      group.add(createSprite(<span class=\"number\">10</span>,<span class=\"literal\">false</span>,<span class=\"number\">0.6</span>,<span class=\"number\">0xffffff</span>,i%<span class=\"number\">5</span>,range));</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">  shareObj.scene.add(group);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getTexture</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> THREE.ImageUtils.loadTexture(<span class=\"string\">'./yudi.png'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createSprite</span>(<span class=\"params\">size,transparent,opacity,color,spriteNumber,range</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> spriteMaterial = <span class=\"keyword\">new</span> THREE.SpriteMaterial(&#123;</div><div class=\"line\">       opacity:opacity,</div><div class=\"line\">        color:color,</div><div class=\"line\">        transparent:transparent,</div><div class=\"line\">        map:getTexture()</div><div class=\"line\"></div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">    spriteMaterial.map.offset = <span class=\"keyword\">new</span> THREE.Vector2(<span class=\"number\">0.2</span> * spriteNumber, <span class=\"number\">0</span> );</div><div class=\"line\">    spriteMaterial.map.repeat = <span class=\"keyword\">new</span> THREE.Vector2(<span class=\"number\">1</span>/<span class=\"number\">5</span>,<span class=\"number\">1</span>);</div><div class=\"line\">    spriteMaterial.depthTest = <span class=\"literal\">false</span>;</div><div class=\"line\">    <span class=\"comment\">// spriteMaterial.blending = THREE.AdditiveBlending;</span></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">var</span> sprite = <span class=\"keyword\">new</span> THREE.Sprite(spriteMaterial);</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    sprite.scale.set(size,size,size);</div><div class=\"line\">    sprite.position.set(</div><div class=\"line\">            <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span>,</div><div class=\"line\">            <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span>,</div><div class=\"line\">            <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span></div><div class=\"line\">    );</div><div class=\"line\">    sprite.velocityX = <span class=\"number\">5</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> sprite;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    group.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">    requestAnimationFrame(render);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    shareObj.renderer.render(shareObj.scene,shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-18/4.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/17\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/17</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li> THREE.Particle </li>\n<li> CanvasRenderer </li>\n<li>WebGLRenderer  THREE.ParticleSystem </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>color </li>\n<li>map </li>\n<li>size </li>\n</ul>","more":"<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share(<span class=\"literal\">false</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">115</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\">createSprites();</div><div class=\"line\"><span class=\"keyword\">var</span> cloud;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createSprites</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> geom = <span class=\"keyword\">new</span> THREE.Geometry();</div><div class=\"line\">  <span class=\"keyword\">var</span> material = <span class=\"keyword\">new</span> THREE.PointsMaterial(&#123;</div><div class=\"line\">    size:<span class=\"number\">5</span>,</div><div class=\"line\">    vertexColors:<span class=\"literal\">true</span>,</div><div class=\"line\">    opacity:<span class=\"number\">.5</span>,</div><div class=\"line\">    transparent:<span class=\"literal\">true</span>,</div><div class=\"line\">    sizeAttenuation:<span class=\"literal\">true</span>,</div><div class=\"line\">    color:<span class=\"number\">0xffffff</span></div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> x = <span class=\"number\">-5</span>;x&lt;<span class=\"number\">5</span>;x++)&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> y = <span class=\"number\">-5</span>;y&lt;<span class=\"number\">5</span>;y++)&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> particle = <span class=\"keyword\">new</span> THREE.Vector3(x*<span class=\"number\">10</span>,y*<span class=\"number\">10</span>,<span class=\"number\">0</span>);</div><div class=\"line\">      geom.vertices.push(particle);</div><div class=\"line\">      <span class=\"keyword\">var</span> color = <span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0x00ffff</span>);</div><div class=\"line\">      color.setHSL(color.getHSL().h,color.getHSL().s,<span class=\"built_in\">Math</span>.random() * color.getHSL().l);</div><div class=\"line\">      geom.colors.push(color);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  cloud = <span class=\"keyword\">new</span> THREE.Points(geom,material);</div><div class=\"line\">  shareObj.scene.add(cloud);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  cloud.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  cloud.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  cloud.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-18/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"ParticleCanvasMaterial-\"><a href=\"#ParticleCanvasMaterial-\" class=\"headerlink\" title=\"ParticleCanvasMaterial \"></a>ParticleCanvasMaterial </h4><ul>\n<li>color </li>\n<li>program </li>\n<li>opacity </li>\n<li>transparent  </li>\n</ul>\n<h4 id=\"WebGLRenderer-\"><a href=\"#WebGLRenderer-\" class=\"headerlink\" title=\"WebGLRenderer \"></a>WebGLRenderer </h4><ul>\n<li> ParticleCanvasMaterial</li>\n<li> ParticleBasicMaterial</li>\n<li> map canvas</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>ImageUtils.loadTexture </li>\n<li> map </li>\n<li> blending </li>\n</ul>\n<p>canvas</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share(<span class=\"literal\">false</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">65</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getTexture</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'canvas'</span>);</div><div class=\"line\">  canvas.width = <span class=\"number\">32</span>;</div><div class=\"line\">  canvas.height = <span class=\"number\">32</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>);</div><div class=\"line\">  ctx.translate(<span class=\"number\">-81</span>,<span class=\"number\">-84</span>);</div><div class=\"line\">  ctx.fillStyle = <span class=\"string\">'white'</span>;</div><div class=\"line\">  ctx.beginPath();</div><div class=\"line\">  ctx.moveTo(<span class=\"number\">91</span>,<span class=\"number\">96</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">88</span>,<span class=\"number\">96</span>,<span class=\"number\">87</span>,<span class=\"number\">99</span>,<span class=\"number\">87</span>,<span class=\"number\">101</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">87</span>,<span class=\"number\">103</span>,<span class=\"number\">88</span>,<span class=\"number\">106</span>,<span class=\"number\">91</span>,<span class=\"number\">106</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">94</span>,<span class=\"number\">106</span>,<span class=\"number\">95</span>,<span class=\"number\">103</span>,<span class=\"number\">95</span>,<span class=\"number\">101</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">95</span>,<span class=\"number\">99</span>,<span class=\"number\">94</span>,<span class=\"number\">96</span>,<span class=\"number\">91</span>,<span class=\"number\">96</span>);</div><div class=\"line\"></div><div class=\"line\">  ctx.moveTo(<span class=\"number\">103</span>,<span class=\"number\">96</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">100</span>,<span class=\"number\">96</span>,<span class=\"number\">99</span>,<span class=\"number\">99</span>,<span class=\"number\">99</span>,<span class=\"number\">101</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">99</span>,<span class=\"number\">103</span>,<span class=\"number\">100</span>,<span class=\"number\">106</span>,<span class=\"number\">103</span>,<span class=\"number\">106</span>);</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">106</span>,<span class=\"number\">106</span>,<span class=\"number\">107</span>,<span class=\"number\">103</span>,<span class=\"number\">107</span>,<span class=\"number\">101</span>)</div><div class=\"line\">  ctx.bezierCurveTo(<span class=\"number\">107</span>,<span class=\"number\">99</span>,<span class=\"number\">106</span>,<span class=\"number\">96</span>,<span class=\"number\">103</span>,<span class=\"number\">96</span>);</div><div class=\"line\"></div><div class=\"line\">  ctx.fill();</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> texture = <span class=\"keyword\">new</span> THREE.Texture(canvas);</div><div class=\"line\">  texture.needsUpdate = <span class=\"literal\">true</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> texture;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">createSprites();</div><div class=\"line\"><span class=\"keyword\">var</span> cloud;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createSprites</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> geom = <span class=\"keyword\">new</span> THREE.Geometry();</div><div class=\"line\">  <span class=\"keyword\">var</span> material = <span class=\"keyword\">new</span> THREE.PointsMaterial(&#123;</div><div class=\"line\">    size:<span class=\"number\">5</span>,</div><div class=\"line\">    vertexColors:<span class=\"literal\">true</span>,</div><div class=\"line\">    opacity:<span class=\"number\">.5</span>,</div><div class=\"line\">    transparent:<span class=\"literal\">true</span>,</div><div class=\"line\">    sizeAttenuation:<span class=\"literal\">true</span>,</div><div class=\"line\">    color:<span class=\"number\">0xffffff</span>,</div><div class=\"line\">    map: getTexture()</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> x = <span class=\"number\">-5</span>;x&lt;<span class=\"number\">5</span>;x++)&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> y = <span class=\"number\">-5</span>;y&lt;<span class=\"number\">5</span>;y++)&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> particle = <span class=\"keyword\">new</span> THREE.Vector3(x*<span class=\"number\">10</span>,y*<span class=\"number\">10</span>,<span class=\"number\">0</span>);</div><div class=\"line\">      geom.vertices.push(particle);</div><div class=\"line\">      <span class=\"keyword\">var</span> color = <span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0x00ffff</span>);</div><div class=\"line\">      color.setHSL(color.getHSL().h,color.getHSL().s,<span class=\"built_in\">Math</span>.random() * color.getHSL().l);</div><div class=\"line\">      geom.colors.push(color);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  cloud = <span class=\"keyword\">new</span> THREE.Points(geom,material);</div><div class=\"line\">  shareObj.scene.add(cloud);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  cloud.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">  cloud.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">  cloud.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-18/2.jpeg\"></p>\n<p>png</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share(<span class=\"literal\">false</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">65</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\">createSprites();</div><div class=\"line\"><span class=\"keyword\">var</span> cloud;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createSprites</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span>(cloud)&#123;</div><div class=\"line\">      shareObj.scene.remove(cloud);</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">var</span> texture = <span class=\"keyword\">new</span> THREE.ImageUtils.loadTexture(<span class=\"string\">'./yudi.png'</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> geom = <span class=\"keyword\">new</span> THREE.Geometry();</div><div class=\"line\">  <span class=\"keyword\">var</span> material = <span class=\"keyword\">new</span> THREE.PointsMaterial(&#123;</div><div class=\"line\">    size:<span class=\"number\">10</span>,</div><div class=\"line\">    transparent:<span class=\"literal\">true</span>,</div><div class=\"line\">    opacity : <span class=\"number\">0.3</span>,</div><div class=\"line\">    map:texture,</div><div class=\"line\">    <span class=\"comment\">// blending:THREE.AdditiveBlending,</span></div><div class=\"line\">    sizeAttenuation:<span class=\"literal\">true</span>,</div><div class=\"line\">    color:<span class=\"number\">0xffffff</span></div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> range = <span class=\"number\">600</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;i&lt;<span class=\"number\">1000</span>;i++)&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> particle = <span class=\"keyword\">new</span> THREE.Vector3(</div><div class=\"line\">        <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span>,</div><div class=\"line\">        <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span>,</div><div class=\"line\">        <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span></div><div class=\"line\">      );</div><div class=\"line\">      particle.velocityY = <span class=\"number\">0.1</span> + <span class=\"built_in\">Math</span>.random() /<span class=\"number\">5</span>;</div><div class=\"line\">      particle.velocityX = (<span class=\"built_in\">Math</span>.random()<span class=\"number\">-0.5</span>) / <span class=\"number\">3</span>;</div><div class=\"line\">      geom.vertices.push(particle);</div><div class=\"line\">  &#125;</div><div class=\"line\">  cloud = <span class=\"keyword\">new</span> THREE.Points(geom,material);</div><div class=\"line\">  cloud.sortParticles = <span class=\"literal\">true</span>;</div><div class=\"line\">  shareObj.scene.add(cloud);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"><span class=\"keyword\">var</span> startTime = <span class=\"built_in\">Date</span>.now();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">if</span>(<span class=\"built_in\">Date</span>.now() - startTime &gt; <span class=\"number\">80</span>)&#123;</div><div class=\"line\">      createSprites();</div><div class=\"line\">      startTime = <span class=\"built_in\">Date</span>.now();</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">var</span> vertices = cloud.geometry.vertices;</div><div class=\"line\">  vertices.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">v</span>)</span>&#123;</div><div class=\"line\">      v.y = v.y - v.velocityY;</div><div class=\"line\">      v.x = v.x - v.velocityX;</div><div class=\"line\">      <span class=\"keyword\">if</span>(v.y &lt;= <span class=\"number\">0</span> ) v.y = <span class=\"number\">60</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span>(v.x &lt;= <span class=\"number\">-20</span> || v.x &gt;= <span class=\"number\">20</span>) v.velocityX = v.velocityX <span class=\"number\">-1</span>;</div><div class=\"line\">  &#125;);</div><div class=\"line\">  shareObj.renderer.render(shareObj.scene, shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-18/3.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-THREE-Sprit-\"><a href=\"#-THREE-Sprit-\" class=\"headerlink\" title=\" THREE.Sprit \"></a> THREE.Sprit </h4><ul>\n<li> HUD</li>\n<li></li>\n</ul>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>color </li>\n<li>map </li>\n<li>blending </li>\n<li>useScreenCoordinates </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> shareObj = share(<span class=\"literal\">false</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.position.set(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">65</span>);</div><div class=\"line\"></div><div class=\"line\">shareObj.camera.lookAt(shareObj.scene.position);</div><div class=\"line\"></div><div class=\"line\">createSprites();</div><div class=\"line\"><span class=\"keyword\">var</span> group;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createSprites</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  group = <span class=\"keyword\">new</span> THREE.Object3D();</div><div class=\"line\">  <span class=\"keyword\">var</span> range = <span class=\"number\">200</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">500</span>;i++)&#123;</div><div class=\"line\">      group.add(createSprite(<span class=\"number\">10</span>,<span class=\"literal\">false</span>,<span class=\"number\">0.6</span>,<span class=\"number\">0xffffff</span>,i%<span class=\"number\">5</span>,range));</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">  shareObj.scene.add(group);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getTexture</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> THREE.ImageUtils.loadTexture(<span class=\"string\">'./yudi.png'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createSprite</span>(<span class=\"params\">size,transparent,opacity,color,spriteNumber,range</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> spriteMaterial = <span class=\"keyword\">new</span> THREE.SpriteMaterial(&#123;</div><div class=\"line\">       opacity:opacity,</div><div class=\"line\">        color:color,</div><div class=\"line\">        transparent:transparent,</div><div class=\"line\">        map:getTexture()</div><div class=\"line\"></div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">    spriteMaterial.map.offset = <span class=\"keyword\">new</span> THREE.Vector2(<span class=\"number\">0.2</span> * spriteNumber, <span class=\"number\">0</span> );</div><div class=\"line\">    spriteMaterial.map.repeat = <span class=\"keyword\">new</span> THREE.Vector2(<span class=\"number\">1</span>/<span class=\"number\">5</span>,<span class=\"number\">1</span>);</div><div class=\"line\">    spriteMaterial.depthTest = <span class=\"literal\">false</span>;</div><div class=\"line\">    <span class=\"comment\">// spriteMaterial.blending = THREE.AdditiveBlending;</span></div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    <span class=\"keyword\">var</span> sprite = <span class=\"keyword\">new</span> THREE.Sprite(spriteMaterial);</div><div class=\"line\">    <span class=\"comment\">// </span></div><div class=\"line\">    sprite.scale.set(size,size,size);</div><div class=\"line\">    sprite.position.set(</div><div class=\"line\">            <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span>,</div><div class=\"line\">            <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span>,</div><div class=\"line\">            <span class=\"built_in\">Math</span>.random() * range - range/<span class=\"number\">2</span></div><div class=\"line\">    );</div><div class=\"line\">    sprite.velocityX = <span class=\"number\">5</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> sprite;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>, <span class=\"number\">60</span>, <span class=\"number\">10</span>);</div><div class=\"line\">spotLight.castShadow = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">shareObj.scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(shareObj.renderer.domElement);</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    group.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">    requestAnimationFrame(render);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    shareObj.renderer.render(shareObj.scene,shareObj.camera);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webgl-2017-07-18/4.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/17\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/17</a></p>"},{"title":"Three.js--","comments":1,"toc":true,"date":"2017-07-19T13:09:11.000Z","_content":"\n### \n\n* setTimeout / setInterval \n* window.requestAnimationFrame \n* \n\n#### \n\n* FirstPersonControls ,\n* FlyControls ,\n* RollControls ,z\n* TrackballControls ,\n* OrbitControls \n* PathControls \n\n<!-- more -->\n\n\n\n``` javascript\n\nvar scene = new THREE.Scene();\nvar camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, .1, 1000);\n\nvar renderer = new THREE.WebGLRenderer();\nrenderer.setClearColor(new THREE.Color(0xEEEEEE,1.0));\nrenderer.setSize(window.innerWidth,window.innerHeight);\n\n// \nvar planeGeometry = new THREE.PlaneGeometry(60,20,1,1);\nvar planeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});\nvar plane = new THREE.Mesh(planeGeometry,planeMaterial);\n\nplane.position.set(15,0,0);\n\nplane.rotation.x = -0.5 * Math.PI;\n\nscene.add(plane);\n\n\n// \n var cubeGeometry = new THREE.BoxGeometry(4,4,4);\n var cubeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});\n var cube = new THREE.Mesh(cubeGeometry,cubeMaterial);\n\n cube.position.set(-9,3,0);\n\n scene.add(cube);\n\n // \n var cylinderGeometry = new THREE.CylinderGeometry(2,2,20);\n var cylinderMaterial = new THREE.MeshLambertMaterial({color:0x77ff78});\n var cylinder = new THREE.Mesh(cylinderGeometry,cylinderMaterial);\n\n cylinder.position.set(0,0,1);\n scene.add(cylinder);\n\n camera.position.set(-30,40,30);\n camera.lookAt(scene.position);\n\n // \n var ambientLight = new THREE.AmbientLight(0x0c0c0c);\n scene.add(ambientLight);\n\n // \n var spotLight = new THREE.SpotLight(0xffffff);\n spotLight.position.set(-40,60,-10);\n scene.add(spotLight);\n\n document.body.appendChild(renderer.domElement);\n\n render();\n\n function render(){\n   requestAnimationFrame(render);\n   cube.rotation.x += 0.01;\n   cube.rotation.y += 0.01;\n   cube.rotation.z += 0.01;\n\n   cylinder.rotation.x += 0.01;\n   cylinder.rotation.y += 0.01;\n   cylinder.rotation.z += 0.01;\n\n   renderer.render(scene,camera)\n }\n```\n\n \n\n <img width=\"500\" src=\"webgl-2017-07-19/1.jpeg\"/>\n\n### \n\n#### \n\n* THREE.TrackballControls(camera)\n* rotateSpeed \n* zoomSpeed \n* panSpeed \n\n\n\n``` javascript\nvar clock = new THREE.Clock();\n\nvar scene = new THREE.Scene();\nvar camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, .1, 1000);\n\nvar renderer = new THREE.WebGLRenderer();\nrenderer.setClearColor(new THREE.Color(0xEEEEEE,1.0));\nrenderer.setSize(window.innerWidth,window.innerHeight);\n\n// \nvar planeGeometry = new THREE.PlaneGeometry(60,20,1,1);\nvar planeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});\nvar plane = new THREE.Mesh(planeGeometry,planeMaterial);\n\nplane.position.set(15,0,0);\n\nplane.rotation.x = -0.5 * Math.PI;\n\nscene.add(plane);\n\n\n// \nfunction addCube(x,y,z){\n  var cubeGeometry = new THREE.BoxGeometry(4,4,4);\n  var cubeMaterial = new THREE.MeshLambertMaterial({color:0xff00ff});\n  var cube = new THREE.Mesh(cubeGeometry,cubeMaterial);\n\n  cube.position.set(x,y,z);\n\n  scene.add(cube);\n}\n\naddCube(3,10,5);\naddCube(13,2,5);\naddCube(33,8,5);\n\nvar trackballControls = new THREE.TrackballControls(camera);\ntrackballControls.rotateSpeed = 1.0;\ntrackballControls.zoomSpeed = 1.0;\ntrackballControls.panSpeed = 1.0;\ntrackballControls.staticMoving = true;\n\n camera.position.set(-30,40,30);\n camera.lookAt(scene.position);\n\n // \n var ambientLight = new THREE.AmbientLight(0x0c0c0c);\n scene.add(ambientLight);\n\n// \nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40,60,-10);\nscene.add(spotLight);\n\n document.body.appendChild(renderer.domElement);\n\n render();\n\n function render(){\n   requestAnimationFrame(render);\n\n   var delta = clock.getDelta();\n   trackballControls.update(delta);\n\n   renderer.render(scene,camera)\n }\n```\n\n \n\n <img width=\"500\" src=\"webgl-2017-07-19/2.jpeg\"/>\n\n ### \n\n #### \n\n * THREE.FlyControls(camera)\n * movementSpeed \n * rollSpeed \n * autoForward \n\n \n\n``` javascript\n var clock = new THREE.Clock();\n\nvar scene = new THREE.Scene();\nvar camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, .1, 1000);\n\nvar renderer = new THREE.WebGLRenderer();\nrenderer.setClearColor(new THREE.Color(0xEEEEEE,1.0));\nrenderer.setSize(window.innerWidth,window.innerHeight);\n\n// \nvar planeGeometry = new THREE.PlaneGeometry(60,20,1,1);\nvar planeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});\nvar plane = new THREE.Mesh(planeGeometry,planeMaterial);\n\nplane.position.set(15,0,0);\n\nplane.rotation.x = -0.5 * Math.PI;\n\nscene.add(plane);\n\nvar cylinderMaterial = new THREE.MeshLambertMaterial({color:0x77ff78});\n\n// \nfunction addCyliner(x,y,z){\n  // \n  var cylinderGeometry = new THREE.CylinderGeometry(2,2,20);\n  var cylinder = new THREE.Mesh(cylinderGeometry,cylinderMaterial);\n\n  cylinder.position.set(x,y,z);\n  scene.add(cylinder);\n}\n\naddCyliner(3,10,5);\naddCyliner(13,2,5);\naddCyliner(33,8,5);\n\ncamera.position.set(-30,40,30);\ncamera.lookAt(scene.position);\n\n// \nvar ambientLight = new THREE.AmbientLight(0x0c0c0c);\nscene.add(ambientLight);\n\n// \nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40,60,-10);\nscene.add(spotLight);\n\ndocument.body.appendChild(renderer.domElement);\n\n// \nvar flyControls = new THREE.FlyControls(camera);\nflyControls.movementSpeed = 25;\nflyControls.domElement = document.body;\nflyControls.rollSpeed = Math.PI / 24;\nflyControls.autoForward = true;\n\nrender();\n\nfunction render(){\n  requestAnimationFrame(render);\n  var d = clock.getDelta();\n  flyControls.update(d);\n  renderer.render(scene,camera)\n}\n\n```\n\n \n\n <img width=\"500\" src=\"webgl-2017-07-19/3.jpeg\"/>\n\n###  \n\n#### \n\n* THREE.RollControls(camera) \n* movementSpeed \n* lookSpeed \n\n\n\n``` javascript\n// \nvar rollControls = new THREE.RollControls(camera);\nrollControls.movementSpeed = 25;\nrollControls.lookSpeed = 3;\n\nrender();\n\nfunction render(){\n  requestAnimationFrame(render);\n  var d = clock.getDelta();\n  rollControls.update(d);\n  renderer.render(scene,camera)\n}\n\n```\n\n \n\n <img width=\"500\" src=\"webgl-2017-07-19/4.jpeg\"/>\n\n ###  \n\n #### \n\n * THREE.FirstPersonControls(camera) \n * movementSpeed \n * noFly \n * lonlat\n\n \n\n``` javascript\n// \nvar controls = new THREE.FirstPersonControls(camera);\ncontrols.movementSpeed = 25;\ncontrols.lookSpeed = 0.4;\ncontrols.noFly = true;\ncontrols.lookVertical = true;\ncontrols.constrainVertical = true;\ncontrols.verticalMax = 2.0;\ncontrols.verticalMin = 2.0;\ncontrols.lon = -150;\ncontrols.lat = 120;\n\nrender();\n\nfunction render(){\n  requestAnimationFrame(render);\n  var d = clock.getDelta();\n  controls.update(d);\n  renderer.render(scene,camera)\n}\n\n```\n\n \n\n <img width=\"500\" src=\"webgl-2017-07-19/5.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/18\n","source":"_posts/webgl-2017-07-19.md","raw":"---\ntitle: Three.js--\ncomments: true\ntoc: true\ndate: 2017-07-19 21:09:11\ntags:\n    - 'javascript'\n    - 'webgl'\n    - 'three.js'\n---\n\n### \n\n* setTimeout / setInterval \n* window.requestAnimationFrame \n* \n\n#### \n\n* FirstPersonControls ,\n* FlyControls ,\n* RollControls ,z\n* TrackballControls ,\n* OrbitControls \n* PathControls \n\n<!-- more -->\n\n\n\n``` javascript\n\nvar scene = new THREE.Scene();\nvar camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, .1, 1000);\n\nvar renderer = new THREE.WebGLRenderer();\nrenderer.setClearColor(new THREE.Color(0xEEEEEE,1.0));\nrenderer.setSize(window.innerWidth,window.innerHeight);\n\n// \nvar planeGeometry = new THREE.PlaneGeometry(60,20,1,1);\nvar planeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});\nvar plane = new THREE.Mesh(planeGeometry,planeMaterial);\n\nplane.position.set(15,0,0);\n\nplane.rotation.x = -0.5 * Math.PI;\n\nscene.add(plane);\n\n\n// \n var cubeGeometry = new THREE.BoxGeometry(4,4,4);\n var cubeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});\n var cube = new THREE.Mesh(cubeGeometry,cubeMaterial);\n\n cube.position.set(-9,3,0);\n\n scene.add(cube);\n\n // \n var cylinderGeometry = new THREE.CylinderGeometry(2,2,20);\n var cylinderMaterial = new THREE.MeshLambertMaterial({color:0x77ff78});\n var cylinder = new THREE.Mesh(cylinderGeometry,cylinderMaterial);\n\n cylinder.position.set(0,0,1);\n scene.add(cylinder);\n\n camera.position.set(-30,40,30);\n camera.lookAt(scene.position);\n\n // \n var ambientLight = new THREE.AmbientLight(0x0c0c0c);\n scene.add(ambientLight);\n\n // \n var spotLight = new THREE.SpotLight(0xffffff);\n spotLight.position.set(-40,60,-10);\n scene.add(spotLight);\n\n document.body.appendChild(renderer.domElement);\n\n render();\n\n function render(){\n   requestAnimationFrame(render);\n   cube.rotation.x += 0.01;\n   cube.rotation.y += 0.01;\n   cube.rotation.z += 0.01;\n\n   cylinder.rotation.x += 0.01;\n   cylinder.rotation.y += 0.01;\n   cylinder.rotation.z += 0.01;\n\n   renderer.render(scene,camera)\n }\n```\n\n \n\n <img width=\"500\" src=\"webgl-2017-07-19/1.jpeg\"/>\n\n### \n\n#### \n\n* THREE.TrackballControls(camera)\n* rotateSpeed \n* zoomSpeed \n* panSpeed \n\n\n\n``` javascript\nvar clock = new THREE.Clock();\n\nvar scene = new THREE.Scene();\nvar camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, .1, 1000);\n\nvar renderer = new THREE.WebGLRenderer();\nrenderer.setClearColor(new THREE.Color(0xEEEEEE,1.0));\nrenderer.setSize(window.innerWidth,window.innerHeight);\n\n// \nvar planeGeometry = new THREE.PlaneGeometry(60,20,1,1);\nvar planeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});\nvar plane = new THREE.Mesh(planeGeometry,planeMaterial);\n\nplane.position.set(15,0,0);\n\nplane.rotation.x = -0.5 * Math.PI;\n\nscene.add(plane);\n\n\n// \nfunction addCube(x,y,z){\n  var cubeGeometry = new THREE.BoxGeometry(4,4,4);\n  var cubeMaterial = new THREE.MeshLambertMaterial({color:0xff00ff});\n  var cube = new THREE.Mesh(cubeGeometry,cubeMaterial);\n\n  cube.position.set(x,y,z);\n\n  scene.add(cube);\n}\n\naddCube(3,10,5);\naddCube(13,2,5);\naddCube(33,8,5);\n\nvar trackballControls = new THREE.TrackballControls(camera);\ntrackballControls.rotateSpeed = 1.0;\ntrackballControls.zoomSpeed = 1.0;\ntrackballControls.panSpeed = 1.0;\ntrackballControls.staticMoving = true;\n\n camera.position.set(-30,40,30);\n camera.lookAt(scene.position);\n\n // \n var ambientLight = new THREE.AmbientLight(0x0c0c0c);\n scene.add(ambientLight);\n\n// \nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40,60,-10);\nscene.add(spotLight);\n\n document.body.appendChild(renderer.domElement);\n\n render();\n\n function render(){\n   requestAnimationFrame(render);\n\n   var delta = clock.getDelta();\n   trackballControls.update(delta);\n\n   renderer.render(scene,camera)\n }\n```\n\n \n\n <img width=\"500\" src=\"webgl-2017-07-19/2.jpeg\"/>\n\n ### \n\n #### \n\n * THREE.FlyControls(camera)\n * movementSpeed \n * rollSpeed \n * autoForward \n\n \n\n``` javascript\n var clock = new THREE.Clock();\n\nvar scene = new THREE.Scene();\nvar camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, .1, 1000);\n\nvar renderer = new THREE.WebGLRenderer();\nrenderer.setClearColor(new THREE.Color(0xEEEEEE,1.0));\nrenderer.setSize(window.innerWidth,window.innerHeight);\n\n// \nvar planeGeometry = new THREE.PlaneGeometry(60,20,1,1);\nvar planeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});\nvar plane = new THREE.Mesh(planeGeometry,planeMaterial);\n\nplane.position.set(15,0,0);\n\nplane.rotation.x = -0.5 * Math.PI;\n\nscene.add(plane);\n\nvar cylinderMaterial = new THREE.MeshLambertMaterial({color:0x77ff78});\n\n// \nfunction addCyliner(x,y,z){\n  // \n  var cylinderGeometry = new THREE.CylinderGeometry(2,2,20);\n  var cylinder = new THREE.Mesh(cylinderGeometry,cylinderMaterial);\n\n  cylinder.position.set(x,y,z);\n  scene.add(cylinder);\n}\n\naddCyliner(3,10,5);\naddCyliner(13,2,5);\naddCyliner(33,8,5);\n\ncamera.position.set(-30,40,30);\ncamera.lookAt(scene.position);\n\n// \nvar ambientLight = new THREE.AmbientLight(0x0c0c0c);\nscene.add(ambientLight);\n\n// \nvar spotLight = new THREE.SpotLight(0xffffff);\nspotLight.position.set(-40,60,-10);\nscene.add(spotLight);\n\ndocument.body.appendChild(renderer.domElement);\n\n// \nvar flyControls = new THREE.FlyControls(camera);\nflyControls.movementSpeed = 25;\nflyControls.domElement = document.body;\nflyControls.rollSpeed = Math.PI / 24;\nflyControls.autoForward = true;\n\nrender();\n\nfunction render(){\n  requestAnimationFrame(render);\n  var d = clock.getDelta();\n  flyControls.update(d);\n  renderer.render(scene,camera)\n}\n\n```\n\n \n\n <img width=\"500\" src=\"webgl-2017-07-19/3.jpeg\"/>\n\n###  \n\n#### \n\n* THREE.RollControls(camera) \n* movementSpeed \n* lookSpeed \n\n\n\n``` javascript\n// \nvar rollControls = new THREE.RollControls(camera);\nrollControls.movementSpeed = 25;\nrollControls.lookSpeed = 3;\n\nrender();\n\nfunction render(){\n  requestAnimationFrame(render);\n  var d = clock.getDelta();\n  rollControls.update(d);\n  renderer.render(scene,camera)\n}\n\n```\n\n \n\n <img width=\"500\" src=\"webgl-2017-07-19/4.jpeg\"/>\n\n ###  \n\n #### \n\n * THREE.FirstPersonControls(camera) \n * movementSpeed \n * noFly \n * lonlat\n\n \n\n``` javascript\n// \nvar controls = new THREE.FirstPersonControls(camera);\ncontrols.movementSpeed = 25;\ncontrols.lookSpeed = 0.4;\ncontrols.noFly = true;\ncontrols.lookVertical = true;\ncontrols.constrainVertical = true;\ncontrols.verticalMax = 2.0;\ncontrols.verticalMin = 2.0;\ncontrols.lon = -150;\ncontrols.lat = 120;\n\nrender();\n\nfunction render(){\n  requestAnimationFrame(render);\n  var d = clock.getDelta();\n  controls.update(d);\n  renderer.render(scene,camera)\n}\n\n```\n\n \n\n <img width=\"500\" src=\"webgl-2017-07-19/5.jpeg\"/>\n\n https://github.com/wqzwh/webgl-code/tree/master/18\n","slug":"webgl-2017-07-19","published":1,"updated":"2018-02-10T08:59:44.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbu002pfdldfczmvs1h","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>setTimeout / setInterval </li>\n<li>window.requestAnimationFrame </li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>FirstPersonControls ,</li>\n<li>FlyControls ,</li>\n<li>RollControls ,z</li>\n<li>TrackballControls ,</li>\n<li>OrbitControls </li>\n<li>PathControls </li>\n</ul>\n<a id=\"more\"></a>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene();</div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">45</span>, <span class=\"built_in\">window</span>.innerWidth/<span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">.1</span>, <span class=\"number\">1000</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0xEEEEEE</span>,<span class=\"number\">1.0</span>));</div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth,<span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> planeGeometry = <span class=\"keyword\">new</span> THREE.PlaneGeometry(<span class=\"number\">60</span>,<span class=\"number\">20</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> planeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0xffffff</span>&#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> plane = <span class=\"keyword\">new</span> THREE.Mesh(planeGeometry,planeMaterial);</div><div class=\"line\"></div><div class=\"line\">plane.position.set(<span class=\"number\">15</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">plane.rotation.x = <span class=\"number\">-0.5</span> * <span class=\"built_in\">Math</span>.PI;</div><div class=\"line\"></div><div class=\"line\">scene.add(plane);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"> <span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">4</span>,<span class=\"number\">4</span>,<span class=\"number\">4</span>);</div><div class=\"line\"> <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0xffffff</span>&#125;);</div><div class=\"line\"> <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry,cubeMaterial);</div><div class=\"line\"></div><div class=\"line\"> cube.position.set(<span class=\"number\">-9</span>,<span class=\"number\">3</span>,<span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\"> scene.add(cube);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">// </span></div><div class=\"line\"> <span class=\"keyword\">var</span> cylinderGeometry = <span class=\"keyword\">new</span> THREE.CylinderGeometry(<span class=\"number\">2</span>,<span class=\"number\">2</span>,<span class=\"number\">20</span>);</div><div class=\"line\"> <span class=\"keyword\">var</span> cylinderMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0x77ff78</span>&#125;);</div><div class=\"line\"> <span class=\"keyword\">var</span> cylinder = <span class=\"keyword\">new</span> THREE.Mesh(cylinderGeometry,cylinderMaterial);</div><div class=\"line\"></div><div class=\"line\"> cylinder.position.set(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>);</div><div class=\"line\"> scene.add(cylinder);</div><div class=\"line\"></div><div class=\"line\"> camera.position.set(<span class=\"number\">-30</span>,<span class=\"number\">40</span>,<span class=\"number\">30</span>);</div><div class=\"line\"> camera.lookAt(scene.position);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">// </span></div><div class=\"line\"> <span class=\"keyword\">var</span> ambientLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"number\">0x0c0c0c</span>);</div><div class=\"line\"> scene.add(ambientLight);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">// </span></div><div class=\"line\"> <span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\"> spotLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">-10</span>);</div><div class=\"line\"> scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\"> render();</div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">   requestAnimationFrame(render);</div><div class=\"line\">   cube.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">   cube.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">   cube.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">   cylinder.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">   cylinder.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">   cylinder.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">   renderer.render(scene,camera)</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<p> </p>\n<p> <img width=\"500\" src=\"/webgl-2017-07-19/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>THREE.TrackballControls(camera)</li>\n<li>rotateSpeed </li>\n<li>zoomSpeed </li>\n<li>panSpeed </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> clock = <span class=\"keyword\">new</span> THREE.Clock();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene();</div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">45</span>, <span class=\"built_in\">window</span>.innerWidth/<span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">.1</span>, <span class=\"number\">1000</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0xEEEEEE</span>,<span class=\"number\">1.0</span>));</div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth,<span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> planeGeometry = <span class=\"keyword\">new</span> THREE.PlaneGeometry(<span class=\"number\">60</span>,<span class=\"number\">20</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> planeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0xffffff</span>&#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> plane = <span class=\"keyword\">new</span> THREE.Mesh(planeGeometry,planeMaterial);</div><div class=\"line\"></div><div class=\"line\">plane.position.set(<span class=\"number\">15</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">plane.rotation.x = <span class=\"number\">-0.5</span> * <span class=\"built_in\">Math</span>.PI;</div><div class=\"line\"></div><div class=\"line\">scene.add(plane);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCube</span>(<span class=\"params\">x,y,z</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">4</span>,<span class=\"number\">4</span>,<span class=\"number\">4</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0xff00ff</span>&#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry,cubeMaterial);</div><div class=\"line\"></div><div class=\"line\">  cube.position.set(x,y,z);</div><div class=\"line\"></div><div class=\"line\">  scene.add(cube);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">addCube(<span class=\"number\">3</span>,<span class=\"number\">10</span>,<span class=\"number\">5</span>);</div><div class=\"line\">addCube(<span class=\"number\">13</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>);</div><div class=\"line\">addCube(<span class=\"number\">33</span>,<span class=\"number\">8</span>,<span class=\"number\">5</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> trackballControls = <span class=\"keyword\">new</span> THREE.TrackballControls(camera);</div><div class=\"line\">trackballControls.rotateSpeed = <span class=\"number\">1.0</span>;</div><div class=\"line\">trackballControls.zoomSpeed = <span class=\"number\">1.0</span>;</div><div class=\"line\">trackballControls.panSpeed = <span class=\"number\">1.0</span>;</div><div class=\"line\">trackballControls.staticMoving = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\"> camera.position.set(<span class=\"number\">-30</span>,<span class=\"number\">40</span>,<span class=\"number\">30</span>);</div><div class=\"line\"> camera.lookAt(scene.position);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">// </span></div><div class=\"line\"> <span class=\"keyword\">var</span> ambientLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"number\">0x0c0c0c</span>);</div><div class=\"line\"> scene.add(ambientLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">-10</span>);</div><div class=\"line\">scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\"> render();</div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">   requestAnimationFrame(render);</div><div class=\"line\"></div><div class=\"line\">   <span class=\"keyword\">var</span> delta = clock.getDelta();</div><div class=\"line\">   trackballControls.update(delta);</div><div class=\"line\"></div><div class=\"line\">   renderer.render(scene,camera)</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<p> </p>\n<p> <img width=\"500\" src=\"/webgl-2017-07-19/2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>THREE.FlyControls(camera)</li>\n<li>movementSpeed </li>\n<li>rollSpeed </li>\n<li><p>autoForward </p>\n<p></p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">var</span> clock = <span class=\"keyword\">new</span> THREE.Clock();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene();</div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">45</span>, <span class=\"built_in\">window</span>.innerWidth/<span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">.1</span>, <span class=\"number\">1000</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0xEEEEEE</span>,<span class=\"number\">1.0</span>));</div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth,<span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> planeGeometry = <span class=\"keyword\">new</span> THREE.PlaneGeometry(<span class=\"number\">60</span>,<span class=\"number\">20</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> planeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0xffffff</span>&#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> plane = <span class=\"keyword\">new</span> THREE.Mesh(planeGeometry,planeMaterial);</div><div class=\"line\"></div><div class=\"line\">plane.position.set(<span class=\"number\">15</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">plane.rotation.x = <span class=\"number\">-0.5</span> * <span class=\"built_in\">Math</span>.PI;</div><div class=\"line\"></div><div class=\"line\">scene.add(plane);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> cylinderMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0x77ff78</span>&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCyliner</span>(<span class=\"params\">x,y,z</span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">var</span> cylinderGeometry = <span class=\"keyword\">new</span> THREE.CylinderGeometry(<span class=\"number\">2</span>,<span class=\"number\">2</span>,<span class=\"number\">20</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> cylinder = <span class=\"keyword\">new</span> THREE.Mesh(cylinderGeometry,cylinderMaterial);</div><div class=\"line\"></div><div class=\"line\">  cylinder.position.set(x,y,z);</div><div class=\"line\">  scene.add(cylinder);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">addCyliner(<span class=\"number\">3</span>,<span class=\"number\">10</span>,<span class=\"number\">5</span>);</div><div class=\"line\">addCyliner(<span class=\"number\">13</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>);</div><div class=\"line\">addCyliner(<span class=\"number\">33</span>,<span class=\"number\">8</span>,<span class=\"number\">5</span>);</div><div class=\"line\"></div><div class=\"line\">camera.position.set(<span class=\"number\">-30</span>,<span class=\"number\">40</span>,<span class=\"number\">30</span>);</div><div class=\"line\">camera.lookAt(scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> ambientLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"number\">0x0c0c0c</span>);</div><div class=\"line\">scene.add(ambientLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">-10</span>);</div><div class=\"line\">scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> flyControls = <span class=\"keyword\">new</span> THREE.FlyControls(camera);</div><div class=\"line\">flyControls.movementSpeed = <span class=\"number\">25</span>;</div><div class=\"line\">flyControls.domElement = <span class=\"built_in\">document</span>.body;</div><div class=\"line\">flyControls.rollSpeed = <span class=\"built_in\">Math</span>.PI / <span class=\"number\">24</span>;</div><div class=\"line\">flyControls.autoForward = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  <span class=\"keyword\">var</span> d = clock.getDelta();</div><div class=\"line\">  flyControls.update(d);</div><div class=\"line\">  renderer.render(scene,camera)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> </p>\n<p> <img width=\"500\" src=\"/webgl-2017-07-19/3.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>THREE.RollControls(camera) </li>\n<li>movementSpeed </li>\n<li>lookSpeed </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> rollControls = <span class=\"keyword\">new</span> THREE.RollControls(camera);</div><div class=\"line\">rollControls.movementSpeed = <span class=\"number\">25</span>;</div><div class=\"line\">rollControls.lookSpeed = <span class=\"number\">3</span>;</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  <span class=\"keyword\">var</span> d = clock.getDelta();</div><div class=\"line\">  rollControls.update(d);</div><div class=\"line\">  renderer.render(scene,camera)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> </p>\n<p> <img width=\"500\" src=\"/webgl-2017-07-19/4.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>THREE.FirstPersonControls(camera) </li>\n<li>movementSpeed </li>\n<li>noFly </li>\n<li><p>lonlat</p>\n<p></p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> controls = <span class=\"keyword\">new</span> THREE.FirstPersonControls(camera);</div><div class=\"line\">controls.movementSpeed = <span class=\"number\">25</span>;</div><div class=\"line\">controls.lookSpeed = <span class=\"number\">0.4</span>;</div><div class=\"line\">controls.noFly = <span class=\"literal\">true</span>;</div><div class=\"line\">controls.lookVertical = <span class=\"literal\">true</span>;</div><div class=\"line\">controls.constrainVertical = <span class=\"literal\">true</span>;</div><div class=\"line\">controls.verticalMax = <span class=\"number\">2.0</span>;</div><div class=\"line\">controls.verticalMin = <span class=\"number\">2.0</span>;</div><div class=\"line\">controls.lon = <span class=\"number\">-150</span>;</div><div class=\"line\">controls.lat = <span class=\"number\">120</span>;</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  <span class=\"keyword\">var</span> d = clock.getDelta();</div><div class=\"line\">  controls.update(d);</div><div class=\"line\">  renderer.render(scene,camera)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> </p>\n<p> <img width=\"500\" src=\"/webgl-2017-07-19/5.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/18\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/18</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>setTimeout / setInterval </li>\n<li>window.requestAnimationFrame </li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>FirstPersonControls ,</li>\n<li>FlyControls ,</li>\n<li>RollControls ,z</li>\n<li>TrackballControls ,</li>\n<li>OrbitControls </li>\n<li>PathControls </li>\n</ul>","more":"<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene();</div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">45</span>, <span class=\"built_in\">window</span>.innerWidth/<span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">.1</span>, <span class=\"number\">1000</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0xEEEEEE</span>,<span class=\"number\">1.0</span>));</div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth,<span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> planeGeometry = <span class=\"keyword\">new</span> THREE.PlaneGeometry(<span class=\"number\">60</span>,<span class=\"number\">20</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> planeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0xffffff</span>&#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> plane = <span class=\"keyword\">new</span> THREE.Mesh(planeGeometry,planeMaterial);</div><div class=\"line\"></div><div class=\"line\">plane.position.set(<span class=\"number\">15</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">plane.rotation.x = <span class=\"number\">-0.5</span> * <span class=\"built_in\">Math</span>.PI;</div><div class=\"line\"></div><div class=\"line\">scene.add(plane);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"> <span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">4</span>,<span class=\"number\">4</span>,<span class=\"number\">4</span>);</div><div class=\"line\"> <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0xffffff</span>&#125;);</div><div class=\"line\"> <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry,cubeMaterial);</div><div class=\"line\"></div><div class=\"line\"> cube.position.set(<span class=\"number\">-9</span>,<span class=\"number\">3</span>,<span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\"> scene.add(cube);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">// </span></div><div class=\"line\"> <span class=\"keyword\">var</span> cylinderGeometry = <span class=\"keyword\">new</span> THREE.CylinderGeometry(<span class=\"number\">2</span>,<span class=\"number\">2</span>,<span class=\"number\">20</span>);</div><div class=\"line\"> <span class=\"keyword\">var</span> cylinderMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0x77ff78</span>&#125;);</div><div class=\"line\"> <span class=\"keyword\">var</span> cylinder = <span class=\"keyword\">new</span> THREE.Mesh(cylinderGeometry,cylinderMaterial);</div><div class=\"line\"></div><div class=\"line\"> cylinder.position.set(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>);</div><div class=\"line\"> scene.add(cylinder);</div><div class=\"line\"></div><div class=\"line\"> camera.position.set(<span class=\"number\">-30</span>,<span class=\"number\">40</span>,<span class=\"number\">30</span>);</div><div class=\"line\"> camera.lookAt(scene.position);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">// </span></div><div class=\"line\"> <span class=\"keyword\">var</span> ambientLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"number\">0x0c0c0c</span>);</div><div class=\"line\"> scene.add(ambientLight);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">// </span></div><div class=\"line\"> <span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\"> spotLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">-10</span>);</div><div class=\"line\"> scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\"> render();</div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">   requestAnimationFrame(render);</div><div class=\"line\">   cube.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">   cube.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">   cube.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">   cylinder.rotation.x += <span class=\"number\">0.01</span>;</div><div class=\"line\">   cylinder.rotation.y += <span class=\"number\">0.01</span>;</div><div class=\"line\">   cylinder.rotation.z += <span class=\"number\">0.01</span>;</div><div class=\"line\"></div><div class=\"line\">   renderer.render(scene,camera)</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<p> </p>\n<p> <img width=\"500\" src=\"/webgl-2017-07-19/1.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>THREE.TrackballControls(camera)</li>\n<li>rotateSpeed </li>\n<li>zoomSpeed </li>\n<li>panSpeed </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> clock = <span class=\"keyword\">new</span> THREE.Clock();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene();</div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">45</span>, <span class=\"built_in\">window</span>.innerWidth/<span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">.1</span>, <span class=\"number\">1000</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0xEEEEEE</span>,<span class=\"number\">1.0</span>));</div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth,<span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> planeGeometry = <span class=\"keyword\">new</span> THREE.PlaneGeometry(<span class=\"number\">60</span>,<span class=\"number\">20</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> planeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0xffffff</span>&#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> plane = <span class=\"keyword\">new</span> THREE.Mesh(planeGeometry,planeMaterial);</div><div class=\"line\"></div><div class=\"line\">plane.position.set(<span class=\"number\">15</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">plane.rotation.x = <span class=\"number\">-0.5</span> * <span class=\"built_in\">Math</span>.PI;</div><div class=\"line\"></div><div class=\"line\">scene.add(plane);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCube</span>(<span class=\"params\">x,y,z</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeGeometry = <span class=\"keyword\">new</span> THREE.BoxGeometry(<span class=\"number\">4</span>,<span class=\"number\">4</span>,<span class=\"number\">4</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> cubeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0xff00ff</span>&#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> cube = <span class=\"keyword\">new</span> THREE.Mesh(cubeGeometry,cubeMaterial);</div><div class=\"line\"></div><div class=\"line\">  cube.position.set(x,y,z);</div><div class=\"line\"></div><div class=\"line\">  scene.add(cube);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">addCube(<span class=\"number\">3</span>,<span class=\"number\">10</span>,<span class=\"number\">5</span>);</div><div class=\"line\">addCube(<span class=\"number\">13</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>);</div><div class=\"line\">addCube(<span class=\"number\">33</span>,<span class=\"number\">8</span>,<span class=\"number\">5</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> trackballControls = <span class=\"keyword\">new</span> THREE.TrackballControls(camera);</div><div class=\"line\">trackballControls.rotateSpeed = <span class=\"number\">1.0</span>;</div><div class=\"line\">trackballControls.zoomSpeed = <span class=\"number\">1.0</span>;</div><div class=\"line\">trackballControls.panSpeed = <span class=\"number\">1.0</span>;</div><div class=\"line\">trackballControls.staticMoving = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\"> camera.position.set(<span class=\"number\">-30</span>,<span class=\"number\">40</span>,<span class=\"number\">30</span>);</div><div class=\"line\"> camera.lookAt(scene.position);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">// </span></div><div class=\"line\"> <span class=\"keyword\">var</span> ambientLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"number\">0x0c0c0c</span>);</div><div class=\"line\"> scene.add(ambientLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">-10</span>);</div><div class=\"line\">scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\"> render();</div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">   requestAnimationFrame(render);</div><div class=\"line\"></div><div class=\"line\">   <span class=\"keyword\">var</span> delta = clock.getDelta();</div><div class=\"line\">   trackballControls.update(delta);</div><div class=\"line\"></div><div class=\"line\">   renderer.render(scene,camera)</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<p> </p>\n<p> <img width=\"500\" src=\"/webgl-2017-07-19/2.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>THREE.FlyControls(camera)</li>\n<li>movementSpeed </li>\n<li>rollSpeed </li>\n<li><p>autoForward </p>\n<p></p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">var</span> clock = <span class=\"keyword\">new</span> THREE.Clock();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> scene = <span class=\"keyword\">new</span> THREE.Scene();</div><div class=\"line\"><span class=\"keyword\">var</span> camera = <span class=\"keyword\">new</span> THREE.PerspectiveCamera(<span class=\"number\">45</span>, <span class=\"built_in\">window</span>.innerWidth/<span class=\"built_in\">window</span>.innerHeight, <span class=\"number\">.1</span>, <span class=\"number\">1000</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> renderer = <span class=\"keyword\">new</span> THREE.WebGLRenderer();</div><div class=\"line\">renderer.setClearColor(<span class=\"keyword\">new</span> THREE.Color(<span class=\"number\">0xEEEEEE</span>,<span class=\"number\">1.0</span>));</div><div class=\"line\">renderer.setSize(<span class=\"built_in\">window</span>.innerWidth,<span class=\"built_in\">window</span>.innerHeight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> planeGeometry = <span class=\"keyword\">new</span> THREE.PlaneGeometry(<span class=\"number\">60</span>,<span class=\"number\">20</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> planeMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0xffffff</span>&#125;);</div><div class=\"line\"><span class=\"keyword\">var</span> plane = <span class=\"keyword\">new</span> THREE.Mesh(planeGeometry,planeMaterial);</div><div class=\"line\"></div><div class=\"line\">plane.position.set(<span class=\"number\">15</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</div><div class=\"line\"></div><div class=\"line\">plane.rotation.x = <span class=\"number\">-0.5</span> * <span class=\"built_in\">Math</span>.PI;</div><div class=\"line\"></div><div class=\"line\">scene.add(plane);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> cylinderMaterial = <span class=\"keyword\">new</span> THREE.MeshLambertMaterial(&#123;<span class=\"attr\">color</span>:<span class=\"number\">0x77ff78</span>&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCyliner</span>(<span class=\"params\">x,y,z</span>)</span>&#123;</div><div class=\"line\">  <span class=\"comment\">// </span></div><div class=\"line\">  <span class=\"keyword\">var</span> cylinderGeometry = <span class=\"keyword\">new</span> THREE.CylinderGeometry(<span class=\"number\">2</span>,<span class=\"number\">2</span>,<span class=\"number\">20</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> cylinder = <span class=\"keyword\">new</span> THREE.Mesh(cylinderGeometry,cylinderMaterial);</div><div class=\"line\"></div><div class=\"line\">  cylinder.position.set(x,y,z);</div><div class=\"line\">  scene.add(cylinder);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">addCyliner(<span class=\"number\">3</span>,<span class=\"number\">10</span>,<span class=\"number\">5</span>);</div><div class=\"line\">addCyliner(<span class=\"number\">13</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>);</div><div class=\"line\">addCyliner(<span class=\"number\">33</span>,<span class=\"number\">8</span>,<span class=\"number\">5</span>);</div><div class=\"line\"></div><div class=\"line\">camera.position.set(<span class=\"number\">-30</span>,<span class=\"number\">40</span>,<span class=\"number\">30</span>);</div><div class=\"line\">camera.lookAt(scene.position);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> ambientLight = <span class=\"keyword\">new</span> THREE.AmbientLight(<span class=\"number\">0x0c0c0c</span>);</div><div class=\"line\">scene.add(ambientLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> spotLight = <span class=\"keyword\">new</span> THREE.SpotLight(<span class=\"number\">0xffffff</span>);</div><div class=\"line\">spotLight.position.set(<span class=\"number\">-40</span>,<span class=\"number\">60</span>,<span class=\"number\">-10</span>);</div><div class=\"line\">scene.add(spotLight);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(renderer.domElement);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> flyControls = <span class=\"keyword\">new</span> THREE.FlyControls(camera);</div><div class=\"line\">flyControls.movementSpeed = <span class=\"number\">25</span>;</div><div class=\"line\">flyControls.domElement = <span class=\"built_in\">document</span>.body;</div><div class=\"line\">flyControls.rollSpeed = <span class=\"built_in\">Math</span>.PI / <span class=\"number\">24</span>;</div><div class=\"line\">flyControls.autoForward = <span class=\"literal\">true</span>;</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  <span class=\"keyword\">var</span> d = clock.getDelta();</div><div class=\"line\">  flyControls.update(d);</div><div class=\"line\">  renderer.render(scene,camera)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> </p>\n<p> <img width=\"500\" src=\"/webgl-2017-07-19/3.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>THREE.RollControls(camera) </li>\n<li>movementSpeed </li>\n<li>lookSpeed </li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> rollControls = <span class=\"keyword\">new</span> THREE.RollControls(camera);</div><div class=\"line\">rollControls.movementSpeed = <span class=\"number\">25</span>;</div><div class=\"line\">rollControls.lookSpeed = <span class=\"number\">3</span>;</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  <span class=\"keyword\">var</span> d = clock.getDelta();</div><div class=\"line\">  rollControls.update(d);</div><div class=\"line\">  renderer.render(scene,camera)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> </p>\n<p> <img width=\"500\" src=\"/webgl-2017-07-19/4.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>THREE.FirstPersonControls(camera) </li>\n<li>movementSpeed </li>\n<li>noFly </li>\n<li><p>lonlat</p>\n<p></p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">var</span> controls = <span class=\"keyword\">new</span> THREE.FirstPersonControls(camera);</div><div class=\"line\">controls.movementSpeed = <span class=\"number\">25</span>;</div><div class=\"line\">controls.lookSpeed = <span class=\"number\">0.4</span>;</div><div class=\"line\">controls.noFly = <span class=\"literal\">true</span>;</div><div class=\"line\">controls.lookVertical = <span class=\"literal\">true</span>;</div><div class=\"line\">controls.constrainVertical = <span class=\"literal\">true</span>;</div><div class=\"line\">controls.verticalMax = <span class=\"number\">2.0</span>;</div><div class=\"line\">controls.verticalMin = <span class=\"number\">2.0</span>;</div><div class=\"line\">controls.lon = <span class=\"number\">-150</span>;</div><div class=\"line\">controls.lat = <span class=\"number\">120</span>;</div><div class=\"line\"></div><div class=\"line\">render();</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">  requestAnimationFrame(render);</div><div class=\"line\">  <span class=\"keyword\">var</span> d = clock.getDelta();</div><div class=\"line\">  controls.update(d);</div><div class=\"line\">  renderer.render(scene,camera)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> </p>\n<p> <img width=\"500\" src=\"/webgl-2017-07-19/5.jpeg\"></p>\n<p> <a href=\"https://github.com/wqzwh/webgl-code/tree/master/18\" target=\"_blank\" rel=\"external\">https://github.com/wqzwh/webgl-code/tree/master/18</a></p>"},{"title":"webpack","comments":1,"toc":true,"date":"2017-12-30T09:06:58.000Z","_content":"\n> webpack3.5\n\n### \n\nScope Hoisting-,JS\n\n``` javascript\nplugins: [\n    new webpack.optimize.ModuleConcatenationPlugin()\n]    \n```\n\n\n<img width=\"500\" src=\"webpack-2017-12-30/5.jpeg\"/>\n\n<!-- more -->\n\n\n\n<img width=\"500\" src=\"webpack-2017-12-30/6.jpeg\"/>\n<img width=\"500\" src=\"webpack-2017-12-30/7.jpeg\"/>\n\n\n### \n\n#### externals\n\nexternalsscript\n``` javascript\nexternals: {\n  'jquery': 'jquery'\n},\n```\n\n#### alias\n\n* \n* webpack\n\n\n\n``` javascript\nresolve: {\n  extensions: ['.js', '.json'],\n  alias: {\n    'jquery': 'jquery/dist/jquery.slim.min.js',\n    '@': resolve('src'),\n  }\n},\n```\n\n### \n\n#### css\n\nwebpack\n``` javascript\nplugins: [\n  new StyleExtHtmlWebpackPlugin({\n    minify: true\n  })\n]\n```\ncss\n\n#### preload\nwebpack\n``` javascript\nplugins: [\n  new PreloadWebpackPlugin({\n    rel: 'preload',\n    as: 'script',\n    include: 'all'\n  })\n]\n```\nheadpreloadlink\n``` html\n<link rel=\"preload\" as=\"script\" href=\"app.8898b6c9e3b39f7a1c9d.js\">\n<link rel=\"preload\" as=\"script\" href=\"common.6ecc97ec2b5dceebbd5e800322c2a3c0.css\">\n<link rel=\"preload\" as=\"script\" href=\"vendor.dcd374ee43fd57d2365b.js\">\n<link rel=\"preload\" as=\"script\" href=\"manifest.f3e58576762e216d8867.js\">\n```\n\n\n<a href=\"https://github.com/GoogleChromeLabs/preload-webpack-plugin\" target=\"_blank\"></a>\n\n### \n\n#### css\n\n##### contenthash\n\nwebpackcssextract-text-webpack-pluginhashwebpackmodule identifierhashchunkhash\n\n``` javascript\nmodule: {\n  rules: [{\n    test: /\\.(less|scss|css)$/,\n    use: ExtractTextPlugin.extract({\n      fallback: \"style-loader\",\n      use: [\n        {\n          loader:\"css-loader\",\n          options:{\n            minimize: true //css\n          }\n        }, \n        {\n          loader:\"less-loader\",\n          options:{\n            minimize: true //css\n          }\n        }, \n        {\n          loader:\"sass-loader\",\n          options:{\n            minimize: true //css\n          }\n        }]\n    })\n  }]\n},\nplugins: [\n  new ExtractTextPlugin({\n    filename: 'common.[chunkhash].css',\n    allChunks: true\n  }),\n]\n```\n\ncss\n\n``` less\n// a.less\n.ac {\n .bc {\n   font-size: 12px;\n }\n .cc {\n   font-weight: 700;\n   border: 1px solid #ccc;\n }\n}\n```\n\nmodulea.jsa.less\n\n``` javascript\n// module/a.js\nrequire('../style/a.less');\n```\n\nhashjshashcsshashwebpack\n\n<img width=\"500\" src=\"webpack-2017-12-30/css-1.jpeg\"/>\n\ncssjshashcsshashExtractTextPlugincontenthash\n\ncontenthashcsshashjscss\n\n<img width=\"500\" src=\"webpack-2017-12-30/css-2.jpeg\"/>\n\n#### js\n\n##### HashedModuleIdsPlugin\n\nwebpack\n\n``` javascript\nentry: {\n  app: './src/app.js',\n  vendor: ['lodash']\n},\nplugins: [\n    new CleanWebpackPlugin(['cdist']),\n    new HtmlWebpackPlugin({\n      template: './src/index.template.html', //html\n      filename: 'wq.html', //htmlpath\n      favicon: './src/favicon.ico', //faviconwebpackhash\n      inject: 'body', //jstrue/'head'/'body'/false\n      // chunks: ['app', 'vendor'],\n      //hash: true ,//hash\n      minify: { //HTML\n        removeComments: true, //HTML\n        collapseWhitespace: false //\n      }\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'vendor'\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'manifest'\n    }),\n    new ExtractTextPlugin({\n      filename: 'common.[contenthash].css',\n      allChunks: true\n    }),\n    new webpack.optimize.UglifyJsPlugin({\n      beautify: false,\n      comments: false,\n      compress: {\n        warnings: false,\n        drop_console: true,\n        collapse_vars: true,\n        reduce_vars: true,\n      }\n    })\n  ]\n```\n\napp.js\n\n``` javascript\nimport _ from 'lodash';\nimport a from './module/a';\n// import b from './module/b';\nrequire(\"babel-polyfill\")\nrequire('./style/lib.css')\n\nfunction fn () {\n  // let aa = _.clone({key:4})\n  // aa.key = 2;\n  return aa\n}\n\nfn()\n```\n\n\n\n<img width=\"500\" src=\"webpack-2017-12-30/js-1.jpeg\"/>\n\napp.js\n``` javascript\nimport _ from 'lodash';\nimport a from './module/a';\nimport b from './module/b';\nrequire(\"babel-polyfill\")\nrequire('./style/lib.css')\n\nfunction fn () {\n  let aa = _.clone({key:4})\n  aa.key = 2;\n  return aa\n}\n\nfn()\n```\n\nwebpack\n\n<img width=\"500\" src=\"webpack-2017-12-30/js-2.jpeg\"/>\n\napp.jsvendor.jsHashedModuleIdsPlugin\n\n\n\n``` javascript\nplugins: [\n    new webpack.HashedModuleIdsPlugin(),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'vendor'\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'manifest'\n    }),\n  ]\n```\n\nwebpack\n\n<img width=\"500\" src=\"webpack-2017-12-30/js-3.jpeg\"/>\n<img width=\"500\" src=\"webpack-2017-12-30/js-4.jpeg\"/>\n\n### webpack3tree-shaking\n\ntree-shakingwebpack2webpack3\n\n> tree-shakingUglifyJsPlugin\n\n#### \n\nmodule/a.js\n\n``` javascript\nrequire('../style/a.less');\nfunction a() {\n  return 'aaaaaa'\n}\nexport {a};\n```\n\nmodule/b.js\n\n``` javascript\nrequire('../style/b.scss');\nfunction b() {\n  return 'bbbbbbb'\n}\nexport {b};\n```\n\n\n\n``` javascript\n// app.js\nimport _ from 'lodash';\nimport { a } from './module/a';\nimport {b} from './module/b';\nrequire(\"babel-polyfill\")\nrequire('./style/lib.css')\nfunction wq() {\n  return a()\n}\nwq()\n```\n\nwebpackbbbbbbbwebpack\n\n#### \na.jsb.js\n\n``` javascript\n// module/a.js\nrequire('../style/a.less');\nfunction a() {\n  return 'aaaaaa'\n}\na.prototype.fn = () => {\n  return 'aaaaaa'\n}\nexport {a};\n```\n\n``` javascript\n// module/b.js\nrequire('../style/b.scss');\nfunction b() {\n  return 'bbbbbbb'\n}\nb.prototype.fn = () => {\n  return 'bbbbbbb'\n}\nexport {b};\n```\n\n\n\n``` javascript\n// app.js\nimport _ from 'lodash';\nimport { a } from './module/a';\nimport {b} from './module/b';\nrequire(\"babel-polyfill\")\nrequire('./style/lib.css')\n\nfunction wq() {\n  return a.prototype.fn()\n}\n\nwq()\n```\n\nwebpackbbbbbbbtree-shaking\n\n#### class\nes6ab\n\n``` javascript\n// module/a.js\nrequire('../style/a.less');\nclass a {\n  fn() {\n    return 'aaaaaaa'\n  }\n}\nexport {a};\n```\n\n``` javascript\n// module/b.js\nrequire('../style/b.scss');\nclass b {\n  fn() {\n    return 'bbbbbb'\n  }\n}\nexport {b};\n```\n\nwebpackbbbbbbbtree-shaking\n\n#### let\n\n\n``` javascript\n// module/a.js\nrequire('../style/a.less');\nlet a = 'aaaaaaa'\n\nexport {a};\n```\n\n``` javascript\n// module/b.js\nrequire('../style/b.scss');\nlet b = 'bbbbbbb'\n\nexport {b};\n```\n\nwebpackbbbbbbbtree-shaking\n\n#### \n\n\n\nclasswebpack\n``` javascript\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\nvar b = function () {\n  function b() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, b);\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(b, [{\n    key: 'fn',\n    value: function fn() {\n      return 'bbbbbb';\n    }\n  }]);\n\n  return b;\n}();\n```\nb__webpack_require__(\"Zrlr\")prototype\n\nwebpackvue/reactbabel-loader<a href=\"/babelrc-2017-12-23/\" target=\"_blank\">.babelrc</a>\n``` javascript\nconst webpack = require('webpack'); //to access built-in plugins\nconst path = require('path');\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst HtmlWebpackPlugin = require('html-webpack-plugin'); //installed via npm\nconst ExtractTextPlugin = require('extract-text-webpack-plugin')\nconst StyleExtHtmlWebpackPlugin = require('style-ext-html-webpack-plugin')\nconst PreloadWebpackPlugin = require('preload-webpack-plugin')\n\n\nconst config = {\n  entry: {\n    app: './src/app.js',\n    vendor: ['lodash']\n  },\n  output: {\n    path: path.resolve(__dirname, 'cdist'),\n    filename: '[name].[chunkhash].js'\n  },\n  externals: {\n    'jquery': 'jquery'\n  },\n  // resolve: {\n  //   extensions: ['.js', '.json'],\n  //   alias: {\n  //     'jquery': 'jquery/dist/jquery.slim.min.js',\n  //     '@': resolve('src'),\n  //   }\n  // },\n  module: {\n    rules: [{\n        test: /\\.js$/,\n        use: 'babel-loader',\n        exclude: /node_modules/\n      },\n      {\n        test: /\\.(less|scss|css)$/,\n        use: ExtractTextPlugin.extract({\n          fallback: \"style-loader\",\n          use: [\n            {\n              loader:\"css-loader\",\n              options:{\n                minimize: true //css\n              }\n            }, \n            {\n              loader:\"less-loader\",\n              options:{\n                minimize: true //css\n              }\n            }, \n            {\n              loader:\"sass-loader\",\n              options:{\n                minimize: true //css\n              }\n            }]\n        })\n      }\n    ]\n  },\n  plugins: [\n    new webpack.optimize.ModuleConcatenationPlugin(),\n    new CleanWebpackPlugin(['cdist']),\n    new HtmlWebpackPlugin({\n      template: './src/index.template.html', //html\n      filename: 'wq.html', //htmlpath\n      favicon: './src/favicon.ico', //faviconwebpackhash\n      inject: 'body', //jstrue/'head'/'body'/false\n      // chunks: ['app', 'vendor'],\n      //hash: true ,//hash\n      minify: { //HTML\n        removeComments: true, //HTML\n        collapseWhitespace: false //\n      }\n    }),\n    new PreloadWebpackPlugin({\n      rel: 'preload',\n      as: 'script',\n      include: 'all'\n    }),\n    // hash\n    new webpack.HashedModuleIdsPlugin(),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'vendor'\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'manifest'\n    }),\n    new ExtractTextPlugin({\n      filename: 'common.[contenthash].css',\n      allChunks: true\n    }),\n    new webpack.optimize.UglifyJsPlugin({\n      beautify: false,\n      comments: false,\n      compress: {\n        warnings: false,\n        drop_console: true,\n        collapse_vars: true,\n        reduce_vars: true,\n      }\n    }),\n    new StyleExtHtmlWebpackPlugin({\n      minify: true\n    })\n  ]\n};\n\nmodule.exports = config;\n```","source":"_posts/webpack-2017-12-30.md","raw":"---\ntitle: webpack\ncomments: true\ntoc: true\ndate: 2017-12-30 17:06:58\ntags:\n    - 'javascript'\n    - 'webpack'\n---\n\n> webpack3.5\n\n### \n\nScope Hoisting-,JS\n\n``` javascript\nplugins: [\n    new webpack.optimize.ModuleConcatenationPlugin()\n]    \n```\n\n\n<img width=\"500\" src=\"webpack-2017-12-30/5.jpeg\"/>\n\n<!-- more -->\n\n\n\n<img width=\"500\" src=\"webpack-2017-12-30/6.jpeg\"/>\n<img width=\"500\" src=\"webpack-2017-12-30/7.jpeg\"/>\n\n\n### \n\n#### externals\n\nexternalsscript\n``` javascript\nexternals: {\n  'jquery': 'jquery'\n},\n```\n\n#### alias\n\n* \n* webpack\n\n\n\n``` javascript\nresolve: {\n  extensions: ['.js', '.json'],\n  alias: {\n    'jquery': 'jquery/dist/jquery.slim.min.js',\n    '@': resolve('src'),\n  }\n},\n```\n\n### \n\n#### css\n\nwebpack\n``` javascript\nplugins: [\n  new StyleExtHtmlWebpackPlugin({\n    minify: true\n  })\n]\n```\ncss\n\n#### preload\nwebpack\n``` javascript\nplugins: [\n  new PreloadWebpackPlugin({\n    rel: 'preload',\n    as: 'script',\n    include: 'all'\n  })\n]\n```\nheadpreloadlink\n``` html\n<link rel=\"preload\" as=\"script\" href=\"app.8898b6c9e3b39f7a1c9d.js\">\n<link rel=\"preload\" as=\"script\" href=\"common.6ecc97ec2b5dceebbd5e800322c2a3c0.css\">\n<link rel=\"preload\" as=\"script\" href=\"vendor.dcd374ee43fd57d2365b.js\">\n<link rel=\"preload\" as=\"script\" href=\"manifest.f3e58576762e216d8867.js\">\n```\n\n\n<a href=\"https://github.com/GoogleChromeLabs/preload-webpack-plugin\" target=\"_blank\"></a>\n\n### \n\n#### css\n\n##### contenthash\n\nwebpackcssextract-text-webpack-pluginhashwebpackmodule identifierhashchunkhash\n\n``` javascript\nmodule: {\n  rules: [{\n    test: /\\.(less|scss|css)$/,\n    use: ExtractTextPlugin.extract({\n      fallback: \"style-loader\",\n      use: [\n        {\n          loader:\"css-loader\",\n          options:{\n            minimize: true //css\n          }\n        }, \n        {\n          loader:\"less-loader\",\n          options:{\n            minimize: true //css\n          }\n        }, \n        {\n          loader:\"sass-loader\",\n          options:{\n            minimize: true //css\n          }\n        }]\n    })\n  }]\n},\nplugins: [\n  new ExtractTextPlugin({\n    filename: 'common.[chunkhash].css',\n    allChunks: true\n  }),\n]\n```\n\ncss\n\n``` less\n// a.less\n.ac {\n .bc {\n   font-size: 12px;\n }\n .cc {\n   font-weight: 700;\n   border: 1px solid #ccc;\n }\n}\n```\n\nmodulea.jsa.less\n\n``` javascript\n// module/a.js\nrequire('../style/a.less');\n```\n\nhashjshashcsshashwebpack\n\n<img width=\"500\" src=\"webpack-2017-12-30/css-1.jpeg\"/>\n\ncssjshashcsshashExtractTextPlugincontenthash\n\ncontenthashcsshashjscss\n\n<img width=\"500\" src=\"webpack-2017-12-30/css-2.jpeg\"/>\n\n#### js\n\n##### HashedModuleIdsPlugin\n\nwebpack\n\n``` javascript\nentry: {\n  app: './src/app.js',\n  vendor: ['lodash']\n},\nplugins: [\n    new CleanWebpackPlugin(['cdist']),\n    new HtmlWebpackPlugin({\n      template: './src/index.template.html', //html\n      filename: 'wq.html', //htmlpath\n      favicon: './src/favicon.ico', //faviconwebpackhash\n      inject: 'body', //jstrue/'head'/'body'/false\n      // chunks: ['app', 'vendor'],\n      //hash: true ,//hash\n      minify: { //HTML\n        removeComments: true, //HTML\n        collapseWhitespace: false //\n      }\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'vendor'\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'manifest'\n    }),\n    new ExtractTextPlugin({\n      filename: 'common.[contenthash].css',\n      allChunks: true\n    }),\n    new webpack.optimize.UglifyJsPlugin({\n      beautify: false,\n      comments: false,\n      compress: {\n        warnings: false,\n        drop_console: true,\n        collapse_vars: true,\n        reduce_vars: true,\n      }\n    })\n  ]\n```\n\napp.js\n\n``` javascript\nimport _ from 'lodash';\nimport a from './module/a';\n// import b from './module/b';\nrequire(\"babel-polyfill\")\nrequire('./style/lib.css')\n\nfunction fn () {\n  // let aa = _.clone({key:4})\n  // aa.key = 2;\n  return aa\n}\n\nfn()\n```\n\n\n\n<img width=\"500\" src=\"webpack-2017-12-30/js-1.jpeg\"/>\n\napp.js\n``` javascript\nimport _ from 'lodash';\nimport a from './module/a';\nimport b from './module/b';\nrequire(\"babel-polyfill\")\nrequire('./style/lib.css')\n\nfunction fn () {\n  let aa = _.clone({key:4})\n  aa.key = 2;\n  return aa\n}\n\nfn()\n```\n\nwebpack\n\n<img width=\"500\" src=\"webpack-2017-12-30/js-2.jpeg\"/>\n\napp.jsvendor.jsHashedModuleIdsPlugin\n\n\n\n``` javascript\nplugins: [\n    new webpack.HashedModuleIdsPlugin(),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'vendor'\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'manifest'\n    }),\n  ]\n```\n\nwebpack\n\n<img width=\"500\" src=\"webpack-2017-12-30/js-3.jpeg\"/>\n<img width=\"500\" src=\"webpack-2017-12-30/js-4.jpeg\"/>\n\n### webpack3tree-shaking\n\ntree-shakingwebpack2webpack3\n\n> tree-shakingUglifyJsPlugin\n\n#### \n\nmodule/a.js\n\n``` javascript\nrequire('../style/a.less');\nfunction a() {\n  return 'aaaaaa'\n}\nexport {a};\n```\n\nmodule/b.js\n\n``` javascript\nrequire('../style/b.scss');\nfunction b() {\n  return 'bbbbbbb'\n}\nexport {b};\n```\n\n\n\n``` javascript\n// app.js\nimport _ from 'lodash';\nimport { a } from './module/a';\nimport {b} from './module/b';\nrequire(\"babel-polyfill\")\nrequire('./style/lib.css')\nfunction wq() {\n  return a()\n}\nwq()\n```\n\nwebpackbbbbbbbwebpack\n\n#### \na.jsb.js\n\n``` javascript\n// module/a.js\nrequire('../style/a.less');\nfunction a() {\n  return 'aaaaaa'\n}\na.prototype.fn = () => {\n  return 'aaaaaa'\n}\nexport {a};\n```\n\n``` javascript\n// module/b.js\nrequire('../style/b.scss');\nfunction b() {\n  return 'bbbbbbb'\n}\nb.prototype.fn = () => {\n  return 'bbbbbbb'\n}\nexport {b};\n```\n\n\n\n``` javascript\n// app.js\nimport _ from 'lodash';\nimport { a } from './module/a';\nimport {b} from './module/b';\nrequire(\"babel-polyfill\")\nrequire('./style/lib.css')\n\nfunction wq() {\n  return a.prototype.fn()\n}\n\nwq()\n```\n\nwebpackbbbbbbbtree-shaking\n\n#### class\nes6ab\n\n``` javascript\n// module/a.js\nrequire('../style/a.less');\nclass a {\n  fn() {\n    return 'aaaaaaa'\n  }\n}\nexport {a};\n```\n\n``` javascript\n// module/b.js\nrequire('../style/b.scss');\nclass b {\n  fn() {\n    return 'bbbbbb'\n  }\n}\nexport {b};\n```\n\nwebpackbbbbbbbtree-shaking\n\n#### let\n\n\n``` javascript\n// module/a.js\nrequire('../style/a.less');\nlet a = 'aaaaaaa'\n\nexport {a};\n```\n\n``` javascript\n// module/b.js\nrequire('../style/b.scss');\nlet b = 'bbbbbbb'\n\nexport {b};\n```\n\nwebpackbbbbbbbtree-shaking\n\n#### \n\n\n\nclasswebpack\n``` javascript\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\nvar b = function () {\n  function b() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, b);\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(b, [{\n    key: 'fn',\n    value: function fn() {\n      return 'bbbbbb';\n    }\n  }]);\n\n  return b;\n}();\n```\nb__webpack_require__(\"Zrlr\")prototype\n\nwebpackvue/reactbabel-loader<a href=\"/babelrc-2017-12-23/\" target=\"_blank\">.babelrc</a>\n``` javascript\nconst webpack = require('webpack'); //to access built-in plugins\nconst path = require('path');\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst HtmlWebpackPlugin = require('html-webpack-plugin'); //installed via npm\nconst ExtractTextPlugin = require('extract-text-webpack-plugin')\nconst StyleExtHtmlWebpackPlugin = require('style-ext-html-webpack-plugin')\nconst PreloadWebpackPlugin = require('preload-webpack-plugin')\n\n\nconst config = {\n  entry: {\n    app: './src/app.js',\n    vendor: ['lodash']\n  },\n  output: {\n    path: path.resolve(__dirname, 'cdist'),\n    filename: '[name].[chunkhash].js'\n  },\n  externals: {\n    'jquery': 'jquery'\n  },\n  // resolve: {\n  //   extensions: ['.js', '.json'],\n  //   alias: {\n  //     'jquery': 'jquery/dist/jquery.slim.min.js',\n  //     '@': resolve('src'),\n  //   }\n  // },\n  module: {\n    rules: [{\n        test: /\\.js$/,\n        use: 'babel-loader',\n        exclude: /node_modules/\n      },\n      {\n        test: /\\.(less|scss|css)$/,\n        use: ExtractTextPlugin.extract({\n          fallback: \"style-loader\",\n          use: [\n            {\n              loader:\"css-loader\",\n              options:{\n                minimize: true //css\n              }\n            }, \n            {\n              loader:\"less-loader\",\n              options:{\n                minimize: true //css\n              }\n            }, \n            {\n              loader:\"sass-loader\",\n              options:{\n                minimize: true //css\n              }\n            }]\n        })\n      }\n    ]\n  },\n  plugins: [\n    new webpack.optimize.ModuleConcatenationPlugin(),\n    new CleanWebpackPlugin(['cdist']),\n    new HtmlWebpackPlugin({\n      template: './src/index.template.html', //html\n      filename: 'wq.html', //htmlpath\n      favicon: './src/favicon.ico', //faviconwebpackhash\n      inject: 'body', //jstrue/'head'/'body'/false\n      // chunks: ['app', 'vendor'],\n      //hash: true ,//hash\n      minify: { //HTML\n        removeComments: true, //HTML\n        collapseWhitespace: false //\n      }\n    }),\n    new PreloadWebpackPlugin({\n      rel: 'preload',\n      as: 'script',\n      include: 'all'\n    }),\n    // hash\n    new webpack.HashedModuleIdsPlugin(),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'vendor'\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'manifest'\n    }),\n    new ExtractTextPlugin({\n      filename: 'common.[contenthash].css',\n      allChunks: true\n    }),\n    new webpack.optimize.UglifyJsPlugin({\n      beautify: false,\n      comments: false,\n      compress: {\n        warnings: false,\n        drop_console: true,\n        collapse_vars: true,\n        reduce_vars: true,\n      }\n    }),\n    new StyleExtHtmlWebpackPlugin({\n      minify: true\n    })\n  ]\n};\n\nmodule.exports = config;\n```","slug":"webpack-2017-12-30","published":1,"updated":"2018-02-10T08:56:11.000Z","layout":"post","photos":[],"link":"","_id":"cjosd1vbw002sfdldfwks8jbq","content":"<blockquote>\n<p>webpack3.5</p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Scope Hoisting-,JS<br><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.ModuleConcatenationPlugin()</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/5.jpeg\"></p>\n<a id=\"more\"></a>\n<p></p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/6.jpeg\"><br><img width=\"500\" src=\"/webpack-2017-12-30/7.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"externals\"><a href=\"#externals\" class=\"headerlink\" title=\"externals\"></a>externals</h4><p>externalsscript<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">externals: &#123;</div><div class=\"line\">  <span class=\"string\">'jquery'</span>: <span class=\"string\">'jquery'</span></div><div class=\"line\">&#125;,</div></pre></td></tr></table></figure></p>\n<h4 id=\"alias\"><a href=\"#alias\" class=\"headerlink\" title=\"alias\"></a>alias</h4><ul>\n<li></li>\n<li>webpack</li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">resolve: &#123;</div><div class=\"line\">  extensions: [<span class=\"string\">'.js'</span>, <span class=\"string\">'.json'</span>],</div><div class=\"line\">  alias: &#123;</div><div class=\"line\">    <span class=\"string\">'jquery'</span>: <span class=\"string\">'jquery/dist/jquery.slim.min.js'</span>,</div><div class=\"line\">    <span class=\"string\">'@'</span>: resolve(<span class=\"string\">'src'</span>),</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;,</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h4><p>webpack<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins: [</div><div class=\"line\">  <span class=\"keyword\">new</span> StyleExtHtmlWebpackPlugin(&#123;</div><div class=\"line\">    minify: <span class=\"literal\">true</span></div><div class=\"line\">  &#125;)</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<p>css</p>\n<h4 id=\"preload\"><a href=\"#preload\" class=\"headerlink\" title=\"preload\"></a>preload</h4><p>webpack<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins: [</div><div class=\"line\">  <span class=\"keyword\">new</span> PreloadWebpackPlugin(&#123;</div><div class=\"line\">    rel: <span class=\"string\">'preload'</span>,</div><div class=\"line\">    <span class=\"keyword\">as</span>: <span class=\"string\">'script'</span>,</div><div class=\"line\">    include: <span class=\"string\">'all'</span></div><div class=\"line\">  &#125;)</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<p>headpreloadlink<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"script\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"app.8898b6c9e3b39f7a1c9d.js\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"script\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"common.6ecc97ec2b5dceebbd5e800322c2a3c0.css\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"script\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"vendor.dcd374ee43fd57d2365b.js\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"script\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"manifest.f3e58576762e216d8867.js\"</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p><a href=\"https://github.com/GoogleChromeLabs/preload-webpack-plugin\" target=\"_blank\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h4><h5 id=\"contenthash\"><a href=\"#contenthash\" class=\"headerlink\" title=\"contenthash\"></a>contenthash</h5><p>webpackcssextract-text-webpack-pluginhashwebpackmodule identifierhashchunkhash</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">  rules: [&#123;</div><div class=\"line\">    test: <span class=\"regexp\">/\\.(less|scss|css)$/</span>,</div><div class=\"line\">    use: ExtractTextPlugin.extract(&#123;</div><div class=\"line\">      fallback: <span class=\"string\">\"style-loader\"</span>,</div><div class=\"line\">      use: [</div><div class=\"line\">        &#123;</div><div class=\"line\">          loader:<span class=\"string\">\"css-loader\"</span>,</div><div class=\"line\">          options:&#123;</div><div class=\"line\">            minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;, </div><div class=\"line\">        &#123;</div><div class=\"line\">          loader:<span class=\"string\">\"less-loader\"</span>,</div><div class=\"line\">          options:&#123;</div><div class=\"line\">            minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;, </div><div class=\"line\">        &#123;</div><div class=\"line\">          loader:<span class=\"string\">\"sass-loader\"</span>,</div><div class=\"line\">          options:&#123;</div><div class=\"line\">            minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;]</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;]</div><div class=\"line\">&#125;,</div><div class=\"line\">plugins: [</div><div class=\"line\">  <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</div><div class=\"line\">    filename: <span class=\"string\">'common.[chunkhash].css'</span>,</div><div class=\"line\">    allChunks: <span class=\"literal\">true</span></div><div class=\"line\">  &#125;),</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<p>css</p>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// a.less</span></div><div class=\"line\"><span class=\"selector-class\">.ac</span> &#123;</div><div class=\"line\"> <span class=\"selector-class\">.bc</span> &#123;</div><div class=\"line\">   <span class=\"attribute\">font-size</span>: <span class=\"number\">12px</span>;</div><div class=\"line\"> &#125;</div><div class=\"line\"> <span class=\"selector-class\">.cc</span> &#123;</div><div class=\"line\">   <span class=\"attribute\">font-weight</span>: <span class=\"number\">700</span>;</div><div class=\"line\">   <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ccc</span>;</div><div class=\"line\"> &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>modulea.jsa.less</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/a.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/a.less'</span>);</div></pre></td></tr></table></figure>\n<p>hashjshashcsshashwebpack</p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/css-1.jpeg\"></p>\n<p>cssjshashcsshashExtractTextPlugincontenthash</p>\n<p>contenthashcsshashjscss</p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/css-2.jpeg\"></p>\n<h4 id=\"js\"><a href=\"#js\" class=\"headerlink\" title=\"js\"></a>js</h4><h5 id=\"HashedModuleIdsPlugin\"><a href=\"#HashedModuleIdsPlugin\" class=\"headerlink\" title=\"HashedModuleIdsPlugin\"></a>HashedModuleIdsPlugin</h5><p>webpack</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">entry: &#123;</div><div class=\"line\">  app: <span class=\"string\">'./src/app.js'</span>,</div><div class=\"line\">  vendor: [<span class=\"string\">'lodash'</span>]</div><div class=\"line\">&#125;,</div><div class=\"line\">plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> CleanWebpackPlugin([<span class=\"string\">'cdist'</span>]),</div><div class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">      template: <span class=\"string\">'./src/index.template.html'</span>, <span class=\"comment\">//html</span></div><div class=\"line\">      filename: <span class=\"string\">'wq.html'</span>, <span class=\"comment\">//htmlpath</span></div><div class=\"line\">      favicon: <span class=\"string\">'./src/favicon.ico'</span>, <span class=\"comment\">//faviconwebpackhash</span></div><div class=\"line\">      inject: <span class=\"string\">'body'</span>, <span class=\"comment\">//jstrue/'head'/'body'/false</span></div><div class=\"line\">      <span class=\"comment\">// chunks: ['app', 'vendor'],</span></div><div class=\"line\">      <span class=\"comment\">//hash: true ,//hash</span></div><div class=\"line\">      minify: &#123; <span class=\"comment\">//HTML</span></div><div class=\"line\">        removeComments: <span class=\"literal\">true</span>, <span class=\"comment\">//HTML</span></div><div class=\"line\">        collapseWhitespace: <span class=\"literal\">false</span> <span class=\"comment\">//</span></div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'vendor'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'manifest'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</div><div class=\"line\">      filename: <span class=\"string\">'common.[contenthash].css'</span>,</div><div class=\"line\">      allChunks: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class=\"line\">      beautify: <span class=\"literal\">false</span>,</div><div class=\"line\">      comments: <span class=\"literal\">false</span>,</div><div class=\"line\">      compress: &#123;</div><div class=\"line\">        warnings: <span class=\"literal\">false</span>,</div><div class=\"line\">        drop_console: <span class=\"literal\">true</span>,</div><div class=\"line\">        collapse_vars: <span class=\"literal\">true</span>,</div><div class=\"line\">        reduce_vars: <span class=\"literal\">true</span>,</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">  ]</div></pre></td></tr></table></figure>\n<p>app.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> a <span class=\"keyword\">from</span> <span class=\"string\">'./module/a'</span>;</div><div class=\"line\"><span class=\"comment\">// import b from './module/b';</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">\"babel-polyfill\"</span>)</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./style/lib.css'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// let aa = _.clone(&#123;key:4&#125;)</span></div><div class=\"line\">  <span class=\"comment\">// aa.key = 2;</span></div><div class=\"line\">  <span class=\"keyword\">return</span> aa</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">fn()</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/js-1.jpeg\"></p>\n<p>app.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> a <span class=\"keyword\">from</span> <span class=\"string\">'./module/a'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> b <span class=\"keyword\">from</span> <span class=\"string\">'./module/b'</span>;</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">\"babel-polyfill\"</span>)</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./style/lib.css'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> aa = _.clone(&#123;<span class=\"attr\">key</span>:<span class=\"number\">4</span>&#125;)</div><div class=\"line\">  aa.key = <span class=\"number\">2</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> aa</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">fn()</div></pre></td></tr></table></figure></p>\n<p>webpack</p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/js-2.jpeg\"></p>\n<p>app.jsvendor.jsHashedModuleIdsPlugin</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.HashedModuleIdsPlugin(),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'vendor'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'manifest'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">  ]</div></pre></td></tr></table></figure>\n<p>webpack</p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/js-3.jpeg\"><br><img width=\"500\" src=\"/webpack-2017-12-30/js-4.jpeg\"></p>\n<h3 id=\"webpack3tree-shaking\"><a href=\"#webpack3tree-shaking\" class=\"headerlink\" title=\"webpack3tree-shaking\"></a>webpack3tree-shaking</h3><p>tree-shakingwebpack2webpack3</p>\n<blockquote>\n<p>tree-shakingUglifyJsPlugin</p>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>module/a.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/a.less'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'aaaaaa'</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;a&#125;;</div></pre></td></tr></table></figure>\n<p>module/b.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/b.scss'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'bbbbbbb'</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;b&#125;;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// app.js</span></div><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> &#123; a &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./module/a'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> &#123;b&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./module/b'</span>;</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">\"babel-polyfill\"</span>)</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./style/lib.css'</span>)</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wq</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> a()</div><div class=\"line\">&#125;</div><div class=\"line\">wq()</div></pre></td></tr></table></figure>\n<p>webpackbbbbbbbwebpack</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>a.jsb.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/a.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/a.less'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'aaaaaa'</span></div><div class=\"line\">&#125;</div><div class=\"line\">a.prototype.fn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'aaaaaa'</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;a&#125;;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/b.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/b.scss'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'bbbbbbb'</span></div><div class=\"line\">&#125;</div><div class=\"line\">b.prototype.fn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'bbbbbbb'</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;b&#125;;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// app.js</span></div><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> &#123; a &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./module/a'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> &#123;b&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./module/b'</span>;</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">\"babel-polyfill\"</span>)</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./style/lib.css'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wq</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> a.prototype.fn()</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">wq()</div></pre></td></tr></table></figure>\n<p>webpackbbbbbbbtree-shaking</p>\n<h4 id=\"class\"><a href=\"#class\" class=\"headerlink\" title=\"class\"></a>class</h4><p>es6ab</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/a.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/a.less'</span>);</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">a</span> </span>&#123;</div><div class=\"line\">  fn() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'aaaaaaa'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;a&#125;;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/b.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/b.scss'</span>);</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">b</span> </span>&#123;</div><div class=\"line\">  fn() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'bbbbbb'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;b&#125;;</div></pre></td></tr></table></figure>\n<p>webpackbbbbbbbtree-shaking</p>\n<h4 id=\"let\"><a href=\"#let\" class=\"headerlink\" title=\"let\"></a>let</h4><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/a.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/a.less'</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"string\">'aaaaaaa'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> &#123;a&#125;;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/b.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/b.scss'</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"string\">'bbbbbbb'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> &#123;b&#125;;</div></pre></td></tr></table></figure>\n<p>webpackbbbbbbbtree-shaking</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>classwebpack<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(<span class=\"string\">\"Zrlr\"</span>);</div><div class=\"line\"><span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);</div><div class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(<span class=\"keyword\">this</span>, b);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(b, [&#123;</div><div class=\"line\">    key: <span class=\"string\">'fn'</span>,</div><div class=\"line\">    value: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'bbbbbb'</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;]);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> b;</div><div class=\"line\">&#125;();</div></pre></td></tr></table></figure></p>\n<p>b<strong>webpack_require</strong>(Zrlr)prototype</p>\n<p>webpackvue/reactbabel-loader<a href=\"/babelrc-2017-12-23/\" target=\"_blank\">.babelrc</a><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>); <span class=\"comment\">//to access built-in plugins</span></div><div class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> CleanWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'clean-webpack-plugin'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>); <span class=\"comment\">//installed via npm</span></div><div class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> StyleExtHtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'style-ext-html-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> PreloadWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'preload-webpack-plugin'</span>)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> config = &#123;</div><div class=\"line\">  entry: &#123;</div><div class=\"line\">    app: <span class=\"string\">'./src/app.js'</span>,</div><div class=\"line\">    vendor: [<span class=\"string\">'lodash'</span>]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  output: &#123;</div><div class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'cdist'</span>),</div><div class=\"line\">    filename: <span class=\"string\">'[name].[chunkhash].js'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  externals: &#123;</div><div class=\"line\">    <span class=\"string\">'jquery'</span>: <span class=\"string\">'jquery'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">// resolve: &#123;</span></div><div class=\"line\">  <span class=\"comment\">//   extensions: ['.js', '.json'],</span></div><div class=\"line\">  <span class=\"comment\">//   alias: &#123;</span></div><div class=\"line\">  <span class=\"comment\">//     'jquery': 'jquery/dist/jquery.slim.min.js',</span></div><div class=\"line\">  <span class=\"comment\">//     '@': resolve('src'),</span></div><div class=\"line\">  <span class=\"comment\">//   &#125;</span></div><div class=\"line\">  <span class=\"comment\">// &#125;,</span></div><div class=\"line\">  <span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">    rules: [&#123;</div><div class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</div><div class=\"line\">        use: <span class=\"string\">'babel-loader'</span>,</div><div class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span></div><div class=\"line\">      &#125;,</div><div class=\"line\">      &#123;</div><div class=\"line\">        test: <span class=\"regexp\">/\\.(less|scss|css)$/</span>,</div><div class=\"line\">        use: ExtractTextPlugin.extract(&#123;</div><div class=\"line\">          fallback: <span class=\"string\">\"style-loader\"</span>,</div><div class=\"line\">          use: [</div><div class=\"line\">            &#123;</div><div class=\"line\">              loader:<span class=\"string\">\"css-loader\"</span>,</div><div class=\"line\">              options:&#123;</div><div class=\"line\">                minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">              &#125;</div><div class=\"line\">            &#125;, </div><div class=\"line\">            &#123;</div><div class=\"line\">              loader:<span class=\"string\">\"less-loader\"</span>,</div><div class=\"line\">              options:&#123;</div><div class=\"line\">                minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">              &#125;</div><div class=\"line\">            &#125;, </div><div class=\"line\">            &#123;</div><div class=\"line\">              loader:<span class=\"string\">\"sass-loader\"</span>,</div><div class=\"line\">              options:&#123;</div><div class=\"line\">                minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">              &#125;</div><div class=\"line\">            &#125;]</div><div class=\"line\">        &#125;)</div><div class=\"line\">      &#125;</div><div class=\"line\">    ]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.ModuleConcatenationPlugin(),</div><div class=\"line\">    <span class=\"keyword\">new</span> CleanWebpackPlugin([<span class=\"string\">'cdist'</span>]),</div><div class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">      template: <span class=\"string\">'./src/index.template.html'</span>, <span class=\"comment\">//html</span></div><div class=\"line\">      filename: <span class=\"string\">'wq.html'</span>, <span class=\"comment\">//htmlpath</span></div><div class=\"line\">      favicon: <span class=\"string\">'./src/favicon.ico'</span>, <span class=\"comment\">//faviconwebpackhash</span></div><div class=\"line\">      inject: <span class=\"string\">'body'</span>, <span class=\"comment\">//jstrue/'head'/'body'/false</span></div><div class=\"line\">      <span class=\"comment\">// chunks: ['app', 'vendor'],</span></div><div class=\"line\">      <span class=\"comment\">//hash: true ,//hash</span></div><div class=\"line\">      minify: &#123; <span class=\"comment\">//HTML</span></div><div class=\"line\">        removeComments: <span class=\"literal\">true</span>, <span class=\"comment\">//HTML</span></div><div class=\"line\">        collapseWhitespace: <span class=\"literal\">false</span> <span class=\"comment\">//</span></div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> PreloadWebpackPlugin(&#123;</div><div class=\"line\">      rel: <span class=\"string\">'preload'</span>,</div><div class=\"line\">      <span class=\"keyword\">as</span>: <span class=\"string\">'script'</span>,</div><div class=\"line\">      include: <span class=\"string\">'all'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"comment\">// hash</span></div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.HashedModuleIdsPlugin(),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'vendor'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'manifest'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</div><div class=\"line\">      filename: <span class=\"string\">'common.[contenthash].css'</span>,</div><div class=\"line\">      allChunks: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class=\"line\">      beautify: <span class=\"literal\">false</span>,</div><div class=\"line\">      comments: <span class=\"literal\">false</span>,</div><div class=\"line\">      compress: &#123;</div><div class=\"line\">        warnings: <span class=\"literal\">false</span>,</div><div class=\"line\">        drop_console: <span class=\"literal\">true</span>,</div><div class=\"line\">        collapse_vars: <span class=\"literal\">true</span>,</div><div class=\"line\">        reduce_vars: <span class=\"literal\">true</span>,</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> StyleExtHtmlWebpackPlugin(&#123;</div><div class=\"line\">      minify: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">  ]</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = config;</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>webpack3.5</p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Scope Hoisting-,JS<br><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.ModuleConcatenationPlugin()</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/5.jpeg\"></p>","more":"<p></p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/6.jpeg\"><br><img width=\"500\" src=\"/webpack-2017-12-30/7.jpeg\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"externals\"><a href=\"#externals\" class=\"headerlink\" title=\"externals\"></a>externals</h4><p>externalsscript<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">externals: &#123;</div><div class=\"line\">  <span class=\"string\">'jquery'</span>: <span class=\"string\">'jquery'</span></div><div class=\"line\">&#125;,</div></pre></td></tr></table></figure></p>\n<h4 id=\"alias\"><a href=\"#alias\" class=\"headerlink\" title=\"alias\"></a>alias</h4><ul>\n<li></li>\n<li>webpack</li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">resolve: &#123;</div><div class=\"line\">  extensions: [<span class=\"string\">'.js'</span>, <span class=\"string\">'.json'</span>],</div><div class=\"line\">  alias: &#123;</div><div class=\"line\">    <span class=\"string\">'jquery'</span>: <span class=\"string\">'jquery/dist/jquery.slim.min.js'</span>,</div><div class=\"line\">    <span class=\"string\">'@'</span>: resolve(<span class=\"string\">'src'</span>),</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;,</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h4><p>webpack<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins: [</div><div class=\"line\">  <span class=\"keyword\">new</span> StyleExtHtmlWebpackPlugin(&#123;</div><div class=\"line\">    minify: <span class=\"literal\">true</span></div><div class=\"line\">  &#125;)</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<p>css</p>\n<h4 id=\"preload\"><a href=\"#preload\" class=\"headerlink\" title=\"preload\"></a>preload</h4><p>webpack<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins: [</div><div class=\"line\">  <span class=\"keyword\">new</span> PreloadWebpackPlugin(&#123;</div><div class=\"line\">    rel: <span class=\"string\">'preload'</span>,</div><div class=\"line\">    <span class=\"keyword\">as</span>: <span class=\"string\">'script'</span>,</div><div class=\"line\">    include: <span class=\"string\">'all'</span></div><div class=\"line\">  &#125;)</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<p>headpreloadlink<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"script\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"app.8898b6c9e3b39f7a1c9d.js\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"script\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"common.6ecc97ec2b5dceebbd5e800322c2a3c0.css\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"script\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"vendor.dcd374ee43fd57d2365b.js\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"preload\"</span> <span class=\"attr\">as</span>=<span class=\"string\">\"script\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"manifest.f3e58576762e216d8867.js\"</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p><a href=\"https://github.com/GoogleChromeLabs/preload-webpack-plugin\" target=\"_blank\"></a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h4><h5 id=\"contenthash\"><a href=\"#contenthash\" class=\"headerlink\" title=\"contenthash\"></a>contenthash</h5><p>webpackcssextract-text-webpack-pluginhashwebpackmodule identifierhashchunkhash</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">  rules: [&#123;</div><div class=\"line\">    test: <span class=\"regexp\">/\\.(less|scss|css)$/</span>,</div><div class=\"line\">    use: ExtractTextPlugin.extract(&#123;</div><div class=\"line\">      fallback: <span class=\"string\">\"style-loader\"</span>,</div><div class=\"line\">      use: [</div><div class=\"line\">        &#123;</div><div class=\"line\">          loader:<span class=\"string\">\"css-loader\"</span>,</div><div class=\"line\">          options:&#123;</div><div class=\"line\">            minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;, </div><div class=\"line\">        &#123;</div><div class=\"line\">          loader:<span class=\"string\">\"less-loader\"</span>,</div><div class=\"line\">          options:&#123;</div><div class=\"line\">            minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;, </div><div class=\"line\">        &#123;</div><div class=\"line\">          loader:<span class=\"string\">\"sass-loader\"</span>,</div><div class=\"line\">          options:&#123;</div><div class=\"line\">            minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;]</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;]</div><div class=\"line\">&#125;,</div><div class=\"line\">plugins: [</div><div class=\"line\">  <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</div><div class=\"line\">    filename: <span class=\"string\">'common.[chunkhash].css'</span>,</div><div class=\"line\">    allChunks: <span class=\"literal\">true</span></div><div class=\"line\">  &#125;),</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<p>css</p>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// a.less</span></div><div class=\"line\"><span class=\"selector-class\">.ac</span> &#123;</div><div class=\"line\"> <span class=\"selector-class\">.bc</span> &#123;</div><div class=\"line\">   <span class=\"attribute\">font-size</span>: <span class=\"number\">12px</span>;</div><div class=\"line\"> &#125;</div><div class=\"line\"> <span class=\"selector-class\">.cc</span> &#123;</div><div class=\"line\">   <span class=\"attribute\">font-weight</span>: <span class=\"number\">700</span>;</div><div class=\"line\">   <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ccc</span>;</div><div class=\"line\"> &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>modulea.jsa.less</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/a.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/a.less'</span>);</div></pre></td></tr></table></figure>\n<p>hashjshashcsshashwebpack</p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/css-1.jpeg\"></p>\n<p>cssjshashcsshashExtractTextPlugincontenthash</p>\n<p>contenthashcsshashjscss</p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/css-2.jpeg\"></p>\n<h4 id=\"js\"><a href=\"#js\" class=\"headerlink\" title=\"js\"></a>js</h4><h5 id=\"HashedModuleIdsPlugin\"><a href=\"#HashedModuleIdsPlugin\" class=\"headerlink\" title=\"HashedModuleIdsPlugin\"></a>HashedModuleIdsPlugin</h5><p>webpack</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">entry: &#123;</div><div class=\"line\">  app: <span class=\"string\">'./src/app.js'</span>,</div><div class=\"line\">  vendor: [<span class=\"string\">'lodash'</span>]</div><div class=\"line\">&#125;,</div><div class=\"line\">plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> CleanWebpackPlugin([<span class=\"string\">'cdist'</span>]),</div><div class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">      template: <span class=\"string\">'./src/index.template.html'</span>, <span class=\"comment\">//html</span></div><div class=\"line\">      filename: <span class=\"string\">'wq.html'</span>, <span class=\"comment\">//htmlpath</span></div><div class=\"line\">      favicon: <span class=\"string\">'./src/favicon.ico'</span>, <span class=\"comment\">//faviconwebpackhash</span></div><div class=\"line\">      inject: <span class=\"string\">'body'</span>, <span class=\"comment\">//jstrue/'head'/'body'/false</span></div><div class=\"line\">      <span class=\"comment\">// chunks: ['app', 'vendor'],</span></div><div class=\"line\">      <span class=\"comment\">//hash: true ,//hash</span></div><div class=\"line\">      minify: &#123; <span class=\"comment\">//HTML</span></div><div class=\"line\">        removeComments: <span class=\"literal\">true</span>, <span class=\"comment\">//HTML</span></div><div class=\"line\">        collapseWhitespace: <span class=\"literal\">false</span> <span class=\"comment\">//</span></div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'vendor'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'manifest'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</div><div class=\"line\">      filename: <span class=\"string\">'common.[contenthash].css'</span>,</div><div class=\"line\">      allChunks: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class=\"line\">      beautify: <span class=\"literal\">false</span>,</div><div class=\"line\">      comments: <span class=\"literal\">false</span>,</div><div class=\"line\">      compress: &#123;</div><div class=\"line\">        warnings: <span class=\"literal\">false</span>,</div><div class=\"line\">        drop_console: <span class=\"literal\">true</span>,</div><div class=\"line\">        collapse_vars: <span class=\"literal\">true</span>,</div><div class=\"line\">        reduce_vars: <span class=\"literal\">true</span>,</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\">  ]</div></pre></td></tr></table></figure>\n<p>app.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> a <span class=\"keyword\">from</span> <span class=\"string\">'./module/a'</span>;</div><div class=\"line\"><span class=\"comment\">// import b from './module/b';</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">\"babel-polyfill\"</span>)</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./style/lib.css'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// let aa = _.clone(&#123;key:4&#125;)</span></div><div class=\"line\">  <span class=\"comment\">// aa.key = 2;</span></div><div class=\"line\">  <span class=\"keyword\">return</span> aa</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">fn()</div></pre></td></tr></table></figure>\n<p></p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/js-1.jpeg\"></p>\n<p>app.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> a <span class=\"keyword\">from</span> <span class=\"string\">'./module/a'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> b <span class=\"keyword\">from</span> <span class=\"string\">'./module/b'</span>;</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">\"babel-polyfill\"</span>)</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./style/lib.css'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">let</span> aa = _.clone(&#123;<span class=\"attr\">key</span>:<span class=\"number\">4</span>&#125;)</div><div class=\"line\">  aa.key = <span class=\"number\">2</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> aa</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">fn()</div></pre></td></tr></table></figure></p>\n<p>webpack</p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/js-2.jpeg\"></p>\n<p>app.jsvendor.jsHashedModuleIdsPlugin</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.HashedModuleIdsPlugin(),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'vendor'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'manifest'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">  ]</div></pre></td></tr></table></figure>\n<p>webpack</p>\n<p><img width=\"500\" src=\"/webpack-2017-12-30/js-3.jpeg\"><br><img width=\"500\" src=\"/webpack-2017-12-30/js-4.jpeg\"></p>\n<h3 id=\"webpack3tree-shaking\"><a href=\"#webpack3tree-shaking\" class=\"headerlink\" title=\"webpack3tree-shaking\"></a>webpack3tree-shaking</h3><p>tree-shakingwebpack2webpack3</p>\n<blockquote>\n<p>tree-shakingUglifyJsPlugin</p>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>module/a.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/a.less'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'aaaaaa'</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;a&#125;;</div></pre></td></tr></table></figure>\n<p>module/b.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/b.scss'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'bbbbbbb'</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;b&#125;;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// app.js</span></div><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> &#123; a &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./module/a'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> &#123;b&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./module/b'</span>;</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">\"babel-polyfill\"</span>)</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./style/lib.css'</span>)</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wq</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> a()</div><div class=\"line\">&#125;</div><div class=\"line\">wq()</div></pre></td></tr></table></figure>\n<p>webpackbbbbbbbwebpack</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>a.jsb.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/a.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/a.less'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'aaaaaa'</span></div><div class=\"line\">&#125;</div><div class=\"line\">a.prototype.fn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'aaaaaa'</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;a&#125;;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/b.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/b.scss'</span>);</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'bbbbbbb'</span></div><div class=\"line\">&#125;</div><div class=\"line\">b.prototype.fn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'bbbbbbb'</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;b&#125;;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// app.js</span></div><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> &#123; a &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./module/a'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> &#123;b&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./module/b'</span>;</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">\"babel-polyfill\"</span>)</div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./style/lib.css'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wq</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> a.prototype.fn()</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">wq()</div></pre></td></tr></table></figure>\n<p>webpackbbbbbbbtree-shaking</p>\n<h4 id=\"class\"><a href=\"#class\" class=\"headerlink\" title=\"class\"></a>class</h4><p>es6ab</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/a.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/a.less'</span>);</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">a</span> </span>&#123;</div><div class=\"line\">  fn() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'aaaaaaa'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;a&#125;;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/b.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/b.scss'</span>);</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">b</span> </span>&#123;</div><div class=\"line\">  fn() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'bbbbbb'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">export</span> &#123;b&#125;;</div></pre></td></tr></table></figure>\n<p>webpackbbbbbbbtree-shaking</p>\n<h4 id=\"let\"><a href=\"#let\" class=\"headerlink\" title=\"let\"></a>let</h4><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/a.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/a.less'</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"string\">'aaaaaaa'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> &#123;a&#125;;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// module/b.js</span></div><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../style/b.scss'</span>);</div><div class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"string\">'bbbbbbb'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> &#123;b&#125;;</div></pre></td></tr></table></figure>\n<p>webpackbbbbbbbtree-shaking</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>classwebpack<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(<span class=\"string\">\"Zrlr\"</span>);</div><div class=\"line\"><span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);</div><div class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(<span class=\"keyword\">this</span>, b);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(b, [&#123;</div><div class=\"line\">    key: <span class=\"string\">'fn'</span>,</div><div class=\"line\">    value: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'bbbbbb'</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;]);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> b;</div><div class=\"line\">&#125;();</div></pre></td></tr></table></figure></p>\n<p>b<strong>webpack_require</strong>(Zrlr)prototype</p>\n<p>webpackvue/reactbabel-loader<a href=\"/babelrc-2017-12-23/\" target=\"_blank\">.babelrc</a><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>); <span class=\"comment\">//to access built-in plugins</span></div><div class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> CleanWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'clean-webpack-plugin'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>); <span class=\"comment\">//installed via npm</span></div><div class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> StyleExtHtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'style-ext-html-webpack-plugin'</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> PreloadWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'preload-webpack-plugin'</span>)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> config = &#123;</div><div class=\"line\">  entry: &#123;</div><div class=\"line\">    app: <span class=\"string\">'./src/app.js'</span>,</div><div class=\"line\">    vendor: [<span class=\"string\">'lodash'</span>]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  output: &#123;</div><div class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'cdist'</span>),</div><div class=\"line\">    filename: <span class=\"string\">'[name].[chunkhash].js'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  externals: &#123;</div><div class=\"line\">    <span class=\"string\">'jquery'</span>: <span class=\"string\">'jquery'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"comment\">// resolve: &#123;</span></div><div class=\"line\">  <span class=\"comment\">//   extensions: ['.js', '.json'],</span></div><div class=\"line\">  <span class=\"comment\">//   alias: &#123;</span></div><div class=\"line\">  <span class=\"comment\">//     'jquery': 'jquery/dist/jquery.slim.min.js',</span></div><div class=\"line\">  <span class=\"comment\">//     '@': resolve('src'),</span></div><div class=\"line\">  <span class=\"comment\">//   &#125;</span></div><div class=\"line\">  <span class=\"comment\">// &#125;,</span></div><div class=\"line\">  <span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">    rules: [&#123;</div><div class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</div><div class=\"line\">        use: <span class=\"string\">'babel-loader'</span>,</div><div class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span></div><div class=\"line\">      &#125;,</div><div class=\"line\">      &#123;</div><div class=\"line\">        test: <span class=\"regexp\">/\\.(less|scss|css)$/</span>,</div><div class=\"line\">        use: ExtractTextPlugin.extract(&#123;</div><div class=\"line\">          fallback: <span class=\"string\">\"style-loader\"</span>,</div><div class=\"line\">          use: [</div><div class=\"line\">            &#123;</div><div class=\"line\">              loader:<span class=\"string\">\"css-loader\"</span>,</div><div class=\"line\">              options:&#123;</div><div class=\"line\">                minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">              &#125;</div><div class=\"line\">            &#125;, </div><div class=\"line\">            &#123;</div><div class=\"line\">              loader:<span class=\"string\">\"less-loader\"</span>,</div><div class=\"line\">              options:&#123;</div><div class=\"line\">                minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">              &#125;</div><div class=\"line\">            &#125;, </div><div class=\"line\">            &#123;</div><div class=\"line\">              loader:<span class=\"string\">\"sass-loader\"</span>,</div><div class=\"line\">              options:&#123;</div><div class=\"line\">                minimize: <span class=\"literal\">true</span> <span class=\"comment\">//css</span></div><div class=\"line\">              &#125;</div><div class=\"line\">            &#125;]</div><div class=\"line\">        &#125;)</div><div class=\"line\">      &#125;</div><div class=\"line\">    ]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.ModuleConcatenationPlugin(),</div><div class=\"line\">    <span class=\"keyword\">new</span> CleanWebpackPlugin([<span class=\"string\">'cdist'</span>]),</div><div class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">      template: <span class=\"string\">'./src/index.template.html'</span>, <span class=\"comment\">//html</span></div><div class=\"line\">      filename: <span class=\"string\">'wq.html'</span>, <span class=\"comment\">//htmlpath</span></div><div class=\"line\">      favicon: <span class=\"string\">'./src/favicon.ico'</span>, <span class=\"comment\">//faviconwebpackhash</span></div><div class=\"line\">      inject: <span class=\"string\">'body'</span>, <span class=\"comment\">//jstrue/'head'/'body'/false</span></div><div class=\"line\">      <span class=\"comment\">// chunks: ['app', 'vendor'],</span></div><div class=\"line\">      <span class=\"comment\">//hash: true ,//hash</span></div><div class=\"line\">      minify: &#123; <span class=\"comment\">//HTML</span></div><div class=\"line\">        removeComments: <span class=\"literal\">true</span>, <span class=\"comment\">//HTML</span></div><div class=\"line\">        collapseWhitespace: <span class=\"literal\">false</span> <span class=\"comment\">//</span></div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> PreloadWebpackPlugin(&#123;</div><div class=\"line\">      rel: <span class=\"string\">'preload'</span>,</div><div class=\"line\">      <span class=\"keyword\">as</span>: <span class=\"string\">'script'</span>,</div><div class=\"line\">      include: <span class=\"string\">'all'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"comment\">// hash</span></div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.HashedModuleIdsPlugin(),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'vendor'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class=\"line\">      name: <span class=\"string\">'manifest'</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</div><div class=\"line\">      filename: <span class=\"string\">'common.[contenthash].css'</span>,</div><div class=\"line\">      allChunks: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class=\"line\">      beautify: <span class=\"literal\">false</span>,</div><div class=\"line\">      comments: <span class=\"literal\">false</span>,</div><div class=\"line\">      compress: &#123;</div><div class=\"line\">        warnings: <span class=\"literal\">false</span>,</div><div class=\"line\">        drop_console: <span class=\"literal\">true</span>,</div><div class=\"line\">        collapse_vars: <span class=\"literal\">true</span>,</div><div class=\"line\">        reduce_vars: <span class=\"literal\">true</span>,</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> StyleExtHtmlWebpackPlugin(&#123;</div><div class=\"line\">      minify: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">  ]</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = config;</div></pre></td></tr></table></figure></p>"}],"PostAsset":[{"_id":"source/_posts/2018-06-30-vue/1.jpg","slug":"1.jpg","post":"cjosd1vag000dfdldg3lwvo54","modified":0,"renderable":0},{"_id":"source/_posts/2018-06-30-vue/vue2.jpeg","slug":"vue2.jpeg","post":"cjosd1vag000dfdldg3lwvo54","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/2.jpeg","slug":"2.jpeg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-20-EventLoop/33.gif","slug":"33.gif","post":"cjosd1vav000mfdldngdeewnm","modified":0,"renderable":0},{"_id":"source/_posts/2018-4-8-CArray/05.jpeg","slug":"05.jpeg","post":"cjosd1vaz000tfdldom6klk3j","modified":0,"renderable":0},{"_id":"source/_posts/2018-4-8-CArray/04.jpeg","slug":"04.jpeg","post":"cjosd1vaz000tfdldom6klk3j","modified":0,"renderable":0},{"_id":"source/_posts/vue-ssr2/1.jpeg","slug":"1.jpeg","post":"cjosd1vbb001hfdldvzzo4ybk","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/02.jpeg","slug":"02.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-08/1.jpeg","slug":"1.jpeg","post":"cjosd1vbi001yfdld7lqqxdx1","modified":0,"renderable":0},{"_id":"source/_posts/2018-06-30-vue/4.jpeg","slug":"4.jpeg","post":"cjosd1vag000dfdldg3lwvo54","modified":0,"renderable":0},{"_id":"source/_posts/2018-06-30-vue/vue1.jpeg","slug":"vue1.jpeg","post":"cjosd1vag000dfdldg3lwvo54","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-22-canvasAPI/doc.png","slug":"doc.png","post":"cjosd1vaj000efdld0mj5aebp","modified":0,"renderable":0},{"_id":"source/_posts/ajax/111.png","slug":"111.png","post":"cjosd1vb30010fdldj9onsup6","modified":0,"renderable":0},{"_id":"source/_posts/queue-2018-2-23/queue.jpeg","slug":"queue.jpeg","post":"cjosd1vb70018fdldp41yrciq","modified":0,"renderable":0},{"_id":"source/_posts/vue-ssr3/11.jpeg","slug":"11.jpeg","post":"cjosd1vbc001jfdld34tv9718","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-09/1.jpeg","slug":"1.jpeg","post":"cjosd1vbj0020fdld7xyqqx3s","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-12/1.jpeg","slug":"1.jpeg","post":"cjosd1vbl0025fdldq5afzbds","modified":0,"renderable":0},{"_id":"source/_posts/2017-06-11/01.jpeg","slug":"01.jpeg","post":"cjosd1va60006fdldtx06s7o3","modified":0,"renderable":0},{"_id":"source/_posts/2017-06-11/02.jpeg","slug":"02.jpeg","post":"cjosd1va60006fdldtx06s7o3","modified":0,"renderable":0},{"_id":"source/_posts/babelrc-2017-12-23/1.jpeg","slug":"1.jpeg","post":"cjosd1vb40012fdldyyyeko90","modified":0,"renderable":0},{"_id":"source/_posts/babelrc-2017-12-23/2.jpeg","slug":"2.jpeg","post":"cjosd1vb40012fdldyyyeko90","modified":0,"renderable":0},{"_id":"source/_posts/stack-2018-2-22/stack-hw.jpeg","slug":"stack-hw.jpeg","post":"cjosd1vb8001bfdldo3l5pinu","modified":0,"renderable":0},{"_id":"source/_posts/stack-2018-2-22/stack.jpeg","slug":"stack.jpeg","post":"cjosd1vb8001bfdldo3l5pinu","modified":0,"renderable":0},{"_id":"source/_posts/vue-ssr/11.png","slug":"11.png","post":"cjosd1vb9001dfdldp71axd1x","modified":0,"renderable":0},{"_id":"source/_posts/vue-ssr/22.jpeg","slug":"22.jpeg","post":"cjosd1vb9001dfdldp71axd1x","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-02/01.jpeg","slug":"01.jpeg","post":"cjosd1vbe001ofdld771g0i19","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-02/02.jpeg","slug":"02.jpeg","post":"cjosd1vbe001ofdld771g0i19","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-10/1.jpeg","slug":"1.jpeg","post":"cjosd1vbk0023fdlddh0n5e5l","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-10/2.jpeg","slug":"2.jpeg","post":"cjosd1vbk0023fdlddh0n5e5l","modified":0,"renderable":0},{"_id":"source/_posts/2017-05-07/1.png","slug":"1.png","post":"cjosd1vaa0009fdldtmgt8vrf","modified":0,"renderable":0},{"_id":"source/_posts/2017-05-07/2.png","slug":"2.png","post":"cjosd1vaa0009fdldtmgt8vrf","modified":0,"renderable":0},{"_id":"source/_posts/2017-05-07/3.png","slug":"3.png","post":"cjosd1vaa0009fdldtmgt8vrf","modified":0,"renderable":0},{"_id":"source/_posts/LList-2018-2-24/llist1.jpeg","slug":"llist1.jpeg","post":"cjosd1vb1000xfdldfzmgsz0w","modified":0,"renderable":0},{"_id":"source/_posts/LList-2018-2-24/llist2.jpeg","slug":"llist2.jpeg","post":"cjosd1vb1000xfdldfzmgsz0w","modified":0,"renderable":0},{"_id":"source/_posts/LList-2018-2-24/llist3.jpeg","slug":"llist3.jpeg","post":"cjosd1vb1000xfdldfzmgsz0w","modified":0,"renderable":0},{"_id":"source/_posts/vue-ssr2/2.jpeg","slug":"2.jpeg","post":"cjosd1vbb001hfdldvzzo4ybk","modified":0,"renderable":0},{"_id":"source/_posts/vue-ssr2/3.jpeg","slug":"3.jpeg","post":"cjosd1vbb001hfdldvzzo4ybk","modified":0,"renderable":0},{"_id":"source/_posts/vue-ssr2/4.jpeg","slug":"4.jpeg","post":"cjosd1vbb001hfdldvzzo4ybk","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-04/01.jpeg","slug":"01.jpeg","post":"cjosd1vbg001tfdld0bmo5hc0","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-04/02.jpeg","slug":"02.jpeg","post":"cjosd1vbg001tfdld0bmo5hc0","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-04/03.jpeg","slug":"03.jpeg","post":"cjosd1vbg001tfdld0bmo5hc0","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-04/04.jpeg","slug":"04.jpeg","post":"cjosd1vbg001tfdld0bmo5hc0","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-13/1.jpeg","slug":"1.jpeg","post":"cjosd1vbm002afdldq43vm6w4","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-13/2.jpeg","slug":"2.jpeg","post":"cjosd1vbm002afdldq43vm6w4","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-13/3.jpeg","slug":"3.jpeg","post":"cjosd1vbm002afdldq43vm6w4","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-13/4.jpeg","slug":"4.jpeg","post":"cjosd1vbm002afdldq43vm6w4","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-14/01.jpeg","slug":"01.jpeg","post":"cjosd1vbo002dfdldyds2g2lv","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-14/2.jpeg","slug":"2.jpeg","post":"cjosd1vbo002dfdldyds2g2lv","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-14/3.jpeg","slug":"3.jpeg","post":"cjosd1vbo002dfdldyds2g2lv","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-14/4.jpeg","slug":"4.jpeg","post":"cjosd1vbo002dfdldyds2g2lv","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-15/1.jpeg","slug":"1.jpeg","post":"cjosd1vbo002ffdldxz4mco0l","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-15/2.jpeg","slug":"2.jpeg","post":"cjosd1vbo002ffdldxz4mco0l","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-15/3.jpeg","slug":"3.jpeg","post":"cjosd1vbo002ffdldxz4mco0l","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-15/4.jpeg","slug":"4.jpeg","post":"cjosd1vbo002ffdldxz4mco0l","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-16/1.jpeg","slug":"1.jpeg","post":"cjosd1vbr002kfdld6k6ko91s","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-16/2.jpeg","slug":"2.jpeg","post":"cjosd1vbr002kfdld6k6ko91s","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-16/3.jpeg","slug":"3.jpeg","post":"cjosd1vbr002kfdld6k6ko91s","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-16/4.jpeg","slug":"4.jpeg","post":"cjosd1vbr002kfdld6k6ko91s","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-18/1.jpeg","slug":"1.jpeg","post":"cjosd1vbt002nfdld2gz3jxdm","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-18/2.jpeg","slug":"2.jpeg","post":"cjosd1vbt002nfdld2gz3jxdm","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-18/3.jpeg","slug":"3.jpeg","post":"cjosd1vbt002nfdld2gz3jxdm","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-18/4.jpeg","slug":"4.jpeg","post":"cjosd1vbt002nfdld2gz3jxdm","modified":0,"renderable":0},{"_id":"source/_posts/2018-4-8-CArray/01.jpeg","slug":"01.jpeg","post":"cjosd1vaz000tfdldom6klk3j","modified":0,"renderable":0},{"_id":"source/_posts/2018-4-8-CArray/02.jpeg","slug":"02.jpeg","post":"cjosd1vaz000tfdldom6klk3j","modified":0,"renderable":0},{"_id":"source/_posts/2018-4-8-CArray/03.jpeg","slug":"03.jpeg","post":"cjosd1vaz000tfdldom6klk3j","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-03/01.jpeg","slug":"01.jpeg","post":"cjosd1vbf001rfdldtswqgtwf","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-03/02.jpeg","slug":"02.jpeg","post":"cjosd1vbf001rfdldtswqgtwf","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-03/03.jpeg","slug":"03.jpeg","post":"cjosd1vbf001rfdldtswqgtwf","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-03/04.jpeg","slug":"04.jpeg","post":"cjosd1vbf001rfdldtswqgtwf","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-03/05.jpeg","slug":"05.jpeg","post":"cjosd1vbf001rfdldtswqgtwf","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-06/1.jpeg","slug":"1.jpeg","post":"cjosd1vbh001wfdldvux0ft4g","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-06/2.jpeg","slug":"2.jpeg","post":"cjosd1vbh001wfdldvux0ft4g","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-06/3.jpeg","slug":"3.jpeg","post":"cjosd1vbh001wfdldvux0ft4g","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-06/4.jpeg","slug":"4.jpeg","post":"cjosd1vbh001wfdldvux0ft4g","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-06/5.jpeg","slug":"5.jpeg","post":"cjosd1vbh001wfdldvux0ft4g","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-19/1.jpeg","slug":"1.jpeg","post":"cjosd1vbu002pfdldfczmvs1h","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-19/2.jpeg","slug":"2.jpeg","post":"cjosd1vbu002pfdldfczmvs1h","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-19/3.jpeg","slug":"3.jpeg","post":"cjosd1vbu002pfdldfczmvs1h","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-19/4.jpeg","slug":"4.jpeg","post":"cjosd1vbu002pfdldfczmvs1h","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-19/5.jpeg","slug":"5.jpeg","post":"cjosd1vbu002pfdldfczmvs1h","modified":0,"renderable":0},{"_id":"source/_posts/2017-06-12/01.jpeg","slug":"01.jpeg","post":"cjosd1vap000ifdldf16u32iu","modified":0,"renderable":0},{"_id":"source/_posts/2017-06-12/02.jpeg","slug":"02.jpeg","post":"cjosd1vap000ifdldf16u32iu","modified":0,"renderable":0},{"_id":"source/_posts/2017-06-12/03.jpeg","slug":"03.jpeg","post":"cjosd1vap000ifdldf16u32iu","modified":0,"renderable":0},{"_id":"source/_posts/2017-06-12/04.jpeg","slug":"04.jpeg","post":"cjosd1vap000ifdldf16u32iu","modified":0,"renderable":0},{"_id":"source/_posts/2017-06-12/05.jpeg","slug":"05.jpeg","post":"cjosd1vap000ifdldf16u32iu","modified":0,"renderable":0},{"_id":"source/_posts/2017-06-12/06.jpeg","slug":"06.jpeg","post":"cjosd1vap000ifdldf16u32iu","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-11-BST/bst1.jpeg","slug":"bst1.jpeg","post":"cjosd1vax000ofdldyitkfuh6","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-11-BST/bst2.jpeg","slug":"bst2.jpeg","post":"cjosd1vax000ofdldyitkfuh6","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-11-BST/bst3.jpeg","slug":"bst3.jpeg","post":"cjosd1vax000ofdldyitkfuh6","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-11-BST/bst4.jpeg","slug":"bst4.jpeg","post":"cjosd1vax000ofdldyitkfuh6","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-11-BST/bst5.jpeg","slug":"bst5.jpeg","post":"cjosd1vax000ofdldyitkfuh6","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-11-BST/bst6.jpeg","slug":"bst6.jpeg","post":"cjosd1vax000ofdldyitkfuh6","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-08/2.jpeg","slug":"2.jpeg","post":"cjosd1vbi001yfdld7lqqxdx1","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-08/3.jpeg","slug":"3.jpeg","post":"cjosd1vbi001yfdld7lqqxdx1","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-08/5.jpeg","slug":"5.jpeg","post":"cjosd1vbi001yfdld7lqqxdx1","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-08/6.jpeg","slug":"6.jpeg","post":"cjosd1vbi001yfdld7lqqxdx1","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-08/7.jpeg","slug":"7.jpeg","post":"cjosd1vbi001yfdld7lqqxdx1","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-17/1.jpeg","slug":"1.jpeg","post":"cjosd1vbq002ifdldtuzh65rt","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-17/2.jpeg","slug":"2.jpeg","post":"cjosd1vbq002ifdldtuzh65rt","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-17/3.jpeg","slug":"3.jpeg","post":"cjosd1vbq002ifdldtuzh65rt","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-17/4.jpeg","slug":"4.jpeg","post":"cjosd1vbq002ifdldtuzh65rt","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-17/5.jpeg","slug":"5.jpeg","post":"cjosd1vbq002ifdldtuzh65rt","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-17/6.jpeg","slug":"6.jpeg","post":"cjosd1vbq002ifdldtuzh65rt","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-20-EventLoop/1.png","slug":"1.png","post":"cjosd1vav000mfdldngdeewnm","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-20-EventLoop/11.png","slug":"11.png","post":"cjosd1vav000mfdldngdeewnm","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-20-EventLoop/2.png","slug":"2.png","post":"cjosd1vav000mfdldngdeewnm","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-20-EventLoop/22.jpg","slug":"22.jpg","post":"cjosd1vav000mfdldngdeewnm","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-20-EventLoop/guge.jpg","slug":"guge.jpg","post":"cjosd1vav000mfdldngdeewnm","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-20-EventLoop/huohu.jpg","slug":"huohu.jpg","post":"cjosd1vav000mfdldngdeewnm","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-11/01.jpeg","slug":"01.jpeg","post":"cjosd1vbl0028fdldtfw3rc6w","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-11/2.jpeg","slug":"2.jpeg","post":"cjosd1vbl0028fdldtfw3rc6w","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-11/3.jpeg","slug":"3.jpeg","post":"cjosd1vbl0028fdldtfw3rc6w","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-11/4.jpeg","slug":"4.jpeg","post":"cjosd1vbl0028fdldtfw3rc6w","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-11/5.jpeg","slug":"5.jpeg","post":"cjosd1vbl0028fdldtfw3rc6w","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-11/6.jpeg","slug":"6.jpeg","post":"cjosd1vbl0028fdldtfw3rc6w","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-11/7.jpeg","slug":"7.jpeg","post":"cjosd1vbl0028fdldtfw3rc6w","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-11/8.jpeg","slug":"8.jpeg","post":"cjosd1vbl0028fdldtfw3rc6w","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-11/9.jpeg","slug":"9.jpeg","post":"cjosd1vbl0028fdldtfw3rc6w","modified":0,"renderable":0},{"_id":"source/_posts/webpack-2017-12-30/5.jpeg","slug":"5.jpeg","post":"cjosd1vbw002sfdldfwks8jbq","modified":0,"renderable":0},{"_id":"source/_posts/webpack-2017-12-30/6.jpeg","slug":"6.jpeg","post":"cjosd1vbw002sfdldfwks8jbq","modified":0,"renderable":0},{"_id":"source/_posts/webpack-2017-12-30/7.jpeg","slug":"7.jpeg","post":"cjosd1vbw002sfdldfwks8jbq","modified":0,"renderable":0},{"_id":"source/_posts/webpack-2017-12-30/css-1.jpeg","slug":"css-1.jpeg","post":"cjosd1vbw002sfdldfwks8jbq","modified":0,"renderable":0},{"_id":"source/_posts/webpack-2017-12-30/css-2.jpeg","slug":"css-2.jpeg","post":"cjosd1vbw002sfdldfwks8jbq","modified":0,"renderable":0},{"_id":"source/_posts/webpack-2017-12-30/js-1.jpeg","slug":"js-1.jpeg","post":"cjosd1vbw002sfdldfwks8jbq","modified":0,"renderable":0},{"_id":"source/_posts/webpack-2017-12-30/js-2.jpeg","slug":"js-2.jpeg","post":"cjosd1vbw002sfdldfwks8jbq","modified":0,"renderable":0},{"_id":"source/_posts/webpack-2017-12-30/js-3.jpeg","slug":"js-3.jpeg","post":"cjosd1vbw002sfdldfwks8jbq","modified":0,"renderable":0},{"_id":"source/_posts/webpack-2017-12-30/js-4.jpeg","slug":"js-4.jpeg","post":"cjosd1vbw002sfdldfwks8jbq","modified":0,"renderable":0},{"_id":"source/_posts/2018-06-30-vue/2.jpg","slug":"2.jpg","post":"cjosd1vag000dfdldg3lwvo54","modified":0,"renderable":0},{"_id":"source/_posts/2018-06-30-vue/3.png","slug":"3.png","post":"cjosd1vag000dfdldg3lwvo54","modified":0,"renderable":0},{"_id":"source/_posts/2018-06-30-vue/5.jpeg","slug":"5.jpeg","post":"cjosd1vag000dfdldg3lwvo54","modified":0,"renderable":0},{"_id":"source/_posts/2018-06-30-vue/6.jpeg","slug":"6.jpeg","post":"cjosd1vag000dfdldg3lwvo54","modified":0,"renderable":0},{"_id":"source/_posts/2018-06-30-vue/obj.jpeg","slug":"obj.jpeg","post":"cjosd1vag000dfdldg3lwvo54","modified":0,"renderable":0},{"_id":"source/_posts/2018-06-30-vue/timing-overview.png","slug":"timing-overview.png","post":"cjosd1vag000dfdldg3lwvo54","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-18-Graph/graph1.jpeg","slug":"graph1.jpeg","post":"cjosd1vay000qfdldjyyohq9a","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-18-Graph/graph10.jpeg","slug":"graph10.jpeg","post":"cjosd1vay000qfdldjyyohq9a","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-18-Graph/graph2.jpeg","slug":"graph2.jpeg","post":"cjosd1vay000qfdldjyyohq9a","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-18-Graph/graph3.jpeg","slug":"graph3.jpeg","post":"cjosd1vay000qfdldjyyohq9a","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-18-Graph/graph4.jpeg","slug":"graph4.jpeg","post":"cjosd1vay000qfdldjyyohq9a","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-18-Graph/graph5.jpeg","slug":"graph5.jpeg","post":"cjosd1vay000qfdldjyyohq9a","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-18-Graph/graph6.jpeg","slug":"graph6.jpeg","post":"cjosd1vay000qfdldjyyohq9a","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-18-Graph/graph7.jpeg","slug":"graph7.jpeg","post":"cjosd1vay000qfdldjyyohq9a","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-18-Graph/graph8.jpeg","slug":"graph8.jpeg","post":"cjosd1vay000qfdldjyyohq9a","modified":0,"renderable":0},{"_id":"source/_posts/2018-3-18-Graph/graph9.jpeg","slug":"graph9.jpeg","post":"cjosd1vay000qfdldjyyohq9a","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/1.jpg","slug":"1.jpg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/12.jpeg","slug":"12.jpeg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/21.jpeg","slug":"21.jpeg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/3.jpeg","slug":"3.jpeg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/31.jpeg","slug":"31.jpeg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/4.jpeg","slug":"4.jpeg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/41.jpeg","slug":"41.jpeg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/5.jpeg","slug":"5.jpeg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/6.jpeg","slug":"6.jpeg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-14-wpk/7.jpeg","slug":"7.jpeg","post":"cjosd1vam000gfdldnonhg82y","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/1.gif","slug":"1.gif","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/1.png","slug":"1.png","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/2.gif","slug":"2.gif","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/2.png","slug":"2.png","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/Cache-Control.png","slug":"Cache-Control.png","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/http.png","slug":"http.png","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/ky.png","slug":"ky.png","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/ky2.png","slug":"ky2.png","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/page_3.png","slug":"page_3.png","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/page_4.png","slug":"page_4.png","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/2018-09-23-HTTP/page_5.png","slug":"page_5.png","post":"cjosd1vas000lfdldcl7ot71o","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/01.jpeg","slug":"01.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/03.jpeg","slug":"03.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/04.jpeg","slug":"04.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/05.jpeg","slug":"05.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/06.jpeg","slug":"06.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/07.jpeg","slug":"07.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/08.jpeg","slug":"08.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/09.jpeg","slug":"09.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/10.jpeg","slug":"10.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/11.jpeg","slug":"11.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/12.jpeg","slug":"12.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/13.jpeg","slug":"13.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/14.jpeg","slug":"14.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/webgl-2017-07-01/15.jpeg","slug":"15.jpeg","post":"cjosd1vbd001mfdlddi3mdktr","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-20-EventLoop/node1.png","slug":"node1.png","post":"cjosd1vav000mfdldngdeewnm","modified":0,"renderable":0}],"PostCategory":[{"post_id":"cjosd1vb30010fdldj9onsup6","category_id":"cjosd1vb50015fdldivsaw2h8","_id":"cjosd1vba001gfdldv5xpvbaw"}],"PostTag":[{"post_id":"cjosd1v9x0001fdld6n90vhoc","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1va90008fdldz36ubkjr"},{"post_id":"cjosd1vaa0009fdldtmgt8vrf","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vag000cfdldrog553af"},{"post_id":"cjosd1va00002fdldtvkuz41d","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1van000hfdldnvam6plc"},{"post_id":"cjosd1va00002fdldtvkuz41d","tag_id":"cjosd1vad000bfdlduau4xv20","_id":"cjosd1vap000jfdldsrt0ulhq"},{"post_id":"cjosd1va30004fdlde60yyijk","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vay000pfdldklgqmj6x"},{"post_id":"cjosd1va30004fdlde60yyijk","tag_id":"cjosd1vaq000kfdldud81yel0","_id":"cjosd1vaz000rfdld7ftk90il"},{"post_id":"cjosd1vav000mfdldngdeewnm","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vb0000ufdldto28bfg6"},{"post_id":"cjosd1vav000mfdldngdeewnm","tag_id":"cjosd1vaq000kfdldud81yel0","_id":"cjosd1vb1000wfdldvb7x4dhe"},{"post_id":"cjosd1va40005fdldpwz8rowa","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vb2000zfdld6k8dmnv7"},{"post_id":"cjosd1va40005fdldpwz8rowa","tag_id":"cjosd1vax000nfdldmzu7zka9","_id":"cjosd1vb30011fdldfpyf15aa"},{"post_id":"cjosd1va60006fdldtx06s7o3","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vb50014fdld2pg4puup"},{"post_id":"cjosd1va60006fdldtx06s7o3","tag_id":"cjosd1vaz000sfdldql8r2ba4","_id":"cjosd1vb60017fdld9i3315eg"},{"post_id":"cjosd1vac000afdldid278cos","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vb8001afdldf3h41o7m"},{"post_id":"cjosd1vac000afdldid278cos","tag_id":"cjosd1vaz000sfdldql8r2ba4","_id":"cjosd1vb9001cfdldncxbbuka"},{"post_id":"cjosd1vag000dfdldg3lwvo54","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vba001efdldys5qhn76"},{"post_id":"cjosd1vag000dfdldg3lwvo54","tag_id":"cjosd1vb40013fdld6a7dezt1","_id":"cjosd1vbb001ifdldzqzdl2bh"},{"post_id":"cjosd1vaj000efdld0mj5aebp","tag_id":"cjosd1vb70019fdldpthjh36v","_id":"cjosd1vbc001kfdlde7qgki4m"},{"post_id":"cjosd1vaj000efdld0mj5aebp","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vbd001nfdldtentmsfo"},{"post_id":"cjosd1vb9001dfdldp71axd1x","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vbe001pfdldita31vj7"},{"post_id":"cjosd1vb9001dfdldp71axd1x","tag_id":"cjosd1vb40013fdld6a7dezt1","_id":"cjosd1vbg001sfdld7ryb5gbo"},{"post_id":"cjosd1vbb001hfdldvzzo4ybk","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vbg001ufdldh82x9jbw"},{"post_id":"cjosd1vbb001hfdldvzzo4ybk","tag_id":"cjosd1vb40013fdld6a7dezt1","_id":"cjosd1vbi001xfdldw92hzfc5"},{"post_id":"cjosd1vbc001jfdld34tv9718","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vbi001zfdldj5m6b3qo"},{"post_id":"cjosd1vbc001jfdld34tv9718","tag_id":"cjosd1vb40013fdld6a7dezt1","_id":"cjosd1vbj0022fdldkq4iot6j"},{"post_id":"cjosd1vam000gfdldnonhg82y","tag_id":"cjosd1vba001ffdldyh9p09s0","_id":"cjosd1vbk0024fdld66u61m17"},{"post_id":"cjosd1vam000gfdldnonhg82y","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vbl0027fdld3pam6gbw"},{"post_id":"cjosd1vam000gfdldnonhg82y","tag_id":"cjosd1vb40013fdld6a7dezt1","_id":"cjosd1vbm0029fdldz1bpc3fp"},{"post_id":"cjosd1vap000ifdldf16u32iu","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vbn002bfdldibo6fdmu"},{"post_id":"cjosd1vap000ifdldf16u32iu","tag_id":"cjosd1vaz000sfdldql8r2ba4","_id":"cjosd1vbo002efdldbougr0xe"},{"post_id":"cjosd1vas000lfdldcl7ot71o","tag_id":"cjosd1vbh001vfdldzki4wb6q","_id":"cjosd1vbp002gfdlda6qn2l8a"},{"post_id":"cjosd1vas000lfdldcl7ot71o","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vbq002jfdldmwp52g8m"},{"post_id":"cjosd1vax000ofdldyitkfuh6","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vbs002lfdldx48qn90r"},{"post_id":"cjosd1vax000ofdldyitkfuh6","tag_id":"cjosd1vbj0021fdld03f01tta","_id":"cjosd1vbu002ofdld90unedpg"},{"post_id":"cjosd1vax000ofdldyitkfuh6","tag_id":"cjosd1vbl0026fdldud7d3isd","_id":"cjosd1vbv002qfdldu4xv2je0"},{"post_id":"cjosd1vay000qfdldjyyohq9a","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vbw002tfdldvxmlcdph"},{"post_id":"cjosd1vay000qfdldjyyohq9a","tag_id":"cjosd1vbj0021fdld03f01tta","_id":"cjosd1vbx002ufdlda4kjo41v"},{"post_id":"cjosd1vay000qfdldjyyohq9a","tag_id":"cjosd1vbl0026fdldud7d3isd","_id":"cjosd1vby002wfdldyq2oudaq"},{"post_id":"cjosd1vbw002sfdldfwks8jbq","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vby002xfdldcwhb2ow9"},{"post_id":"cjosd1vbw002sfdldfwks8jbq","tag_id":"cjosd1vba001ffdldyh9p09s0","_id":"cjosd1vby002zfdld1yq7aprz"},{"post_id":"cjosd1vaz000tfdldom6klk3j","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vby0030fdldxevibr6x"},{"post_id":"cjosd1vaz000tfdldom6klk3j","tag_id":"cjosd1vbj0021fdld03f01tta","_id":"cjosd1vbz0032fdldfcjr48en"},{"post_id":"cjosd1vaz000tfdldom6klk3j","tag_id":"cjosd1vbl0026fdldud7d3isd","_id":"cjosd1vbz0033fdldpbcx9h90"},{"post_id":"cjosd1vb0000vfdldviqayrg2","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vbz0035fdlds9m3cs80"},{"post_id":"cjosd1vb0000vfdldviqayrg2","tag_id":"cjosd1vbj0021fdld03f01tta","_id":"cjosd1vbz0036fdldioaxmmzq"},{"post_id":"cjosd1vb0000vfdldviqayrg2","tag_id":"cjosd1vbl0026fdldud7d3isd","_id":"cjosd1vc00038fdldhdcx20x9"},{"post_id":"cjosd1vb1000xfdldfzmgsz0w","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc00039fdldjx3iq9gg"},{"post_id":"cjosd1vb1000xfdldfzmgsz0w","tag_id":"cjosd1vbj0021fdld03f01tta","_id":"cjosd1vc1003bfdld1rxus9b9"},{"post_id":"cjosd1vb1000xfdldfzmgsz0w","tag_id":"cjosd1vbl0026fdldud7d3isd","_id":"cjosd1vc1003cfdld874w4p9d"},{"post_id":"cjosd1vb30010fdldj9onsup6","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc1003efdld37hsp53a"},{"post_id":"cjosd1vb30010fdldj9onsup6","tag_id":"cjosd1vax000nfdldmzu7zka9","_id":"cjosd1vc1003ffdld5nxhidlu"},{"post_id":"cjosd1vb30010fdldj9onsup6","tag_id":"cjosd1vbz0037fdldxrjqnb8q","_id":"cjosd1vc2003hfdldqlu19rz2"},{"post_id":"cjosd1vb40012fdldyyyeko90","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc2003ifdldqllkghu3"},{"post_id":"cjosd1vb40012fdldyyyeko90","tag_id":"cjosd1vba001ffdldyh9p09s0","_id":"cjosd1vc2003kfdldqqbn63g0"},{"post_id":"cjosd1vb40012fdldyyyeko90","tag_id":"cjosd1vc1003dfdld821dufcm","_id":"cjosd1vc3003lfdldano923p3"},{"post_id":"cjosd1vb50016fdldwi4norye","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc3003nfdldo8rx7k6d"},{"post_id":"cjosd1vb50016fdldwi4norye","tag_id":"cjosd1vbj0021fdld03f01tta","_id":"cjosd1vc3003ofdldhjbezvot"},{"post_id":"cjosd1vb50016fdldwi4norye","tag_id":"cjosd1vbl0026fdldud7d3isd","_id":"cjosd1vc4003qfdld2zw9ixcr"},{"post_id":"cjosd1vb70018fdldp41yrciq","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc4003sfdld51jkvqh0"},{"post_id":"cjosd1vb70018fdldp41yrciq","tag_id":"cjosd1vbj0021fdld03f01tta","_id":"cjosd1vc4003tfdldpj091tec"},{"post_id":"cjosd1vb70018fdldp41yrciq","tag_id":"cjosd1vbl0026fdldud7d3isd","_id":"cjosd1vc5003vfdldqo67guxk"},{"post_id":"cjosd1vb8001bfdldo3l5pinu","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc5003xfdldufwa2w5x"},{"post_id":"cjosd1vb8001bfdldo3l5pinu","tag_id":"cjosd1vbj0021fdld03f01tta","_id":"cjosd1vc5003yfdldyr8j7pb1"},{"post_id":"cjosd1vb8001bfdldo3l5pinu","tag_id":"cjosd1vbl0026fdldud7d3isd","_id":"cjosd1vc70040fdldqmi6qou5"},{"post_id":"cjosd1vbd001mfdlddi3mdktr","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc70041fdldfshobb07"},{"post_id":"cjosd1vbd001mfdlddi3mdktr","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vc70043fdldesqni44f"},{"post_id":"cjosd1vbe001ofdld771g0i19","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc80044fdldflj3l1l9"},{"post_id":"cjosd1vbe001ofdld771g0i19","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vc80046fdldyu608uq6"},{"post_id":"cjosd1vbf001rfdldtswqgtwf","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc80047fdld8r11u47u"},{"post_id":"cjosd1vbf001rfdldtswqgtwf","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vc90049fdlddsbet4tl"},{"post_id":"cjosd1vbg001tfdld0bmo5hc0","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc9004afdldyq2imk3o"},{"post_id":"cjosd1vbg001tfdld0bmo5hc0","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vc9004cfdldjr5vjiyy"},{"post_id":"cjosd1vbh001wfdldvux0ft4g","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vc9004dfdldkjh3lb3v"},{"post_id":"cjosd1vbh001wfdldvux0ft4g","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vca004ffdldvmn57m7a"},{"post_id":"cjosd1vbi001yfdld7lqqxdx1","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vca004gfdldqa1pdcty"},{"post_id":"cjosd1vbi001yfdld7lqqxdx1","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vcb004ifdldnob1imdq"},{"post_id":"cjosd1vbj0020fdld7xyqqx3s","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vcb004jfdld0yqtcuck"},{"post_id":"cjosd1vbj0020fdld7xyqqx3s","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vcb004lfdldd526ds4j"},{"post_id":"cjosd1vbk0023fdlddh0n5e5l","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vcc004mfdldbvedencg"},{"post_id":"cjosd1vbk0023fdlddh0n5e5l","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vcc004ofdldfsas7cb4"},{"post_id":"cjosd1vbl0025fdldq5afzbds","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vcc004pfdldz0zevzw2"},{"post_id":"cjosd1vbl0025fdldq5afzbds","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vcd004rfdldzl38qst9"},{"post_id":"cjosd1vbl0028fdldtfw3rc6w","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vcd004sfdldtkllhf2u"},{"post_id":"cjosd1vbl0028fdldtfw3rc6w","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vce004ufdld50euona8"},{"post_id":"cjosd1vbm002afdldq43vm6w4","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vce004vfdldlfd37iol"},{"post_id":"cjosd1vbm002afdldq43vm6w4","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vce004xfdldzlamz843"},{"post_id":"cjosd1vbo002dfdldyds2g2lv","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vcf004zfdldgtaio2wz"},{"post_id":"cjosd1vbo002dfdldyds2g2lv","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vcf0050fdldy6att4pi"},{"post_id":"cjosd1vbo002dfdldyds2g2lv","tag_id":"cjosd1vce004wfdldfxa2287n","_id":"cjosd1vcf0052fdldhxpkh1lo"},{"post_id":"cjosd1vbo002ffdldxz4mco0l","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vcg0054fdld0tx8m5lh"},{"post_id":"cjosd1vbo002ffdldxz4mco0l","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vcg0055fdldqdxv3dd2"},{"post_id":"cjosd1vbo002ffdldxz4mco0l","tag_id":"cjosd1vce004wfdldfxa2287n","_id":"cjosd1vcg0057fdldctqiwep0"},{"post_id":"cjosd1vbq002ifdldtuzh65rt","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vch0059fdld9w9gpxkt"},{"post_id":"cjosd1vbq002ifdldtuzh65rt","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vch005afdldidxpg1yr"},{"post_id":"cjosd1vbq002ifdldtuzh65rt","tag_id":"cjosd1vce004wfdldfxa2287n","_id":"cjosd1vci005cfdldzu1lgm70"},{"post_id":"cjosd1vbr002kfdld6k6ko91s","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vci005efdld4qx7xebw"},{"post_id":"cjosd1vbr002kfdld6k6ko91s","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vci005ffdld4co38atb"},{"post_id":"cjosd1vbr002kfdld6k6ko91s","tag_id":"cjosd1vce004wfdldfxa2287n","_id":"cjosd1vcj005hfdldxsqiubim"},{"post_id":"cjosd1vbt002nfdld2gz3jxdm","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vcj005jfdldm2x21136"},{"post_id":"cjosd1vbt002nfdld2gz3jxdm","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vck005kfdldghe99lwq"},{"post_id":"cjosd1vbt002nfdld2gz3jxdm","tag_id":"cjosd1vce004wfdldfxa2287n","_id":"cjosd1vck005mfdldogrr119d"},{"post_id":"cjosd1vbu002pfdldfczmvs1h","tag_id":"cjosd1va10003fdld1im3d3ys","_id":"cjosd1vck005nfdld5bluyf9e"},{"post_id":"cjosd1vbu002pfdldfczmvs1h","tag_id":"cjosd1vc5003wfdlda6876lh9","_id":"cjosd1vcl005ofdldjoutvrxz"},{"post_id":"cjosd1vbu002pfdldfczmvs1h","tag_id":"cjosd1vce004wfdldfxa2287n","_id":"cjosd1vcl005pfdlde2spsl5c"}],"Tag":[{"name":"javascript","_id":"cjosd1va10003fdld1im3d3ys"},{"name":"es6","_id":"cjosd1vad000bfdlduau4xv20"},{"name":"node","_id":"cjosd1vaq000kfdldud81yel0"},{"name":"ajax","_id":"cjosd1vax000nfdldmzu7zka9"},{"name":"react","_id":"cjosd1vaz000sfdldql8r2ba4"},{"name":"vue","_id":"cjosd1vb40013fdld6a7dezt1"},{"name":"canvas","_id":"cjosd1vb70019fdldpthjh36v"},{"name":"webpack","_id":"cjosd1vba001ffdldyh9p09s0"},{"name":"HTTP","_id":"cjosd1vbh001vfdldzki4wb6q"},{"name":"ECMAScript 6","_id":"cjosd1vbj0021fdld03f01tta"},{"name":"algorithm","_id":"cjosd1vbl0026fdldud7d3isd"},{"name":"302","_id":"cjosd1vbz0037fdldxrjqnb8q"},{"name":"babel","_id":"cjosd1vc1003dfdld821dufcm"},{"name":"webgl","_id":"cjosd1vc5003wfdlda6876lh9"},{"name":"three.js","_id":"cjosd1vce004wfdldfxa2287n"}]}}